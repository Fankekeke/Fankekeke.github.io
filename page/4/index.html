<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>悲伤的橘子树</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="不相信自己的人没有努力的价值。   -- 迈特凯">
<meta name="keywords" content="悲伤的橘子树">
<meta property="og:type" content="website">
<meta property="og:title" content="悲伤的橘子树">
<meta property="og:url" content="http://fankekeke.club/page/4/index.html">
<meta property="og:site_name" content="悲伤的橘子树">
<meta property="og:description" content="不相信自己的人没有努力的价值。   -- 迈特凯">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="悲伤的橘子树">
<meta name="twitter:description" content="不相信自己的人没有努力的价值。   -- 迈特凯">
  
    <link rel="alternate" href="/atom.xml" title="悲伤的橘子树" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">悲伤的橘子树</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://fankekeke.club"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Java面试题" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/14/Java面试题/" class="article-date">
  <time datetime="2018-12-14T15:11:58.000Z" itemprop="datePublished">2018-12-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/面试题/">面试题</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/14/Java面试题/">Java面试题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、多线程的实现方法分别是什么?同步的实现方法分别是什么?<br>答：多线程有两种实现方法，分别是继承Thread类与实现Runnable。接口同步的实现方面有两种，分别是synchronized、wait与notify。<br>2、public,private,protected的作用域，以及不写时的区别?<br>public的作用域：当前类，同包，子孙类，其他protected的作用域：当前类，同包，子孙类default的作用域：当前类，同包private的作用域：当前类不写时默认为default<br>3、外连接分为内连接、左连接、右连接<br>内连接是根据某个条件连接两个表共有的数据；左连接是根据某个条件以及左边的表连接数据，右边的表没数据的话则填null；右连接是根据某个条件以及右边的表连接数据，左边的表没数据的话则填null；<br>4、数据库范式<br>第一范式是最基本的范式。如果数据库表中的所有字段值都是不可分解的原子值。第二范式确保每个表值描述一件事第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。<br>5、什么是JavaScript？<br>JavaScript是客户端和服务器端脚本语言，可以插入到HTML页面中，并且是目前较热门的Web开   发语言。同时，JavaScript也是面向对象编程语言。<br>6、索引的目的是什么？<br>1.快速访问数据表中的特定信息，提高检索速度2.创建唯一性索引，保证数据库表中每一行数据的唯一性。3.加速表和表之间的连接4.使用分组和排序子句进行数据检索时，可以显著减少查询中分组和排序的时间<br>7、数据库中的事务是什么?<br>事务（transaction）是作为一个单元的一组有序的数据库操作。如果组中的所有操作都成功，则认为事务成功，即使只有一个操作失败，事务也不成功。如果所有操作完成，事务则提交，其修改将作用于所有其他数据库进程。如果一个操作失败，则事务将回滚，该事务所有操作的影响都将取消。​ACID 四大特性,原子性、隔离性、一致性、持久性。<br>8、Collection 和 Collections 的区别。<br>Collection 是集合类的上级接口，继承与他的接口主要有Set 和List.Collections 是针对集合类的一个帮助类，他提供一系列静态方法实现对各种集合的搜索、排序、线程安全化等操作。<br>9、什么是值传递和引用传递？<br>对象被值传递，意味着传递了对象的一个副本。因此，就算是改变了对象副本，也不会影响源对象的值。对象被引用传递，意味着传递的并不是实际的对象，而是对象的引用。因此，外部对引用对象所做的改变会反映到所有的对象上。<br>10、null和undefind的区别<br>null是表示一个空的对象，转为数值为0，undefind表示一个空的原始值，转为数值为NAN undefind指本该有一个值，但却并有定义，null表示没有对象，不应该有值<br>11、什么是 Spring Framework？<br>Spring 是一个开源应用框架，旨在降低应用程序开发的复杂度。它是轻量级、松散耦合的。它具有分层体系结构，允许用户选择组件，同时还为 J2EE 应用程序开发提供了一个有凝聚    力的框架。它可以集成其他框架，如 Structs、Hibernate、EJB 等，所以又称为框架的框架。<br>12、 Spring 应用程序有哪些不同组件？<br>Spring 应用一般有以下组件：接口 - 定义功能。Bean 类 - 它包含属性，setter 和 getter 方法，函数等。Spring 面向切面编程（AOP） - 提供面向切面编程的功能。Bean 配置文件 - 包含类的信息以及如何配置它们。用户程序 - 它使用接口。<br>13、 什么是 Spring IOC 容器？<br>Spring 框架的核心是 Spring 容器。容器创建对象，将它们装配在一起，配置它们并管理它们的完整生命周期。Spring 容器使用依赖注入来管理组成应用程序的组件。容器通过读取提供的配置元数据来接收对象进行实例化，配置和组装的指令。该元数据可以通过 XML，Java 注解或 Java 代码提供。<br>14、 什么是依赖注入？<br>在依赖注入中，您不必创建对象，但必须描述如何创建它们。您不是直接在代码中将组件和服务连接在一起，而是描述配置文件中哪些组件需要哪些服务。由 IoC 容器将它们装配在一起。<br>15、 可以通过多少种方式完成依赖注入？<br>通常，依赖注入可以通过三种方式完成，即：构造函数注入setter 注入接口注入在 Spring Framework 中，仅使用构造函数和 setter 注入。<br>16、 列举 IoC 的一些好处。<br>IoC 的一些好处是：它将最小化应用程序中的代码量。它将使您的应用程序易于测试，因为它不需要单元测试用例中的任何单例或 JNDI 查找机制。它以最小的影响和最少的侵入机制促进松耦合。它支持即时的实例化和延迟加载服务。<br>17、 spring 中有多少种 IOC 容器？<br>BeanFactory - BeanFactory 就像一个包含 bean 集合的工厂类。它会在客户端要求时实例化 bean。ApplicationContext - ApplicationContext 接口扩展了 BeanFactory 接口。它在 BeanFactory 基础上提供了一些额外的功能。<br>18、 什么是 spring bean？<br>它们是构成用户应用程序主干的对象。Bean 由 Spring IoC 容器管理。它们由 Spring IoC 容器实例化，配置，装配和管理。Bean 是基于用户提供给容器的配置元数据创建。<br>19、 Spring Framework 有哪些不同的功能？<br>轻量级 - Spring 在代码量和透明度方面都很轻便。IOC - 控制反转AOP - 面向切面编程可以将应用业务逻辑和系统服务分离，以实现高内聚。容器 - Spring 负责创建和管理对象（Bean）的生命周期和配置。MVC - 对 web 应用提供了高度可配置性，其他框架的集成也十分方便。事务管理 - 提供了用于事务管理的通用抽象层。Spring 的事务支持也可用于容器较少的环境。JDBC 异常 - Spring 的 JDBC 抽象层提供了一个异常层次结构，简化了错误处理策略。<br>20、 列举 Spring Framework 的优点。<br>由于 Spring Frameworks 的分层架构，用户可以自由选择自己需要的组件。Spring Framework 支持 POJO(Plain Old Java Object) 编程，从而具备持续集成和可测试性。由于依赖注入和控制反转，JDBC 得以简化。它是开源免费的。<br>21、@Component, @Controller, @Repository, @Service 有何区别？<br>@Component：这将 java 类标记为 bean。它是任何 Spring 管理组件的通用构造型。spring 的组件扫描机制现在可以将其拾取并将其拉入应用程序环境中。@Controller：这将一个类标记为 Spring Web MVC 控制器。标有它的 Bean 会自动导入到 IoC 容器中。@Service：此注解是组件注解的特化。它不会对 @Component 注解提供任何其他行为。您可以在服务层类中使用 @Service 而不是 @Component，因为它以更好的方式指定了意图。@Repository：这个注解是具有类似用途和功能的 @Component 注解的特化。它为 DAO 提供了额外的好处。它将 DAO 导入 IoC 容器，并使未经检查的异常有资格转换为 Spring DataAccessException。<br>22、@RequestMapping 注解有什么用？<br>@RequestMapping 注解用于将特定 HTTP 请求方法映射到将处理相应请求的控制器中的特定类/方法。此注释可应用于两个级别：类级别：映射请求的 URL方法级别：映射 URL 以及 HTTP 请求方法<br>23、列举 spring 支持的事务管理类型<br>Spring 支持两种类型的事务管理：1、程序化事务管理：在此过程中，在编程的帮助下管理事务。它为您提供极大的灵活性，但维护起来非常困难。2、声明式事务管理：在此，事务管理与业务代码分离。仅使用注解或基于 XML 的配置来管理事务。<br>24、什么是 AOP？<br>AOP(Aspect-Oriented Programming), 即 面向切面编程, 它与 OOP( Object-Oriented Programming, 面向对象编程) 相辅相成, 提供了与 OOP 不同的抽象软件结构的视角.在 OOP 中, 我们以类(class)作为我们的基本单元, 而 AOP 中的基本单元是 Aspect(切面)<br>25、@Autowired 注解有什么用？<br>@Autowired 可以更准确地控制应该在何处以及如何进行自动装配。此注解用于在 setter 方法，构造函数，具有任意名称或多个参数的属性或方法上自动装配 bean。默认情况下，它是类型驱动的注入。<br>26、spring 支持集中 bean scope？<br>Spring bean 支持 5 种 scope：Singleton - 每个 Spring IoC 容器仅有一个单实例。Prototype - 每次请求都会产生一个新的实例。Request - 每一次 HTTP 请求都会产生一个新的实例，并且该 bean 仅在当前 HTTP 请求内有效。Session - 每一次 HTTP 请求都会产生一个新的 bean，同时该 bean 仅在当前 HTTP session 内有效。Global-session - 类似于标准的 HTTP Session 作用域，不过它仅仅在基于 portlet 的 web 应用中才有意义。Portlet 规范定义了全局 Session 的概念，它被所有构成某个 portlet web 应用的各种不同的 portlet 所共享。在 global session 作用域中定义的 bean 被限定于全局 portlet Session 的生命周期范围内。如果你在 web 中使用 global session 作用域来标识 bean，那么 web 会自动当成 session 类型来使用。仅当用户使用支持 Web 的 ApplicationContext 时，最后三个才可用。<br>27、什么是 spring 装配<br>当 bean 在 Spring 容器中组合在一起时，它被称为装配或 bean 装配。 Spring 容器需要知道需要什么 bean 以及容器应该如何使用依赖注入来将 bean 绑定在一起，同时装配 bean。<br>28、自动装配有哪些方式？<br>Spring 容器能够自动装配 bean。也就是说，可以通过检查 BeanFactory 的内容让 Spring 自动解析 bean 的协作者。自动装配的不同模式：no - 这是默认设置，表示没有自动装配。应使用显式 bean 引用进行装配。byName - 它根据 bean 的名称注入对象依赖项。它匹配并装配其属性与 XML 文件中由相同名称定义的 bean。byType - 它根据类型注入对象依赖项。如果属性的类型与 XML 文件中的一个 bean 名称匹配，则匹配并装配属性。构造函数 - 它通过调用类的构造函数来注入依赖项。它有大量的参数。autodetect - 首先容器尝试通过构造函数使用 autowire 装配，如果不能，则尝试通过 byType 自动装配。<br>29、自动装配有什么局限？<br>覆盖的可能性 - 您始终可以使用 <constructor-arg> 和 <property> 设置指定依赖项，这将覆盖自动装配。基本元数据类型 - 简单属性（如原数据类型，字符串和类）无法自动装配。令人困惑的性质 - 总是喜欢使用明确的装配，因为自动装配不太精确。<br>30、如何在 spring 中启动注解装配？<br>默认情况下，Spring 容器中未打开注解装配。因此，要使用基于注解装配，我们必须通过配置&lt;context：annotation-config /&gt; 元素在 Spring 配置文件中启用它。<br>31、@Qualifier 注解有什么用？<br>当您创建多个相同类型的 bean 并希望仅使用属性装配其中一个 bean 时，您可以使用@Qualifier 注解和 @Autowired 通过指定应该装配哪个确切的 bean 来消除歧义。<br>32、spring DAO 有什么用？<br>Spring DAO 使得 JDBC，Hibernate 或 JDO 这样的数据访问技术更容易以一种统一的方式工作。这使得用户容易在持久性技术之间切换。它还允许您在编写代码时，无需考虑捕获每种技术不同的异常。<br>33、spring JDBC API 中存在哪些类？<br>JdbcTemplateSimpleJdbcTemplateNamedParameterJdbcTemplateSimpleJdbcInsertSimpleJdbcCall<br>34、使用 Spring 访问 Hibernate 的方法有哪些？<br>我们可以通过两种方式使用 Spring 访问 Hibernate：使用 Hibernate 模板和回调进行控制反转扩展 HibernateDAOSupport 并应用 AOP 拦截器节点<br>35、spring 支持哪些 ORM 框架<br>HibernateiBatisJPAJDOOJB<br>36、什么是 Aspect？<br>aspect 由 pointcount 和 advice 组成, 它既包含了横切逻辑的定义, 也包括了连接点的定义. Spring AOP 就是负责实施切面的框架, 它将切面所定义的横切逻辑编织到切面所指定的连接点中.的工作重心在于如何将增强编织目标对象的连接点上, 这里包含两个工作:1.如何通过 pointcut 和 advice 定位到特定的 joinpoint 上2.如何在 advice 中编写切面代码.可以简单地认为, 使用 @Aspect 注解的类就是切面.<br>37、什么是切点（JoinPoint）<br>程序运行中的一些时间点, 例如一个方法的执行, 或者是一个异常的处理.在 Spring AOP 中, join point 总是方法的执行点。<br>38、什么是通知（Advice）？<br>特定 JoinPoint 处的 Aspect 所采取的动作称为 Advice。Spring AOP 使用一个 Advice 作为拦截器，在 JoinPoint “周围”维护一系列的拦截器。<br>39、有哪些类型的通知（Advice）？<br>Before - 这些类型的 Advice 在 joinpoint 方法之前执行，并使用 @Before 注解标记进行配置。After Returning - 这些类型的 Advice 在连接点方法正常执行后执行，并使用 @AfterReturning 注解标记进行配置。After Throwing - 这些类型的 Advice 仅在 joinpoint 方法通过抛出异常退出并使用 @AfterThrowing 注解标记配置时执行。After (finally) - 这些类型的 Advice 在连接点方法之后执行，无论方法退出是正常还是异常返回，并使用 @After 注解标记进行配置。Around - 这些类型的 Advice 在连接点之前和之后执行，并使用 @Around 注解标记进行配置。<br>40、指出在 spring aop 中 concern 和 cross-cutting concern 的不同之处。<br>concern 是我们想要在应用程序的特定模块中定义的行为。它可以定义为我们想要实现的功能。cross-cutting concern 是一个适用于整个应用的行为，这会影响整个应用程序。例如，日志记录，安全性和数据传输是应用程序几乎每个模块都需要关注的问题，因此它们是跨领域的问题。<br>41、AOP 有哪些实现方式？<br>实现 AOP 的技术，主要分为两大类：静态代理 - 指使用 AOP 框架提供的命令进行编译，从而在编译阶段就可生成 AOP 代理类，因此也称为编译时增强；编译时编织（特殊编译器实现）类加载时编织（特殊的类加载器实现）。动态代理 - 在运行时在内存中“临时”生成 AOP 动态代理类，因此也被称为运行时增强。JDK 动态代理CGLIB<br>42、Spring AOP and AspectJ AOP 有什么区别？<br>Spring AOP 基于动态代理方式实现；AspectJ 基于静态代理方式实现。Spring AOP 仅支持方法级别的 PointCut；提供了完全的 AOP 支持，它还支持属性级别的 PointCut。<br>43、如何理解 Spring 中的代理？<br>将 Advice 应用于目标对象后创建的对象称为代理。在客户端对象的情况下，目标对象和代理对象是相同的。<br>44、Spring MVC 框架有什么用？<br>Spring Web MVC 框架提供 模型-视图-控制器 架构和随时可用的组件，用于开发灵活且松散耦合的 Web 应用程序。 MVC 模式有助于分离应用程序的不同方面，如输入逻辑，业务逻辑和 UI 逻辑，同时在所有这些元素之间提供松散耦合。<br>45、介绍一下 WebApplicationContext<br>WebApplicationContext 是 ApplicationContext 的扩展。它具有 Web 应用程序所需的一些额外功能。它与普通的 ApplicationContext 在解析主题和决定与哪个 servlet 关联的能力方面有所不同。<br>46、Spring Framework 中有多少个模块，它们分别是什么？<br>Spring 核心容器 – 该层基本上是 Spring Framework 的核心。它包含以下模块： Spring Core    Spring Bean    SpEL (Spring Expression Language)    Spring Context 数据访问/集成 – 该层提供与数据库交互的支持。它包含以下模块：    JDBC (Java DataBase Connectivity)    ORM (Object Relational Mapping)    OXM (Object XML Mappers)    JMS (Java Messaging Service)    TransactionWeb – 该层提供了创建 Web 应用程序的支持。它包含以下模块：    Web    Web – Servlet    Web – Socket    Web – Portlet    AOP – 该层支持面向切面编程    Instrumentation – 该层为类检测和类加载器实现提供支持。    Test – 该层为使用 JUnit 和 TestNG 进行测试提供支持。几个杂项模块:    Messaging – 该模块为 STOMP 提供支持。它还支持注解编程模型，该模型用于从 WebSocket 客户端路由和处理 STOMP 消息。 Aspects – 该模块为与 AspectJ 的集成提供支持。​​<br>47、区分构造函数注入和 setter 注入。<br>构造函数注入    setter 注入    没有部分注入 有部分注入    不会覆盖 setter 属性    会覆盖 setter 属性    任意修改都会创建一个新实例    任意修改不会创建一个新实例    适用于设置很多属性    适用于设置少量属性<br>48、区分 BeanFactory 和 ApplicationContext。<br>BeanFactory    ApplicationContext    它使用懒加载    它使用即时加载    它使用语法显式提供资源对象    它自己创建和管理资源对象    不支持国际化    支持国际化    不支持基于依赖的注解    支持基于依赖的注解<br>49、什么是编织（Weaving）？<br>为了创建一个 advice 对象而链接一个 aspect 和其它应用类型或对象，称为编织（Weaving）<br>50、使用 Spring 访问 Hibernate 的方法有哪些？<br>我们可以通过两种方式使用 Spring 访问 Hibernate：    使用 Hibernate 模板和回调进行控制反转    扩展 HibernateDAOSupport 并应用 AOP 拦截器节点<br>51.索引的优缺点，什么时候使用索引，什么时候不能使用索引<br>（1）索引最大的好处是提高查询速度，（2）缺点是更新数据时效率低，因为要同时更新索引（3）对数据进行频繁查询进建立索引，如果要频繁更改数据不建议使用索引。<br>52..InnoDB索引和MyISAM索引的区别：<br>（1）一是主索引的区别，InnoDB的数据文件本身就是索引文件。而MyISAM的索引和数据是分开的。（2）二是辅助索引的区别：InnoDB的辅助索引data域存储相应记录主键的值而不是地址。而MyISAM的辅助索引和主索引没有多大区别。<br>53.innodb引擎的4大特性<br>插入缓冲（insert buffer),二次写(double write),自适应哈希索引(ahi),预读(read ahead)<br>54.事物的4种隔离级别<br>隔离级别 ①读未提交(RU) ②读已提交(RC) ③可重复读(RR) ④串行<br>55.MYSQL的两种存储引擎区别（事务、锁级别等等），各自的适用场景<br>MYISAM 不支持事务，不支持外键，表锁，插入数据时，锁定整个表，查表总行数时，不需要全表扫描INNODB 支持事务，支持外键，行锁，查表总行数时，全表扫描<br>56.多线程的实现方法分别是什么?同步的实现方法分别是什么?<br>答：多线程有两种实现方法，分别是继承Thread类与实现Runnable。接口同步的实现方面有两种，分别是synchronized、wait与notify。<br>57、数组有没有length()方法？String有没有length()方法？<br>答：数组没有length()方法，有length 的属性。String 有length()方法。JavaScript中，获得字符串的长度是通过length属性得到的，这一点容易和Java混淆。<br>58、接口是否可继承（extends）接口？抽象类是否可实现（implements）接口？抽象类是否可继承具体类（concrete class）？<br>答：接口可以继承接口，而且支持多重继承。抽象类可以实现(implements)接口，抽象类可继承具体类也可以继承抽象类。<br>59、抽象类（abstract class）和接口（interface）的区别？<br>答：抽象类中可以定义构造器，可以有抽象方法和具体方法，而接口中不能定义构造器而且其中的方法全部都是抽象方法。抽象类中的成员可以是private、默认、protected、public的，而接口中的成员全都是public的。抽象类中可以定义成员变量，而接口中定义的成员变量实际上都是常量。有抽象方法的类必须被声明为抽象类，而抽象类未必要有抽象方法。<br>60.int和Integer有什么区别？<br>答：Java是一个近乎纯洁的面向对象编程语言，但是为了编程的方便还是引入了基本数据类型，但是为了能够将这些基本数据类型当成对象操作，Java为每一个基本数据类型都引入了对应的包装类型（wrapper class），int的包装类就是Integer，从Java 5开始引入了自动装箱/拆箱机制，使得二者可以相互转换。Java 为每个原始类型提供了包装类型：- 原始类型: boolean，char，byte，short，int，long，float，double- 包装类型：Boolean，Character，Byte，Short，Integer，Long，Float，Double</property></constructor-arg></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/12/14/Java面试题/" data-id="cjrabl6n1000fvkdqzyprwx35" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-result类型为redirectAction时的参数传递" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/14/result类型为redirectAction时的参数传递/" class="article-date">
  <time datetime="2018-12-14T03:20:11.776Z" itemprop="datePublished">2018-12-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<p>layout: struts2<br>title: result类型为redirectAction时的参数传递<br>date: 2018-12-14 11:20:11<br>tags:</p>
<ul>
<li>分享</li>
</ul>
<hr>
<blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;result name=<span class="string">"success"</span> <span class="built_in">type</span>=<span class="string">"redirectAction"</span>&gt;</span><br><span class="line">    	&lt;param name=<span class="string">"actionName"</span>&gt;findDetailAll&lt;/param&gt;</span><br><span class="line">        &lt;!-- 第一个bizClaimVoucher.id为findDetailAll Action中的属性,第二个bizClaimVoucher.id为当前Action的属性 --&gt;</span><br><span class="line">	&lt;param name=<span class="string">"bizClaimVoucher.id"</span>&gt;<span class="variable">$&#123;bizClaimVoucher.id&#125;</span>&lt;/param&gt;</span><br><span class="line">&lt;/result&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/12/14/result类型为redirectAction时的参数传递/" data-id="cjrabl6r70034vkdqzbth2v2n" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-SpringBoot基本原理以及认识" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/13/SpringBoot基本原理以及认识/" class="article-date">
  <time datetime="2018-12-13T11:08:44.000Z" itemprop="datePublished">2018-12-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SpringBoot/">SpringBoot</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/13/SpringBoot基本原理以及认识/">SpringBoot基本原理以及认识</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>简介</strong></p>
</blockquote>
<p><em>Spring Boot来简化Spring应用开发，去繁从简，基本上都是使用的Spring的技术栈，它就像maven配置了整合了所有的jar包，spring boot整合了所有的框架</em></p>
<p><em>j2EE笨重的开发，繁多的配置，低下的开发效率，复杂的部署流程，第三方技术集成难度大</em></p>
<blockquote>
<p><strong>解决</strong></p>
</blockquote>
<p><em>Spring全家桶时代<br>Spring Boot &gt; J2EE一站式解决方案<br>Spring Cloud &gt; 分布式整体解决方案</em></p>
<blockquote>
<p><strong>优点</strong></p>
</blockquote>
<ul>
<li>快速创建独立运行的Spring项目以及主流框架的集成</li>
<li>使用嵌入式的servlet容器，应用不需要打成war包</li>
<li>starters自动依赖与版本控制</li>
<li>大量的自动配置，简化开发，也可修改默认值</li>
<li>无需配置xml，无代码生成，开箱即用</li>
<li>准生产环境的运行时应用监控</li>
<li>与云计算的天然集成</li>
</ul>
<blockquote>
<h3 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h3></blockquote>
<p>微服务是一种架构风格<br>一个应用应该是一组小型服务，可以通过HTTP的方式来进行互通</p>
<hr>
<p><strong>单体应用</strong>：ALL IN ONE,所有东西写在一个里面,传统的web架构模式<br>它也有它的优点，比如开发，测试简单，因为都是一个应用，不牵扯到多个应用的互联，部署也是easy，整个项目打成war包，直接扔在服务器中，不会给运维带来太大的困难<br>但是他所带来的问题呢，也是能清楚的感觉到，牵一发而动全身，有可能因为我们的小小的修改，整个应用需要重新部署或运行，当然，更大的挑战是我们日益增长的软件需求</p>
<hr>
<p><strong>一个单体应用程序把它所有功能放在一个单一进程中，并且通过多个服务器上复制这个单体进行扩展</strong></p>
<p><strong>微服务架构提倡把每个功能元素放入一个独立的服务中，并且通过跨服务器分发这些服务进行扩展，只在需要时才复制,节省了调用资源，而且每个服务都是一个可替换，可独立升级的独立单元，微服务使用，部署和运维是相当不容易的</strong><br><img src="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=373070012,3476798351&amp;fm=173&amp;app=25&amp;f=JPEG?w=640&amp;h=299&amp;s=6D82ED1BBBA5688A52C989D0000010B3" alt=""></p>
<p><br></p>
<h4 id="怎样面对一个大型分布式的应用"><a href="#怎样面对一个大型分布式的应用" class="headerlink" title="怎样面对一个大型分布式的应用"></a>怎样面对一个大型分布式的应用</h4><p><strong><em>Spring boot</em></strong>：可以快速构建一个应用<br><strong><em>Spring cloud</em></strong>：进行网状互联互调，应用分布式<br><br></p>
<h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><ul>
<li>JDK 1.7：<strong>1.7及以上</strong></li>
<li>Maven 3.6：<strong>3.3及以上</strong></li>
<li>IDEA 2017</li>
<li>Spring Boot 1.5.9.RELEASE</li>
</ul>
<blockquote>
<p><em>Spring框架使用经验，熟练使用Maven进行项目构建和依赖管理，熟练使用Eclipse或IDEA</em></p>
</blockquote>
<h4 id="配置Maven"><a href="#配置Maven" class="headerlink" title="配置Maven"></a>配置Maven</h4><blockquote>
<p><strong>conf的settings.xml文件添加,这段告诉Maven，项目使用jdk1.8来编译</strong><br><strong>可以使用 mvn -v 来查看自己jdk所对应的版本</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;profile&gt;</span><br><span class="line">      &lt;id&gt;jdk-1.8&lt;/id&gt;</span><br><span class="line"></span><br><span class="line">      &lt;activation&gt;</span><br><span class="line">        &lt;activeByDefault&gt;<span class="literal">true</span>&lt;/activeByDefault&gt;</span><br><span class="line">        &lt;jdk&gt;1.8&lt;/jdk&gt;</span><br><span class="line">      &lt;/activation&gt;</span><br><span class="line">      &lt;properties&gt;</span><br><span class="line">        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;</span><br><span class="line">        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</span><br><span class="line">        &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt;</span><br><span class="line">      &lt;/properties&gt;</span><br><span class="line">  &lt;/profile&gt;</span><br></pre></td></tr></table></figure>
<h4 id="配置IDEA"><a href="#配置IDEA" class="headerlink" title="配置IDEA"></a>配置IDEA</h4><blockquote>
<p><strong>进入setting设置，找到maven，设置本地maven仓库</strong></p>
</blockquote>
<p><br></p>
<h4 id="创建Maven项目"><a href="#创建Maven项目" class="headerlink" title="创建Maven项目"></a>创建Maven项目</h4><h4 id="导入Spring-boot相关依赖"><a href="#导入Spring-boot相关依赖" class="headerlink" title="导入Spring boot相关依赖"></a>导入Spring boot相关依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
<h4 id="创建一个主程序-用来启动Spring-Boot应用"><a href="#创建一个主程序-用来启动Spring-Boot应用" class="headerlink" title="创建一个主程序(用来启动Spring-Boot应用)"></a>创建一个主程序(用来启动Spring-Boot应用)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @SpringBootApplication 来标注一个主程序类，说明这是一个Spring Boot应用</span><br><span class="line"> */</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class HelloWorldMainApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        // Spring应用启动</span><br><span class="line">        SpringApplication.run(HelloWorldMainApplication.class,args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="编写相关的Controller-Service"><a href="#编写相关的Controller-Service" class="headerlink" title="编写相关的Controller,Service"></a>编写相关的Controller,Service</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">public class HelloController &#123;</span><br><span class="line"></span><br><span class="line">    @ResponseBody</span><br><span class="line">    @RequestMapping(<span class="string">"/hello"</span>)</span><br><span class="line">    public String <span class="function"><span class="title">hello</span></span>()&#123;</span><br><span class="line">        <span class="built_in">return</span>  <span class="string">"你好，樊可"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="然后直接运行主程序"><a href="#然后直接运行主程序" class="headerlink" title="然后直接运行主程序"></a>然后直接运行主程序</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___<span class="string">'_ __ _ _(_)_ __  __ _ \ \ \ \</span></span><br><span class="line"><span class="string">( ( )\___ | '</span>_ | <span class="string">'_| | '</span>_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  <span class="string">'  |____| .__|_| |_|_| |_\__, | / / / /</span></span><br><span class="line"><span class="string"> =========|_|==============|___/=/_/_/_/</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>不需要做过多的配置，什么包扫描，视图解析器，前端控制器。。。</strong></p>
</blockquote>
<p><br></p>
<h3 id="探究"><a href="#探究" class="headerlink" title="探究"></a>探究</h3><p><br></p>
<h4 id="POM文件"><a href="#POM文件" class="headerlink" title="POM文件"></a>POM文件</h4><h5 id="父项目"><a href="#父项目" class="headerlink" title="父项目"></a>父项目</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    </span><br><span class="line">    它的父项目是</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">		&lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;</span><br><span class="line">		&lt;version&gt;1.5.9.RELEASE&lt;/version&gt;</span><br><span class="line">		&lt;relativePath&gt;../../spring-boot-dependencies&lt;/relativePath&gt;</span><br><span class="line">	&lt;/parent&gt;</span><br><span class="line">    他来真正管理Spring Boot应用里面的所有依赖版本</span><br></pre></td></tr></table></figure>
<h5 id="启动器"><a href="#启动器" class="headerlink" title="启动器"></a>启动器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p><strong>spring-boot-starter</strong>-web:<br>&nbsp;spring-boot-starter:spring-boot场景启动器;帮我们导入了web模块正常运行所依赖的组建<br><br><br>Spring boot将所有功能场景都抽取出来，做成一个个的starters(启动器),只需要在项目中引入这些starter相关场景的所有依赖都会导入进来</p>
<p><br></p>
<h5 id="主程序类"><a href="#主程序类" class="headerlink" title="主程序类"></a>主程序类</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @SpringBootApplication 来标注一个主程序类，说明这是一个Spring Boot应用</span><br><span class="line"> */</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class HelloWorldMainApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // Spring应用启动</span><br><span class="line">        SpringApplication.run(HelloWorldMainApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>@SpringBootApplication</strong>：Spring Boot 应用标注在某个类上说明这个类是SpringBoot的主配置类,SpringBoot就应该运行这个类的Main方法来启动SpringBoot应用</p>
<p><br><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.TYPE&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Inherited</span><br><span class="line">@SpringBootConfiguration</span><br><span class="line">@EnableAutoConfiguration</span><br><span class="line">@ComponentScan(</span><br><span class="line">    excludeFilters = &#123;@Filter(</span><br><span class="line">    <span class="built_in">type</span> = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;TypeExcludeFilter.class&#125;</span><br><span class="line">), @Filter(</span><br><span class="line">    <span class="built_in">type</span> = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;AutoConfigurationExcludeFilter.class&#125;</span><br><span class="line">)&#125;</span><br><span class="line">)</span><br><span class="line">public @interface SpringBootApplication &#123;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><strong>@Configuration</strong>：配置类上类标注这个注解</li>
<li><strong>@EnableAutoConfiguration</strong>：开启自动配置功能,以前我们需要配置的东西，Spring Boot帮我们自动配置</li>
<li><strong>@AutoConfigurationPackage</strong>：自动配置包<ul>
<li><strong>@Import({Registrar.class})</strong>：Spring的底层注解，给容器中导入一个组建，导入的组件由Registrar.class</li>
<li>将主配置(@SpringBootApplication所标注的类)的所在包以及所在下面的子包里面的所有组件扫描到Spring容器中</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/12/13/SpringBoot基本原理以及认识/" data-id="cjrabl6q2001svkdqnm4b8zen" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-勿忘国耻吾辈自强" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/13/勿忘国耻吾辈自强/" class="article-date">
  <time datetime="2018-12-13T09:39:39.000Z" itemprop="datePublished">2018-12-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/13/勿忘国耻吾辈自强/">勿忘国耻吾辈自强</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://i.imgur.com/tcIk3mo.jpg" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/12/13/勿忘国耻吾辈自强/" data-id="cjrabl6rc003evkdqml7w9nf2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分享/">分享</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java实现邮件发送" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/13/Java实现邮件发送/" class="article-date">
  <time datetime="2018-12-13T01:41:41.000Z" itemprop="datePublished">2018-12-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/13/Java实现邮件发送/">Java实现邮件发送</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>发送的邮箱的POP3/SMTP服务或IMAP/SMTP服务开启</strong><br>记住授权码</p>
</blockquote>
<blockquote>
<p><strong>得到javax.mail.jar</strong><br>链接：<a href="https://github.com/javaee/javamail/releases" target="_blank" rel="noopener">https://github.com/javaee/javamail/releases</a></p>
</blockquote>
<hr>
<blockquote>
<p><strong>jar包导入项目中（我的只是普通的Java项目）</strong></p>
</blockquote>
<hr>
<blockquote>
<p>测试方法</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">package cn.mail.util;</span><br><span class="line"></span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line">import javax.mail.Session;</span><br><span class="line">import javax.mail.Transport;</span><br><span class="line">import javax.mail.internet.InternetAddress;</span><br><span class="line">import javax.mail.internet.MimeMessage;</span><br><span class="line"></span><br><span class="line">public class Mail&#123;</span><br><span class="line">	// 发件人的 邮箱 和 密码</span><br><span class="line">	//PS: 某些邮箱服务器为了增加邮箱本身密码的安全性，给 SMTP 客户端设置了独立密码（有的邮箱称为“授权码”）, 对于开启了独立密码的邮箱, 这里的邮箱密码必需使用这个独立密码（授权码）。</span><br><span class="line">	private static String myEmailAccount = <span class="string">"2911572013@qq.com"</span>;</span><br><span class="line">	private static String myEmailPsw = <span class="string">"bylvzvmhhsmedgaf"</span>;//yonyivmzpseddeae</span><br><span class="line">	//QQSMTP服务器地址为:smtp.qq.com</span><br><span class="line">	private static String myEmailSMTPHost = <span class="string">"smtp.qq.com"</span>;</span><br><span class="line">	//收件人邮箱</span><br><span class="line">	private static String receiveMailAccount = <span class="string">"1258846421@qq.com"</span>;</span><br><span class="line">	</span><br><span class="line">	public static void main(String[] args) throws Exception&#123;</span><br><span class="line">	// 1. 创建参数配置, 用于连接邮件服务器的参数配置(一般写在一个Properties文件里来读取，此处为了方便)</span><br><span class="line">		Properties props = new Properties();</span><br><span class="line">		props.setProperty(<span class="string">"mail.transport.protocol"</span>, <span class="string">"smtp"</span>);//使用协议(javaMail规范要求)</span><br><span class="line">		props.setProperty(<span class="string">"mail.smtp.host"</span>, myEmailSMTPHost);//发件人的邮箱的SMTP服务器地址</span><br><span class="line">		props.setProperty(<span class="string">"mail.smtp.auth"</span>, <span class="string">"true"</span>);//需要请求认证	</span><br><span class="line"> </span><br><span class="line">	//2. 根据配置创建会话对象，用于和邮件服务器交互</span><br><span class="line">		Session session = Session.getInstance(props);</span><br><span class="line">		session.setDebug(<span class="literal">true</span>);//设置为debug模式，可以查看详细的发送Log</span><br><span class="line">		</span><br><span class="line">	//3.创建一封邮件</span><br><span class="line">		MimeMessage message = createMimeMessage(session, myEmailAccount, receiveMailAccount);</span><br><span class="line">		</span><br><span class="line">	//4.根据Session获取邮件传输对象</span><br><span class="line">		Transport transport = session.getTransport();</span><br><span class="line">		</span><br><span class="line">        // 5. 使用 邮箱账号 和 密码 连接邮件服务器, 这里认证的邮箱必须与 message 中的发件人邮箱一致, 否则报错</span><br><span class="line">        transport.connect(myEmailAccount, myEmailPsw);</span><br><span class="line">        </span><br><span class="line">        // 6. 发送邮件, 发到所有的收件地址, message.getAllRecipients() 获取到的是在创建邮件对象时添加的所有收件人, 抄送人, 密送人</span><br><span class="line">        transport.sendMessage(message, message.getAllRecipients());</span><br><span class="line"> </span><br><span class="line">        // 7. 关闭连接</span><br><span class="line">        transport.close();</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	 /**</span><br><span class="line">     * 创建一封只包含文本的简单邮件</span><br><span class="line">     *</span><br><span class="line">     * @param session 和服务器交互的会话</span><br><span class="line">     * @param sendMail 发件人邮箱</span><br><span class="line">     * @param receiveMail 收件人邮箱</span><br><span class="line">     * @<span class="built_in">return</span></span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public static MimeMessage createMimeMessage(Session session, String sendMail, String receiveMail) throws Exception &#123;</span><br><span class="line">        // 1. 创建一封邮件</span><br><span class="line">        MimeMessage message = new MimeMessage(session);</span><br><span class="line"> </span><br><span class="line">        // 2. From: 发件人（昵称有广告嫌疑，避免被邮件服务器误认为是滥发广告以至返回失败，请修改昵称）	</span><br><span class="line">        // InternetAddress(String address, String personal, String charset) 根据地址和名称来构建InternetAddress</span><br><span class="line">                message.setFrom(new InternetAddress(sendMail, <span class="string">"嘻嘻嘻"</span>, <span class="string">"UTF-8"</span>));</span><br><span class="line">         </span><br><span class="line">                // 3. To: 收件人（可以增加多个收件人、抄送、密送）</span><br><span class="line">                message.setRecipient(MimeMessage.RecipientType.TO, new InternetAddress(receiveMail, <span class="string">"(｡･∀･)ﾉﾞ嗨SIRI"</span>, <span class="string">"UTF-8"</span>));</span><br><span class="line">                // 4. Subject: 邮件主题（标题有广告嫌疑，避免被邮件服务器误认为是滥发广告以至返回失败，请修改标题）</span><br><span class="line">                </span><br><span class="line">                message.setSubject(<span class="string">"恭喜"</span>, <span class="string">"UTF-8"</span>);</span><br><span class="line">         </span><br><span class="line">                // 5. Content: 邮件正文（可以使用html标签）（内容有广告嫌疑，避免被邮件服务器误认为是滥发广告以至返回失败，请修改发送内容）</span><br><span class="line">                message.setContent(<span class="string">"尊敬的悲伤的橘子树:&lt;br/&gt;   当您看到这封邮箱时,现在时间为:"</span>+new Date()+<span class="string">"，首先恭喜您已经做好了邮箱发送的功能，再接再厉!"</span>, <span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">                </span><br><span class="line">                // 6. 设置发件时间</span><br><span class="line">                message.setSentDate(new Date());</span><br><span class="line">         </span><br><span class="line">                // 7. 保存设置</span><br><span class="line">                message.saveChanges();</span><br><span class="line">         </span><br><span class="line">                <span class="built_in">return</span> message;</span><br><span class="line"></span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>myEmailPsw并不是qq密码，POP3/SMTP服务或IMAP/SMTP服务开启的授权码</strong></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/12/13/Java实现邮件发送/" data-id="cjrabl6n4000hvkdqaupa1wmh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分享/">分享</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Struts2实现Ajax" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/08/Struts2实现Ajax/" class="article-date">
  <time datetime="2018-12-08T14:37:32.000Z" itemprop="datePublished">2018-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/08/Struts2实现Ajax/">Struts2实现Ajax</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>Struts2框架下实现Ajax有两种方法，第一种是原生的方式，另外一种是使用Struts2自带的插件</strong></p>
</blockquote>
<hr>
<blockquote>
<p><strong>其中js部分调用方式一致</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">testAjax</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    var <span class="variable">$userNameInput</span> = $(<span class="string">"#ajax_username"</span>);</span><br><span class="line">    var userName = <span class="variable">$userNameInput</span>.val();</span><br><span class="line"></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url : <span class="string">"originAjax.action"</span>, //请求地址</span><br><span class="line">        <span class="built_in">type</span> : <span class="string">"GET"</span>, //请求方式</span><br><span class="line">        data : <span class="string">"ajaxField="</span> + userName, //传递的参数</span><br><span class="line">        success : <span class="keyword">function</span>(data, textStatus) &#123; //返回成功函数</span><br><span class="line">            alert(data);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用stream类型的Result实现Ajax"><a href="#使用stream类型的Result实现Ajax" class="headerlink" title="使用stream类型的Result实现Ajax"></a>使用stream类型的Result实现Ajax</h4><h5 id="编写Action"><a href="#编写Action" class="headerlink" title="编写Action"></a>编写Action</h5><blockquote>
<ul>
<li>定义一个InputStream类型的成员变量</li>
<li>给该变量添加getter和setter方法</li>
<li>执行业务操作，将响应数据赋给该成员变量</li>
</ul>
</blockquote>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">private InputStream inputStream;</span><br><span class="line">public InputStream <span class="function"><span class="title">getInputStream</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> inputStream;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">public void setInputStream(InputStream inputStream) &#123;</span><br><span class="line">		this.inputStream = inputStream;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">/**</span><br><span class="line"> * stream类型的result实现Ajax</span><br><span class="line">*/</span><br><span class="line">public String <span class="function"><span class="title">execute</span></span>()&#123;</span><br><span class="line">	try &#123;</span><br><span class="line">	 inputStream=new ByteArrayInputStream(likeName.getBytes(<span class="string">"utf-8"</span>));</span><br><span class="line">	 &#125; catch (UnsupportedEncodingException e) &#123;</span><br><span class="line">		// TODO Auto-generated catch block</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	 &#125;</span><br><span class="line">		<span class="built_in">return</span> SUCCESS;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h5 id="配置struts-xml"><a href="#配置struts-xml" class="headerlink" title="配置struts.xml"></a>配置struts.xml</h5><blockquote>
<ul>
<li>定于stream类型的result</li>
<li>使用&lt;param&gt;标签指定响应数据类型以及输出结果</li>
</ul>
</blockquote>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;action name=<span class="string">"getStreamResult"</span> class=<span class="string">"cusAction"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span> <span class="built_in">type</span>=<span class="string">"stream"</span>&gt;</span><br><span class="line">				&lt;param name=<span class="string">"contentType"</span>&gt;text/html&lt;/param&gt;</span><br><span class="line">				&lt;param name=<span class="string">"inputName"</span>&gt;inputStream&lt;/param&gt;</span><br><span class="line">			&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br></pre></td></tr></table></figure>
<h4 id="使用JSON类型的Result实现Ajax"><a href="#使用JSON类型的Result实现Ajax" class="headerlink" title="使用JSON类型的Result实现Ajax"></a>使用JSON类型的Result实现Ajax</h4><blockquote>
<ul>
<li>导入struts2-json-plugin-.jar</li>
<li>struts.xml中定义package并继承json-default</li>
<li>指定result元素的type属性为json</li>
</ul>
</blockquote>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;action name=<span class="string">"getJsonResult"</span> class=<span class="string">"cusAction"</span>&gt;</span><br><span class="line">	&lt;result <span class="built_in">type</span>=<span class="string">"json"</span>&gt;</span><br><span class="line">		&lt;param name=<span class="string">"root"</span>&gt;likeName&lt;/param&gt; //基本设置</span><br><span class="line">                &lt;param name=<span class="string">"includeProperties"</span>&gt;user.name&lt;/param&gt; //设置包含的字段</span><br><span class="line">                &lt;param name=<span class="string">"exclideProperties"</span>&gt;user.password&lt;/param&gt; //设置不包含的字段</span><br><span class="line">                &lt;param name=<span class="string">"excludeNullProperties"</span>&gt;<span class="literal">true</span>&lt;/param&gt; //是否添加null、</span><br><span class="line">	&lt;/result&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/12/08/Struts2实现Ajax/" data-id="cjrabl6r1002wvkdq73zlwb5i" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-没有光明的人-最是向往光明" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/27/没有光明的人-最是向往光明/" class="article-date">
  <time datetime="2018-11-27T14:36:13.000Z" itemprop="datePublished">2018-11-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/27/没有光明的人-最是向往光明/">没有光明的人,最是向往光明</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>这里死了太多的人，他们的痛苦使我成长。无知愚昧的孩童也只有知道痛苦后才能长大成人</p>
<p>你们应该证明你们是个大国,然而你们时恃是世界的主角</p>
<p>远离杀戮，其实只不过是追求和平的庸者</p>
<p>杀了人就会被人杀。憎恨会将这两者紧紧联系在一起。战争就是伴随着死亡伤痕痛苦</p>
<p>你和我有着相同的梦想，都希望实现和平。你和我没有任何区别，都是为了正义而活</p>
<p>我对你的村子实行的正义，和你试图击倒我的想法没有任何的区别。</p>
<p>失去真正重要的东西所带来的痛楚，对谁 来说都是一样，你和我都对这样的痛楚感同身受</p>
</blockquote>
<blockquote>
<p>感受痛苦吧，体验痛苦吧，接受痛苦吧，了解痛苦吧。不知道痛苦的人是不会知道什么是和平</p>
</blockquote>
<p>–  <strong>佩恩</strong></p>
<hr>
<p><img src="http://timg01.bdimg.com/timg?pacompress&amp;imgtype=1&amp;sec=1439619614&amp;autorotate=1&amp;di=97806aba2fd28edd9801ea35a40ed994&amp;quality=90&amp;size=b870_10000&amp;src=http%3A%2F%2Fbos.nj.bpc.baidu.com%2Fv1%2Fmediaspot%2F6351f152e038a1439c1324ca20d60776.jpeg" alt="痛苦"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/27/没有光明的人-最是向往光明/" data-id="cjrabl6rm003vvkdqqab48fyd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分享/">分享</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-今天也是美好的一天" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/27/今天也是美好的一天/" class="article-date">
  <time datetime="2018-11-27T00:37:10.000Z" itemprop="datePublished">2018-11-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/27/今天也是美好的一天/">今天也是美好的一天</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>独木舟  《我亦飘零久》</p>
</blockquote>
<p>当我懂得了去爱太阳的光芒，爱麦子和稻谷的香味，<br>爱任何一株路边的野草小花，爱炊烟袅袅升起的烟囱，<br>以及不惧怕未来的时光中，岁月不经意涂抹在我面孔上的每一条皱纹时，我才真正懂得了如何爱这个世界。</p>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1543289726053&amp;di=12c3a160482a1ffa2ee861028453d3dc&amp;imgtype=0&amp;src=http%3A%2F%2Fimgupload.wayi.com.tw%2Fimgupload%2F2015%2F01%2F15%2Ffile_54b7b76e3b0d5.jpg" alt="加油"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/27/今天也是美好的一天/" data-id="cjrabl6ra003avkdqnmjvqmm2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分享/">分享</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-拦截器" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/25/拦截器/" class="article-date">
  <time datetime="2018-11-25T06:13:19.000Z" itemprop="datePublished">2018-11-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/25/拦截器/">拦截器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>为什么需要拦截器</strong></p>
<ul>
<li>早期mvc框架将一些通用操作硬编码在核心控制器中，使框架灵活性不足，可扩展性低</li>
<li>Struts2将核心功能放到多个拦截器中实现，拦截器可自由选择和组合，增强了灵活性，有利于系统的解耦</li>
</ul>
</blockquote>
<hr>
<blockquote>
<p><strong>什么是拦截器</strong></p>
<ul>
<li>Struts2大多数核心功能是通过拦截器实现的，每个拦截器完成某项功能</li>
<li>拦截器方法在Action执行之前和之后执行</li>
<li>拦截器栈<blockquote>
<ul>
<li>从结构上看，拦截器相当于多个拦截器的组成</li>
<li>从功能上看，拦截器栈也是拦截器</li>
</ul>
</blockquote>
</li>
<li>拦截器与过滤器原理相似</li>
</ul>
</blockquote>
<hr>
<blockquote>
<p><strong>拦截器工作原理</strong><br>三阶段执行周期</p>
<blockquote>
<ul>
<li>做一些Action执行前的预处理</li>
<li>将控制交给后续拦截器或返回字符串</li>
<li>做一些Action执行后的处理</li>
</ul>
</blockquote>
</blockquote>
<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><h4 id="简单应用"><a href="#简单应用" class="headerlink" title="简单应用"></a>简单应用</h4><blockquote>
<p><strong>创建拦截器类</strong><br>继承AbstractInterceptor类，重写intercept()<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">	public String intercept(ActionInvocation invocation) throws Exception &#123;</span><br><span class="line">		//预处理工作</span><br><span class="line">		long startTime=System.currentTimeMillis();</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"当前时间"</span>+startTime);</span><br><span class="line">		//执行后续拦截器或action</span><br><span class="line">		String tesult=invocation.invoke();</span><br><span class="line">		//后续处理工作</span><br><span class="line">		long endTime=System.currentTimeMillis();</span><br><span class="line">		System.out.println(<span class="string">"耗时："</span>+(endTime-startTime));</span><br><span class="line">		<span class="built_in">return</span> tesult;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p><strong>struts.xml配置</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;interceptors&gt;</span><br><span class="line">    		&lt;!-- 定义单个拦截器 --&gt;</span><br><span class="line">    		&lt;interceptor name=<span class="string">"myAuthorization"</span> class=<span class="string">"cn.ssh.interceptor.AuthorizationInterceptor"</span>&gt;&lt;/interceptor&gt;</span><br><span class="line">    		&lt;!-- 定义拦截器栈 --&gt;</span><br><span class="line">    		 &lt;interceptor-stack name=<span class="string">"myStack"</span>&gt;</span><br><span class="line">    		 	&lt;interceptor-ref name=<span class="string">"defaultStack"</span>&gt;&lt;/interceptor-ref&gt;</span><br><span class="line">    		 	&lt;interceptor-ref name=<span class="string">"myAuthorization"</span>&gt;&lt;/interceptor-ref&gt;</span><br><span class="line">    		 &lt;/interceptor-stack&gt;</span><br><span class="line">&lt;/interceptors&gt;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">&lt;action name=<span class="string">"indexs"</span>&gt;</span><br><span class="line">    		&lt;result&gt;index.jsp&lt;/result&gt;</span><br><span class="line">            &lt;!-- 引用拦截器栈--&gt;</span><br><span class="line">    		&lt;interceptor-ref name=<span class="string">"myTimeStack"</span>&gt;&lt;/interceptor-ref&gt;</span><br><span class="line">            &lt;!-- 引用单个拦截器--&gt;</span><br><span class="line">    		&lt;interceptor-ref name=<span class="string">"myTime"</span>&gt;&lt;/interceptor-ref&gt;</span><br><span class="line">    		&lt;!-- 默认拦截器栈，必须--&gt;</span><br><span class="line">    		&lt;interceptor-ref name=<span class="string">"defaultStack"</span>&gt;&lt;/interceptor-ref&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p><strong>设置默认拦截器</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在这个包里所有action都会有myTimeStack --&gt;</span><br><span class="line">&lt;default-interceptor-ref name=<span class="string">"myTimeStack"</span>&gt;&lt;/default-interceptor-ref&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="自定义拦截器"><a href="#自定义拦截器" class="headerlink" title="自定义拦截器"></a>自定义拦截器</h4><blockquote>
<p><strong>实现Intercepror接口</strong></p>
<blockquote>
<ul>
<li>void init()：初始化拦截器所需资源</li>
<li>void destroy()：释放在init()中分配的资源</li>
<li>String intercept(ActionInvocation ai) throws Exception<blockquote>
<ul>
<li>实现拦截器功能</li>
<li>利用ActionInvocation参数获取Action状态</li>
<li>返回结果码字符串</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</blockquote>
<hr>
<blockquote>
<p><strong>继承AbstractInterceptor类</strong></p>
<blockquote>
<ul>
<li>提供了init()和destroy()方法的空实现</li>
<li>只需要实现intercept方法既可</li>
</ul>
</blockquote>
</blockquote>
<hr>
<h4 id="权限验证拦截器"><a href="#权限验证拦截器" class="headerlink" title="权限验证拦截器"></a>权限验证拦截器</h4><blockquote>
<p><strong>创建权限验证拦截器</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class AuthorizationInterceptor extends AbstractInterceptor &#123;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public String intercept(ActionInvocation invocation) throws Exception &#123;</span><br><span class="line">		Object loginUser=invocation.getInvocationContext().getSession().get(<span class="string">"loginUser"</span>);</span><br><span class="line">		<span class="keyword">if</span>(loginUser==null)&#123;</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"input"</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">return</span> invocation.invoke();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p><strong>struts.xml</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;package name=<span class="string">"renthouse"</span> extends=<span class="string">"struts-default"</span> namespace=<span class="string">"/mm"</span>&gt;</span><br><span class="line">    	&lt;interceptors&gt;</span><br><span class="line">    		&lt;!-- 定义权限验证拦截器 --&gt;</span><br><span class="line">    		&lt;interceptor name=<span class="string">"myAuthorization"</span> class=<span class="string">"cn.ssh.interceptor.AuthorizationInterceptor"</span>&gt;&lt;/interceptor&gt;</span><br><span class="line">    		&lt;!-- 定义拦截器栈 --&gt;</span><br><span class="line">    		 &lt;interceptor-stack name=<span class="string">"myStack"</span>&gt;</span><br><span class="line">    		 	&lt;interceptor-ref name=<span class="string">"defaultStack"</span>&gt;&lt;/interceptor-ref&gt;</span><br><span class="line">    		 	&lt;interceptor-ref name=<span class="string">"myAuthorization"</span>&gt;&lt;/interceptor-ref&gt;</span><br><span class="line">    		 &lt;/interceptor-stack&gt;</span><br><span class="line">    	&lt;/interceptors&gt;</span><br><span class="line">    	&lt;default-interceptor-ref name=<span class="string">"myStack"</span>&gt;&lt;/default-interceptor-ref&gt;</span><br><span class="line">    	</span><br><span class="line">    	&lt;action name=<span class="string">"Logins"</span> class=<span class="string">"cn.ssh.action.LoginAction"</span>&gt;</span><br><span class="line">           &lt;result name=<span class="string">"success"</span>&gt;/success.jsp&lt;/result&gt;</span><br><span class="line">           &lt;result name=<span class="string">"fail"</span>&gt;/fail.jsp&lt;/result&gt;</span><br><span class="line">           &lt;result name=<span class="string">"input"</span>&gt;/login.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;action name=<span class="string">"success"</span>&gt;</span><br><span class="line">           &lt;result name=<span class="string">"success"</span>&gt;/success.jsp&lt;/result&gt;</span><br><span class="line">           &lt;result name=<span class="string">"input"</span>&gt;/login.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/package&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><blockquote>
<p><strong>Commons-FileUpload组件</strong></p>
<blockquote>
<ul>
<li>使用简单：可以方便的嵌入到jsp文件，编写少量代码既可完成文件上传</li>
<li>能全程控制文件上传</li>
<li>能对上传文件的大小，类型进行控制</li>
</ul>
</blockquote>
</blockquote>
<h4 id="添加jar包"><a href="#添加jar包" class="headerlink" title="添加jar包"></a>添加jar包</h4><blockquote>
<p>commons-collections-3.1.jar<br>commons-fileupload-1.3.1.jar<br>commons-io-2.2.jar<br>commons-lang3-3.1.jar<br>commons-logging-1.1.3.jar</p>
</blockquote>
<h4 id="设置表单提交属性"><a href="#设置表单提交属性" class="headerlink" title="设置表单提交属性"></a>设置表单提交属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">上传文件&lt;br/&gt;</span><br><span class="line">&lt;s:form enctype=<span class="string">"multipart/form-data"</span> method=<span class="string">"post"</span> action=<span class="string">"uploads.action"</span>&gt;</span><br><span class="line">   	&lt;s:file name=<span class="string">"upload"</span>&gt;&lt;/s:file&gt;</span><br><span class="line">   	&lt;s:submit value=<span class="string">"上传"</span>&gt;&lt;/s:submit&gt;</span><br><span class="line">&lt;/s:form&gt;</span><br></pre></td></tr></table></figure>
<h4 id="编写处理上传的Action文件"><a href="#编写处理上传的Action文件" class="headerlink" title="编写处理上传的Action文件"></a>编写处理上传的Action文件</h4><blockquote>
<p>private File upload;<br>private String uploadContentType;<br>private String uploadFileName;</p>
<ul>
<li>upload是提交属性name，绝对要一致</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">private File upload;</span><br><span class="line">	public File <span class="function"><span class="title">getUpload</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> upload;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUpload(File upload) &#123;</span><br><span class="line">		this.upload = upload;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String <span class="function"><span class="title">getUploadContentType</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> uploadContentType;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUploadContentType(String uploadContentType) &#123;</span><br><span class="line">		this.uploadContentType = uploadContentType;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String <span class="function"><span class="title">getUploadFileName</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> uploadFileName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUploadFileName(String uploadFileName) &#123;</span><br><span class="line">		this.uploadFileName = uploadFileName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String <span class="function"><span class="title">getSavePath</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> savePath;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setSavePath(String savePath) &#123;</span><br><span class="line">		this.savePath = savePath;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private String uploadContentType;</span><br><span class="line">	private String uploadFileName;</span><br><span class="line">	</span><br><span class="line">	private String savePath;</span><br><span class="line">	</span><br><span class="line">	public String <span class="function"><span class="title">execute</span></span>()&#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			File destFile=new File(ServletActionContext.getRequest().getRealPath(savePath)+<span class="string">"\\"</span>+this.getUploadFileName());;</span><br><span class="line">			FileUtils.copyFile(upload, destFile);</span><br><span class="line">		&#125; catch (IOException e) &#123;</span><br><span class="line">			// TODO Auto-generated catch block</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="struts-xml处理"><a href="#struts-xml处理" class="headerlink" title="struts.xml处理"></a>struts.xml处理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 文件上传 --&gt;</span><br><span class="line">    	&lt;action name=<span class="string">"upload"</span> class=<span class="string">"cn.ssh.action.UploadAction"</span>&gt;</span><br><span class="line">    		&lt;!-- 给savePath手动赋值 --&gt;</span><br><span class="line">    		&lt;param name=<span class="string">"savePath"</span>&gt;/upload&lt;/param&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"success"</span>&gt;/upload.jsp&lt;/result&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"input"</span>&gt;/upload.jsp&lt;/result&gt;</span><br><span class="line">    		&lt;interceptor-ref name=<span class="string">"fileUpload"</span>&gt;</span><br><span class="line">    			&lt;!-- 设置文件大小 --&gt;</span><br><span class="line">    			&lt;param name=<span class="string">"maximumSize"</span>&gt;1024000&lt;/param&gt;</span><br><span class="line">    			&lt;!-- 设置文件类型 --&gt;</span><br><span class="line">    			&lt;param name=<span class="string">"allowedTypes"</span>&gt;image/jpeg,image/gif,image/png&lt;/param&gt;</span><br><span class="line">    		&lt;/interceptor-ref&gt;</span><br><span class="line">    		&lt;interceptor-ref name=<span class="string">"defaultStack"</span>&gt;&lt;/interceptor-ref&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br></pre></td></tr></table></figure>
<h4 id="进行显示"><a href="#进行显示" class="headerlink" title="进行显示"></a>进行显示</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img alt=<span class="string">""</span> src=<span class="string">"upload/&lt;s:property value='uploadFileName'/&gt;"</span>&gt;</span><br></pre></td></tr></table></figure>
<h3 id="多文件上传"><a href="#多文件上传" class="headerlink" title="多文件上传"></a>多文件上传</h3><blockquote>
<ul>
<li>多个file控件，name属性相同</li>
<li>Action的修改，将三个属性的类型修改成数组</li>
</ul>
</blockquote>
<hr>
<blockquote>
<p><strong>创建多文件上传Action</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">public class ManyUploadAction extends ActionSupport &#123;</span><br><span class="line">	</span><br><span class="line">	private File[] upload;</span><br><span class="line">	</span><br><span class="line">	private String[] uploadContentType;</span><br><span class="line">	</span><br><span class="line">	private String[] uploadFileName;</span><br><span class="line">	</span><br><span class="line">	private String savePath;</span><br><span class="line"></span><br><span class="line">	public File[] <span class="function"><span class="title">getUpload</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> upload;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUpload(File[] upload) &#123;</span><br><span class="line">		this.upload = upload;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String[] <span class="function"><span class="title">getUploadContentType</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> uploadContentType;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUploadContentType(String[] uploadContentType) &#123;</span><br><span class="line">		this.uploadContentType = uploadContentType;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String[] <span class="function"><span class="title">getUploadFileName</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> uploadFileName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUploadFileName(String[] uploadFileName) &#123;</span><br><span class="line">		this.uploadFileName = uploadFileName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String <span class="function"><span class="title">getSavePath</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> savePath;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setSavePath(String savePath) &#123;</span><br><span class="line">		this.savePath = savePath;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public String <span class="function"><span class="title">execute</span></span>()&#123;</span><br><span class="line">		int i;</span><br><span class="line">		<span class="keyword">for</span>(i=0;i&lt;3;i++)&#123;</span><br><span class="line">			File file=upload[i];</span><br><span class="line">			File destFile=new File(ServletActionContext.getRequest().getRealPath(savePath)+<span class="string">"\\"</span>+uploadFileName[i]);</span><br><span class="line">			try &#123;</span><br><span class="line">				FileUtils.copyFile(file, destFile);</span><br><span class="line">			&#125; catch (IOException e) &#123;</span><br><span class="line">				// TODO Auto-generated catch block</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p><strong>struts.xml配置</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 多文件上传 --&gt;</span><br><span class="line">    	&lt;action name=<span class="string">"uploads"</span> class=<span class="string">"cn.ssh.action.ManyUploadAction"</span>&gt;</span><br><span class="line">    		&lt;!-- 给savePath手动赋值 --&gt;</span><br><span class="line">    		&lt;param name=<span class="string">"savePath"</span>&gt;/upload&lt;/param&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"success"</span>&gt;/upload.jsp&lt;/result&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"input"</span>&gt;/upload.jsp&lt;/result&gt;</span><br><span class="line">    		&lt;interceptor-ref name=<span class="string">"fileUpload"</span>&gt;</span><br><span class="line">    			&lt;param name=<span class="string">"maximumSize"</span>&gt;1024000&lt;/param&gt;</span><br><span class="line">    			&lt;param name=<span class="string">"allowedTypes"</span>&gt;image/jpeg,image/gif,image/png&lt;/param&gt;</span><br><span class="line">    		&lt;/interceptor-ref&gt;</span><br><span class="line">    		&lt;interceptor-ref name=<span class="string">"defaultStack"</span>&gt;&lt;/interceptor-ref&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p><strong>显示文件</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:iterator value=<span class="string">"uploadFileName"</span>&gt;</span><br><span class="line">   	&lt;s:property/&gt;</span><br><span class="line">   		&lt;img alt=<span class="string">""</span> src=<span class="string">"upload/&lt;s:property/&gt;"</span>&gt;</span><br><span class="line">   	&lt;/s:iterator&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h3><blockquote>
<p><strong>Action</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">public class FileDownAction extends ActionSupport &#123;</span><br><span class="line">	</span><br><span class="line">	//读取下载文件的目录</span><br><span class="line">	private String inputPath;</span><br><span class="line">	</span><br><span class="line">	//下载文件的文件名</span><br><span class="line">	private String fileName;</span><br><span class="line">	</span><br><span class="line">	//读取下载文件的输入流</span><br><span class="line">	private InputStream inputStream;</span><br><span class="line">	</span><br><span class="line">	//下载文件的类型</span><br><span class="line">	private String conetntType;</span><br><span class="line"></span><br><span class="line">	public String <span class="function"><span class="title">getInputPath</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> inputPath;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setInputPath(String inputPath) &#123;</span><br><span class="line">		this.inputPath = inputPath;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String <span class="function"><span class="title">getFileName</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> fileName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setFileName(String fileName) &#123;</span><br><span class="line">		this.fileName = fileName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public InputStream getInputStream() throws FileNotFoundException &#123;</span><br><span class="line">		String path=ServletActionContext.getServletContext().getRealPath(inputPath);</span><br><span class="line">		InputStream <span class="keyword">in</span>=ServletActionContext.getServletContext().getResourceAsStream(inputPath);</span><br><span class="line">		System.out.println(<span class="string">"--------"</span>+<span class="keyword">in</span>);</span><br><span class="line">		<span class="built_in">return</span> new BufferedInputStream(new FileInputStream(path+<span class="string">"\\"</span>+fileName));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setInputStream(InputStream inputStream) &#123;</span><br><span class="line">		this.inputStream = inputStream;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String <span class="function"><span class="title">getConetntType</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> conetntType;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setConetntType(String conetntType) &#123;</span><br><span class="line">		this.conetntType = conetntType;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public String <span class="function"><span class="title">execute</span></span>()&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>struts.xml</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 文件下载 --&gt;</span><br><span class="line">    	&lt;action name=<span class="string">"downFile"</span> class=<span class="string">"cn.ssh.action.FileDownAction"</span> method=<span class="string">"execute"</span>&gt;</span><br><span class="line">    		&lt;param name=<span class="string">"inputPath"</span>&gt;/upload&lt;/param&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"success"</span> <span class="built_in">type</span>=<span class="string">"stream"</span>&gt;</span><br><span class="line">    			&lt;param name=<span class="string">"inputName"</span>&gt;inputStream&lt;/param&gt;</span><br><span class="line">                 &lt;param name=<span class="string">"contentType"</span>&gt;application/octet-stream&lt;/param&gt;</span><br><span class="line">                 &lt;param name=<span class="string">"contentDisposition"</span>&gt;attachment;filename=<span class="string">"<span class="variable">$&#123;fileName&#125;</span>&lt;/param&gt;</span></span><br><span class="line"><span class="string">                 &lt;param name="</span>bufferSize<span class="string">"&gt;4096&lt;/param&gt;</span></span><br><span class="line"><span class="string">    		&lt;/result&gt;</span></span><br><span class="line"><span class="string">			&lt;result name="</span>input<span class="string">"&gt;/downld.jsp&lt;/result&gt;</span></span><br><span class="line"><span class="string">		&lt;/action&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>下载页面</p>
<ul>
<li>前提项目目录下必须拥有&lt;param name=”inputPath”&gt;/upload&lt;/param&gt;设置的路径以及相应的文件名<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">"downFile.action?fileName=obt.jpg"</span>&gt;下载&lt;/a&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/25/拦截器/" data-id="cjrabl6rg003kvkdqttcwpd8m" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-OGNL" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/24/OGNL/" class="article-date">
  <time datetime="2018-11-24T14:27:47.000Z" itemprop="datePublished">2018-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/24/OGNL/">OGNL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>OGNL介绍<br>开源项目，取代Java脚本，简化数据访问，和EL同属于表达式语言，但功能更强大</p>
<blockquote>
<p>表达式语言：将表单或Struts2标签与特定的Java数据绑定起来，用来将数据移入，移除框架<br>类型转换：数据进入和流出框架，在页面数据的字符转类型和Java数据类型之间进行转换</p>
</blockquote>
</blockquote>
<blockquote>
<p>值栈：由struts2框架创建的存储区域，Action的实例会被存放在值栈中</p>
<blockquote>
<p>OGNL访问值栈：按照从上到下的顺序，靠近栈顶的同名属性会被读取</p>
</blockquote>
</blockquote>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><blockquote>
<p>Action创建<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private Double[] number;</span><br><span class="line">public Double[] <span class="function"><span class="title">getNumber</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> number;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">public void setNumber(Double[] number) &#123;</span><br><span class="line">		this.number = number;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">public String <span class="function"><span class="title">execute</span></span>()&#123;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>struts.xml配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;action name=<span class="string">"showArray"</span> class=<span class="string">"cn.ssh.action.ArrayDateTransferAction"</span> method=<span class="string">"execute"</span>&gt;</span><br><span class="line">	&lt;result&gt;/show.jsp&lt;/result&gt;</span><br><span class="line">	&lt;result name=<span class="string">"input"</span>&gt;/show.jsp&lt;/result&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>JSP页面（提交数组）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:form action=<span class="string">"/ognl/showArray.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">   	&lt;s:textfield name=<span class="string">"number"</span> label=<span class="string">"number1"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	&lt;s:textfield name=<span class="string">"number"</span> label=<span class="string">"number2"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	&lt;s:textfield name=<span class="string">"number"</span> label=<span class="string">"number3"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	</span><br><span class="line">   	&lt;s:submit value=<span class="string">"提交"</span>&gt;&lt;/s:submit&gt;</span><br><span class="line">   &lt;/s:form&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>JSP页面（显示数组）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">显示数组</span><br><span class="line">   &lt;s:iterator value=<span class="string">"number"</span>&gt;</span><br><span class="line">   	&lt;s:property/&gt;</span><br><span class="line">   &lt;/s:iterator&gt;</span><br><span class="line">   &lt;s:property value=<span class="string">"number[0]"</span>/&gt; //按下标显示</span><br><span class="line">   &lt;s:property value=<span class="string">"number.length"</span>/&gt; //获取长度</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h4><blockquote>
<p>Action创建<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private List&lt;String&gt; hobbies;</span><br><span class="line">public List&lt;String&gt; <span class="function"><span class="title">getHobbies</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> hobbies;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">public void setHobbies(List&lt;String&gt; hobbies) &#123;</span><br><span class="line">		this.hobbies = hobbies;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">public String <span class="function"><span class="title">execute</span></span>()&#123;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>struts.xml配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;action name=<span class="string">"showArray"</span> class=<span class="string">"cn.ssh.action.ArrayDateTransferAction"</span> method=<span class="string">"execute"</span>&gt;</span><br><span class="line">	&lt;result&gt;/show.jsp&lt;/result&gt;</span><br><span class="line">	&lt;result name=<span class="string">"input"</span>&gt;/show.jsp&lt;/result&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>JSP页面（提交集合）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:form action=<span class="string">"/ognl/showArray.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">   	&lt;s:textfield name=<span class="string">"hobbies"</span> label=<span class="string">"爱好"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	&lt;s:textfield name=<span class="string">"hobbies"</span> label=<span class="string">"爱好"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	&lt;s:textfield name=<span class="string">"hobbies"</span> label=<span class="string">"爱好"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	</span><br><span class="line">   	&lt;s:submit value=<span class="string">"提交"</span>&gt;&lt;/s:submit&gt;</span><br><span class="line">   &lt;/s:form&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>JSP页面（显示集合）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">显示集合</span><br><span class="line">   &lt;s:iterator value=<span class="string">"hobbies"</span>&gt;</span><br><span class="line">   	&lt;s:property/&gt;</span><br><span class="line">   &lt;/s:iterator&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="集合包装类型"><a href="#集合包装类型" class="headerlink" title="集合包装类型"></a>集合包装类型</h4><blockquote>
<p>Action创建<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private List&lt;User&gt; users;</span><br><span class="line">public List&lt;User&gt; <span class="function"><span class="title">getUsers</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> users;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">public void setUsers(List&lt;User&gt; users) &#123;</span><br><span class="line">		this.users = users;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">public String <span class="function"><span class="title">execute</span></span>()&#123;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>struts.xml配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;action name=<span class="string">"showArray"</span> class=<span class="string">"cn.ssh.action.ArrayDateTransferAction"</span> method=<span class="string">"execute"</span>&gt;</span><br><span class="line">	&lt;result&gt;/show.jsp&lt;/result&gt;</span><br><span class="line">	&lt;result name=<span class="string">"input"</span>&gt;/show.jsp&lt;/result&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>JSP页面（提交集合包装类型）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:form action=<span class="string">"/ognl/showArray.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">   	&lt;s:textfield name=<span class="string">"users[0].name"</span> label=<span class="string">"用户名1"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	&lt;s:textfield name=<span class="string">"users[1].name"</span> label=<span class="string">"用户名2"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	&lt;s:textfield name=<span class="string">"users[2].name"</span> label=<span class="string">"用户名3"</span>&gt;&lt;/s:textfield&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	</span><br><span class="line">   	&lt;s:submit value=<span class="string">"提交"</span>&gt;&lt;/s:submit&gt;</span><br><span class="line">   &lt;/s:form&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>JSP页面（显示集合包装类型）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">显示list User &lt;%-- 值栈的user对象 &lt;s:property value=<span class="string">"#user.name"</span>/&gt; --%&gt;</span><br><span class="line">  &lt;s:iterator value=<span class="string">"users"</span> id=<span class="string">"user"</span>&gt;</span><br><span class="line">  	&lt;s:property value=<span class="string">"name"</span>/&gt;</span><br><span class="line">  &lt;/s:iterator&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="日期类型"><a href="#日期类型" class="headerlink" title="日期类型"></a>日期类型</h4><blockquote>
<p>Action创建<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private Date timeDate;</span><br><span class="line">public Date <span class="function"><span class="title">getTimeDate</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> timeDate;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">public void setTimeDate(Date timeDate) &#123;</span><br><span class="line">		this.timeDate = timeDate;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">public String <span class="function"><span class="title">execute</span></span>()&#123;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>struts.xml配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;action name=<span class="string">"showArray"</span> class=<span class="string">"cn.ssh.action.ArrayDateTransferAction"</span> method=<span class="string">"execute"</span>&gt;</span><br><span class="line">	&lt;result&gt;/show.jsp&lt;/result&gt;</span><br><span class="line">	&lt;result name=<span class="string">"input"</span>&gt;/show.jsp&lt;/result&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>JSP页面（提交日期类型）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:form action=<span class="string">"/ognl/showArray.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">   	s:textfield name=<span class="string">"timeDate"</span> label=<span class="string">"时间"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">   	</span><br><span class="line">   	&lt;s:submit value=<span class="string">"提交"</span>&gt;&lt;/s:submit&gt;</span><br><span class="line">   &lt;/s:form&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>JSP页面（显示日期类型）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">显示时间</span><br><span class="line"> &lt;s:date name=<span class="string">"timeDate"</span> format=<span class="string">"yyyy/MM/dd"</span>/&gt;</span><br><span class="line"> &lt;s:property value=<span class="string">"timeDate"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h5 id="创建自定义类型转换器（时间类型）"><a href="#创建自定义类型转换器（时间类型）" class="headerlink" title="创建自定义类型转换器（时间类型）"></a>创建自定义类型转换器（时间类型）</h5><blockquote>
<p>创建 自定义转换类，继承StrutsTypeConverter类<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package cn.ssh.converter;</span><br><span class="line"></span><br><span class="line">import java.text.DateFormat;</span><br><span class="line">import java.text.ParseException;</span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">import org.apache.struts2.util.StrutsTypeConverter;</span><br><span class="line"></span><br><span class="line">import com.opensymphony.xwork2.conversion.TypeConversionException;</span><br><span class="line"></span><br><span class="line">public class DateConverter extends StrutsTypeConverter &#123;</span><br><span class="line"></span><br><span class="line">	private final DateFormat[] dfs=&#123;</span><br><span class="line">			new SimpleDateFormat(<span class="string">"yyyy年MM月dd日"</span>),</span><br><span class="line">			new SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>),</span><br><span class="line">			new SimpleDateFormat(<span class="string">"MM/dd/yy"</span>),</span><br><span class="line">			new SimpleDateFormat(<span class="string">"yyyy.MM.dd"</span>),</span><br><span class="line">			new SimpleDateFormat(<span class="string">"yyyyMMdd"</span>),</span><br><span class="line">			new SimpleDateFormat(<span class="string">"yyyy/MM/dd"</span>)</span><br><span class="line">	&#125;;</span><br><span class="line">	</span><br><span class="line">	@Override</span><br><span class="line">	public Object convertFromString(Map context, String[] values, Class toType) &#123;		</span><br><span class="line">		String dateStr=values[0];</span><br><span class="line">		<span class="keyword">for</span>(DateFormat df: dfs)&#123;</span><br><span class="line">			try &#123;</span><br><span class="line">				<span class="built_in">return</span> df.parse(dateStr);</span><br><span class="line">			&#125; catch (ParseException e) &#123;				</span><br><span class="line">				<span class="built_in">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		throw new TypeConversionException();//异常处理实现输出</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    //输出时按照yyyy-MM-dd格式</span><br><span class="line">	@Override</span><br><span class="line">	public String convertToString(Map context, Object object) &#123;</span><br><span class="line">		Date date=(Date)object;</span><br><span class="line">		<span class="built_in">return</span> new SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>).format(date);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h5 id="全局类型转换器"><a href="#全局类型转换器" class="headerlink" title="全局类型转换器"></a>全局类型转换器</h5><blockquote>
<p>在src目录下创建 xwork-conversion.properties ，添加<br>转换类全名=类型转换器类全名<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.Date=cn.ssh.converter.DateConverter</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h5 id="应用于特定类的类型转换器"><a href="#应用于特定类的类型转换器" class="headerlink" title="应用于特定类的类型转换器"></a>应用于特定类的类型转换器</h5><blockquote>
<p>在特定类的相同目录下创建一个className-conversion.properties的属性文件<br>特定类的属性名=类型转换器类全名<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timeDate=cn.ssh.converter.DateConverter</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h5 id="处理类型转换错误"><a href="#处理类型转换错误" class="headerlink" title="处理类型转换错误"></a>处理类型转换错误</h5><blockquote>
<p>向用户输出类型转换错误的前提条件</p>
<blockquote>
<ul>
<li>启动StrutsConversionErrorInterCeptor拦截器（拦截器已经包含在defaultStack拦截器栈中）</li>
<li>Action要继承ActionSupport类</li>
<li>配置input结果映射</li>
<li>页面使用struts2表单标签或&it;s:fielderror标签</li>
</ul>
</blockquote>
</blockquote>
<hr>
<blockquote>
<p>实现<br>在struts.xml中指定资源文件的基名<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;constant name=<span class="string">"struts.custom.i18n.resources"</span> value=<span class="string">"message"</span>&gt;&lt;/constant&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>在src目录下创建资源文件message.properties并修改键值<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xwork.error.action.execution=Error during Action invocation</span><br><span class="line">xwork.exception.missing-action=There is no Action mapped <span class="keyword">for</span> action name &#123;0&#125;.</span><br><span class="line">xwork.exception.missing-package-action=There is no Action mapped <span class="keyword">for</span> namespace &#123;0&#125; and action name &#123;1&#125;.</span><br><span class="line">xwork.default.invalid.fieldvalue=\u5B57\u6BB5 <span class="string">"&#123;0&#125;"</span>\u65E0\u6548.</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h5 id="制定特定字段的类型转换错误"><a href="#制定特定字段的类型转换错误" class="headerlink" title="制定特定字段的类型转换错误"></a>制定特定字段的类型转换错误</h5><blockquote>
<p>在Action范围的资源文件中添加i18n消息键invalid.fieldvalue.字段名<br>在Action包下创建Action名.properties,并指定键值<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invalid.fieldvalue.timeDate=\u65E5\u671F\u8F6C\u6362\u9519\u88EF</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><strong>需要把全局消息关闭</strong></p>
<h3 id="常用的OGNL访问操作"><a href="#常用的OGNL访问操作" class="headerlink" title="常用的OGNL访问操作"></a>常用的OGNL访问操作</h3><h4 id="访问JavaBean"><a href="#访问JavaBean" class="headerlink" title="访问JavaBean"></a>访问JavaBean</h4><blockquote>
<p>Bean的类型必须遵循JavaBean规范，必须具有无参构造<br>setter/getter方法符合JavaBean规范</p>
</blockquote>
<hr>
<blockquote>
<p>POJO(User类)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&gt;public class User &#123;</span><br><span class="line">	</span><br><span class="line">	private String name;</span><br><span class="line">	private int age;</span><br><span class="line">	public String <span class="function"><span class="title">getName</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setName(String name) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	public int <span class="function"><span class="title">getAge</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setAge(int age) &#123;</span><br><span class="line">		this.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public <span class="function"><span class="title">User</span></span>()&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	private Address address;</span><br><span class="line">	public Address <span class="function"><span class="title">getAddress</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> address;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setAddress(Address address) &#123;</span><br><span class="line">		this.address = address;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>POJO(Address类)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class Address &#123;</span><br><span class="line">	</span><br><span class="line">	private String country;</span><br><span class="line">	</span><br><span class="line">	private String city;</span><br><span class="line">	</span><br><span class="line">	private String street;</span><br><span class="line">	</span><br><span class="line">	public String <span class="function"><span class="title">getCountry</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> country;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setCountry(String country) &#123;</span><br><span class="line">		this.country = country;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String <span class="function"><span class="title">getCity</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> city;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setCity(String city) &#123;</span><br><span class="line">		this.city = city;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String <span class="function"><span class="title">getStreet</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> street;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setStreet(String street) &#123;</span><br><span class="line">		this.street = street;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public <span class="function"><span class="title">Address</span></span>()&#123;&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>Action<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">private User user;</span><br><span class="line">	private String message;</span><br><span class="line">	public User <span class="function"><span class="title">getUser</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> user;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setUser(User user) &#123;</span><br><span class="line">		this.user = user;</span><br><span class="line">	&#125;</span><br><span class="line">	public String <span class="function"><span class="title">getMessage</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> message;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setMessage(String message) &#123;</span><br><span class="line">		this.message = message;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public String <span class="function"><span class="title">execute</span></span>()&#123;</span><br><span class="line">		</span><br><span class="line">		user=new User();</span><br><span class="line">		user.setName(<span class="string">"樊可"</span>);</span><br><span class="line">		user.setAge(18);</span><br><span class="line">		</span><br><span class="line">		Address address=new Address();</span><br><span class="line">		address.setCountry(<span class="string">"中国"</span>);</span><br><span class="line">		address.setCity(<span class="string">"永济"</span>);</span><br><span class="line">		address.setStreet(<span class="string">"城西"</span>);</span><br><span class="line">		user.setAddress(address);</span><br><span class="line">		this.message=<span class="string">"展示原始类型和包装类型"</span>;</span><br><span class="line">		//解耦方式获取session</span><br><span class="line">		Map&lt;String, Object&gt;session=null;</span><br><span class="line">		session=ActionContext.getContext().getSession();</span><br><span class="line">		session.put(<span class="string">"loginUser"</span>, <span class="string">"樊可"</span>);</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>struts.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;action name=<span class="string">"showOAJ"</span> class=<span class="string">"cn.ssh.action.ShowOriginalAndJavaBeanAction"</span> method=<span class="string">"execute"</span>&gt;</span><br><span class="line">	&lt;result&gt;/show.jsp&lt;/result&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>JSP页面显示<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">信息:&lt;s:property value=<span class="string">"message"</span>/&gt;</span><br><span class="line">  用户名:&lt;s:property value=<span class="string">"user.name"</span>/&gt;</span><br><span class="line">  &lt;hr/&gt;</span><br><span class="line">   国家:&lt;s:property value=<span class="string">"user.address.country"</span>/&gt;</span><br><span class="line">  &lt;hr/&gt;</span><br><span class="line">   城市:&lt;s:property value=<span class="string">"user.address.city"</span>/&gt;</span><br><span class="line">  &lt;hr/&gt;</span><br><span class="line">   街道:&lt;s:property value=<span class="string">"user.address.street"</span>/&gt;</span><br><span class="line">  &lt;hr/&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="访问集合对象"><a href="#访问集合对象" class="headerlink" title="访问集合对象"></a>访问集合对象</h4><blockquote>
<ul>
<li>可以使用属性名[index]的方式访问，列表，数组</li>
<li>可以使用属性名[key]的方式访问,map对象</li>
<li>使用size或length获取集合长度</li>
</ul>
</blockquote>
<hr>
<blockquote>
<p>定义列表<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:<span class="built_in">set</span> name=<span class="string">"userList"</span> value=<span class="string">"&#123;'樊可','李钰洋','憨八龟'&#125;"</span>&gt;&lt;/s:<span class="built_in">set</span>&gt;</span><br><span class="line">&lt;s:property value=<span class="string">"#userList[1]"</span>/&gt;</span><br><span class="line">&lt;s:property value=<span class="string">"#userList.size"</span>/&gt;</span><br><span class="line">&lt;hr/&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>定义map对象<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:<span class="built_in">set</span> name=<span class="string">"maps"</span> value=<span class="string">"#&#123;'cn':'China','us':'United States'&#125;"</span>/&gt;</span><br><span class="line">&lt;s:property value=<span class="string">"#maps.cn"</span>/&gt;</span><br><span class="line">&lt;s:property value=<span class="string">"#maps['cn']"</span>/&gt;</span><br><span class="line">&lt;hr/&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>使用struts标签取session<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//使用struts标签取session</span><br><span class="line">&lt;s:property value=<span class="string">"#session.loginUser"</span>/&gt;</span><br><span class="line">//普通方法</span><br><span class="line"><span class="variable">$&#123;sessionScope.loginUser&#125;</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="使用OGNL访问ActionContext"><a href="#使用OGNL访问ActionContext" class="headerlink" title="使用OGNL访问ActionContext"></a>使用OGNL访问ActionContext</h4><blockquote>
<p>值栈中内容可以直接访问，访问非值栈对象需要添加#前缀</p>
</blockquote>
<table>
<thead>
<tr>
<th>非值栈对象</th>
<th>访问方式</th>
<th>等价访问方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>application</td>
<td>#application.username<br>#application[‘username’]</td>
<td>application.getAttrbute(“username”)</td>
</tr>
<tr>
<td>session</td>
<td>#session.username<br>#session[‘username’]</td>
<td>session.getAttrbute(“username”)</td>
</tr>
<tr>
<td>request</td>
<td>#request.username<br>#request[‘username’]</td>
<td>request.getAttrbute(“username”)</td>
</tr>
<tr>
<td>parameters</td>
<td>#parameters.username<br>#parameters[‘username’]</td>
<td>request.getParameterValues(“username”)</td>
</tr>
<tr>
<td>attr</td>
<td>#attr.username<br>#attr[‘username’]</td>
<td>按此顺序查找<br>pageContext-&gt;request-&gt;session-&gt;application</td>
</tr>
</tbody>
</table>
<hr>
<blockquote>
<p>栗子<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">访问非值栈对象</span><br><span class="line">   &lt;s:<span class="built_in">set</span> name=<span class="string">"age"</span> value=<span class="string">"10"</span> scope=<span class="string">"request"</span>/&gt;</span><br><span class="line">   &lt;s:<span class="built_in">set</span> name=<span class="string">"username"</span> value=<span class="string">"'李钰洋'"</span> scope=<span class="string">"session"</span>/&gt;</span><br><span class="line">   &lt;s:<span class="built_in">set</span> name=<span class="string">"count"</span> value=<span class="string">"5"</span> scope=<span class="string">"application"</span>/&gt;</span><br><span class="line">   <span class="comment">#request.age:&lt;s:property value="#request.age"/&gt;&lt;br/&gt;</span></span><br><span class="line">   <span class="comment">#session.username:&lt;s:property value="#session.username"/&gt;&lt;br/&gt;</span></span><br><span class="line">   <span class="comment">#application.count:&lt;s:property value="#application.count"/&gt;&lt;br/&gt;</span></span><br><span class="line">   <span class="comment">#arrt.count:&lt;s:property value="#attr.count"/&gt;&lt;br/&gt;</span></span><br><span class="line">   &lt;s:<span class="built_in">set</span> name=<span class="string">"country1"</span> value=<span class="string">"China"</span> /&gt;</span><br><span class="line">   &lt;s:<span class="built_in">set</span> name=<span class="string">"country2"</span> value=<span class="string">"'China'"</span> /&gt;</span><br><span class="line">   <span class="comment">#country1:&lt;s:property value="#country1"/&gt;&lt;br/&gt;</span></span><br><span class="line">   <span class="comment">#country2:&lt;s:property value="#country2"/&gt;&lt;br/&gt;</span></span><br><span class="line">   <span class="comment">#request.country2:&lt;s:property value="#request.country2"/&gt;&lt;br/&gt;</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>结果<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">访问非值栈对象 </span><br><span class="line"><span class="comment">#request.age:10</span></span><br><span class="line"><span class="comment">#session.username:李钰洋</span></span><br><span class="line"><span class="comment">#application.count:5</span></span><br><span class="line"><span class="comment">#arrt.count:5</span></span><br><span class="line"><span class="comment">#country1:</span></span><br><span class="line"><span class="comment">#country2:China</span></span><br><span class="line"><span class="comment">#request.country2:China</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="lt-s-debug-gt-查看数据"><a href="#lt-s-debug-gt-查看数据" class="headerlink" title="&lt;s:debug&gt;查看数据"></a>&lt;s:debug&gt;查看数据</h4><blockquote>
<p>ActionContext的组成</p>
<blockquote>
<ul>
<li>值栈 -ValueStack</li>
<li>非值栈-Stack Context</li>
</ul>
</blockquote>
</blockquote>
<h4 id="究竟是在访问值栈还是非值栈"><a href="#究竟是在访问值栈还是非值栈" class="headerlink" title="究竟是在访问值栈还是非值栈"></a>究竟是在访问值栈还是非值栈</h4><blockquote>
<p>iterator迭代规则</p>
<blockquote>
<ul>
<li>默认是迭代元素被压入值栈</li>
<li>使用id后元素成为非值栈对象</li>
</ul>
</blockquote>
</blockquote>
<h3 id="struts2标签的属性类型"><a href="#struts2标签的属性类型" class="headerlink" title="struts2标签的属性类型"></a>struts2标签的属性类型</h3><blockquote>
<p>对象类型<br>属性值作为OGNL表达式进行计算<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:<span class="built_in">set</span> name=<span class="string">"myurl"</span> value=<span class="string">"'http://fankekeke.club'"</span>/&gt;</span><br><span class="line">&lt;s:property value=<span class="string">"#myurl"</span>/&gt;</span><br><span class="line">//显示http://fankekeke.club</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>字符串类型<br>属性值将直接输出，应使用%{…}再次计算，如url标签<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:<span class="built_in">set</span> name=<span class="string">"myurl"</span> value=<span class="string">"'http://fankekeke.club'"</span>/&gt;</span><br><span class="line">&lt;s:url value=<span class="string">"#myurl"</span>/&gt;</span><br><span class="line">//显示<span class="comment">#myurl</span></span><br><span class="line">&lt;s:url value=<span class="string">"%&#123;#myurl&#125;"</span>/&gt;</span><br><span class="line">//显示http://fankekeke.club</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="URL标签"><a href="#URL标签" class="headerlink" title="URL标签"></a>URL标签</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:url value=<span class="string">"url"</span>/&gt;</span><br><span class="line">    &lt;s:param name=<span class="string">"parname"</span> value=<span class="string">"parvalue"</span>/&gt;</span><br><span class="line">&lt;/s:url&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>value属性：表示生成url的地址</li>
<li>&lt;s:param/&gt;：表示需要传递的参数信息<blockquote>
<ul>
<li>name属性：表示传递的参数名称</li>
<li>value：表示传递参数的值</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/24/OGNL/" data-id="cjrabl6n8000nvkdqvh8klhh4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java工具与中间件/">Java工具与中间件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Oracle/">Oracle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSH/">SSH</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSM/">SSM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringData/">SpringData</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/消息队列/">消息队列</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/面试题/">面试题</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/">API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分享/">分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/导航/">导航</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/API/" style="font-size: 10px;">API</a> <a href="/tags/分享/" style="font-size: 20px;">分享</a> <a href="/tags/导航/" style="font-size: 10px;">导航</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/21/Rabbit交换器/">Rabbit交换器</a>
          </li>
        
          <li>
            <a href="/2019/01/16/监控SpringBoot健康状况/">监控SpringBoot健康状况</a>
          </li>
        
          <li>
            <a href="/2019/01/14/Java获取当前计算机信息/">Java获取当前计算机信息</a>
          </li>
        
          <li>
            <a href="/2019/01/14/三网短信验证码API/">三网短信验证码API</a>
          </li>
        
          <li>
            <a href="/2019/01/11/Quartz/">Quartz</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 樊可<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>