<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>æ‚²ä¼¤çš„æ©˜å­æ ‘</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ä¸ç›¸ä¿¡è‡ªå·±çš„äººæ²¡æœ‰åŠªåŠ›çš„ä»·å€¼ã€‚   -- è¿ˆç‰¹å‡¯">
<meta name="keywords" content="æ‚²ä¼¤çš„æ©˜å­æ ‘">
<meta property="og:type" content="website">
<meta property="og:title" content="æ‚²ä¼¤çš„æ©˜å­æ ‘">
<meta property="og:url" content="http://fankekeke.club/page/5/index.html">
<meta property="og:site_name" content="æ‚²ä¼¤çš„æ©˜å­æ ‘">
<meta property="og:description" content="ä¸ç›¸ä¿¡è‡ªå·±çš„äººæ²¡æœ‰åŠªåŠ›çš„ä»·å€¼ã€‚   -- è¿ˆç‰¹å‡¯">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ‚²ä¼¤çš„æ©˜å­æ ‘">
<meta name="twitter:description" content="ä¸ç›¸ä¿¡è‡ªå·±çš„äººæ²¡æœ‰åŠªåŠ›çš„ä»·å€¼ã€‚   -- è¿ˆç‰¹å‡¯">
  
    <link rel="alternate" href="/atom.xml" title="æ‚²ä¼¤çš„æ©˜å­æ ‘" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">æ‚²ä¼¤çš„æ©˜å­æ ‘</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://fankekeke.club"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-SSHæ¡†æ¶æ­å»º" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/24/SSHæ¡†æ¶æ­å»º/" class="article-date">
  <time datetime="2018-11-24T01:01:49.000Z" itemprop="datePublished">2018-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/24/SSHæ¡†æ¶æ­å»º/">SSHæ¡†æ¶æ­å»º</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>SSHæ¶æ„</p>
<blockquote>
<ul>
<li>Struts2 + Spring + Hibernate<br>ä»¥Springä½œä¸ºæ¡†æ¶æ ¸å¿ƒï¼Œæ•°æ®æŒä¹…åŒ–ä½¿ç”¨Hibernateå®Œæˆï¼Œè¡¨ç°å±‚ä½¿ç”¨Struts2</li>
<li>Springæä¾›å¯¹è±¡ç®¡ç†ï¼Œé¢å‘åˆ‡é¢ç­‰ä½¿ç”¨åŠŸèƒ½</li>
<li>é€šè¿‡Springæä¾›çš„æœåŠ¡ç®€åŒ–ç¼–ç ï¼Œé™ä½å¼€å‘éš¾åº¦ï¼Œæé«˜å¼€å‘æ•ˆç‡</li>
</ul>
</blockquote>
</blockquote>
<h3 id="sshæ¡†æ¶æ­å»º"><a href="#sshæ¡†æ¶æ­å»º" class="headerlink" title="sshæ¡†æ¶æ­å»º"></a>sshæ¡†æ¶æ­å»º</h3><blockquote>
<ul>
<li>æ·»åŠ æ‰€éœ€çš„jaræ–‡ä»¶</li>
<li>åœ¨Springä¸­é…ç½®æ•°æ®æºå’Œä¼šè¯å·¥å‚</li>
<li>å®ç°å¹¶é…ç½®dao</li>
<li>å®ç°å¹¶é…ç½®service</li>
<li>ä¸ºä¸šåŠ¡å±‚æ·»åŠ äº‹åŠ¡ç®¡ç†</li>
<li>å®ç°å¹¶é…ç½®action</li>
<li>åˆ›å»ºjspæµ‹è¯•é¡µé¢</li>
</ul>
</blockquote>
<h3 id="pojoæŒä¹…åŒ–ç±»çš„æ˜ å°„"><a href="#pojoæŒä¹…åŒ–ç±»çš„æ˜ å°„" class="headerlink" title="pojoæŒä¹…åŒ–ç±»çš„æ˜ å°„"></a>pojoæŒä¹…åŒ–ç±»çš„æ˜ å°„</h3><blockquote>
<p>ç•¥</p>
</blockquote>
<hr>
<h3 id="ä¸€ä¸ªæ™®é€šçš„log4jæ–‡ä»¶"><a href="#ä¸€ä¸ªæ™®é€šçš„log4jæ–‡ä»¶" class="headerlink" title="ä¸€ä¸ªæ™®é€šçš„log4jæ–‡ä»¶"></a>ä¸€ä¸ªæ™®é€šçš„log4jæ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Log4J Settings for log4j 1.2.x (via jakarta-commons-logging)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The five logging levels used by Log are (in order):</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   1. DEBUG (the least serious)</span></span><br><span class="line"><span class="comment">#   2. INFO</span></span><br><span class="line"><span class="comment">#   3. WARN</span></span><br><span class="line"><span class="comment">#   4. ERROR</span></span><br><span class="line"><span class="comment">#   5. FATAL (the most serious)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set root logger level to WARN and append to stdout</span></span><br><span class="line">log4j.rootLogger=DEBUG, stdout</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.Target=System.out</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pattern to output the caller's file name and line number.</span></span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%d %5p (%c:%L) - %m%n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print only messages of level ERROR or above in the package noModule.</span></span><br><span class="line">log4j.logger.noModule=FATAL</span><br><span class="line"></span><br><span class="line">log4j.logger.com.opensymphony.xwork2=ERROR</span><br><span class="line">log4j.logger.org.apache.struts2=ERROR</span><br><span class="line">log4j.logger.freemarker=ERROR</span><br><span class="line"></span><br><span class="line"><span class="comment">### log HQL query parser activity</span></span><br><span class="line"><span class="comment">#log4j.logger.org.hibernate.hql.ast.AST=debug</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### log just the SQL</span></span><br><span class="line"><span class="comment">#log4j.logger.org.hibernate.SQL=debug</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### log JDBC bind parameters ###</span></span><br><span class="line"><span class="comment">#log4j.logger.org.hibernate.type=info</span></span><br><span class="line"><span class="comment">#log4j.logger.org.hibernate.type=debug</span></span><br><span class="line">log4j.logger.org.hibernate.type.descriptor.sql.BasicBinder=TRACE</span><br></pre></td></tr></table></figure>
<h3 id="hibernate-cfg-xml"><a href="#hibernate-cfg-xml" class="headerlink" title="hibernate.cfg.xml"></a>hibernate.cfg.xml</h3><blockquote>
<p><strong>æ­¤æ–‡ä»¶å¯ä»¥åœ¨Springæ–‡ä»¶ä¸­é›†ä¸­é…ç½®</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC</span><br><span class="line">	<span class="string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></span><br><span class="line">	<span class="string">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;hibernate-configuration&gt;</span><br><span class="line">	&lt;session-factory&gt;</span><br><span class="line">		&lt;!-- æ•°æ®åº“è¿æ¥ --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"connection.driver_class"</span>&gt;</span><br><span class="line">			oracle.jdbc.OracleDriver</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"connection.url"</span>&gt;</span><br><span class="line">			jdbc:oracle:thin:@localhost:1521:orcl</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"connection.username"</span>&gt;martin&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"connection.password"</span>&gt;mpwd&lt;/property&gt;</span><br><span class="line">		&lt;!-- è¾…åŠ©å‚æ•° --&gt;</span><br><span class="line">		&lt;!-- &lt;property name=<span class="string">"show_sql"</span>&gt;<span class="literal">true</span>&lt;/property&gt; --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"format_sql"</span>&gt;<span class="literal">true</span>&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"dialect"</span>&gt;</span><br><span class="line">			org.hibernate.dialect.Oracle10gDialect</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"current_session_context_class"</span>&gt;thread&lt;/property&gt;</span><br><span class="line">		&lt;!-- æ˜ å°„ä¿¡æ¯ --&gt;</span><br><span class="line">		&lt;mapping resource=<span class="string">"cn/hate/pojo/CusCustomer.hbm.xml"</span> /&gt;</span><br><span class="line">		&lt;mapping resource=<span class="string">"cn/hate/pojo/SaleOrderLine.hbm.xml"</span> /&gt;</span><br><span class="line">		&lt;mapping resource=<span class="string">"cn/hate/pojo/SaleOrder.hbm.xml"</span> /&gt;</span><br><span class="line">		&lt;mapping resource=<span class="string">"cn/hate/pojo/SaleProduct.hbm.xml"</span> /&gt;</span><br><span class="line">	&lt;/session-factory&gt;</span><br><span class="line">&lt;/hibernate-configuration&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Daoå±‚"><a href="#Daoå±‚" class="headerlink" title="Daoå±‚"></a>Daoå±‚</h3><blockquote>
<p><strong>é€šè¿‡ç»§æ‰¿HibernateDaoSupportç±»æ¥ç»§ç»­setteræ³¨å…¥sessionFactory</strong></p>
</blockquote>
<hr>
<blockquote>
<p>ä½¿ç”¨Springæ¨¡æ¿èƒ½ç®€åŒ–ç¼–ç è¿‡ç¨‹ï¼Œå¹¶ä¸åœ¨ä¾èµ–hibernate sessionï¼Œç›´æ¥ä½¿ç”¨hibernate session éœ€è¦ä½¿ç”¨HibernateCallbackæ¥å£</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">package cn.hate.dao.impl;</span><br><span class="line"></span><br><span class="line">import java.io.Serializable;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.hibernate.HibernateException;</span><br><span class="line">import org.hibernate.Query;</span><br><span class="line">import org.hibernate.Session;</span><br><span class="line">import org.hibernate.Transaction;</span><br><span class="line">import org.springframework.orm.hibernate3.HibernateCallback;</span><br><span class="line">import org.springframework.orm.hibernate3.support.HibernateDaoSupport;</span><br><span class="line"></span><br><span class="line">import cn.hate.dao.commonDao;</span><br><span class="line">import cn.hate.pojo.SaleOrder;</span><br><span class="line">import cn.hate.pojo.SaleOrderLine;</span><br><span class="line">public class commonDaoImpl extends HibernateDaoSupport implements commonDao &#123;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	/**</span><br><span class="line">	 * æ ¹æ®ä¸»é”®è·å–ä¸€æ¡æ•°æ®</span><br><span class="line">	 */</span><br><span class="line">	public Object get(Class clazz, Serializable id) &#123; </span><br><span class="line">		Object ret=super.getHibernateTemplate().get(clazz, id);</span><br><span class="line">		<span class="built_in">return</span> ret;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	/**</span><br><span class="line">	 * æ·»åŠ æ•°æ®</span><br><span class="line">	 */</span><br><span class="line">	public Serializable add(Object o) &#123;</span><br><span class="line">		Serializable ret = super.getHibernateTemplate().save(o);</span><br><span class="line">		<span class="built_in">return</span> ret;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	/**</span><br><span class="line">	 * åˆ é™¤æ•°æ®</span><br><span class="line">	 */</span><br><span class="line">	public void delete(Class clazz, Serializable id) &#123;</span><br><span class="line">		super.getHibernateTemplate().delete(this.get(clazz, id));</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	/**</span><br><span class="line">	 * æ›´æ–°æ•°æ®</span><br><span class="line">	 */</span><br><span class="line">	public void update(Object o) &#123;</span><br><span class="line">		super.getHibernateTemplate().update(o);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	/**</span><br><span class="line">	 * æŸ¥æ‰¾æ•°æ®</span><br><span class="line">	 */</span><br><span class="line">	public List find(String hql) &#123;</span><br><span class="line">		List ret = super.getHibernateTemplate().find(hql);</span><br><span class="line">		<span class="built_in">return</span> ret;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	/**</span><br><span class="line">	 * åˆ†é¡µæŸ¥è¯¢</span><br><span class="line">	 */</span><br><span class="line">	public List findFenYe(final int pageNo, final int pageSize) &#123;</span><br><span class="line">		<span class="built_in">return</span> this.getHibernateTemplate().execute(new HibernateCallback&lt;List&gt;() &#123;</span><br><span class="line"></span><br><span class="line">			@Override</span><br><span class="line">			public List doInHibernate(Session session) throws HibernateException, SQLException &#123;</span><br><span class="line">				Query query=session.createQuery(<span class="string">"select o from SaleOrder o"</span>);</span><br><span class="line">				query.setFirstResult((pageNo-1)*pageSize);</span><br><span class="line">				query.setMaxResults(pageSize);</span><br><span class="line">				<span class="built_in">return</span> query.list();</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void addOrderLine(int id, SaleOrderLine saleOrderLine) &#123;</span><br><span class="line">			SaleOrder saleOrder=(SaleOrder) this.get(SaleOrder.class, id);</span><br><span class="line">			saleOrder.getSaleOrderLines().add(saleOrderLine);</span><br><span class="line">			saleOrderLine.setSaleOrder(saleOrder);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="applicationContext-xml"><a href="#applicationContext-xml" class="headerlink" title="applicationContext.xml"></a>applicationContext.xml</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">	xmlns:aop=<span class="string">"http://www.springframework.org/schema/aop"</span> xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></span><br><span class="line">	xmlns:tx=<span class="string">"http://www.springframework.org/schema/tx"</span> xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">	xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans </span></span><br><span class="line"><span class="string">	http://www.springframework.org/schema/beans/spring-beans-3.2.xsd </span></span><br><span class="line"><span class="string">	http://www.springframework.org/schema/aop </span></span><br><span class="line"><span class="string">	http://www.springframework.org/schema/aop/spring-aop-3.2.xsd </span></span><br><span class="line"><span class="string">	http://www.springframework.org/schema/context </span></span><br><span class="line"><span class="string">	http://www.springframework.org/schema/context/spring-context-3.2.xsd </span></span><br><span class="line"><span class="string">	http://www.springframework.org/schema/tx </span></span><br><span class="line"><span class="string">	http://www.springframework.org/schema/tx/spring-tx-3.2.xsd "</span>&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- æ‰«ææ³¨è§£ --&gt;</span><br><span class="line">	&lt;!-- &lt;context:component-scan base-package=<span class="string">"cn.hate"</span>&gt;&lt;/context:component-scan&gt; --&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- ç”±springé…ç½®æ–‡ä»¶è¿›è¡Œé›†ä¸­é…ç½® --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"dataSource"</span> class=<span class="string">"org.apache.commons.dbcp.BasicDataSource"</span>&gt;</span><br><span class="line">		&lt;!-- æ•°æ®åº“è¿æ¥ --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"driverClassName"</span> value=<span class="string">"oracle.jdbc.driver.OracleDriver"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"url"</span> value=<span class="string">"jdbc:oracle:thin:@localhost:1521:orcl"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"username"</span> value=<span class="string">"martin"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"password"</span> value=<span class="string">"mpwd"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- å®šä¹‰ç‹¬ç«‹çš„hibernateé…ç½®æ–‡ä»¶ï¼Œç”±Springå¯¼å…¥å¹¶åˆ›å»ºä¼šè¯å·¥å‚Bean --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"sessionFactory"</span></span><br><span class="line">		class=<span class="string">"org.springframework.orm.hibernate3.LocalSessionFactoryBean"</span>&gt;</span><br><span class="line">		&lt;!-- springé›†ä¸­é…ç½® --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"dataSource"</span> ref=<span class="string">"dataSource"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernateProperties"</span>&gt;</span><br><span class="line">			&lt;props&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"hibernate.dialect"</span>&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"show_sql"</span>&gt;<span class="literal">true</span>&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"format_sql"</span>&gt;<span class="literal">true</span>&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"javax.persistence.validation.mode"</span>&gt;none&lt;/prop&gt;</span><br><span class="line">			&lt;/props&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"mappingResources"</span>&gt;</span><br><span class="line">			&lt;list&gt;</span><br><span class="line">				&lt;value&gt;cn/hate/pojo/CusCustomer.hbm.xml&lt;/value&gt;</span><br><span class="line">				&lt;value&gt;cn/hate/pojo/SaleOrder.hbm.xml&lt;/value&gt;</span><br><span class="line">				&lt;value&gt;cn/hate/pojo/SaleOrderLine.hbm.xml&lt;/value&gt;</span><br><span class="line">				&lt;value&gt;cn/hate/pojo/SaleProduct.hbm.xml&lt;/value&gt;</span><br><span class="line">			&lt;/list&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">		&lt;!-- åˆ›å»ºhibernateé…ç½®æ–‡ä»¶ --&gt;</span><br><span class="line">		&lt;!-- &lt;property name=<span class="string">"configLocation"</span>&gt; &lt;value&gt; classpath:hibernate.cfg.xml </span><br><span class="line">			&lt;/value&gt; &lt;/property&gt; --&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- æ³¨è§£ --&gt;</span><br><span class="line">	&lt;!-- &lt;bean id=<span class="string">"sessionFactory"</span></span><br><span class="line">		class=<span class="string">"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"</span>&gt;</span><br><span class="line">		springé›†ä¸­é…ç½®</span><br><span class="line">		&lt;property name=<span class="string">"dataSource"</span> ref=<span class="string">"dataSource"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernateProperties"</span>&gt;</span><br><span class="line">			&lt;props&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"hibernate.dialect"</span>&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"show_sql"</span>&gt;<span class="literal">true</span>&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"format_sql"</span>&gt;<span class="literal">true</span>&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"javax.persistence.validation.mode"</span>&gt;none&lt;/prop&gt;</span><br><span class="line">			&lt;/props&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;property name=<span class="string">"packagesToScan"</span> value=<span class="string">"cn.hate.pojo"</span>&gt;&lt;/property&gt;</span><br><span class="line">		</span><br><span class="line">	&lt;/bean&gt; --&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- commonDao --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"commonDao"</span> class=<span class="string">"cn.hate.dao.impl.commonDaoImpl"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"sessionFactory"</span> ref=<span class="string">"sessionFactory"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- orderService --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"orderService"</span> class=<span class="string">"cn.hate.service.impl.orderServiceImpl"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"comDao"</span> ref=<span class="string">"commonDao"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- Action --&gt;	</span><br><span class="line">	&lt;bean id=<span class="string">"cusAction"</span> class=<span class="string">"cn.hate.action.CusCustomerAction"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"oService"</span> ref=<span class="string">"orderService"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"txManager"</span> class=<span class="string">"org.springframework.orm.hibernate3.HibernateTransactionManager"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"sessionFactory"</span> ref=<span class="string">"sessionFactory"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- äº‹åŠ¡å¢å¼º --&gt;</span><br><span class="line">	&lt;tx:advice id=<span class="string">"txAdvice"</span> transaction-manager=<span class="string">"txManager"</span>&gt;</span><br><span class="line">		&lt;tx:attributes&gt;</span><br><span class="line">			&lt;tx:method name=<span class="string">"find*"</span> propagation=<span class="string">"SUPPORTS"</span> <span class="built_in">read</span>-only=<span class="string">"true"</span> /&gt;</span><br><span class="line">			&lt;tx:method name=<span class="string">"add*"</span> /&gt;</span><br><span class="line">			&lt;tx:method name=<span class="string">"update*"</span> /&gt;</span><br><span class="line">			&lt;tx:method name=<span class="string">"delete*"</span> /&gt;</span><br><span class="line">		&lt;/tx:attributes&gt;</span><br><span class="line">	&lt;/tx:advice&gt;</span><br><span class="line">	&lt;!-- å®šä¹‰åˆ‡é¢ --&gt;</span><br><span class="line">	&lt;aop:config&gt;</span><br><span class="line">		&lt;!-- å®šä¹‰åˆ‡å…¥ç‚¹ --&gt;</span><br><span class="line">		&lt;aop:pointcut expression=<span class="string">"execution(* cn.hate.service..*.*(..))"</span> id=<span class="string">"serviceeMethod"</span>/&gt;</span><br><span class="line">		&lt;!-- ç»‡å…¥ --&gt;</span><br><span class="line">		&lt;aop:advisor advice-ref=<span class="string">"txAdvice"</span> pointcut-ref=<span class="string">"serviceeMethod"</span>/&gt;</span><br><span class="line">	&lt;/aop:config&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<h3 id="struts-xml"><a href="#struts-xml" class="headerlink" title="struts.xml"></a>struts.xml</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE struts PUBLIC</span><br><span class="line">	<span class="string">"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"</span></span><br><span class="line">	<span class="string">"http://struts.apache.org/dtds/struts-2.3.dtd"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;struts&gt;</span><br><span class="line">	&lt;!-- è®¾ç½®actionåŠ¨æ€æ–¹æ³•è°ƒç”¨ --&gt;</span><br><span class="line">	&lt;constant name=<span class="string">"struts.enable.DynamicMethodInvocation"</span> value=<span class="string">"true"</span> /&gt;</span><br><span class="line">	&lt;!-- å¯åŠ¨å¼€å‘æ¨¡å¼ --&gt;</span><br><span class="line">	&lt;constant name=<span class="string">"struts.devMode"</span> value=<span class="string">"true"</span> /&gt;</span><br><span class="line">	&lt;!-- å¤„ç†ä¸­æ–‡ä¹±ç  --&gt;</span><br><span class="line">	&lt;constant name=<span class="string">"struts.i18n.encoding"</span> value=<span class="string">"utf-8"</span> /&gt;</span><br><span class="line">	&lt;!-- å¤„ç†æ‰€æœ‰æ–‡ä»¶å¤§å° --&gt;</span><br><span class="line">	&lt;constant name=<span class="string">"struts.multipart.maxSize"</span> value=<span class="string">"5000000"</span> /&gt;</span><br><span class="line"></span><br><span class="line">	&lt;package name=<span class="string">"default"</span> namespace=<span class="string">"/"</span> extends=<span class="string">"struts-default"</span>&gt;</span><br><span class="line">	</span><br><span class="line">		&lt;global-results&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"input"</span>&gt;/error.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/global-results&gt;</span><br><span class="line">    	</span><br><span class="line">    	&lt;action name=<span class="string">"defaultAction"</span>&gt;</span><br><span class="line">    		&lt;result&gt;/error.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br><span class="line">	</span><br><span class="line">		&lt;!-- åˆ†é¡µæŸ¥è¯¢ --&gt;</span><br><span class="line">		&lt;action name=<span class="string">"orderList"</span> class=<span class="string">"cusAction"</span> method=<span class="string">"orderList"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span>&gt;/index.jsp&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- æ·»åŠ è®¢å• --&gt;</span><br><span class="line">		&lt;action name=<span class="string">"addOrder"</span> class=<span class="string">"cusAction"</span> method=<span class="string">"addOrder"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span> <span class="built_in">type</span>=<span class="string">"redirectAction"</span>&gt;orderList&lt;/result&gt;</span><br><span class="line">			&lt;result name=<span class="string">"input"</span>&gt;/addOrder.jsp&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">	   	</span><br><span class="line">	   	&lt;!-- æ·»åŠ è®¢å•æ˜ç»† --&gt;</span><br><span class="line">		&lt;action name=<span class="string">"addOrderLines"</span> class=<span class="string">"cusAction"</span> method=<span class="string">"addOrderLines"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span> <span class="built_in">type</span>=<span class="string">"redirectAction"</span>&gt;findOrderById&lt;/result&gt;</span><br><span class="line">			&lt;result name=<span class="string">"input"</span>&gt;/addOrderLine.jsp&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- æ ¹æ®idæŸ¥è¯¢è®¢å• --&gt;</span><br><span class="line">		&lt;action name=<span class="string">"findOrderById"</span> class=<span class="string">"cusAction"</span> method=<span class="string">"findOrderById"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span>&gt;/addOrderLine.jsp&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- åˆ é™¤è®¢å•æ˜ç»†--&gt;</span><br><span class="line">		&lt;action name=<span class="string">"deleteOrderLine"</span> class=<span class="string">"cusAction"</span> method=<span class="string">"deleteOrderLine"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span> <span class="built_in">type</span>=<span class="string">"redirectAction"</span>&gt;findOrderById&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- æ¨¡ç³ŠæŸ¥è¯¢è®¢å•--&gt;</span><br><span class="line">		&lt;action name=<span class="string">"findOrderByLike"</span> class=<span class="string">"cusAction"</span> method=<span class="string">"findOrderByLike"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span>&gt;/index.jsp&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·--&gt;</span><br><span class="line">		&lt;action name=<span class="string">"findAllCust"</span> class=<span class="string">"cusAction"</span> method=<span class="string">"findAllCust"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span>&gt;/addOrder.jsp&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- æŸ¥è¯¢æ‰€æœ‰å•†å“--&gt;</span><br><span class="line">		&lt;!-- &lt;action name=<span class="string">"findAllPro"</span> class=<span class="string">"cusAction"</span> method=<span class="string">"findAllPro"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span>&gt;/addOrderLine.jsp&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt; --&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- Ajax --&gt;</span><br><span class="line">		&lt;action name=<span class="string">"getStreamResult"</span> class=<span class="string">"cusAction"</span>&gt;</span><br><span class="line">			&lt;result name=<span class="string">"success"</span> <span class="built_in">type</span>=<span class="string">"stream"</span>&gt;</span><br><span class="line">				&lt;param name=<span class="string">"contentType"</span>&gt;text/html&lt;/param&gt;</span><br><span class="line">				&lt;param name=<span class="string">"inputName"</span>&gt;inputStream&lt;/param&gt;</span><br><span class="line">			&lt;/result&gt;</span><br><span class="line">		&lt;/action&gt;</span><br><span class="line">	&lt;/package&gt;</span><br><span class="line">&lt;/struts&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/24/SSHæ¡†æ¶æ­å»º/" data-id="cjrabl6o1001fvkdqmhhv8pea" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Struts2é…ç½®è¯¦è§£" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/Struts2é…ç½®è¯¦è§£/" class="article-date">
  <time datetime="2018-11-22T14:59:05.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/Struts2é…ç½®è¯¦è§£/">Struts2é…ç½®è¯¦è§£</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="å›å¿†ç”¨æˆ·ç™»å½•è¿‡ç¨‹"><a href="#å›å¿†ç”¨æˆ·ç™»å½•è¿‡ç¨‹" class="headerlink" title="å›å¿†ç”¨æˆ·ç™»å½•è¿‡ç¨‹"></a>å›å¿†ç”¨æˆ·ç™»å½•è¿‡ç¨‹</h3><blockquote>
<p>JSPé¡µé¢è¯·æ±‚ğŸ‘‡<br>æ ¸å¿ƒæ§åˆ¶å™¨ğŸ‘‡<br>ActionğŸ‘‡<br>ResultğŸ‘‡<br>JSPé¡µé¢æ˜¾ç¤º</p>
</blockquote>
<h4 id="æ ¸å¿ƒæ§åˆ¶å™¨"><a href="#æ ¸å¿ƒæ§åˆ¶å™¨" class="headerlink" title="æ ¸å¿ƒæ§åˆ¶å™¨"></a>æ ¸å¿ƒæ§åˆ¶å™¨</h4><blockquote>
<p>åœ¨web.xmlä¸­é…ç½®ï¼Œå¯¹æ¡†æ¶è¿›è¡Œåˆå§‹åŒ–ï¼Œä»¥åŠå¤„ç†æ‰€æœ‰çš„è¯·æ±‚</p>
</blockquote>
<h4 id="Action-ä¸šåŠ¡æ§åˆ¶å™¨"><a href="#Action-ä¸šåŠ¡æ§åˆ¶å™¨" class="headerlink" title="Action ä¸šåŠ¡æ§åˆ¶å™¨"></a>Action ä¸šåŠ¡æ§åˆ¶å™¨</h4><blockquote>
<p>åˆ›å»ºAction,å®ç°Actionæ¥å£ï¼Œç»§æ‰¿ActionSupportç±»<br>nameå±æ€§ä¸èƒ½é‡åï¼Œclasså±æ€§ä¸ºActionçš„è·¯å¾„</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;action name=<span class="string">"Login"</span> class=<span class="string">"cn.ssh.LoginAction"</span>&gt;</span><br><span class="line">           &lt;result name=<span class="string">"success"</span>&gt;/success.jsp&lt;/result&gt;</span><br><span class="line">           &lt;result name=<span class="string">"fail"</span>&gt;/fail.jsp&lt;/result&gt;</span><br><span class="line">           &lt;result name=<span class="string">"input"</span>&gt;/login.jsp&lt;/result&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Result-å®ç°å¯¹ç»“æœçš„å¤„ç†"><a href="#Result-å®ç°å¯¹ç»“æœçš„å¤„ç†" class="headerlink" title="Result å®ç°å¯¹ç»“æœçš„å¤„ç†"></a>Result å®ç°å¯¹ç»“æœçš„å¤„ç†</h4><blockquote>
<p>å®ç°å¯¹ç»“æœçš„è°ƒç”¨<br>resultå…ƒç´ çš„å€¼æŒ‡å®šå¯¹åº”çš„å®é™…èµ„æºä½ç½®<br>nameå±æ€§è¡¨ç¤ºresultçš„é€»è¾‘åï¼ŒActionè¿”å›çš„å­—ç¬¦ä¸²</p>
</blockquote>
<h4 id="Struts-xml"><a href="#Struts-xml" class="headerlink" title="Struts.xml"></a>Struts.xml</h4><blockquote>
<p>constantå…ƒç´ ï¼Œå¯ä»¥æ”¹å˜struts2æ¡†æ¶çš„ä¸€äº›è¡Œä¸º<br>nameè¡¨ç¤ºå¸¸é‡åç§°ï¼Œvalueè¡¨ç¤ºå¸¸é‡å€¼</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¤„ç†ä¸­æ–‡ä¹±ç  --&gt;</span><br><span class="line">&lt;constant name=<span class="string">"struts.i18n.encoding"</span> value=<span class="string">"UTF-8"</span>&gt;&lt;/constant&gt;</span><br><span class="line">	</span><br><span class="line">&lt;!-- è®¾ç½®actionåŠ¨æ€æ–¹æ³•è°ƒç”¨ --&gt;</span><br><span class="line">&lt;constant name=<span class="string">"struts.enable.DynamicMethodInvocation"</span> value=<span class="string">"true"</span>&gt;&lt;/constant&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>packageå…ƒç´  â€“ç®€åŒ–ç»´æŠ¤å·¥ä½œï¼Œæé«˜é‡ç”¨æ€§<br>åŒ…å¯ä»¥ç»§æ‰¿å·²å®šä¹‰çš„åŒ…<br>nameå±æ€§å¿…é¡»ä¸”å”¯ä¸€ï¼Œç”¨äºæŒ‡å®šåŒ…çš„åç§°<br>extendså±æ€§æŒ‡å®šè¦æ‰©å±•çš„åŒ…ï¼Œæ€»æ˜¯æ‰©å±•struts-defaultåŒ…<br>namespaceå±æ€§å®šä¹‰è¯¥åŒ…actionçš„å‘½åç©ºé—´ï¼Œå¯é€‰</p>
</blockquote>
<h3 id="é…ç½®Action"><a href="#é…ç½®Action" class="headerlink" title="é…ç½®Action"></a>é…ç½®Action</h3><blockquote>
<p>Action,å°è£…å·¥ä½œå•å…ƒï¼Œæ•°æ®è½¬ç§»çš„åœºæ‰€ï¼Œè¿”å›ç»“æœå­—ç¬¦ä¸²</p>
</blockquote>
<h4 id="methodå±æ€§"><a href="#methodå±æ€§" class="headerlink" title="methodå±æ€§"></a>methodå±æ€§</h4><blockquote>
<p>å±äºactionå±æ€§ï¼Œé»˜è®¤å€¼ï¼šexecuteï¼Œå¯ä»¥æ›´æ”¹å±æ€§å€¼å®ç°Actionä¸­ä¸åŒæ–¹æ³•çš„è°ƒç”¨</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> //ç™»å½•</span><br><span class="line">	public String <span class="function"><span class="title">login</span></span>()&#123;</span><br><span class="line">		</span><br><span class="line">		//<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"dologin"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	//æ³¨å†Œ</span><br><span class="line">	public String <span class="function"><span class="title">register</span></span>()&#123;</span><br><span class="line">		</span><br><span class="line">		//<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"doregister"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"> &lt;action name=<span class="string">"login"</span> class=<span class="string">"cn.ssh.UserAction"</span> method=<span class="string">"login"</span>&gt;</span><br><span class="line">    		&lt;result&gt;/login.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br><span class="line">&lt;action name=<span class="string">"register"</span> class=<span class="string">"cn.ssh.UserAction"</span> method=<span class="string">"register"</span>&gt;</span><br><span class="line">    		&lt;result&gt;/register.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®é»˜è®¤action"><a href="#é…ç½®é»˜è®¤action" class="headerlink" title="é…ç½®é»˜è®¤action"></a>é…ç½®é»˜è®¤action</h4><blockquote>
<p>æ²¡æœ‰ActionåŒ¹é…è¯·æ±‚æ—¶ï¼Œé»˜è®¤Actionå°†è¢«æ‰§è¡Œ</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æŒ‡å®šé»˜è®¤çš„action ï¼Œ/user/a.actionä¼šè·³è½¬error --&gt;</span><br><span class="line">&lt;default-action-ref name=<span class="string">"defaultAction"</span>&gt;&lt;/default-action-ref&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å…¨å±€ç»“æœ --&gt;</span><br><span class="line">&lt;global-results&gt;</span><br><span class="line">	&lt;result name=<span class="string">"error"</span>&gt;/error.jsp&lt;/result&gt;</span><br><span class="line">&lt;/global-results&gt;</span><br><span class="line">&lt;!-- çœç•¥classï¼Œç›´æ¥ä½¿ç”¨ActionSupportç±» --&gt;</span><br><span class="line">&lt;action name=<span class="string">"defaultAction"</span>&gt;</span><br><span class="line">	&lt;result&gt;/error.jsp&lt;/result&gt;</span><br><span class="line">&lt;/action&gt;</span><br></pre></td></tr></table></figure>
<h3 id="ç®€åŒ–Actionçš„é…ç½®ï¼Œè°ƒç”¨æ–¹å¼"><a href="#ç®€åŒ–Actionçš„é…ç½®ï¼Œè°ƒç”¨æ–¹å¼" class="headerlink" title="ç®€åŒ–Actionçš„é…ç½®ï¼Œè°ƒç”¨æ–¹å¼"></a>ç®€åŒ–Actionçš„é…ç½®ï¼Œè°ƒç”¨æ–¹å¼</h3><blockquote>
<p>å¯¹äºç”¨ä¸€ä¸ªactionç±»çš„æ¯ä¸€ä¸ªæ–¹æ³•éƒ½é™ªç€äº†ä¸€æ¬¡ï¼Œé€ æˆactionå…ƒç´ æ•°é‡å¤ªå¤š</p>
</blockquote>
<h4 id="åŠ¨æ€æ–¹æ³•è°ƒç”¨"><a href="#åŠ¨æ€æ–¹æ³•è°ƒç”¨" class="headerlink" title="åŠ¨æ€æ–¹æ³•è°ƒç”¨"></a>åŠ¨æ€æ–¹æ³•è°ƒç”¨</h4><blockquote>
<p>ä½¿ç”¨ï¼šactionName!methodName.action<br>ç¦ç”¨ï¼šå°†å±æ€§Struts.enable.DynmicMethodInvocationè®¾ç½®ä¸ºfalse</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è®¾ç½®actionåŠ¨æ€æ–¹æ³•è°ƒç”¨ --&gt;</span><br><span class="line">&lt;constant name=<span class="string">"struts.enable.DynamicMethodInvocation"</span> value=<span class="string">"true"</span>&gt;&lt;/constant&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç®€åŒ–action åŠ¨æ€æ–¹æ³•è°ƒç”¨  struts2-core-2.3.16.3.jarçš„default.propertiesè®¾ç½® struts.enable.DynamicMethodInvocation = <span class="literal">true</span> --&gt;</span><br><span class="line">    	&lt;action name=<span class="string">"user"</span> class=<span class="string">"cn.ssh.UserAction"</span>&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"dologin"</span>&gt;/login.jsp&lt;/result&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"doregister"</span>&gt;/register.jsp&lt;/result&gt;</span><br><span class="line">    		&lt;!-- è°ƒç”¨ action name ! actionæ–¹æ³•name.action --&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨é€šé…ç¬¦"><a href="#ä½¿ç”¨é€šé…ç¬¦" class="headerlink" title="ä½¿ç”¨é€šé…ç¬¦"></a>ä½¿ç”¨é€šé…ç¬¦</h4><blockquote>
<p>ç®€åŒ–ç›¸åŒæ–¹æ³•</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//æ·»åŠ ç”¨æˆ·</span><br><span class="line">	public String <span class="function"><span class="title">add</span></span>()&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"input"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	//åˆ é™¤ç”¨æˆ·</span><br><span class="line">	public String <span class="function"><span class="title">delete</span></span>()&#123;</span><br><span class="line">		<span class="keyword">if</span>(id.length()==0)&#123;</span><br><span class="line">			this.message=<span class="string">"åˆ é™¤å¤±è´¥"</span>;</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"input"</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			this.message=<span class="string">"åˆ é™¤æˆåŠŸ"</span>;</span><br><span class="line">			System.out.println(<span class="string">"åˆ é™¤-----"</span>);</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;action name=<span class="string">"*User"</span> class=<span class="string">"cn.ssh.UserAction"</span> method=<span class="string">"&#123;1&#125;"</span>&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"input"</span>&gt;/page/&#123;1&#125;.jsp&lt;/result&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"success"</span> <span class="built_in">type</span>=<span class="string">"redirect"</span>&gt;/page/&#123;1&#125;_success.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è°ƒç”¨ï¼š[ä½ è¦è¾“å…¥çš„å­—ç¬¦]User.action</p>
</blockquote>
<h3 id="Resultå¸¸ç”¨ç»“æœç±»å‹"><a href="#Resultå¸¸ç”¨ç»“æœç±»å‹" class="headerlink" title="Resultå¸¸ç”¨ç»“æœç±»å‹"></a>Resultå¸¸ç”¨ç»“æœç±»å‹</h3><blockquote>
<p>dispatcherï¼šé»˜è®¤ç»“æœç±»å‹ï¼Œåå°ä½¿ç”¨RequestDispatcherè½¬å‘è¯·æ±‚<br>redirectï¼šåå°ä½¿ç”¨sendRedirect()å°†è¯·æ±‚é‡å®šå‘è‡³æŒ‡å®šçš„url<br>redirectActionï¼šä¸»è¦ç”¨äºé‡å®šå‘åˆ°action</p>
</blockquote>
<h3 id="åŠ¨æ€ç»“æœ"><a href="#åŠ¨æ€ç»“æœ" class="headerlink" title="åŠ¨æ€ç»“æœ"></a>åŠ¨æ€ç»“æœ</h3><blockquote>
<p>é…ç½®æ—¶ä¸çŸ¥é“æ‰§è¡Œåç»“æœæ˜¯å“ªä¸€ä¸ªï¼Œè¿è¡Œæ—¶æ‰çŸ¥é“å“ªä¸ªç»“æœä½œä¸ºè§†å›¾æ˜¾ç¤ºç»™ç”¨æˆ·</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">private String nextDispose=<span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">public String <span class="function"><span class="title">doLogin</span></span>()&#123;</span><br><span class="line">		System.out.println(<span class="string">"åˆ¤æ–­-----"</span>);</span><br><span class="line">		<span class="keyword">if</span>(isManager())&#123;</span><br><span class="line">			nextDispose=<span class="string">"manager"</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			nextDispose=<span class="string">"common"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"> &lt;action name=<span class="string">"doLogins"</span> class=<span class="string">"cn.ssh.UserAction"</span> method=<span class="string">"doLogin"</span>&gt;</span><br><span class="line">    		&lt;result <span class="built_in">type</span>=<span class="string">"redirectAction"</span>&gt;<span class="variable">$&#123;nextDispose&#125;</span>&lt;/result&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"error"</span>&gt;.page/error.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br><span class="line">    	&lt;action name=<span class="string">"manager"</span>&gt;</span><br><span class="line">    		&lt;result&gt;/page/manager.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br><span class="line">    	&lt;action name=<span class="string">"common"</span>&gt;</span><br><span class="line">    		&lt;result&gt;/page/common.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br></pre></td></tr></table></figure>
<h3 id="å…¨å±€ç»“æœ"><a href="#å…¨å±€ç»“æœ" class="headerlink" title="å…¨å±€ç»“æœ"></a>å…¨å±€ç»“æœ</h3><blockquote>
<p>å®ç°åŒä¸€ä¸ªåŒ…ä¸­å¤šä¸ªactionå…±äº«ä¸€ä¸ªç»“æœ<br>å¦‚æœè¿”å›errorï¼Œä½†æ˜¯actionå¹¶æ²¡æœ‰é…ç½®ï¼Œä¼šå»æ‰¾global-results</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å…¨å±€ç»“æœ --&gt;</span><br><span class="line">    	&lt;global-results&gt;</span><br><span class="line">    		&lt;result name=<span class="string">"error"</span>&gt;/error.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/global-results&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/22/Struts2é…ç½®è¯¦è§£/" data-id="cjrabl6r50032vkdq4p75irhs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Struts2å…¥é—¨" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/21/Struts2å…¥é—¨/" class="article-date">
  <time datetime="2018-11-21T01:33:20.000Z" itemprop="datePublished">2018-11-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/21/Struts2å…¥é—¨/">Struts2å…¥é—¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Struts2çš„å‰èº«æ˜¯Opensymphonyçš„Webwork2ï¼Œå®é™…ä¸ŠStrutå’ŒWebwork2åˆå¹¶åå½¢æˆStruts2</p>
</blockquote>
<h3 id="Struts2çš„ä¼˜åŠ¿"><a href="#Struts2çš„ä¼˜åŠ¿" class="headerlink" title="Struts2çš„ä¼˜åŠ¿"></a>Struts2çš„ä¼˜åŠ¿</h3><blockquote>
<p>1.å®ç°mvcæ¨¡å¼ï¼Œå±‚æ¬¡ç»“æ„æ¸…æ™°ï¼Œæ˜¯å¼€å‘è€…ä¸“æ³¨ä¸šåŠ¡é€»è¾‘å®ç°<br>2.ä¸°å¯Œçš„æ ‡ç­¾åº“æé«˜å¼€å‘æ•ˆç‡<br>3.åŸºäºaopæ€æƒ³çš„æ‹¦æˆªå™¨æœºåˆ¶é™ä½ä¸šåŠ¡è§çš„è€¦åˆ<br>4.é€šè¿‡é…ç½®æ–‡ä»¶æ—¢å¯æŒæ¡ç³»ç»Ÿé—´å„éƒ¨åˆ†çš„å…³ç³»<br>5.æ›´æ–¹ä¾¿çš„å¼‚å¸¸å¤„ç†æœºåˆ¶<br>6.é«˜æ‰©å±•æ€§</p>
</blockquote>
<h3 id="é…ç½®Struts2ç¯å¢ƒ"><a href="#é…ç½®Struts2ç¯å¢ƒ" class="headerlink" title="é…ç½®Struts2ç¯å¢ƒ"></a>é…ç½®Struts2ç¯å¢ƒ</h3><h4 id="jaråŒ…"><a href="#jaråŒ…" class="headerlink" title="jaråŒ…"></a>jaråŒ…</h4><blockquote>
<p>asm-3.3.jar<br>asm-commons-3.3.jar<br>asm-tree-3.3.jar<br>commons-fileupload-1.3.1.jar<br>commons-io-2.2.jar<br>commons-lang3-3.1.jar<br>commons-logging-1.1.3.jar<br>freemarker-2.3.19.jar<br>javassist-3.11.0.GA.jar<br>log4j-1.2.17.jar<br>ognl-3.0.6.jar<br>struts2-core-2.3.16.3.jar<br>xwork-core-2.3.16.3.jar</p>
</blockquote>
<h4 id="web-xmlé…ç½®"><a href="#web-xmlé…ç½®" class="headerlink" title="web.xmlé…ç½®"></a>web.xmlé…ç½®</h4><blockquote>
<p>è¿™ä¸ªæ–‡ä»¶ä¸ºæ¯ä¸ªwebåº”ç”¨ç¨‹åºæä¾›æ¥å…¥ç‚¹ã€‚åœ¨éƒ¨ç½²æè¿°ç¬¦ï¼ˆweb.xmlï¼‰ä¸­ï¼ŒStruts2 åº”ç”¨ç¨‹åºçš„æ¥å…¥ç‚¹å°†ä¼šå®šä¹‰ä¸ºä¸€ä¸ªè¿‡æ»¤å™¨ã€‚å› æ­¤æˆ‘ä»¬å°†åœ¨web.xmlé‡Œå®šä¹‰ä¸€ä¸ªFilterDispatcherç±»çš„æ¥å…¥ç‚¹</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;web-app id=<span class="string">"WebApp_9"</span> version=<span class="string">"2.4"</span> xmlns=<span class="string">"http://java.sun.com/xml/ns/j2ee"</span></span><br><span class="line">	xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">	xsi:schemaLocation=<span class="string">"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"</span>&gt;</span><br><span class="line"></span><br><span class="line">	&lt;display-name&gt;Struts Blank&lt;/display-name&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- è¿‡æ»¤å™¨ --&gt;</span><br><span class="line">	&lt;filter&gt;</span><br><span class="line">		&lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class="line">		&lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;</span><br><span class="line">	&lt;/filter&gt;</span><br><span class="line"></span><br><span class="line">	&lt;filter-mapping&gt;</span><br><span class="line">		&lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class="line">        &lt;!-- å°†å…¨éƒ¨è¯·æ±‚å®šä½åˆ°æŒ‡å®šçš„Struts2è¿‡æ»¤å™¨ä¸­--&gt;</span><br><span class="line">		&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">	&lt;/filter-mapping&gt;</span><br><span class="line"></span><br><span class="line">	&lt;welcome-file-list&gt;</span><br><span class="line">		&lt;welcome-file&gt;index.html&lt;/welcome-file&gt;</span><br><span class="line">	&lt;/welcome-file-list&gt;</span><br><span class="line"></span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æˆ‘ä»¬å°†Struts2 è¿‡æ»¤å™¨æ˜ å°„åˆ° /<em> ï¼Œè€Œä¸æ˜¯ /</em>.action ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰çš„urléƒ½ä¼šè¢«Strutsè¿‡æ»¤å™¨è§£æ</p>
</blockquote>
<h4 id="åœ¨srcç›®å½•ä¸‹åˆ›å»ºStruts2æ ¸å¿ƒæ–‡ä»¶-struts-xml"><a href="#åœ¨srcç›®å½•ä¸‹åˆ›å»ºStruts2æ ¸å¿ƒæ–‡ä»¶-struts-xml" class="headerlink" title="åœ¨srcç›®å½•ä¸‹åˆ›å»ºStruts2æ ¸å¿ƒæ–‡ä»¶(struts.xml)"></a>åœ¨srcç›®å½•ä¸‹åˆ›å»ºStruts2æ ¸å¿ƒæ–‡ä»¶(struts.xml)</h4><blockquote>
<p>struts.xmlæ–‡ä»¶åŒ…å«æœ‰éšç€Actionsçš„å¼€å‘ä½ å°†è¦ä¿®æ”¹çš„é…ç½®ä¿¡æ¯ã€‚å®ƒå¯ç”¨äºè¦†ç›–åº”ç”¨ç¨‹åºçš„é»˜è®¤è®¾ç½®<br>è¿™ä¸ªæ–‡ä»¶å¯åœ¨WEB-INF/classesæ–‡ä»¶å¤¹ä¸‹åˆ›å»º<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE struts PUBLIC</span><br><span class="line">	<span class="string">"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"</span></span><br><span class="line">	<span class="string">"http://struts.apache.org/dtds/struts-2.3.dtd"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;struts&gt;    </span><br><span class="line">	&lt;!-- å¤„ç†ä¸­æ–‡ä¹±ç  --&gt;</span><br><span class="line">	&lt;constant name=<span class="string">"struts.i18n.encoding"</span> value=<span class="string">"UTF-8"</span>&gt;&lt;/constant&gt;</span><br><span class="line">	&lt;!-- åˆ›å»ºä¸€ä¸ªdefaultåŒ…ï¼Œç»§æ‰¿struts2çš„struts-default namespaceä¸º actionæŒ‡å®šäº†ä¸€ä¸ªè®¿é—®è·¯å¾„çš„å‰ç¼€--&gt;</span><br><span class="line">    &lt;package name=<span class="string">"default"</span> namespace=<span class="string">"/"</span> extends=<span class="string">"struts-default"</span>&gt;</span><br><span class="line">        &lt;!-- æ¥æ”¶HelloWorldActionçš„è¯·æ±‚,helloWorldå¯¹åº”formè¡¨å•--&gt;</span><br><span class="line">        &lt;action name=<span class="string">"helloWorld"</span> class=<span class="string">"cn.ssh.HelloWorldAction"</span>&gt;</span><br><span class="line">           &lt;result name=<span class="string">"success"</span>&gt;/helloWorld.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- resultçš„nameå¯¹åº”actionè¿”å›çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥æœ‰å¤šä¸ªresult å¯¹åº”è§†å›¾--&gt;</span><br><span class="line">        &lt;action name=<span class="string">"Login"</span> class=<span class="string">"cn.ssh.LoginAction"</span>&gt;</span><br><span class="line">           &lt;result name=<span class="string">"success"</span>&gt;/success.jsp&lt;/result&gt; //æˆåŠŸè¿”å›</span><br><span class="line">           &lt;result name=<span class="string">"fail"</span>&gt;/fail.jsp&lt;/result&gt; //å¤±è´¥è¿”å›</span><br><span class="line">           &lt;result name=<span class="string">"input"</span>&gt;/login.jsp&lt;/result&gt; //å…¶ä»–è¿”å›</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">    &lt;/package&gt; </span><br><span class="line">&lt;/struts&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>nameï¼ˆå¿…éœ€ï¼‰</td>
<td>ä¸ºpackageçš„å”¯ä¸€æ ‡è¯†</td>
</tr>
<tr>
<td>extends</td>
<td>æŒ‡å®špackageç»§æ‰¿å¦ä¸€packageçš„æ‰€æœ‰é…ç½®ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨struts-defaultä½œä¸ºpackageçš„åŸºç¡€ã€‚</td>
</tr>
<tr>
<td>abstract</td>
<td>å®šä¹‰packageä¸ºæŠ½è±¡çš„ã€‚å¦‚æœæ ‡è®°ä¸ºtrueï¼Œåˆ™packageä¸èƒ½è¢«æœ€ç»ˆç”¨æˆ·ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td>namespace</td>
<td>Actionsçš„å”¯ä¸€å‘½åç©ºé—´</td>
</tr>
</tbody>
</table>
<h4 id="åˆ›å»ºActionæ–‡ä»¶"><a href="#åˆ›å»ºActionæ–‡ä»¶" class="headerlink" title="åˆ›å»ºActionæ–‡ä»¶"></a>åˆ›å»ºActionæ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package cn.ssh;</span><br><span class="line">import com.opensymphony.xwork2.ActionSupport;</span><br><span class="line">public class HelloWorld extends ActionSupport &#123;</span><br><span class="line">    private String message;</span><br><span class="line">    private String name;</span><br><span class="line">    @Override</span><br><span class="line">    public String execute() throws Exception &#123;</span><br><span class="line">        message = <span class="string">"Hello World,Struts2"</span>;</span><br><span class="line">        <span class="built_in">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">    public String <span class="function"><span class="title">getMessage</span></span>()&#123;</span><br><span class="line">        <span class="built_in">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»º-jspæ–‡ä»¶"><a href="#åˆ›å»º-jspæ–‡ä»¶" class="headerlink" title="åˆ›å»º.jspæ–‡ä»¶"></a>åˆ›å»º.jspæ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> %&gt;</span><br><span class="line">&lt;!-- å¼•ç”¨Struts2çš„æ ‡ç­¾åº“--&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"s"</span> uri=<span class="string">"/struts-tags"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;s:property value=<span class="string">"message"</span>/&gt;&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">        è¾“å‡ºæ˜¾ç¤ºè¯­å¥ï¼š&lt;s:property value=<span class="string">"message"</span>/&gt; æ¥è‡ªactionçš„å±æ€§</span><br><span class="line">        </span><br><span class="line">        helloWorldä¸º &lt;package&gt;  namespace=<span class="string">"/"</span> actionä¸ºhelloWorldï¼Œ.actioné»˜è®¤ï¼Œname=â€œnameâ€æ¥è‡ªactionçš„å±æ€§</span><br><span class="line">        &lt;form action=<span class="string">"helloWorld.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    		è¯·è¾“å…¥æ‚¨çš„åå­—:&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"name"</span>&gt;</span><br><span class="line">    		&lt;input <span class="built_in">type</span>=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span>&gt;</span><br><span class="line">    	&lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Struts2çš„æ‰§è¡Œæµç¨‹"><a href="#Struts2çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="Struts2çš„æ‰§è¡Œæµç¨‹"></a>Struts2çš„æ‰§è¡Œæµç¨‹</h3><blockquote>
<p>1.P helloWorld.actionå‘é€è¯·æ±‚<br>2.web.xmlè¿›è¡Œè¿‡æ»¤<br>3.åœ¨srruts.xml ä¸­æ‰¾åˆ°ç›¸å¯¹çš„action<br>4.æ‰¾åˆ°helloWorldAction<br>5.helloWorldActionè¿”å›å­—ç¬¦ä¸²åˆ°struts.xml è¿›è¡ŒResultè·³è½¬</p>
</blockquote>
<h3 id="Struts2ç™»å½•è¿‡ç¨‹åˆ†æ"><a href="#Struts2ç™»å½•è¿‡ç¨‹åˆ†æ" class="headerlink" title="Struts2ç™»å½•è¿‡ç¨‹åˆ†æ"></a>Struts2ç™»å½•è¿‡ç¨‹åˆ†æ</h3><h4 id="åˆ›å»º-LoginAction"><a href="#åˆ›å»º-LoginAction" class="headerlink" title="åˆ›å»º LoginAction"></a>åˆ›å»º LoginAction</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">public String execute() throws Exception &#123;</span><br><span class="line">		<span class="keyword">if</span>(name.equals(<span class="string">"æ†¨å…«é¾Ÿ"</span>)&amp;&amp;password.equals(<span class="string">"123456"</span>))&#123;</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"success"</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"fail"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="struts-xml"><a href="#struts-xml" class="headerlink" title="struts.xml"></a>struts.xml</h4><blockquote>
<p>è¿›è¡ŒResultè¿”å›è§†å›¾</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;package name=<span class="string">"default"</span> namespace=<span class="string">"/"</span> extends=<span class="string">"struts-default"</span>&gt;</span><br><span class="line">        &lt;action name=<span class="string">"helloWorld"</span> class=<span class="string">"cn.ssh.HelloWorldAction"</span>&gt;</span><br><span class="line">           &lt;result name=<span class="string">"success"</span>&gt;/helloWorld.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;action name=<span class="string">"Login"</span> class=<span class="string">"cn.ssh.LoginAction"</span>&gt;</span><br><span class="line">           &lt;result name=<span class="string">"success"</span>&gt;/success.jsp&lt;/result&gt;</span><br><span class="line">           &lt;result name=<span class="string">"fail"</span>&gt;/fail.jsp&lt;/result&gt;</span><br><span class="line">           &lt;result name=<span class="string">"input"</span>&gt;/login.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">    &lt;/package&gt;</span><br></pre></td></tr></table></figure>
<h4 id="JSP-login-jsp"><a href="#JSP-login-jsp" class="headerlink" title="JSP login.jsp"></a>JSP login.jsp</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"Login.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    		è¯·è¾“å…¥æ‚¨çš„åå­—:&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"name"</span>&gt;</span><br><span class="line">    		è¯·è¾“å…¥æ‚¨çš„å¯†ç :&lt;input <span class="built_in">type</span>=<span class="string">"password"</span> name=<span class="string">"password"</span>&gt;</span><br><span class="line">    		&lt;input <span class="built_in">type</span>=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span>&gt;</span><br><span class="line">    	&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Struts2è®¿é—®Servlet-API"><a href="#Struts2è®¿é—®Servlet-API" class="headerlink" title="Struts2è®¿é—®Servlet API"></a>Struts2è®¿é—®Servlet API</h3><h4 id="è§£è€¦æ–¹å¼è®¿é—®"><a href="#è§£è€¦æ–¹å¼è®¿é—®" class="headerlink" title="è§£è€¦æ–¹å¼è®¿é—®"></a>è§£è€¦æ–¹å¼è®¿é—®</h4><blockquote>
<p>æä¾›äº†ä¸‰ä¸ªmapå¯¹è±¡è®¿é—®ï¼Œrequestï¼Œsessionå’Œapplication<br>åœ¨é€šè¿‡ActionContextç±»è·å–è¿™ä¸‰ä¸ªmapå¯¹è±¡</p>
<blockquote>
<p>object get(â€œrequestâ€)<br>map getSession()<br>map getApplication()</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//è§£è€¦æ–¹å¼è·å–session,key/valueæ–¹å¼å­˜å‚¨</span><br><span class="line">Map&lt;String, Object&gt;session=null;</span><br><span class="line">session=ActionContext.getContext().getSession();</span><br><span class="line">session.put(<span class="string">"current_user"</span>, name);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>JSPæ˜¾ç¤ºsessionä¿¡æ¯</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;sessionScope.current_user &#125;</span> //è·å–keyå€¼</span><br></pre></td></tr></table></figure>
<h4 id="ä¸Servletè€¦åˆçš„è®¿é—®"><a href="#ä¸Servletè€¦åˆçš„è®¿é—®" class="headerlink" title="ä¸Servletè€¦åˆçš„è®¿é—®"></a>ä¸Servletè€¦åˆçš„è®¿é—®</h4><blockquote>
<p>é€šè¿‡ServletActionContextç±»è·å–Servlet APIå¯¹è±¡</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//è€¦åˆæ–¹å¼è·å–session</span><br><span class="line">HttpSession ssion=null;</span><br><span class="line">session=ServletActionContext.getRequest().getSession();</span><br><span class="line">session.setAttribute(<span class="string">"current_user"</span>, name);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å»ºè®®ä½¿ç”¨ActionContextç±»è§£è€¦å’Œçš„æ–¹å¼ï¼Œå› ä¸ºæ‰€æœ‰ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®éƒ½åŒ…æ‹¬åœ¨ActionContextç±»</p>
</blockquote>
<h3 id="Strutsæ•°æ®æ ¡éªŒ"><a href="#Strutsæ•°æ®æ ¡éªŒ" class="headerlink" title="Strutsæ•°æ®æ ¡éªŒ"></a>Strutsæ•°æ®æ ¡éªŒ</h3><blockquote>
<p>é€šè¿‡åœ¨æœåŠ¡å™¨ç«¯æ ¡éªŒå¯é˜²æ­¢ç”¨æˆ·ç»•è¿‡å®¢æˆ·ç«¯è„šæœ¬éªŒè¯</p>
<blockquote>
<p>ctionSupportç±»,ä¸ä»…å¯¹Actionæ¥å£è¿›è¡Œäº†ç®€å•å®ç°ï¼ŒåŒæ—¶å¢åŠ äº†æ•°æ®æ ¡éªŒï¼Œæœ¬åœ°åŒ–ç­‰æ”¯æŒ</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">	public void <span class="function"><span class="title">validate</span></span>() &#123;</span><br><span class="line">		<span class="keyword">if</span>(name.length()==0)&#123;</span><br><span class="line">			this.addFieldError(<span class="string">"name"</span>, <span class="string">"å§“åä¸èƒ½ä¸ºç©º"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(password.length()==0)&#123;</span><br><span class="line">			this.addFieldError(<span class="string">"password"</span>, <span class="string">"å¯†ç ä¸èƒ½ä¸ºç©º"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		//å¦‚æœå‘ç°é”™è¯¯,ä¼šè¿”å›â€inputâ€œï¼Œå¦åˆ™ç»§ç»­æ‰§è¡Œåç»­æ–¹æ³•</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å°†æ ¡éªŒé”™è¯¯ä¿¡æ¯è¾“å‡ºåœ¨é¡µé¢</p>
<blockquote>
<p>ä½¿ç”¨Struts2æä¾›çš„æ ‡ç­¾<br>fielderroråªé’ˆå¯¹å­—æ®µ<br>actionerroré’ˆå¯¹å½“å‰çš„action<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:fielderror fieldName=<span class="string">"name"</span>/&gt;</span><br><span class="line">&lt;s:fielderror fieldName=<span class="string">"password"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
</blockquote>
<h3 id="Struts2-UIæ ‡ç­¾"><a href="#Struts2-UIæ ‡ç­¾" class="headerlink" title="Struts2 UIæ ‡ç­¾"></a>Struts2 UIæ ‡ç­¾</h3><h4 id="è¡¨å•æ ‡ç­¾"><a href="#è¡¨å•æ ‡ç­¾" class="headerlink" title="è¡¨å•æ ‡ç­¾"></a>è¡¨å•æ ‡ç­¾</h4><blockquote>
<p>ä¸ognlè¡¨è¾¾å¼ç»“åˆä½¿ç”¨å‘æŒ¥æœ€å¤§å®åŠ›</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;s:form&gt;â€¦&lt;/s:form&gt;</td>
<td>è¡¨å•æ ‡ç­¾</td>
</tr>
<tr>
<td>&lt;s:textfield&gt;â€¦&lt;/s: textfield&gt;</td>
<td>è¾“å…¥æ¡†</td>
</tr>
<tr>
<td>&lt;s:password&gt;â€¦&lt;/s: password &gt;</td>
<td>å¯†ç è¾“å…¥æ¡†</td>
</tr>
<tr>
<td>&lt;s:textarea&gt;â€¦&lt;/s: textarea &gt;</td>
<td>æ–‡æœ¬åŸŸè¾“å…¥æ¡†</td>
</tr>
<tr>
<td>&lt;s:radio&gt;â€¦&lt;/s: radio &gt;</td>
<td>å•é€‰æŒ‰é’®</td>
</tr>
<tr>
<td>&lt;s:checkbox&gt;â€¦&lt;/s: checkbox &gt;</td>
<td>å¤šé€‰æ¡†</td>
</tr>
<tr>
<td>&lt;s:submit/&gt;</td>
<td>æäº¤æ ‡ç­¾</td>
</tr>
<tr>
<td>&lt;s:reset/&gt;</td>
<td>é‡ç½®æ ‡ç­¾</td>
</tr>
<tr>
<td>&lt;s:hidden/&gt;</td>
<td>éšè—åŸŸæ ‡ç­¾</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:form action=<span class="string">"Login.action"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    		&lt;s:textfield name=<span class="string">"name"</span> value=<span class="string">""</span> label=<span class="string">"ç”¨æˆ·å"</span>&gt;&lt;/s:textfield&gt;</span><br><span class="line">    		&lt;s:password name=<span class="string">"password"</span> value=<span class="string">""</span> label=<span class="string">"å¯†ç "</span>&gt;&lt;/s:password&gt;</span><br><span class="line">    		&lt;s:submit value=<span class="string">"ç™»å½•"</span>&gt;&lt;/s:submit&gt;</span><br><span class="line">    	&lt;/s:form&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>labelå±æ€§æ›´ç®€æ´ï¼Œæ–¹ä¾¿</p>
</blockquote>
<h4 id="éè¡¨å•æ ‡ç­¾"><a href="#éè¡¨å•æ ‡ç­¾" class="headerlink" title="éè¡¨å•æ ‡ç­¾"></a>éè¡¨å•æ ‡ç­¾</h4><table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;s:actionerror/s:actionerror&gt;</td>
<td>æ˜¾ç¤ºactioné”™è¯¯</td>
</tr>
<tr>
<td>&lt;s:actionmessage&gt;â€¦&lt;/s: actionmessage&gt;</td>
<td>æ˜¾ç¤ºerroræ¶ˆæ¯</td>
</tr>
<tr>
<td>&lt;s:fielderror&gt;â€¦&lt;/s: fielderror &gt;</td>
<td>æ˜¾ç¤ºå­—æ®µé”™è¯¯</td>
</tr>
</tbody>
</table>
<h3 id="Struts2é€šç”¨æ ‡ç­¾"><a href="#Struts2é€šç”¨æ ‡ç­¾" class="headerlink" title="Struts2é€šç”¨æ ‡ç­¾"></a>Struts2é€šç”¨æ ‡ç­¾</h3><blockquote>
<p>æ§åˆ¶æ ‡ç­¾</p>
</blockquote>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>æ ‡ç­¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¡ä»¶æ ‡ç­¾</td>
<td>&lt;s:if&gt;&lt;/s:if&gt;</td>
<td>æ ¹æ®è¡¨è¾¾å¼çš„å€¼åˆ¤æ–­æ‰§è¡Œçš„å†…å®¹</td>
</tr>
<tr>
<td>æ¡ä»¶æ ‡ç­¾</td>
<td>&lt;s:elseif&gt;&lt;/s:elseif&gt;</td>
<td>æ ¹æ®è¡¨è¾¾å¼çš„å€¼åˆ¤æ–­æ‰§è¡Œçš„å†…å®¹</td>
</tr>
<tr>
<td>æ¡ä»¶æ ‡ç­¾</td>
<td>&lt;s:else&gt;&lt;/s:else&gt;</td>
<td>æ ¹æ®è¡¨è¾¾å¼çš„å€¼åˆ¤æ–­æ‰§è¡Œçš„å†…å®¹</td>
</tr>
<tr>
<td>å¾ªç¯æ ‡ç­¾</td>
<td>&lt;s:iterator&gt;&lt;/s:iterator&gt;</td>
<td>ç”¨äºä¾¿åˆ©é›†åˆ</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> name=<span class="string">"sex"</span> value=<span class="string">"1"</span>&gt;ç”·</span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> name=<span class="string">"sex"</span> value=<span class="string">"0"</span>&gt;å¥³</span><br><span class="line"></span><br><span class="line">&lt;s:<span class="keyword">if</span> <span class="built_in">test</span>=<span class="string">"sex==1"</span>&gt;ç”·äºº&lt;/s:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;s:elseif <span class="built_in">test</span>=<span class="string">"sex==0"</span>&gt;å¥³äºº&lt;/s:elseif&gt;</span><br><span class="line">&lt;s:<span class="keyword">else</span>&gt;!&lt;/s:<span class="keyword">else</span>&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">private List&lt;String&gt;users=new ArrayList&lt;String&gt;();</span><br><span class="line">users.add(<span class="string">"æ¨Šå¯"</span>);</span><br><span class="line">users.add(<span class="string">"æé’°æ´‹"</span>);</span><br><span class="line">users.add(<span class="string">"fankekeke"</span>);</span><br><span class="line"></span><br><span class="line">//valueå±æ€§ï¼šè¿›è¡Œéå†çš„é›†åˆå¯¹è±¡</span><br><span class="line">//statuså±æ€§ï¼šå½“å‰å¾ªç¯å…ƒç´ çš„IteratorStatuså®ä¾‹</span><br><span class="line">//idå±æ€§ï¼šå½“å‰å¾ªç¯å…ƒç´ çš„idï¼Œå¯ç›´æ¥è®¿é—®å…ƒç´ </span><br><span class="line">&lt;s:iterator value=<span class="string">"users"</span> status=<span class="string">"st"</span> id=<span class="string">"user"</span>&gt;</span><br><span class="line">&lt;s:property value=<span class="string">"user"</span>/&gt;&lt;br/&gt;</span><br><span class="line">&lt;/s:iterator&gt;</span><br><span class="line"></span><br><span class="line">&lt;s:iterator value=<span class="string">"users"</span> status=<span class="string">"st"</span>&gt;</span><br><span class="line">&lt;s:property/&gt;&lt;br/&gt;</span><br><span class="line">&lt;/s:iterator&gt;</span><br><span class="line"></span><br><span class="line">&lt;s:iterator value=<span class="string">"userList"</span> status=<span class="string">"user"</span>&gt;</span><br><span class="line">å§“åï¼š&lt;s:property value=<span class="string">"user.userName"</span> /&gt;</span><br><span class="line">å¹´é¾„ï¼š&lt;s:property value=<span class="string">"user.age"</span> /&gt;</span><br><span class="line">&lt;/s:iterator&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç”¨çš„æ•°æ®æ ‡ç­¾</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>actionæ ‡ç­¾ï¼š</td>
<td>äºåœ¨è§†å›¾é¡µé¢è·³è½¬åˆ°ä¸€ä¸ªAction</td>
</tr>
<tr>
<td>beanæ ‡ç­¾ï¼š</td>
<td>ç”¨äºåˆ›å»ºä¸€ä¸ªJavabeanå®ä¾‹ï¼ŒæŒ‰éœ€ä¿å­˜åˆ°contextä¸­</td>
</tr>
<tr>
<td>dateæ ‡ç­¾ï¼š</td>
<td>ç”¨äºæ ¼å¼åŒ–è¾“å‡ºä¸€ä¸ªæ—¥æœŸ</td>
</tr>
<tr>
<td>debugæ ‡ç­¾ï¼š</td>
<td>ç”¨äºè°ƒè¯•æŸ¥çœ‹ognlä¸Šä¸‹æ–‡ä¸­å†…å®¹</td>
</tr>
<tr>
<td>includeæ ‡ç­¾ï¼š</td>
<td>ç”¨äºåŒ…å«å…¶ä»–çš„jspæˆ–è€…servleté¡µé¢èµ„æº</td>
</tr>
<tr>
<td>paramæ ‡ç­¾ï¼š</td>
<td>ä¸»è¦é…åˆåˆ«çš„æ ‡ç­¾ä½œä¸ºå­æ ‡ç­¾ä½¿ç”¨</td>
</tr>
<tr>
<td>pushæ ‡ç­¾ï¼š</td>
<td>ç”¨äºå°†æŸä¸ªå€¼æ”¾å…¥åˆ°rootæ ˆé¡¶</td>
</tr>
<tr>
<td>setæ ‡ç­¾ï¼š</td>
<td>è®¾ç½®ä¸€ä¸ªæ–°å˜é‡ï¼Œæ”¾å…¥æŒ‡å®šèŒƒå›´</td>
</tr>
<tr>
<td>urlæ ‡ç­¾ï¼š</td>
<td>ç”¨äºç”Ÿæˆä¸€ä¸ªURLåœ°å€</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/21/Struts2å…¥é—¨/" data-id="cjrabl6r0002uvkdq2h6d82y0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HQLè¿æ¥æŸ¥è¯¢å’Œæ³¨è§£" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/19/HQLè¿æ¥æŸ¥è¯¢å’Œæ³¨è§£/" class="article-date">
  <time datetime="2018-11-19T13:04:32.000Z" itemprop="datePublished">2018-11-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/19/HQLè¿æ¥æŸ¥è¯¢å’Œæ³¨è§£/">HQLè¿æ¥æŸ¥è¯¢å’Œæ³¨è§£</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="HQLè¿æ¥æŸ¥è¯¢ç±»å‹"><a href="#HQLè¿æ¥æŸ¥è¯¢ç±»å‹" class="headerlink" title="HQLè¿æ¥æŸ¥è¯¢ç±»å‹"></a>HQLè¿æ¥æŸ¥è¯¢ç±»å‹</h3><h4 id="å†…è¿æ¥"><a href="#å†…è¿æ¥" class="headerlink" title="å†…è¿æ¥"></a>å†…è¿æ¥</h4><blockquote>
<p>INNER JOIN å…³é”®å­—è¡¨ç¤ºå†…è¿æ¥, ä¹Ÿå¯ä»¥çœç•¥ INNER å…³é”®å­—<br> list() æ–¹æ³•çš„é›†åˆä¸­å­˜æ”¾çš„æ¯ä¸ªå…ƒç´ å¯¹åº”æŸ¥è¯¢ç»“æœçš„ä¸€æ¡è®°å½•, æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯¹è±¡æ•°ç»„ç±»å‹ï¼Œ  å¦‚æœå¸Œæœ› list() æ–¹æ³•çš„è¿”å›çš„é›†åˆä»…åŒ…å« Department  å¯¹è±¡, å¯ä»¥åœ¨ HQL æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨ SELECT å…³é”®å­—</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public void <span class="function"><span class="title">testInnerJoin</span></span>()&#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Session session=HibernateUtil.currentSession();</span><br><span class="line">			tx=session.beginTransaction();</span><br><span class="line">			String hql = <span class="string">"from Depts d join d.emps"</span>;	//d.empsä¸ºDeptsè¡¨ä¸­çš„empså±æ€§</span><br><span class="line">			List&lt;Object[]&gt; result=session.createQuery(hql).list();</span><br><span class="line">			<span class="keyword">for</span> (Object[] object : result) &#123;</span><br><span class="line">				System.out.println(((Depts)object[0]).getDeptName());</span><br><span class="line">				System.out.println(<span class="string">"\t"</span>+((Emps)object[1]).getUserName());</span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			<span class="keyword">if</span>(tx!=null)&#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å·¦å¤–è¿æ¥"><a href="#å·¦å¤–è¿æ¥" class="headerlink" title="å·¦å¤–è¿æ¥"></a>å·¦å¤–è¿æ¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public void <span class="function"><span class="title">testLeftJoin</span></span>()&#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Session session=HibernateUtil.currentSession();</span><br><span class="line">			tx=session.beginTransaction();</span><br><span class="line">			String hql = <span class="string">"from Depts d left join d.emps"</span>; //from Emps e left join e.depts			</span><br><span class="line">			List&lt;Object[]&gt; result=session.createQuery(hql).list();</span><br><span class="line">			<span class="keyword">for</span> (Object[] object : result) &#123;</span><br><span class="line">				System.out.println(((Depts)object[0]).getDeptName());</span><br><span class="line">				System.out.println(<span class="string">"\t"</span>+((Emps)object[1]).getUserName());</span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			<span class="keyword">if</span>(tx!=null)&#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¿«åˆ‡è¿æ¥"><a href="#è¿«åˆ‡è¿æ¥" class="headerlink" title="è¿«åˆ‡è¿æ¥"></a>è¿«åˆ‡è¿æ¥</h4><p>è¿«åˆ‡è¿æ¥å¿…é¡»ç”¨å±æ€§æ¥å—</p>
<blockquote>
<p>INNER JOIN FETCH å…³é”®å­—è¡¨ç¤ºè¿«åˆ‡å†…è¿æ¥, ä¹Ÿå¯ä»¥çœç•¥ INNER å…³é”®å­—<br>list() æ–¹æ³•è¿”å›çš„é›†åˆä¸­å­˜æ”¾Departmentå¯¹è±¡çš„å¼•ç”¨, æ¯ä¸ªDepartmentå¯¹è±¡çš„ Employee é›†åˆéƒ½è¢«åˆå§‹åŒ–, å­˜æ”¾æ‰€æœ‰å…³è”çš„ Employee å¯¹è±¡<br>LEFT JOIN FETCH å…³é”®å­—è¡¨ç¤ºè¿«åˆ‡å·¦å¤–è¿æ¥æ£€ç´¢ç­–ç•¥.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">	 * è¿«åˆ‡å·¦è¿æ¥å’Œè¿«åˆ‡å†…è¿æ¥ï¼Œå°è£…ä¸ºæœ€å·¦è¾¹çš„å±æ€§ï¼Œå·²ç»å»ºç«‹äº†å…³ç³»</span><br><span class="line">	 * æ™®é€šè¿æ¥å’Œè¿«åˆ‡è¿æ¥çš„åŒºåˆ«ï¼šå…³è”å±æ€§çš„åˆå§‹åŒ–çŠ¶æ€</span><br><span class="line">	 */</span><br><span class="line">	@Test</span><br><span class="line">	public void <span class="function"><span class="title">testLeftJoinFetch</span></span>()&#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Session session=HibernateUtil.currentSession();</span><br><span class="line">			tx=session.beginTransaction();</span><br><span class="line">			String hql = <span class="string">"from Depts d left join fetch d.emps"</span>; 		</span><br><span class="line">			List&lt;Depts&gt; result=session.createQuery(hql).list();</span><br><span class="line">			<span class="keyword">for</span> (Depts depts : result) &#123;</span><br><span class="line">				System.out.println(depts.getDeptName());</span><br><span class="line">				<span class="keyword">for</span> (Emps emps : depts.getEmps()) &#123;</span><br><span class="line">					System.out.println(<span class="string">"\t"</span>+emps.getUserName());</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			<span class="keyword">if</span>(tx!=null)&#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    @Test</span><br><span class="line">	public void <span class="function"><span class="title">testLeftJoinFetch1</span></span>()&#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Session session=HibernateUtil.currentSession();</span><br><span class="line">			tx=session.beginTransaction();</span><br><span class="line">			String hql = <span class="string">"from Emps e left join fetch e.depts"</span>; 		</span><br><span class="line">			List&lt;Emps&gt; result=session.createQuery(hql).list();</span><br><span class="line">			<span class="keyword">for</span> (Emps emps : result) &#123;</span><br><span class="line">				System.out.println(emps.getUserName());</span><br><span class="line">				System.out.println(<span class="string">"\t"</span>+emps.getDepts().getDeptName());</span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			<span class="keyword">if</span>(tx!=null)&#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç­‰å€¼è¿æ¥-å’Œæ™®é€šå†…è¿æ¥å·®ä¸å¤š"><a href="#ç­‰å€¼è¿æ¥-å’Œæ™®é€šå†…è¿æ¥å·®ä¸å¤š" class="headerlink" title="ç­‰å€¼è¿æ¥(å’Œæ™®é€šå†…è¿æ¥å·®ä¸å¤š)"></a>ç­‰å€¼è¿æ¥(å’Œæ™®é€šå†…è¿æ¥å·®ä¸å¤š)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">	public void <span class="function"><span class="title">testLeftJoinFetch2</span></span>()&#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Session session=HibernateUtil.currentSession();</span><br><span class="line">			tx=session.beginTransaction();</span><br><span class="line">			String hql = <span class="string">"from Depts d,Emps e where d=e.depts"</span>; 		</span><br><span class="line">			List&lt;Object[]&gt; result=session.createQuery(hql).list();</span><br><span class="line">			<span class="keyword">for</span> (Object[] object : result) &#123;</span><br><span class="line">				System.out.println(((Depts)object[0]).getDeptName());</span><br><span class="line">				System.out.println(<span class="string">"\t"</span>+((Emps)object[1]).getUserName());</span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			<span class="keyword">if</span>(tx!=null)&#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="éšå¼å†…è¿æ¥"><a href="#éšå¼å†…è¿æ¥" class="headerlink" title="éšå¼å†…è¿æ¥"></a>éšå¼å†…è¿æ¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">	 * éšå¼å†…è¿æ¥</span><br><span class="line">	 * from Emp e <span class="built_in">where</span> e.depts.deptName=<span class="string">''</span>  --ç”¨äº<span class="built_in">where</span>å­å¥</span><br><span class="line">	 * select empNo,empName,depts.deptName from Emps  --ç”¨äºselectå­å¥</span><br><span class="line">	 * æ ¹æ®å…³è”å…³ç³»è‡ªåŠ¨ä½¿ç”¨ç­‰å€¼è¿æ¥ï¼Œç›´æ¥å·²å¯¹è±¡çš„æ–¹å¼è€ƒè™‘æ¡ä»¶</span><br><span class="line">	 */</span><br><span class="line">	@Test</span><br><span class="line">	public void <span class="function"><span class="title">testLeftJoinFetch3</span></span>()&#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Session session=HibernateUtil.currentSession();</span><br><span class="line">			tx=session.beginTransaction();</span><br><span class="line">			String hql = <span class="string">"from Emps e where e.depts.deptNo=1"</span>; 		</span><br><span class="line">			List result=session.createQuery(hql).list();</span><br><span class="line">			<span class="keyword">for</span> (Object object : result) &#123;</span><br><span class="line">				System.out.println(((Emps)object).getUserName()+<span class="string">"\t"</span>+((Emps)object).getDepts().getDeptName());</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			<span class="keyword">if</span>(tx!=null)&#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">     /**</span><br><span class="line">	 * éšå¼å†…é“¾æ¥ select</span><br><span class="line">	 */</span><br><span class="line">	@Test</span><br><span class="line">	public void <span class="function"><span class="title">testLeftJoinFetch4</span></span>()&#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Session session=HibernateUtil.currentSession();</span><br><span class="line">			tx=session.beginTransaction();</span><br><span class="line">			String hql = <span class="string">"select userId,userName,depts.deptName from Emps"</span>; 		</span><br><span class="line">			List&lt;Object[]&gt; result=session.createQuery(hql).list();</span><br><span class="line">			<span class="keyword">for</span> (Object[] object : result) &#123;</span><br><span class="line">				System.out.println(object[0]+<span class="string">"\t"</span>+object[1]+<span class="string">"\t"</span>+object[2]);</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			<span class="keyword">if</span>(tx!=null)&#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h3><blockquote>
<p>count(),avg(),max(),min()<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">	 * hqlèšåˆå‡½æ•° count(),avg(),max(),min()</span><br><span class="line">	 */</span><br><span class="line">	@Test</span><br><span class="line">	public void <span class="function"><span class="title">testLeftJoinFetch5</span></span>()&#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Session session=HibernateUtil.currentSession();</span><br><span class="line">			tx=session.beginTransaction();</span><br><span class="line">			/*String hql = <span class="string">"select count(userId),e.deptId from Emps e group by e.deptId"</span>;*/</span><br><span class="line">			/*String hql = <span class="string">"select max(userId),min(userId) from Emps"</span>; */</span><br><span class="line">			/*String hql = <span class="string">"select max(userId),min(userId),e.deptNo  from Emps e group by e.deptNo"</span>; */</span><br><span class="line">			/*String hql = <span class="string">"select max(e.userId),d.deptName from Emps e,Depts d where e.depts=d group by d.deptName"</span>;*/</span><br><span class="line">			/*String hql = <span class="string">"select max(e.userId),depts.deptName from Emps e group by depts.deptName"</span>;*/</span><br><span class="line">			String hql = <span class="string">"select max(e.userId),depts.deptName from Emps e group by depts.deptName having depts.deptName='æš—-éƒ¨'"</span>;</span><br><span class="line">			List&lt;Object[]&gt; list=session.createQuery(hql).list();</span><br><span class="line">			<span class="keyword">for</span> (Object[] objects : list) &#123;</span><br><span class="line">				System.out.println(objects[0]+<span class="string">"\t"</span>+objects[1]);</span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			<span class="keyword">if</span>(tx!=null)&#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h3><blockquote>
<p>å¦‚æœå­æŸ¥è¯¢è¿”å›å¤šæ¡è®°å½•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸‹é¢å…³é”®å­—ï¼š</p>
<blockquote>
<p>all:è¡¨ç¤ºå­æŸ¥è¯¢è¯­å¥è¿”å›çš„æ‰€æœ‰è®°å½•<br>        any:è¡¨ç¤ºå­æŸ¥è¯¢è¯­å¥è¿”å›çš„ä»»æ„ä¸€æ¡ç»“æœ<br>        some:ä¸â€anyâ€ç­‰ä»·<br>        in:ä¸â€=anyâ€ç­‰ä»·<br>        exists:è¡¨ç¤ºå­æŸ¥è¯¢è¯­å¥è‡³å°‘è¿”å›ä¸€æ¡è®°å½•</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">	 * å­æŸ¥è¯¢</span><br><span class="line">	 */</span><br><span class="line">	@Test</span><br><span class="line">	public void <span class="function"><span class="title">testLeftJoinFetch6</span></span>()&#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Session session=HibernateUtil.currentSession();</span><br><span class="line">			tx=session.beginTransaction();</span><br><span class="line">			/*String hql = <span class="string">"select userId,userName,depts.deptName from Emps where userId &lt; (select max(userId) from Emps)"</span>; */</span><br><span class="line">			//any ä»»æ„ä¸€æ¡</span><br><span class="line">			/*String hql = <span class="string">"select d.deptNo,d.deptName from Depts d where 5 &gt; any(select userId from Emps e where e.depts=d)"</span>;*/</span><br><span class="line">			//all å…¨éƒ¨</span><br><span class="line">			/*String hql = <span class="string">"select d.deptNo,d.deptName from Depts d where 5 &gt; all(select userId from Emps e where e.depts=d)"</span>;*/</span><br><span class="line">			//<span class="keyword">in</span></span><br><span class="line">			/*String hql = <span class="string">"select d.deptNo,d.deptName from Depts d where 5 in(select userId from Emps e where e.depts=d)"</span>;*/</span><br><span class="line">			//size() æˆ–.size</span><br><span class="line">			String hql = <span class="string">"select d.deptNo,d.deptName from Depts d where 5 &gt; all(select userId from Emps e where e.depts=d) and size(d.emps)&gt;0"</span>;</span><br><span class="line">			List&lt;Object[]&gt; result=session.createQuery(hql).list();</span><br><span class="line">			<span class="keyword">for</span> (Object[] object : result) &#123;</span><br><span class="line">				System.out.println(object[0]+<span class="string">"\t"</span>+object[1]+<span class="string">"\t"</span>);</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			<span class="keyword">if</span>(tx!=null)&#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ“ä½œé›†åˆçš„å‡½æ•°å±æ€§æˆ–å±æ€§"><a href="#æ“ä½œé›†åˆçš„å‡½æ•°å±æ€§æˆ–å±æ€§" class="headerlink" title="æ“ä½œé›†åˆçš„å‡½æ•°å±æ€§æˆ–å±æ€§"></a>æ“ä½œé›†åˆçš„å‡½æ•°å±æ€§æˆ–å±æ€§</h3><blockquote>
<p>size()æˆ–size:è·å–é›†åˆä¸­çš„å…ƒç´ æ•°ç›®ã€‚<br>minIndex()æˆ–minIndex:å¯¹äºå»ºç«‹ç´¢å¼•çš„é›†åˆï¼Œè·å–æœ€å°çš„ç´¢å¼•<br>maxIndex()æˆ–maxIndex:å¯¹äºå»ºç«‹ç´¢å¼•çš„é›†åˆï¼Œè·å–æœ€å¤§çš„ç´¢å¼•ã€‚<br>minElement()æˆ–minElement:å¯¹äºåŒ…å«åŸºæœ¬ç±»å‹çš„å…ƒç´ é›†åˆï¼Œè·å¾—é›†åˆä¸­å–å€¼æœ€å°çš„å…ƒç´ ã€‚<br>maxElement()æˆ–maxElement: å¯¹äºåŒ…å«åŸºæœ¬ç±»å‹çš„å…ƒç´ é›†åˆï¼Œè·å¾—é›†åˆä¸­å–å€¼æœ€å¤§çš„å…ƒç´ ã€‚<br>Elements();è·å–é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String hql = <span class="string">"select d.deptNo,d.deptName from Depts d where 5 &gt; all(select userId from Emps e where e.depts=d) and size(d.emps)&gt;0"</span>;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–"><a href="#æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–"></a>æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–</h3><blockquote>
<p><strong>hibernateæŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥</strong><br>ï¼ˆ1.ï¼‰ä½¿ç”¨è¿«åˆ‡å·¦å¤–è¿æ¥ï¼Œæˆ–è¿«åˆ‡è¿æ¥æŸ¥è¯¢ç­–ç•¥ï¼Œé…ç½®äºŒçº§ç¼“å­˜å’ŒæŸ¥è¯¢ç­‰æ–¹å¼ï¼Œå‡å°‘selectè¯­å¥æ•°ç›®ï¼Œé™ä½è®¿é—®æ•°æ®åº“çš„é¢‘ç‡ã€‚<br>ï¼ˆ2.ï¼‰ä½¿ç”¨å»¶è¿ŸåŠ è½½ç­‰æ–¹å¼é¿å…åŠ è½½å¤šä½™ä¸éœ€è¦è®¿é—®çš„æ•°æ®ã€‚<br>ï¼ˆ3.ï¼‰ä½¿ç”¨Queryæ¥å£çš„iterateï¼ˆï¼‰æ–¹æ³•å‡å°‘selectè¯­å¥çš„å­—æ®µï¼Œé™ä½è®¿é—®æ•°æ®åº“çš„æ•°æ®é‡ï¼Œå¹¶ç»“åˆç¼“å­˜ç­‰æœºåˆ¶å‡å°‘æ•°æ®åº“çš„è®¿é—®æ¬¡æ•°ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p>
</blockquote>
<blockquote>
<p><strong>HQLä¼˜åŒ–</strong><br>ï¼ˆ1.ï¼‰é¿å…ä½¿ç”¨oræ“ä½œçš„ä¸å½“ã€‚<br>ï¼ˆ2.ï¼‰é¿å…ä½¿ç”¨notã€‚<br>ï¼ˆ3.ï¼‰é¿å…ä½¿ç”¨likeçš„ç‰¹æ®Šå½¢å¼ã€‚<br>ï¼ˆ4.ï¼‰é¿å…ä½¿ç”¨havingå­å¥ã€‚<br>ï¼ˆ5.ï¼‰é¿å…ä½¿ç”¨distinctã€‚<br>ï¼ˆ6.ï¼‰ç´¢å¼•åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¤±æ•ˆï¼Œä½¿ç”¨æ—¶æ³¨æ„ã€‚<br>                   å¯¹å­—æ®µä½¿ç”¨å‡½æ•°ï¼Œè¯¥å­—æ®µçš„ç´¢å¼•å°†ä¸èµ·ä½œç”¨ã€‚å¦‚ï¼šsubstringï¼ˆaa,1,2ï¼‰=â€™xxxâ€™<br>                   å¯¹å­—æ®µè¿›è¡Œè®¡ç®—ï¼Œè¯¥å­—æ®µçš„ç´¢å¼•å°†ä¸èµ·ä½œç”¨ã€‚å¦‚ï¼šprice+10ã€‚</p>
</blockquote>
<h3 id="hibernateæ³¨è§£"><a href="#hibernateæ³¨è§£" class="headerlink" title="hibernateæ³¨è§£"></a>hibernateæ³¨è§£</h3><h4 id="å•å¯¹è±¡æ“ä½œ"><a href="#å•å¯¹è±¡æ“ä½œ" class="headerlink" title="å•å¯¹è±¡æ“ä½œ"></a>å•å¯¹è±¡æ“ä½œ</h4><blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">@Entityã€€ã€€---&gt;ã€€ã€€å¦‚æœæˆ‘ä»¬å½“å‰è¿™ä¸ªbeanè¦è®¾ç½®æˆå®ä½“å¯¹è±¡ï¼Œå°±éœ€è¦åŠ ä¸ŠEntityè¿™ä¸ªæ³¨è§£</span><br><span class="line">@Table(name=<span class="string">"t_user"</span>)ã€€ã€€----&gt;ã€€ã€€è®¾ç½®æ•°æ®åº“çš„è¡¨å</span><br><span class="line">public class User</span><br><span class="line">&#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String username;</span><br><span class="line">    private String password;</span><br><span class="line">    private Date born;</span><br><span class="line">    private Date registerDate;</span><br><span class="line"></span><br><span class="line">    @Column(name=<span class="string">"register_date"</span>)ã€€ã€€---&gt;ã€€ã€€Columnä¸­çš„nameå±æ€§å¯¹åº”äº†æ•°æ®åº“çš„è¯¥å­—æ®µåå­—ï¼Œé‡Œé¢è¿˜æœ‰å…¶ä»–å±æ€§ï¼Œä¾‹å¦‚lengthï¼Œnullableç­‰ç­‰</span><br><span class="line">    public Date getRegisterDate()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> registerDate;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setRegisterDate(Date registerDate)</span><br><span class="line">    &#123;</span><br><span class="line">        this.registerDate = registerDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Idã€€ã€€---&gt;ã€€ã€€å®šä¹‰ä¸ºæ•°æ®åº“çš„ä¸»é”®IDã€€ã€€(å»ºè®®ä¸è¦åœ¨å±æ€§ä¸Šå¼•å…¥æ³¨è§£ï¼Œå› ä¸ºå±æ€§æ˜¯privateçš„ï¼Œå¦‚æœå¼•å…¥æ³¨è§£ä¼šç ´åå…¶å°è£…ç‰¹æ€§ï¼Œæ‰€ä»¥å»ºè®®åœ¨getteræ–¹æ³•ä¸ŠåŠ å…¥æ³¨è§£)</span><br><span class="line">    @GeneratedValueã€€ã€€----&gt;ã€€ã€€IDçš„ç”Ÿæˆç­–ç•¥ä¸ºè‡ªåŠ¨ç”Ÿæˆã€€ã€€</span><br><span class="line">    public int getId()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setId(int id)</span><br><span class="line">    &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"> ã€€ã€€............</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="ä¸€å¯¹å¤šçš„æ˜ å°„-one-to-many"><a href="#ä¸€å¯¹å¤šçš„æ˜ å°„-one-to-many" class="headerlink" title="ä¸€å¯¹å¤šçš„æ˜ å°„(one-to-many)"></a>ä¸€å¯¹å¤šçš„æ˜ å°„(one-to-many)</h4><blockquote>
<p>ClassRoomç±»ï¼š</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">@Table(name=<span class="string">"t_classroom"</span>)</span><br><span class="line">public class ClassRoom</span><br><span class="line">&#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String className;</span><br><span class="line">    private Set&lt;Student&gt; students;</span><br><span class="line">    </span><br><span class="line">    public ClassRoom()</span><br><span class="line">    &#123;</span><br><span class="line">        students = new HashSet&lt;Student&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void addStudent(Student student)</span><br><span class="line">    &#123;</span><br><span class="line">        students.add(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue</span><br><span class="line">    public int getId()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setId(int id)</span><br><span class="line">    &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getClassName()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> className;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setClassName(String className)</span><br><span class="line">    &#123;</span><br><span class="line">        this.className = className;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @OneToMany(mappedBy=<span class="string">"room"</span>)ã€€ã€€---&gt;ã€€ã€€OneToManyæŒ‡å®šäº†ä¸€å¯¹å¤šçš„å…³ç³»ï¼ŒmappedBy=<span class="string">"room"</span>æŒ‡å®šäº†ç”±å¤šçš„é‚£ä¸€æ–¹æ¥ç»´æŠ¤å…³è”å…³ç³»ï¼ŒmappedByæŒ‡çš„æ˜¯å¤šçš„ä¸€æ–¹å¯¹1çš„è¿™ä¸€æ–¹çš„ä¾èµ–çš„å±æ€§ï¼Œ(æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰æŒ‡å®šç”±è°æ¥ç»´æŠ¤å…³è”å…³ç³»ï¼Œåˆ™ç³»ç»Ÿä¼šç»™æˆ‘ä»¬åˆ›å»ºä¸€å¼ ä¸­é—´è¡¨)</span><br><span class="line">    @LazyCollection(LazyCollectionOption.EXTRA)ã€€ã€€---&gt;ã€€ã€€LazyCollectionå±æ€§è®¾ç½®æˆEXTRAæŒ‡å®šäº†å½“å¦‚æœæŸ¥è¯¢æ•°æ®çš„ä¸ªæ•°æ—¶å€™ï¼Œåªä¼šå‘å‡ºä¸€æ¡ count(*)çš„è¯­å¥ï¼Œæé«˜æ€§èƒ½</span><br><span class="line">    public Set&lt;Student&gt; getStudents()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> students;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setStudents(Set&lt;Student&gt; students)</span><br><span class="line">    &#123;</span><br><span class="line">        this.students = students;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Studentç±»</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">@Table(name=<span class="string">"t_student"</span>)</span><br><span class="line">public class Student</span><br><span class="line">&#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">    private ClassRoom room;</span><br><span class="line">    </span><br><span class="line">    @ManyToOne(fetch=FetchType.LAZY)ã€€ã€€---&gt; ManyToOneæŒ‡å®šäº†å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œfetch=FetchType.LAZYå±æ€§è¡¨ç¤ºåœ¨å¤šçš„é‚£ä¸€æ–¹é€šè¿‡å»¶è¿ŸåŠ è½½çš„æ–¹å¼åŠ è½½å¯¹è±¡(é»˜è®¤ä¸æ˜¯å»¶è¿ŸåŠ è½½)</span><br><span class="line">    @JoinColumn(name=<span class="string">"rid"</span>)ã€€ã€€---&gt;ã€€ã€€é€šè¿‡ JoinColumn çš„nameå±æ€§æŒ‡å®šäº†å¤–é”®çš„åç§° ridã€€(æ³¨æ„ï¼šå¦‚æœæˆ‘ä»¬ä¸é€šè¿‡JoinColumæ¥æŒ‡å®šå¤–é”®çš„åç§°ï¼Œç³»ç»Ÿä¼šç»™æˆ‘ä»¬å£°æ˜ä¸€ä¸ªåç§°)</span><br><span class="line">    public ClassRoom getRoom()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> room;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setRoom(ClassRoom room)</span><br><span class="line">    &#123;</span><br><span class="line">        this.room = room;</span><br><span class="line">    &#125;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue</span><br><span class="line">    public int getId()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setId(int id)</span><br><span class="line">    &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    public String getName()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name)</span><br><span class="line">    &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public int getAge()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setAge(int age)</span><br><span class="line">    &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸€å¯¹ä¸€æ˜ å°„-One-to-One"><a href="#ä¸€å¯¹ä¸€æ˜ å°„-One-to-One" class="headerlink" title="ä¸€å¯¹ä¸€æ˜ å°„(One-to-One)"></a>ä¸€å¯¹ä¸€æ˜ å°„(One-to-One)</h4><p>ä¸€å¯¹ä¸€å…³ç³»è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªPersonå¯¹è±¡ä»¥åŠä¸€ä¸ªIDCardå¯¹è±¡</p>
<blockquote>
<p>Personç±»</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">@Table(name=<span class="string">"t_person"</span>)</span><br><span class="line">public class Person</span><br><span class="line">&#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private IDCard card;</span><br><span class="line">    </span><br><span class="line">    @OneToOne(mappedBy=<span class="string">"person"</span>)ã€€ã€€---&gt;ã€€ã€€æŒ‡å®šäº†OneToOneçš„å…³è”å…³ç³»ï¼ŒmappedByåŒæ ·æŒ‡å®šç”±å¯¹æ–¹æ¥è¿›è¡Œç»´æŠ¤å…³è”å…³ç³»</span><br><span class="line">    public IDCard getCard()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> card;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setCard(IDCard card)</span><br><span class="line">    &#123;</span><br><span class="line">        this.card = card;</span><br><span class="line">    &#125;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue</span><br><span class="line">    public int getId()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setId(int id)</span><br><span class="line">    &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    public String getName()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name)</span><br><span class="line">    &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>IDCardç±»</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">@Table(name=<span class="string">"t_id_card"</span>)</span><br><span class="line">public class IDCard</span><br><span class="line">&#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String no;</span><br><span class="line">    private Person person;</span><br><span class="line">    </span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue</span><br><span class="line">    public int getId()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setId(int id)</span><br><span class="line">    &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    public String getNo()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> no;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setNo(String no)</span><br><span class="line">    &#123;</span><br><span class="line">        this.no = no;</span><br><span class="line">    &#125;</span><br><span class="line">    @OneToOneã€€ã€€---&gt;ã€€ã€€OnetoOneæŒ‡å®šäº†ä¸€å¯¹ä¸€çš„å…³è”å…³ç³»ï¼Œä¸€å¯¹ä¸€ä¸­éšä¾¿æŒ‡å®šä¸€æ–¹æ¥ç»´æŠ¤æ˜ å°„å…³ç³»ï¼Œè¿™é‡Œé€‰æ‹©IDCardæ¥è¿›è¡Œç»´æŠ¤</span><br><span class="line">    @JoinColumn(name=<span class="string">"pid"</span>)ã€€ã€€---&gt;ã€€ã€€æŒ‡å®šå¤–é”®çš„åå­— pid</span><br><span class="line">    public Person getPerson()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> person;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setPerson(Person person)</span><br><span class="line">    &#123;</span><br><span class="line">        this.person = person;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>åœ¨åˆ¤æ–­åˆ°åº•æ˜¯è°ç»´æŠ¤å…³è”å…³ç³»æ—¶ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹å¤–é”®ï¼Œå“ªä¸ªå®ä½“ç±»å®šä¹‰äº†å¤–é”®ï¼Œå“ªä¸ªç±»å°±è´Ÿè´£ç»´æŠ¤å…³è”å…³ç³»ã€‚</strong></p>
</blockquote>
<h4 id="Many-to-Manyæ˜ å°„-å¤šå¯¹å¤šæ˜ å°„å…³ç³»"><a href="#Many-to-Manyæ˜ å°„-å¤šå¯¹å¤šæ˜ å°„å…³ç³»" class="headerlink" title="Many-to-Manyæ˜ å°„(å¤šå¯¹å¤šæ˜ å°„å…³ç³»)"></a>Many-to-Manyæ˜ å°„(å¤šå¯¹å¤šæ˜ å°„å…³ç³»)</h4><p>é€šè¿‡ä¸­é—´è¡¨ç”±ä»»ä¸€ä¸€ä¸ªå¤šçš„ä¸€æ–¹æ¥ç»´æŠ¤å…³è”å…³ç³»</p>
<blockquote>
<p>Teacher</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">@Table(name=<span class="string">"t_teacher"</span>)</span><br><span class="line">public class Teacher</span><br><span class="line">&#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private Set&lt;Course&gt; courses;</span><br><span class="line">    </span><br><span class="line">    public Teacher()</span><br><span class="line">    &#123;</span><br><span class="line">        courses = new HashSet&lt;Course&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    public void addCourse(Course course)</span><br><span class="line">    &#123;</span><br><span class="line">        courses.add(course);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue</span><br><span class="line">    public int getId()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setId(int id)</span><br><span class="line">    &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    public String getName()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name)</span><br><span class="line">    &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    @ManyToMany(mappedBy=<span class="string">"teachers"</span>)ã€€ã€€---&gt;ã€€ã€€è¡¨ç¤ºç”±Courseé‚£ä¸€æ–¹æ¥è¿›è¡Œç»´æŠ¤</span><br><span class="line">    public Set&lt;Course&gt; getCourses()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> courses;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setCourses(Set&lt;Course&gt; courses)</span><br><span class="line">    &#123;</span><br><span class="line">        this.courses = courses;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Courseç±»</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">@Table(name=<span class="string">"t_course"</span>)</span><br><span class="line">public class Course</span><br><span class="line">&#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private Set&lt;Teacher&gt; teachers;</span><br><span class="line">    </span><br><span class="line">    public Course()</span><br><span class="line">    &#123;</span><br><span class="line">        teachers = new HashSet&lt;Teacher&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    public void addTeacher(Teacher teacher)</span><br><span class="line">    &#123;</span><br><span class="line">        teachers.add(teacher);</span><br><span class="line">    &#125;</span><br><span class="line">    @ManyToManyã€€ã€€ã€€---&gt;ã€€ManyToManyæŒ‡å®šå¤šå¯¹å¤šçš„å…³è”å…³ç³»</span><br><span class="line">    @JoinTable(name=<span class="string">"t_teacher_course"</span>, joinColumns=&#123; @JoinColumn(name=<span class="string">"cid"</span>)&#125;, </span><br><span class="line">    inverseJoinColumns=&#123; @JoinColumn(name = <span class="string">"tid"</span>) &#125;)ã€€ã€€---&gt;ã€€ã€€å› ä¸ºå¤šå¯¹å¤šä¹‹é—´ä¼šé€šè¿‡ä¸€å¼ ä¸­é—´è¡¨æ¥ç»´æŠ¤ä¸¤è¡¨ç›´æ¥çš„å…³ç³»ï¼Œæ‰€ä»¥é€šè¿‡ JoinTable è¿™ä¸ªæ³¨è§£æ¥å£°æ˜ï¼Œnameå°±æ˜¯æŒ‡å®šäº†ä¸­é—´è¡¨çš„åå­—ï¼ŒJoinColumnsæ˜¯ä¸€ä¸ª @JoinColumnç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºçš„æ˜¯æˆ‘è¿™æ–¹åœ¨å¯¹æ–¹ä¸­çš„å¤–é”®åç§°ï¼Œæˆ‘æ–¹æ˜¯Courseï¼Œæ‰€ä»¥åœ¨å¯¹æ–¹å¤–é”®çš„åç§°å°±æ˜¯ ridï¼ŒinverseJoinColumnsä¹Ÿæ˜¯ä¸€ä¸ª @JoinColumnç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºçš„æ˜¯å¯¹æ–¹åœ¨æˆ‘è¿™æ”¾ä¸­çš„å¤–é”®åç§°ï¼Œå¯¹æ–¹æ˜¯Teacherï¼Œæ‰€ä»¥åœ¨æˆ‘æ–¹å¤–é”®çš„åç§°å°±æ˜¯ tid</span><br><span class="line">    public Set&lt;Teacher&gt; getTeachers()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> teachers;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setTeachers(Set&lt;Teacher&gt; teachers)</span><br><span class="line">    &#123;</span><br><span class="line">        this.teachers = teachers;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue</span><br><span class="line">    public int getId()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setId(int id)</span><br><span class="line">    &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name)</span><br><span class="line">    &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é€šè¿‡hibernateæ¥è¿›è¡Œæ’å…¥æ“ä½œçš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯ä¸€å¯¹å¤šã€ä¸€å¯¹ä¸€è¿˜æ˜¯å¤šå¯¹å¤šï¼Œéƒ½åªéœ€è¦è®°ä½ä¸€ç‚¹ï¼Œåœ¨å“ªä¸ªå®ä½“ç±»å£°æ˜äº†å¤–é”®ï¼Œå°±ç”±å“ªä¸ªç±»æ¥ç»´æŠ¤å…³ç³»ï¼Œåœ¨ä¿å­˜æ•°æ®æ—¶ï¼Œæ€»æ˜¯å…ˆä¿å­˜çš„æ˜¯æ²¡æœ‰ç»´æŠ¤å…³è”å…³ç³»çš„é‚£ä¸€æ–¹çš„æ•°æ®ï¼Œåä¿å­˜ç»´æŠ¤äº†å…³è”å…³ç³»çš„é‚£ä¸€æ–¹çš„æ•°æ®</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/19/HQLè¿æ¥æŸ¥è¯¢å’Œæ³¨è§£/" data-id="cjrabl6mf0000vkdqz9z1jxrv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Oracleä¸»é”®è‡ªå¢å®ç°" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/16/Oracleä¸»é”®è‡ªå¢å®ç°/" class="article-date">
  <time datetime="2018-11-16T07:16:41.000Z" itemprop="datePublished">2018-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Oracle/">Oracle</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/16/Oracleä¸»é”®è‡ªå¢å®ç°/">Oracleä¸»é”®è‡ªå¢å®ç°</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Oracleæ²¡æœ‰è¿™ä¸ªâ€auto_incrementâ€å±æ€§ï¼Œæ‰€ä»¥å®ƒæ²¡æ³•åƒMySQLèˆ¬åœ¨è¡¨å†…å®šä¹‰è‡ªå¢ä¸»é”®ã€‚<br>ä½†æ˜¯ï¼ŒOracleé‡Œçš„åºåˆ—ï¼ˆSEQUENCEï¼‰ï¼Œå¯é—´æ¥å®ç°è‡ªå¢ä¸»é”®çš„ä½œç”¨ã€‚</p>
<p>åºåˆ—ï¼ˆSequenceï¼‰ï¼Œåˆå«åºåˆ—ç”Ÿæˆå™¨ï¼Œç”¨äºæä¾›ä¸€ç³»åˆ—çš„æ•°å­—ï¼Œå¼€å‘äººå‘˜ä½¿ç”¨åºåˆ—ç”Ÿæˆå”¯ä¸€é”®ã€‚æ¯æ¬¡è®¿é—®åºåˆ—ï¼Œåºåˆ—æŒ‰ç…§ä¸€å®šçš„è§„å¾‹å¢åŠ æˆ–è€…å‡å°‘ã€‚<br>åºåˆ—çš„å®šä¹‰å­˜å‚¨åœ¨SYSTEMè¡¨ç©ºé—´ä¸­ï¼Œåºåˆ—ä¸åƒè¡¨ï¼Œå®ƒä¸ä¼šå ç”¨ç£ç›˜ç©ºé—´ã€‚<br>åºåˆ—ç‹¬ç«‹äºäº‹åŠ¡ï¼Œæ¯æ¬¡äº‹åŠ¡çš„æäº¤å’Œå›æ»šéƒ½ä¸ä¼šå½±å“åºåˆ—ã€‚</p>
<h3 id="åˆ›å»ºç”¨æˆ·æ•°æ®è¡¨"><a href="#åˆ›å»ºç”¨æˆ·æ•°æ®è¡¨" class="headerlink" title="åˆ›å»ºç”¨æˆ·æ•°æ®è¡¨"></a>åˆ›å»ºç”¨æˆ·æ•°æ®è¡¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ›å»ºç”¨æˆ·æ•°æ®è¡¨</span><br><span class="line">DROP TABLE DECTUSER;</span><br><span class="line">CREATE TABLE DECTUSER(</span><br><span class="line">       USERID INTEGER PRIMARY KEY,</span><br><span class="line">       NAME VARCHAR2(20),</span><br><span class="line">       SEX VARCHAR2(2)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè‡ªåŠ¨å¢é•¿åºåˆ—"><a href="#åˆ›å»ºè‡ªåŠ¨å¢é•¿åºåˆ—" class="headerlink" title="åˆ›å»ºè‡ªåŠ¨å¢é•¿åºåˆ—"></a>åˆ›å»ºè‡ªåŠ¨å¢é•¿åºåˆ—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ›å»ºè‡ªåŠ¨å¢é•¿åºåˆ—</span><br><span class="line">DROP SEQUENCE DECTUSER_tb_seq;</span><br><span class="line">CREATE SEQUENCE DECTUSER_tb_seq MINVALUE 1 MAXVALUE 99999999</span><br><span class="line">INCREMENT BY 1</span><br><span class="line">START WITH 1;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè§¦å‘å™¨"><a href="#åˆ›å»ºè§¦å‘å™¨" class="headerlink" title="åˆ›å»ºè§¦å‘å™¨"></a>åˆ›å»ºè§¦å‘å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ›å»ºè§¦å‘å™¨</span><br><span class="line">CREATE OR REPLACE TRIGGER DECTUSER_tb_tri</span><br><span class="line">BEFORE INSERT ON DECTUSER </span><br><span class="line">FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">SELECT DECTUSER_tb_seq.nextval INTO :NEW.USERID FROM DUAL;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<h3 id="å°è¯•æ·»åŠ æ•°æ®"><a href="#å°è¯•æ·»åŠ æ•°æ®" class="headerlink" title="å°è¯•æ·»åŠ æ•°æ®"></a>å°è¯•æ·»åŠ æ•°æ®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- å°è¯•æ·»åŠ æ•°æ®</span><br><span class="line">INSERT INTO DECTUSER(NAME,SEX) VALUES(<span class="string">'æ†¨å…«é¾Ÿ'</span>,<span class="string">'ç”·'</span>)</span><br><span class="line">INSERT INTO DECTUSER(NAME,SEX) VALUES(<span class="string">'å°ç«é¾™'</span>,<span class="string">'ç”·'</span>)</span><br><span class="line">INSERT INTO DECTUSER(NAME,SEX) VALUES(<span class="string">'æ°å°¼é¾Ÿ'</span>,<span class="string">'å¥³'</span>)</span><br><span class="line">commit</span><br></pre></td></tr></table></figure>
<h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    USERID NAME                                     SEX</span><br><span class="line">---------- ---------------------------------------- ----------</span><br><span class="line">         1 æ†¨å…«é¾Ÿ                                   ç”·</span><br><span class="line">         2 å°ç«é¾™                                   ç”·</span><br><span class="line">         3 æ°å°¼é¾Ÿ                                   å¥³</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/16/Oracleä¸»é”®è‡ªå¢å®ç°/" data-id="cjrabl6nj000vvkdqs8c44g9p" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-é•œèŠ±æ°´æœˆ" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/14/é•œèŠ±æ°´æœˆ/" class="article-date">
  <time datetime="2018-11-14T15:00:24.000Z" itemprop="datePublished">2018-11-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/14/é•œèŠ±æ°´æœˆ/">é•œèŠ±æ°´æœˆ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>åªè¦æ˜¯äººéƒ½æ˜¯ä¾é è‡ªå·±çš„çŸ¥è¯†ä¸è®¤çŸ¥å¹¶ä¸”è¢«ä¹‹æŸç¼šç”Ÿæ´»ç€çš„ï¼Œé‚£å°±å«åšç°å®ã€‚ä½†æ˜¯çŸ¥è¯†ä¸è®¤çŸ¥æ˜¯æ¨¡ç³Šä¸æ¸…çš„ä¸œè¥¿ï¼Œç°å®ä¹Ÿè®¸åªæ˜¯é•œä¸­èŠ±æ°´ä¸­æœˆï¼Œäººéƒ½æ˜¯æ´»åœ¨è‡ªå·±çš„æ‰§å¿µä¸­çš„ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/14/é•œèŠ±æ°´æœˆ/" data-id="cjrabl6rt0047vkdqbep45b5v" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/åˆ†äº«/">åˆ†äº«</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SSMåŸºç¡€æ¡ˆä¾‹æ–‡ä»¶" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/11/SSMåŸºç¡€æ¡ˆä¾‹æ–‡ä»¶/" class="article-date">
  <time datetime="2018-11-11T14:25:11.000Z" itemprop="datePublished">2018-11-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSM/">SSM</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/11/SSMåŸºç¡€æ¡ˆä¾‹æ–‡ä»¶/">SSMåŸºç¡€æ¡ˆä¾‹æ–‡ä»¶</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="BaseController-java-è¿™ä¸ªåŸºç±»ç”¨æ¥è®¾ç½®ç»§æ‰¿ä»–çš„å­ç±»çš„æŒä¹…åŒ–ç±»çš„dateå±æ€§"><a href="#BaseController-java-è¿™ä¸ªåŸºç±»ç”¨æ¥è®¾ç½®ç»§æ‰¿ä»–çš„å­ç±»çš„æŒä¹…åŒ–ç±»çš„dateå±æ€§" class="headerlink" title="BaseController.java(è¿™ä¸ªåŸºç±»ç”¨æ¥è®¾ç½®ç»§æ‰¿ä»–çš„å­ç±»çš„æŒä¹…åŒ–ç±»çš„dateå±æ€§)"></a>BaseController.java(è¿™ä¸ªåŸºç±»ç”¨æ¥è®¾ç½®ç»§æ‰¿ä»–çš„å­ç±»çš„æŒä¹…åŒ–ç±»çš„dateå±æ€§)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@InitBinder</span><br><span class="line">	public void initBinder(WebDataBinder dataBinder)&#123;</span><br><span class="line">		System.out.println(<span class="string">"initBinder======================="</span>);</span><br><span class="line">		dataBinder.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>), <span class="literal">true</span>));</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="daoå±‚æ¥å£ä¸xml"><a href="#daoå±‚æ¥å£ä¸xml" class="headerlink" title="daoå±‚æ¥å£ä¸xml"></a>daoå±‚æ¥å£ä¸xml</h3><h4 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// å¢åŠ </span><br><span class="line">public int insertUser(User user);</span><br><span class="line"></span><br><span class="line">// ä¿®æ”¹</span><br><span class="line">public int updateUser(User user);</span><br><span class="line"></span><br><span class="line">// åˆ é™¤</span><br><span class="line">public int deleteUser(@Param(<span class="string">"uid"</span>) int uid);</span><br><span class="line"></span><br><span class="line">//åˆ é™¤åœ°å€</span><br><span class="line">public int deleteAddress(@Param(<span class="string">"uid"</span>) int uid);</span><br><span class="line"></span><br><span class="line">// æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢åœ°å€ä¿¡æ¯</span><br><span class="line">public List&lt;User&gt; selectUser(@Param(<span class="string">"uid"</span>) int uid);</span><br><span class="line"></span><br><span class="line">// æ ¹æ®åœ°å€idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">public List&lt;Address&gt; selectAddress(@Param(<span class="string">"addressid"</span>) int addressid);</span><br><span class="line"></span><br><span class="line">// æ ¹æ®å¤šä¸ªç”¨æˆ·æŸ¥è¯¢</span><br><span class="line">public List&lt;User&gt; selectUsers(UserVo vo);</span><br><span class="line"></span><br><span class="line">//åŠ¨æ€trimæ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="line">public List&lt;User&gt;seleteUserByUser(User user);</span><br><span class="line"></span><br><span class="line">//ç™»å½•</span><br><span class="line">public User login(User user);</span><br><span class="line"></span><br><span class="line">//æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="line">public List&lt;User&gt;getUserList(User user);</span><br><span class="line"></span><br><span class="line">//æ ¹æ®idè·å–ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">public User getUserById(@Param(<span class="string">"uid"</span>) int uid);</span><br><span class="line"></span><br><span class="line">//è·å–æ‰€æœ‰ç”¨æˆ·</span><br><span class="line">public List&lt;User&gt;getUsers();</span><br></pre></td></tr></table></figure>
<h4 id="xml-mapperæ˜ å°„"><a href="#xml-mapperæ˜ å°„" class="headerlink" title="xml(mapperæ˜ å°„)"></a>xml(mapperæ˜ å°„)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">PUBLIC <span class="string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">"cn.dao.UserMapper"</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- å¢åŠ  --&gt;</span><br><span class="line">	&lt;insert id=<span class="string">"insertUser"</span> parameterType=<span class="string">"User"</span>&gt;</span><br><span class="line">		INSERT INTO</span><br><span class="line">		user_info(user_name,user_pwd,user_birthday)VALUES(<span class="comment">#&#123;userName&#125;,#&#123;userPwd&#125;,#&#123;userBirthday&#125;)</span></span><br><span class="line">	&lt;/insert&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- åŠ¨æ€trimä¿®æ”¹ --&gt;</span><br><span class="line">	&lt;update id=<span class="string">"updateUser"</span> parameterType=<span class="string">"User"</span>&gt;</span><br><span class="line">		UPDATE user_info</span><br><span class="line">		&lt;trim prefix=<span class="string">"set"</span> suffixOverrides=<span class="string">","</span>&gt;</span><br><span class="line">			&lt;<span class="keyword">if</span> <span class="built_in">test</span>=<span class="string">"userName!=null and userName!=''"</span>&gt;</span><br><span class="line">				user_name=<span class="comment">#&#123;userName&#125;,</span></span><br><span class="line">			&lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">			&lt;<span class="keyword">if</span> <span class="built_in">test</span>=<span class="string">"userPwd!=null and userPwd!=''"</span>&gt;</span><br><span class="line">				user_pwd=<span class="comment">#&#123;userPwd&#125;,</span></span><br><span class="line">			&lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">			&lt;<span class="keyword">if</span> <span class="built_in">test</span>=<span class="string">"userBirthday!=null and userBirthday!=''"</span>&gt;</span><br><span class="line">				user_birthday=<span class="comment">#&#123;userBirthday&#125;,</span></span><br><span class="line">			&lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">		&lt;/trim&gt;</span><br><span class="line">		<span class="built_in">where</span> id=<span class="comment">#&#123;id&#125;</span></span><br><span class="line">	&lt;/update&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- åˆ é™¤ --&gt;</span><br><span class="line">	&lt;delete id=<span class="string">"deleteUser"</span> parameterType=<span class="string">"int"</span>&gt;</span><br><span class="line">		DELETE from user_info</span><br><span class="line">		WHERE id=<span class="comment">#&#123;uid&#125;</span></span><br><span class="line">	&lt;/delete&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- åˆ é™¤åœ°å€ --&gt;</span><br><span class="line">	&lt;delete id=<span class="string">"deleteAddress"</span> parameterType=<span class="string">"int"</span>&gt;</span><br><span class="line">		DELETE from</span><br><span class="line">		address_info WHERE user_id=<span class="comment">#&#123;uid&#125;</span></span><br><span class="line">	&lt;/delete&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- trimæŸ¥è¯¢user --&gt;</span><br><span class="line">	&lt;select id=<span class="string">"seleteUserByUser"</span> resultMap=<span class="string">"UserList"</span></span><br><span class="line">		parameterType=<span class="string">"User"</span>&gt;</span><br><span class="line">		SELECT *FROM user_info WHERE user_name=<span class="comment">#&#123;userName&#125; and</span></span><br><span class="line">		user_pwd=<span class="comment">#&#123;userPwd&#125;</span></span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">	&lt;resultMap <span class="built_in">type</span>=<span class="string">"User"</span> id=<span class="string">"UserList"</span>&gt;</span><br><span class="line">		&lt;result property=<span class="string">"id"</span> column=<span class="string">"id"</span> /&gt;</span><br><span class="line">		&lt;result property=<span class="string">"userName"</span> column=<span class="string">"user_name"</span> /&gt;</span><br><span class="line">		&lt;result property=<span class="string">"userPwd"</span> column=<span class="string">"user_pwd"</span> /&gt;</span><br><span class="line">		&lt;result property=<span class="string">"userBirthday"</span> column=<span class="string">"user_birthday"</span> /&gt;</span><br><span class="line">	&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢åœ°å€ä¿¡æ¯ --&gt;</span><br><span class="line">	&lt;select id=<span class="string">"selectUser"</span> parameterType=<span class="string">"User"</span> resultMap=<span class="string">"getAddress"</span>&gt;</span><br><span class="line">		SELECT *</span><br><span class="line">		FROM user_info u,address_info a WHERE a.user_id=u.id AND</span><br><span class="line">		u.id=<span class="comment">#&#123;uid&#125;</span></span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">	&lt;resultMap <span class="built_in">type</span>=<span class="string">"User"</span> id=<span class="string">"getAddress"</span>&gt;</span><br><span class="line">		&lt;result property=<span class="string">"id"</span> column=<span class="string">"id"</span> /&gt;</span><br><span class="line">		&lt;result property=<span class="string">"userName"</span> column=<span class="string">"user_name"</span> /&gt;</span><br><span class="line">		&lt;result property=<span class="string">"userPwd"</span> column=<span class="string">"user_pwd"</span> /&gt;</span><br><span class="line">		&lt;result property=<span class="string">"userBirthday"</span> column=<span class="string">"user_birthday"</span> /&gt;</span><br><span class="line">		&lt;collection property=<span class="string">"addresses"</span> ofType=<span class="string">"Address"</span>&gt;</span><br><span class="line">			&lt;result property=<span class="string">"id"</span> column=<span class="string">"id"</span> /&gt;</span><br><span class="line">			&lt;result property=<span class="string">"addressName"</span> column=<span class="string">"address_name"</span> /&gt;</span><br><span class="line">			&lt;result property=<span class="string">"userId"</span> column=<span class="string">"user_id"</span> /&gt;</span><br><span class="line">		&lt;/collection&gt;</span><br><span class="line">	&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- æ ¹æ®åœ°å€idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ --&gt;</span><br><span class="line">	&lt;select id=<span class="string">"selectAddress"</span> resultMap=<span class="string">"getUser"</span>&gt;</span><br><span class="line">		SELECT * FROM user_info</span><br><span class="line">		u,address_info a WHERE a.user_id=u.id AND</span><br><span class="line">		a.id=<span class="comment">#&#123;addressid&#125;</span></span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">	&lt;resultMap <span class="built_in">type</span>=<span class="string">"Address"</span> id=<span class="string">"getUser"</span>&gt;</span><br><span class="line">		&lt;result property=<span class="string">"id"</span> column=<span class="string">"id"</span> /&gt;</span><br><span class="line">		&lt;result property=<span class="string">"addressName"</span> column=<span class="string">"address_name"</span> /&gt;</span><br><span class="line">		&lt;result property=<span class="string">"userId"</span> column=<span class="string">"user_id"</span> /&gt;</span><br><span class="line">		&lt;association property=<span class="string">"user"</span> javaType=<span class="string">"User"</span>&gt;</span><br><span class="line">			&lt;result property=<span class="string">"id"</span> column=<span class="string">"id"</span> /&gt;</span><br><span class="line">			&lt;result property=<span class="string">"userName"</span> column=<span class="string">"user_name"</span> /&gt;</span><br><span class="line">			&lt;result property=<span class="string">"userPwd"</span> column=<span class="string">"user_pwd"</span> /&gt;</span><br><span class="line">			&lt;result property=<span class="string">"userBirthday"</span> column=<span class="string">"user_birthday"</span> /&gt;</span><br><span class="line">		&lt;/association&gt;</span><br><span class="line">	&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- æ ¹æ®å¤šä¸ªç”¨æˆ·æŸ¥è¯¢ --&gt;</span><br><span class="line">	&lt;select id=<span class="string">"selectUsers"</span> parameterType=<span class="string">"UserVo"</span> resultMap=<span class="string">"UserList"</span>&gt;</span><br><span class="line">		SELECT * FROM user_info</span><br><span class="line">		&lt;<span class="built_in">where</span>&gt;</span><br><span class="line">			&lt;foreach collection=<span class="string">"list"</span> item=<span class="string">"id"</span> open=<span class="string">"and ("</span> close=<span class="string">")"</span></span><br><span class="line">				separator=<span class="string">"or"</span>&gt;</span><br><span class="line">				id=<span class="comment">#&#123;id&#125;</span></span><br><span class="line">			&lt;/foreach&gt;</span><br><span class="line">		&lt;/<span class="built_in">where</span>&gt;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- ç™»å½• --&gt;</span><br><span class="line">	&lt;select id=<span class="string">"login"</span> resultMap=<span class="string">"UserList"</span> parameterType=<span class="string">"User"</span>&gt;</span><br><span class="line">		SELECT *</span><br><span class="line">		FROM user_info WHERE user_name=<span class="comment">#&#123;userName&#125; and user_pwd=#&#123;userPwd&#125;</span></span><br><span class="line">	&lt;/select&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- æ¨¡ç³ŠæŸ¥è¯¢ --&gt;</span><br><span class="line">	&lt;select id=<span class="string">"getUserList"</span> resultMap=<span class="string">"UserList"</span> parameterType=<span class="string">"User"</span>&gt;</span><br><span class="line">		SELECT * FROM user_info</span><br><span class="line">		&lt;trim prefix=<span class="string">"where"</span> prefixOverrides=<span class="string">"and | or"</span>&gt;</span><br><span class="line">			&lt;<span class="keyword">if</span> <span class="built_in">test</span>=<span class="string">"userName!=null and userName!=''"</span>&gt;</span><br><span class="line">				and user_name like CONCAT(<span class="string">'%'</span>,<span class="comment">#&#123;userName&#125;,'%')</span></span><br><span class="line">			&lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">			&lt;<span class="keyword">if</span> <span class="built_in">test</span>=<span class="string">"id!=null and id!=''"</span>&gt;</span><br><span class="line">				and id=<span class="comment">#&#123;id&#125;</span></span><br><span class="line">			&lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">		&lt;/trim&gt;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- æ ¹æ®idè·å–ç”¨æˆ·ä¿¡æ¯ --&gt;</span><br><span class="line">	&lt;select id=<span class="string">"getUserById"</span> resultMap=<span class="string">"UserList"</span>&gt;</span><br><span class="line">		select * from user_info <span class="built_in">where</span> id=<span class="comment">#&#123;uid&#125;</span></span><br><span class="line">	&lt;/select&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- è·å–æ‰€æœ‰ç”¨æˆ· --&gt;</span><br><span class="line">	&lt;select id=<span class="string">"getUsers"</span> resultMap=<span class="string">"UserList"</span>&gt;</span><br><span class="line">		select * from user_info</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<h3 id="pojoç±»-æŒä¹…åŒ–ç±»åŒ…æ‹¬JSR-303éªŒè¯"><a href="#pojoç±»-æŒä¹…åŒ–ç±»åŒ…æ‹¬JSR-303éªŒè¯" class="headerlink" title="pojoç±»(æŒä¹…åŒ–ç±»åŒ…æ‹¬JSR-303éªŒè¯)"></a>pojoç±»(æŒä¹…åŒ–ç±»åŒ…æ‹¬JSR-303éªŒè¯)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//id</span><br><span class="line">	private int id;</span><br><span class="line">	</span><br><span class="line">	//name</span><br><span class="line">	@NotEmpty(message=<span class="string">"ç”¨æˆ·åç§°ä¸èƒ½ä¸ºç©º"</span>)</span><br><span class="line">	private String userName;</span><br><span class="line">	</span><br><span class="line">	//<span class="built_in">pwd</span></span><br><span class="line">	@NotEmpty(message=<span class="string">"ç”¨æˆ·å¯†ç ä¸èƒ½ä¸ºç©º"</span>)</span><br><span class="line">	private String userPwd;</span><br><span class="line">	</span><br><span class="line">	//birthday</span><br><span class="line">	@JSONField(format=<span class="string">"yyyy-MM-dd"</span>)</span><br><span class="line">	private Date userBirthday;</span><br></pre></td></tr></table></figure>
<h3 id="serviceå±‚-å®ç°ç±»"><a href="#serviceå±‚-å®ç°ç±»" class="headerlink" title="serviceå±‚(å®ç°ç±»)"></a>serviceå±‚(å®ç°ç±»)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">@Service(<span class="string">"userServiceImpl"</span>)</span><br><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line">	</span><br><span class="line">	@Autowired</span><br><span class="line">	@Qualifier(<span class="string">"userMapper"</span>)</span><br><span class="line">	private UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">	public UserMapper <span class="function"><span class="title">getUserMapper</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> userMapper;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUserMapper(UserMapper userMapper) &#123;</span><br><span class="line">		this.userMapper = userMapper;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int addUser(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.insertUser(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int modifyUser(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.updateUser(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int removerUser(int uid) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		userMapper.deleteAddress(uid);</span><br><span class="line">		<span class="built_in">return</span> userMapper.deleteUser(uid);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public List&lt;User&gt; findUser(int uid) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.selectUser(uid);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public List&lt;Address&gt; findAddress(int addressid) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.selectAddress(addressid);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public List&lt;User&gt; findUsers(UserVo vo) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.selectUsers(vo);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public List&lt;User&gt; findUserByUser(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.seleteUserByUser(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int deleteAddress(int uid) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.deleteAddress(uid);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public User login(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.login(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public List&lt;User&gt; getUserList(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.getUserList(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public User getUserById(int uid) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.getUserById(uid);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public List&lt;User&gt; <span class="function"><span class="title">getUsers</span></span>() &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		<span class="built_in">return</span> userMapper.getUsers();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="logger-AOP"><a href="#logger-AOP" class="headerlink" title="logger(AOP)"></a>logger(AOP)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å®šä¹‰åˆ‡é¢</span><br><span class="line"> * @author F117</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">@Aspect</span><br><span class="line">public class logger &#123;</span><br><span class="line">	private static final Logger LOGGER=Logger.getLogger(logger.class);</span><br><span class="line">	@Pointcut(<span class="string">"execution(* cn.service..*.*(..))"</span>)</span><br><span class="line">	public void <span class="function"><span class="title">Pointcut</span></span>()&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	@AfterReturning(pointcut=<span class="string">"Pointcut()"</span>,returning=<span class="string">"returnCalue"</span>)</span><br><span class="line">	public void afterReturning(JoinPoint jp,Object returnCalue)&#123;</span><br><span class="line">		LOGGER.info(<span class="string">"è°ƒç”¨"</span>+jp.getTarget()+<span class="string">"çš„"</span>+jp.getSignature().getName()+<span class="string">"æ–¹æ³•,è¿”å›å€¼"</span>+returnCalue);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	@Around(<span class="string">"Pointcut()"</span>)</span><br><span class="line">	public Object aroundLogger(ProceedingJoinPoint jp) throws Throwable&#123;</span><br><span class="line">		LOGGER.info(<span class="string">"è°ƒç”¨"</span>+jp.getTarget()+<span class="string">"çš„"</span>+jp.getSignature().getName()+<span class="string">"æ–¹æ³•,æ–¹æ³•å…¥å‚"</span>+Arrays.toString(jp.getArgs()));</span><br><span class="line">		try &#123;</span><br><span class="line">			Object result=jp.proceed();</span><br><span class="line">			LOGGER.info(<span class="string">"è°ƒç”¨"</span>+jp.getTarget()+<span class="string">"çš„"</span>+jp.getSignature().getName()+<span class="string">"æ–¹æ³•,è¿”å›å€¼"</span>+result);</span><br><span class="line">			<span class="built_in">return</span> result;</span><br><span class="line">		&#125; catch (Throwable e) &#123;</span><br><span class="line">			// TODO: handle exception</span><br><span class="line">			throw e;</span><br><span class="line">		&#125;finally &#123;</span><br><span class="line">			LOGGER.info(<span class="string">"====&gt;"</span>+jp.getSignature().getName()+<span class="string">"æ–¹æ³•ç»“æŸ"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="StringToDateConverter-è‡ªå®šä¹‰è½¬æ¢å™¨"><a href="#StringToDateConverter-è‡ªå®šä¹‰è½¬æ¢å™¨" class="headerlink" title="StringToDateConverter(è‡ªå®šä¹‰è½¬æ¢å™¨)"></a>StringToDateConverter(è‡ªå®šä¹‰è½¬æ¢å™¨)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class StringToDateConverter implements Converter&lt;String, Date&gt; &#123;</span><br><span class="line"></span><br><span class="line">	private String dataPattern;</span><br><span class="line">	</span><br><span class="line">	public StringToDateConverter(String dataPattern) &#123;</span><br><span class="line">		System.out.println(<span class="string">"StringToDateConverter conver"</span>+dataPattern);</span><br><span class="line">		this.dataPattern=dataPattern;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	@Override</span><br><span class="line">	public Date convert(String s) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		Date date=null;</span><br><span class="line">		try &#123;</span><br><span class="line">			date= new SimpleDateFormat(dataPattern).parse(s);</span><br><span class="line">			System.out.println(<span class="string">"convert date:"</span>+date);</span><br><span class="line">		&#125; catch (ParseException e) &#123;</span><br><span class="line">			// TODO Auto-generated catch block</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> date;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="applicationContextl-xml"><a href="#applicationContextl-xml" class="headerlink" title="applicationContextl.xml"></a>applicationContextl.xml</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">	xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> xmlns:p=<span class="string">"http://www.springframework.org/schema/p"</span></span><br><span class="line">	xmlns:aop=<span class="string">"http://www.springframework.org/schema/aop"</span> xmlns:tx=<span class="string">"http://www.springframework.org/schema/tx"</span></span><br><span class="line">	xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></span><br><span class="line">	xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></span><br><span class="line"><span class="string">    http://www.springframework.org/schema/aop</span></span><br><span class="line"><span class="string">    http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></span><br><span class="line"><span class="string">    http://www.springframework.org/schema/tx</span></span><br><span class="line"><span class="string">    http://www.springframework.org/schema/tx/spring-tx-3.2.xsd </span></span><br><span class="line"><span class="string">    http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string">    http://www.springframework.org/schema/context/spring-context-3.2.xsd"</span>&gt;</span><br><span class="line"></span><br><span class="line">	&lt;context:component-scan base-package=<span class="string">"cn.service"</span>&gt;&lt;/context:component-scan&gt;</span><br><span class="line">	&lt;context:component-scan base-package=<span class="string">"cn.controller"</span>&gt;&lt;/context:component-scan&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;</span><br><span class="line">	&lt;bean class=<span class="string">"cn.tool.logger"</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- è¯»å–æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span><br><span class="line">	&lt;context:property-placeholder location=<span class="string">"classpath:database.properties"</span> /&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- JNDIè·å–æ•°æ®æº(ä½¿ç”¨dbcpè¿æ¥æ± ) --&gt;</span><br><span class="line">	&lt;bean class=<span class="string">"org.apache.commons.dbcp.BasicDataSource"</span></span><br><span class="line">		destroy-method=<span class="string">"close"</span> scope=<span class="string">"singleton"</span> id=<span class="string">"dataSource"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"driverClassName"</span> value=<span class="string">"<span class="variable">$&#123;driver&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"url"</span> value=<span class="string">"<span class="variable">$&#123;url&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"username"</span> value=<span class="string">"<span class="variable">$&#123;user&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"password"</span> value=<span class="string">"<span class="variable">$&#123;password&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"initialSize"</span> value=<span class="string">"<span class="variable">$&#123;initialSize&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"maxActive"</span> value=<span class="string">"<span class="variable">$&#123;maxActive&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"maxIdle"</span> value=<span class="string">"<span class="variable">$&#123;maxIdle&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"minIdle"</span> value=<span class="string">"<span class="variable">$&#123;minIdle&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"maxWait"</span> value=<span class="string">"<span class="variable">$&#123;maxWait&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"removeAbandonedTimeout"</span> value=<span class="string">"<span class="variable">$&#123;removeAbandonedTimeout&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"removeAbandoned"</span> value=<span class="string">"<span class="variable">$&#123;removeAbandoned&#125;</span>"</span> /&gt;</span><br><span class="line">		&lt;!-- sql å¿ƒè·³ --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"testWhileIdle"</span> value=<span class="string">"true"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"testOnBorrow"</span> value=<span class="string">"false"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"testOnReturn"</span> value=<span class="string">"false"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"validationQuery"</span> value=<span class="string">"select 1"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"timeBetweenEvictionRunsMillis"</span> value=<span class="string">"60000"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"numTestsPerEvictionRun"</span> value=<span class="string">"<span class="variable">$&#123;maxActive&#125;</span>"</span> /&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- é…ç½®SqlSessionFactoryBean --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"sqlSessionFactory"</span> class=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"dataSource"</span> ref=<span class="string">"dataSource"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"configLocation"</span> value=<span class="string">"classpath:mybatis-configl.xml"</span>&gt;&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- é…ç½®Dao --&gt;</span><br><span class="line">	&lt;bean class=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"basePackage"</span> value=<span class="string">"cn.dao"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"txManager"</span></span><br><span class="line">		class=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"dataSource"</span> ref=<span class="string">"dataSource"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- äº‹åŠ¡å¢å¼º --&gt;</span><br><span class="line">	&lt;tx:advice id=<span class="string">"txAdvice"</span> transaction-manager=<span class="string">"txManager"</span>&gt;</span><br><span class="line">		&lt;tx:attributes&gt;</span><br><span class="line">			&lt;tx:method name=<span class="string">"*"</span> propagation=<span class="string">"REQUIRED"</span> /&gt;</span><br><span class="line">		&lt;/tx:attributes&gt;</span><br><span class="line">	&lt;/tx:advice&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- é…ç½®åˆ‡é¢ --&gt;</span><br><span class="line">	&lt;aop:config&gt;</span><br><span class="line">		&lt;aop:pointcut expression=<span class="string">"execution(* cn.service..*.*(..))"</span></span><br><span class="line">			id=<span class="string">"myPoint"</span> /&gt;</span><br><span class="line">		&lt;aop:advisor advice-ref=<span class="string">"txAdvice"</span> pointcut-ref=<span class="string">"myPoint"</span> /&gt;</span><br><span class="line">	&lt;/aop:config&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<h3 id="database-properties"><a href="#database-properties" class="headerlink" title="database.properties"></a>database.properties</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">driver=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql://localhost:3306/sm_db?useUnicode=<span class="literal">true</span>&amp;characterEncoding=utf-8</span><br><span class="line">user=root</span><br><span class="line">password=root</span><br><span class="line">minIdle=45</span><br><span class="line">maxIdle=50</span><br><span class="line">initialSize=5</span><br><span class="line">maxActive=100</span><br><span class="line">maxWait=100</span><br><span class="line">removeAbandonedTimeout=180</span><br><span class="line">removeAbandoned=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="log4j-properties"><a href="#log4j-properties" class="headerlink" title="log4j.properties"></a>log4j.properties</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">log4j.rootLogger=DEBUG,CONSOLE,file</span><br><span class="line"><span class="comment">#log4j.rootLogger=ERROR,ROLLING_FILE</span></span><br><span class="line">log4j.logger.cn.smbms.dao=debug</span><br><span class="line">log4j.logger.com.ibatis=debug </span><br><span class="line">log4j.logger.com.ibatis.common.jdbc.SimpleDataSource=debug </span><br><span class="line">log4j.logger.com.ibatis.common.jdbc.ScriptRunner=debug </span><br><span class="line">log4j.logger.com.ibatis.sqlmap.engine.impl.SqlMapClientDelegate=debug </span><br><span class="line">log4j.logger.java.sql.Connection=debug </span><br><span class="line">log4j.logger.java.sql.Statement=debug </span><br><span class="line">log4j.logger.java.sql.PreparedStatement=debug </span><br><span class="line">log4j.logger.java.sql.ResultSet=debug </span><br><span class="line">log4j.logger.org.tuckey.web.filters.urlrewrite.UrlRewriteFilter=debug</span><br><span class="line"></span><br><span class="line"><span class="comment">######################################################################################</span></span><br><span class="line"><span class="comment"># Console Appender  \u65e5\u5fd7\u5728\u63a7\u5236\u8f93\u51fa\u914d\u7f6e</span></span><br><span class="line"><span class="comment">######################################################################################</span></span><br><span class="line">log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.Threshold=error</span><br><span class="line">log4j.appender.CONSOLE.Target=System.out</span><br><span class="line">log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.CONSOLE.layout.ConversionPattern= [%p] %d %c - %m%n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">######################################################################################</span></span><br><span class="line"><span class="comment"># DailyRolling File  \u6bcf\u5929\u4ea7\u751f\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u683c\u5f0f:log2009-09-11</span></span><br><span class="line"><span class="comment">######################################################################################</span></span><br><span class="line">log4j.appender.file=org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.file.DatePattern=yyyy-MM-dd</span><br><span class="line">log4j.appender.file.File=log.log</span><br><span class="line">log4j.appender.file.Append=<span class="literal">true</span></span><br><span class="line">log4j.appender.file.Threshold=error</span><br><span class="line">log4j.appender.file.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.file.layout.ConversionPattern=%d&#123;yyyy-M<span class="_">-d</span> HH:mm:ss&#125;%x[%5p](%F:%L) %m%n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">log4j.logger.com.opensymphony.xwork2=error</span><br></pre></td></tr></table></figure>
<h3 id="mybatis-configl-xml"><a href="#mybatis-configl-xml" class="headerlink" title="mybatis-configl.xml"></a>mybatis-configl.xml</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">PUBLIC <span class="string">"-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- é…ç½®mybatisçš„<span class="built_in">log</span>å®ç°ä¸ºLOG4J --&gt;</span><br><span class="line">	&lt;settings&gt;</span><br><span class="line">		&lt;!-- &lt;setting name=<span class="string">"logImpl"</span> value=<span class="string">"LOG4J"</span> /&gt; --&gt;</span><br><span class="line">		&lt;setting name=<span class="string">"lazyLoadingEnabled"</span> value=<span class="string">"false"</span>/&gt;</span><br><span class="line">		&lt;setting name=<span class="string">"autoMappingBehavior"</span> value=<span class="string">"FULL"</span>/&gt;</span><br><span class="line">	&lt;/settings&gt;</span><br><span class="line">	&lt;typeAliases&gt;</span><br><span class="line">	&lt;package name=<span class="string">"cn.pojo"</span>/&gt;</span><br><span class="line">	&lt;/typeAliases&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<h3 id="springmvc-servlet-xml"><a href="#springmvc-servlet-xml" class="headerlink" title="springmvc-servlet.xml"></a>springmvc-servlet.xml</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">	xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> xmlns:mvc=<span class="string">"http://www.springframework.org/schema/mvc"</span></span><br><span class="line">	xmlns:p=<span class="string">"http://www.springframework.org/schema/p"</span> xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></span><br><span class="line">	xsi:schemaLocation=<span class="string">"</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/mvc</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- é…ç½®å¤„ç†å™¨æ˜ å°„ HandlerMapping --&gt;</span><br><span class="line">	&lt;!-- &lt;bean name=<span class="string">"/index.html"</span> class=<span class="string">"cn.smbms.controller.IndexController"</span> </span><br><span class="line">		/&gt; --&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- &lt;bean name=<span class="string">"/welcome"</span> class=<span class="string">"cn.smbms.controller.IndexController"</span> /&gt; --&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- &lt;bean id=<span class="string">"conversionService"</span> class=<span class="string">"org.springframework.context.support.ConversionServiceFactoryBean"</span>&gt; </span><br><span class="line">		&lt;/bean&gt; --&gt;</span><br><span class="line">	&lt;context:component-scan base-package=<span class="string">"cn.controller"</span> /&gt;</span><br><span class="line">	&lt;!-- è‡ªå®šä¹‰è½¬æ¢å™¨ --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"myConversionService"</span> class=<span class="string">"org.springframework.context.support.ConversionServiceFactoryBean"</span>&gt; </span><br><span class="line">		&lt;property name=<span class="string">"converters"</span>&gt; &lt;list&gt; &lt;bean class=<span class="string">"cn.tool.StringToDateConverter"</span>&gt; </span><br><span class="line">		&lt;constructor-arg <span class="built_in">type</span>=<span class="string">"java.lang.String"</span> value=<span class="string">"yyyy-MM-dd"</span> /&gt; &lt;/bean&gt; &lt;/list&gt; </span><br><span class="line">		&lt;/property&gt; &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;mvc:annotation-driven&gt;</span><br><span class="line">		&lt;!-- æ¶ˆæ¯è½¬æ¢å™¨ --&gt;</span><br><span class="line">		&lt;mvc:message-converters&gt;</span><br><span class="line">			&lt;bean class=<span class="string">"org.springframework.http.converter.StringHttpMessageConverter"</span>&gt;</span><br><span class="line">				&lt;property name=<span class="string">"supportedMediaTypes"</span>&gt;</span><br><span class="line">					&lt;list&gt;</span><br><span class="line">						&lt;value&gt;application/json;charset=UTF-8&lt;/value&gt;</span><br><span class="line">					&lt;/list&gt;</span><br><span class="line">				&lt;/property&gt;</span><br><span class="line">			&lt;/bean&gt;</span><br><span class="line">			&lt;bean</span><br><span class="line">				class=<span class="string">"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter"</span>&gt;</span><br><span class="line">				&lt;property name=<span class="string">"supportedMediaTypes"</span>&gt;</span><br><span class="line">					&lt;list&gt;</span><br><span class="line">						&lt;value&gt;application/json;charset=UTF-8&lt;/value&gt;</span><br><span class="line">					&lt;/list&gt;</span><br><span class="line">				&lt;/property&gt;</span><br><span class="line">				&lt;property name=<span class="string">"features"</span>&gt;</span><br><span class="line">					&lt;list&gt;</span><br><span class="line">						&lt;value&gt;WriteDateUseDateFormat&lt;/value&gt;</span><br><span class="line">					&lt;/list&gt;</span><br><span class="line">				&lt;/property&gt;</span><br><span class="line">			&lt;/bean&gt;</span><br><span class="line">		&lt;/mvc:message-converters&gt;</span><br><span class="line"></span><br><span class="line">	&lt;/mvc:annotation-driven&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- å®Œæˆè§†å›¾çš„å¯¹åº” --&gt;</span><br><span class="line">	&lt;!-- å¯¹è½¬å‘é¡µé¢çš„è·¯å¾„è§£æã€‚prefixï¼šå‰ç¼€ï¼Œ suffixï¼šåç¼€ --&gt;</span><br><span class="line">	&lt;!-- &lt;bean class=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt; </span><br><span class="line">		&lt;property name=<span class="string">"prefix"</span> value=<span class="string">"/WEB-INF/jsp/"</span> /&gt; &lt;property name=<span class="string">"suffix"</span> </span><br><span class="line">		value=<span class="string">".jsp"</span> /&gt; &lt;/bean&gt; --&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- é…ç½®å¤šè§†å›¾è§£æå™¨ ï¼šå…è®¸ç»Ÿä¸€çš„å†…å®¹æ•°æ®å‘ˆç°åœ¨ä¸åŒçš„viewä¸­ --&gt;</span><br><span class="line">	&lt;bean</span><br><span class="line">		class=<span class="string">"org.springframework.web.servlet.view.ContentNegotiatingViewResolver"</span>&gt;</span><br><span class="line">		&lt;!-- æ”¯æŒå‚æ•°åŒ¹é… --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"favorParameter"</span> value=<span class="string">"true"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"mediaTypes"</span>&gt;</span><br><span class="line">			&lt;map&gt;</span><br><span class="line">				&lt;entry key=<span class="string">"html"</span> value=<span class="string">"text/html;charset=UTF-8"</span>&gt;&lt;/entry&gt;</span><br><span class="line">				&lt;entry key=<span class="string">"json"</span> value=<span class="string">"application/json;charset=UTF-8"</span>&gt;&lt;/entry&gt;</span><br><span class="line">				&lt;entry key=<span class="string">"xml"</span> value=<span class="string">"application/xml;charset=UTF-8"</span>&gt;&lt;/entry&gt;</span><br><span class="line">			&lt;/map&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;!-- ç½‘é¡µè§†å›¾è§£æå™¨ --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"viewResolvers"</span>&gt;</span><br><span class="line">			&lt;list&gt;</span><br><span class="line">				&lt;bean</span><br><span class="line">					class=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span><br><span class="line">					&lt;property name=<span class="string">"prefix"</span> value=<span class="string">"/WEB-INF/jsp/"</span> /&gt;</span><br><span class="line">					&lt;property name=<span class="string">"suffix"</span> value=<span class="string">".jsp"</span> /&gt;</span><br><span class="line">				&lt;/bean&gt;</span><br><span class="line">			&lt;/list&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">	&lt;mvc:resources location=<span class="string">"/statics/"</span> mapping=<span class="string">"/statics/**"</span>&gt;&lt;/mvc:resources&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- å…¨å±€å¼‚å¸¸çš„é…ç½® --&gt;</span><br><span class="line">	&lt;bean</span><br><span class="line">		class=<span class="string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"exceptionMappings"</span>&gt;</span><br><span class="line">			&lt;props&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"java.lang.RuntimeException"</span>&gt;error&lt;/prop&gt;</span><br><span class="line">			&lt;/props&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- é…ç½®MulitpartResolverï¼Œç”¨äºæ–‡ä»¶ä¸Šä¼  --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"multipartResolver"</span></span><br><span class="line">		class=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"maxUploadSize"</span> value=<span class="string">"5000000"</span> /&gt;</span><br><span class="line">		&lt;property name=<span class="string">"defaultEncoding"</span> value=<span class="string">"utf-8"</span> /&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<h3 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;web-app xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> xmlns=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> xsi:schemaLocation=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span> id=<span class="string">"WebApp_ID"</span> version=<span class="string">"3.0"</span>&gt;</span><br><span class="line">  &lt;display-name&gt;CG09&lt;/display-name&gt;</span><br><span class="line">   &lt;!-- é…ç½®ç¯å¢ƒå‚æ•°ï¼ŒæŒ‡å®šspringé…ç½®æ–‡ä»¶çš„æ‰€åœ¨ç›®å½•--&gt;</span><br><span class="line">  &lt;context-param&gt;</span><br><span class="line">    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">    &lt;param-value&gt;classpath:applicationContextl.xml&lt;/param-value&gt;</span><br><span class="line">  &lt;/context-param&gt;</span><br><span class="line">  &lt;!-- é…ç½®springçš„ContextLoaderListenerç›‘å¬å™¨ï¼Œåˆå§‹åŒ–springå®¹å™¨--&gt;</span><br><span class="line">  &lt;listener&gt;</span><br><span class="line">    &lt;listener-class&gt;</span><br><span class="line">   		org.springframework.web.context.ContextLoaderListener</span><br><span class="line">  	&lt;/listener-class&gt;</span><br><span class="line">  &lt;/listener&gt;</span><br><span class="line">  &lt;welcome-file-list&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;</span><br><span class="line">  &lt;/welcome-file-list&gt;</span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;</span><br><span class="line">  		org.springframework.web.servlet.DispatcherServlet</span><br><span class="line">  	&lt;/servlet-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">      &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br><span class="line">  &lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;characterEncoding&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter &lt;/filter-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">      &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">      &lt;param-value&gt;UTF-8&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">  &lt;/filter&gt;</span><br><span class="line">  &lt;filter-mapping&gt;</span><br><span class="line">    &lt;filter-name&gt;characterEncoding&lt;/filter-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/filter-mapping&gt;</span><br><span class="line">  &lt;context-param&gt;</span><br><span class="line">    &lt;param-name&gt;log4jConfigLocation&lt;/param-name&gt;</span><br><span class="line">    &lt;param-value&gt;classpath:log4j.properties&lt;/param-value&gt;</span><br><span class="line">  &lt;/context-param&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;listener&gt;</span><br><span class="line">    &lt;listener-class&gt;</span><br><span class="line">			org.springframework.web.util.Log4jConfigListener</span><br><span class="line">		&lt;/listener-class&gt;</span><br><span class="line">  &lt;/listener&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;context-param&gt;</span><br><span class="line"></span><br><span class="line">&lt;param-name&gt;webAppRootKey&lt;/param-name&gt;</span><br><span class="line"></span><br><span class="line">&lt;param-value&gt; app.root &lt;/param-value&gt;</span><br><span class="line"></span><br><span class="line">&lt;/context-param&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<h3 id="UserController-æ ¸å¿ƒ"><a href="#UserController-æ ¸å¿ƒ" class="headerlink" title="UserController(æ ¸å¿ƒ)"></a>UserController(æ ¸å¿ƒ)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">@RequestMapping(<span class="string">"/user"</span>)</span><br><span class="line">public class UserController extends BaseController &#123;</span><br><span class="line"></span><br><span class="line">	public UserService <span class="function"><span class="title">getUserService</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> userService;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUserService(UserService userService) &#123;</span><br><span class="line">		this.userService = userService;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	private Logger logger = Logger.getLogger(UserController.class);</span><br><span class="line"></span><br><span class="line">	@Autowired</span><br><span class="line">	@Qualifier(<span class="string">"userServiceImpl"</span>)</span><br><span class="line">	private UserService userService;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	// å®ç°è·³è½¬åˆ°ç™»å½•é¡µ</span><br><span class="line">	@RequestMapping(value = <span class="string">"/login.html"</span>)</span><br><span class="line">	public String <span class="function"><span class="title">login</span></span>() &#123;</span><br><span class="line">		logger.info(<span class="string">"ç”¨æˆ·è·³è½¬åˆ°ç™»å½•é¡µ====================&gt;"</span>);</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"login"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	// ä¸»é¡µé¢</span><br><span class="line">		@RequestMapping(value = <span class="string">"main.html"</span>)</span><br><span class="line">		public String <span class="function"><span class="title">hetmain</span></span>() &#123;</span><br><span class="line">			logger.info(<span class="string">"ç”¨æˆ·è·³è½¬åˆ°ä¸»é¡µé¢====================&gt;"</span>);</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"main"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	// å®ç°ç™»å½•</span><br><span class="line">	@RequestMapping(value = <span class="string">"dologin.html"</span>, method = RequestMethod.POST)</span><br><span class="line">	public String doLogin(String userName, String userPwd, HttpSession session,</span><br><span class="line">			HttpServletRequest request,RedirectAttributes attr) throws Exception &#123;</span><br><span class="line">		logger.info(<span class="string">"ç™»å½•ä¸­======================&gt;"</span>);</span><br><span class="line">		// è°ƒç”¨serviceæ–¹æ³•è¿›è¡Œç”¨æˆ·åŒ¹é…</span><br><span class="line">		User user=new User();</span><br><span class="line">		user.setUserName(userName);</span><br><span class="line">		user.setUserPwd(userPwd);</span><br><span class="line">		User user2=new User();</span><br><span class="line">		user2 = userService.login(user);</span><br><span class="line">		<span class="keyword">if</span>(null!=user2)&#123;//ç™»é™†æˆåŠŸ </span><br><span class="line">			 attr.addFlashAttribute(<span class="string">"u1"</span>, user2);</span><br><span class="line">   			 <span class="built_in">return</span> <span class="string">"redirect:/user/main.html"</span>;</span><br><span class="line">   		 </span><br><span class="line">   		 //response.sendRedirect(<span class="string">"jsp/frame.jsp"</span>)</span><br><span class="line">   	 &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   		 request.setAttribute(<span class="string">"error"</span>,<span class="string">"ç”¨æˆ·åå¯†ç ä¸æ­£ç¡®"</span>);</span><br><span class="line">   		 <span class="built_in">return</span> <span class="string">"login"</span>;</span><br><span class="line">   	 &#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	//æ ¹æ®ç”¨æˆ·idè·å–ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">		@RequestMapping(value=<span class="string">"usermodify.html"</span>,method = RequestMethod.GET)</span><br><span class="line">		public String getUserByID(@RequestParam int id,Model model)&#123;</span><br><span class="line">			User user=new User();</span><br><span class="line">			user=userService.getUserById(id);</span><br><span class="line">			model.addAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"toEditUserView"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		@RequestMapping(value=<span class="string">"usermodifysave.html"</span>,method=RequestMethod.POST)</span><br><span class="line">		public String modifyUserSave(User user,HttpSession session)&#123;</span><br><span class="line">			<span class="keyword">if</span>(userService.modifyUser(user)&gt;0)&#123;</span><br><span class="line">				<span class="built_in">return</span> <span class="string">"redirect:/user/userlist.html"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"toEditUserView"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		@RequestMapping(value=<span class="string">"userlist.html"</span>,method = RequestMethod.GET)</span><br><span class="line">		public String getUserList(Model model)&#123;</span><br><span class="line">			List&lt;User&gt;userList=new ArrayList&lt;User&gt;();</span><br><span class="line">			userList=userService.getUsers();</span><br><span class="line">			model.addAttribute(<span class="string">"userList"</span>, userList);</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"userInfoList"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line">		</span><br><span class="line">		//æ·»åŠ </span><br><span class="line">		@RequestMapping(value=<span class="string">"addUser.html"</span>,method=RequestMethod.GET)</span><br><span class="line">		public String add(@ModelAttribute(<span class="string">"user"</span>) User user,Model model)&#123;</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"doSaveUserInfo"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		@RequestMapping(value=<span class="string">"addUsersave.html"</span>,method=RequestMethod.POST)</span><br><span class="line">		public String addSave(@Valid User user, BindingResult bindingResult, HttpSession session)&#123;</span><br><span class="line">			<span class="keyword">if</span>(bindingResult.hasErrors())&#123;</span><br><span class="line">				<span class="built_in">return</span> <span class="string">"doSaveUserInfo"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			int num=userService.addUser(user);</span><br><span class="line">			System.out.println(<span class="string">"==================="</span>+num);</span><br><span class="line">			<span class="keyword">if</span>(num&gt;0)&#123;</span><br><span class="line">				<span class="built_in">return</span> <span class="string">"redirect:/user/userlist.html"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"doSaveUserInfo"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		@RequestMapping(value = <span class="string">"/error.html"</span>)</span><br><span class="line">		public String <span class="function"><span class="title">error</span></span>() &#123;</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"error"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		@RequestMapping(value=<span class="string">"userdelete.html"</span>,method = RequestMethod.GET)</span><br><span class="line">		public String getUserByIDs(@RequestParam int id,Model model)&#123;</span><br><span class="line">			User user=new User();</span><br><span class="line">			user=userService.getUserById(id);</span><br><span class="line">			model.addAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">			<span class="built_in">return</span> <span class="string">"deleteUserInfo"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		//åˆ é™¤</span><br><span class="line">		@RequestMapping(value=<span class="string">"/deleteUser.html"</span>,method=RequestMethod.POST)</span><br><span class="line">		public String deleteUser(@RequestParam int id)&#123;</span><br><span class="line">				int nums=userService.removerUser(id);</span><br><span class="line">				System.out.println(<span class="string">"===================&gt;"</span>+nums);</span><br><span class="line">				<span class="keyword">if</span>(nums&gt;=1)&#123;</span><br><span class="line">					<span class="built_in">return</span> <span class="string">"redirect:/user/userlist.html"</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="built_in">return</span> <span class="string">"error"</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¿å­˜æ–‡ä»¶"><a href="#ä¿å­˜æ–‡ä»¶" class="headerlink" title="ä¿å­˜æ–‡ä»¶"></a>ä¿å­˜æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">//è·³è½¬åˆ°æ–°å¢appinfoé¡µé¢</span><br><span class="line">	@RequestMapping(value=<span class="string">"/appinfoadd"</span>,method=RequestMethod.GET)</span><br><span class="line">	public String add(@ModelAttribute(<span class="string">"appInfo"</span>) AppInfo appInfo)&#123;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"developer/appinfoadd"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	//ä¿å­˜appinfoæ•°æ®</span><br><span class="line">	@RequestMapping(value=<span class="string">"/appinfoaddsave"</span>,method=RequestMethod.POST)</span><br><span class="line">	public String addSave(AppInfo appInfo,HttpSession session,HttpServletRequest request,</span><br><span class="line">					@RequestParam(value=<span class="string">"a_logoPicPath"</span>,required= <span class="literal">false</span>) MultipartFile attach)&#123;		</span><br><span class="line">		</span><br><span class="line">		String logoPicPath =  null;</span><br><span class="line">		String logoLocPath =  null;</span><br><span class="line">		<span class="keyword">if</span>(!attach.isEmpty())&#123;</span><br><span class="line">			String path = request.getSession().getServletContext().getRealPath(<span class="string">"statics"</span>+java.io.File.separator+<span class="string">"uploadfiles"</span>);</span><br><span class="line">			logger.info(<span class="string">"uploadFile path: "</span> + path);</span><br><span class="line">			String oldFileName = attach.getOriginalFilename();//åŸæ–‡ä»¶å</span><br><span class="line">			String prefix = FilenameUtils.getExtension(oldFileName);//åŸæ–‡ä»¶åç¼€</span><br><span class="line">			int filesize = 500000;</span><br><span class="line">			<span class="keyword">if</span>(attach.getSize() &gt; filesize)&#123;//ä¸Šä¼ å¤§å°ä¸å¾—è¶…è¿‡ 50k</span><br><span class="line">				request.setAttribute(<span class="string">"fileUploadError"</span>, Constants.FILEUPLOAD_ERROR_4);</span><br><span class="line">				<span class="built_in">return</span> <span class="string">"developer/appinfoadd"</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(prefix.equalsIgnoreCase(<span class="string">"jpg"</span>) || prefix.equalsIgnoreCase(<span class="string">"png"</span>) </span><br><span class="line">			   ||prefix.equalsIgnoreCase(<span class="string">"jepg"</span>) || prefix.equalsIgnoreCase(<span class="string">"pneg"</span>))&#123;//ä¸Šä¼ å›¾ç‰‡æ ¼å¼</span><br><span class="line">				 String fileName = appInfo.getAPKName() + <span class="string">".jpg"</span>;//ä¸Šä¼ LOGOå›¾ç‰‡å‘½å:apkåç§°.apk</span><br><span class="line">				 File targetFile = new File(path,fileName);</span><br><span class="line">				 <span class="keyword">if</span>(!targetFile.exists())&#123;</span><br><span class="line">					 targetFile.mkdirs();</span><br><span class="line">				 &#125;</span><br><span class="line">				 try &#123;</span><br><span class="line">					attach.transferTo(targetFile);</span><br><span class="line">				&#125; catch (Exception e) &#123;</span><br><span class="line">					// TODO Auto-generated catch block</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">					request.setAttribute(<span class="string">"fileUploadError"</span>, Constants.FILEUPLOAD_ERROR_2);</span><br><span class="line">					<span class="built_in">return</span> <span class="string">"developer/appinfoadd"</span>;</span><br><span class="line">				&#125; </span><br><span class="line">				 logoPicPath = request.getContextPath()+<span class="string">"/statics/uploadfiles/"</span>+fileName; //ç»å¯¹è·¯å¾„</span><br><span class="line">				 logoLocPath = path+File.separator+fileName; //ç›¸å¯¹è·¯å¾„</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				request.setAttribute(<span class="string">"fileUploadError"</span>, Constants.FILEUPLOAD_ERROR_3);</span><br><span class="line">				<span class="built_in">return</span> <span class="string">"developer/appinfoadd"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		appInfo.setCreatedBy(((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId());</span><br><span class="line">		appInfo.setCreationDate(new Date());</span><br><span class="line">		appInfo.setLogoPicPath(logoPicPath);</span><br><span class="line">		appInfo.setLogoLocPath(logoLocPath);</span><br><span class="line">		appInfo.setDevId(((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId());</span><br><span class="line">		appInfo.setStatus(1);</span><br><span class="line">		try &#123;</span><br><span class="line">			<span class="keyword">if</span>(appInfoService.add(appInfo))&#123;</span><br><span class="line">				<span class="built_in">return</span> <span class="string">"redirect:/dev/flatform/app/list"</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			// TODO Auto-generated catch block</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> <span class="string">"developer/appinfoadd"</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JSPé¡µé¢"><a href="#JSPé¡µé¢" class="headerlink" title="JSPé¡µé¢"></a>JSPé¡µé¢</h3><h4 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> import=<span class="string">"java.util.*"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">	String path = request.getContextPath();</span><br><span class="line">	String basePath = request.getScheme() + <span class="string">"://"</span> + request.getServerName() + <span class="string">":"</span> + request.getServerPort()</span><br><span class="line">			+ path + <span class="string">"/"</span>;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;base href=<span class="string">"&lt;%=basePath%&gt;"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;title&gt;My JSP <span class="string">'userInfoList.jsp'</span> starting page&lt;/title&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;a href=<span class="string">"user/addUser.html"</span>&gt;æ·»åŠ ç”¨æˆ·&lt;/a&gt;</span><br><span class="line">	&lt;h2&gt;ç”¨æˆ·åˆ—è¡¨&lt;/h2&gt;</span><br><span class="line">	&lt;table class=<span class="string">"providerTable"</span> cellpadding=<span class="string">"0"</span> cellspacing=<span class="string">"0"</span>&gt;</span><br><span class="line">		&lt;tr class=<span class="string">"firstTr"</span>&gt;</span><br><span class="line">			&lt;th width=<span class="string">"10%"</span>&gt;ç”¨æˆ·id&lt;/th&gt;</span><br><span class="line">			&lt;th width=<span class="string">"20%"</span>&gt;ç”¨æˆ·åç§°&lt;/th&gt;</span><br><span class="line">			&lt;th width=<span class="string">"10%"</span>&gt;ç”¨æˆ·å¯†ç &lt;/th&gt;</span><br><span class="line">			&lt;th width=<span class="string">"10%"</span>&gt;ç”Ÿæ—¥æ—¥æœŸ&lt;/th&gt;</span><br><span class="line">			&lt;th width=<span class="string">"10%"</span>&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;c:forEach var=<span class="string">"user"</span> items=<span class="string">"<span class="variable">$&#123;userList &#125;</span>"</span> varStatus=<span class="string">"status"</span></span><br><span class="line">			begin=<span class="string">"0"</span>&gt;</span><br><span class="line">			&lt;tr&gt;</span><br><span class="line">				&lt;td&gt;&lt;span&gt;<span class="variable">$&#123;user.id &#125;</span>&lt;/span&gt;&lt;/td&gt;</span><br><span class="line">				&lt;td&gt;&lt;span&gt;<span class="variable">$&#123;user.userName &#125;</span>&lt;/span&gt;&lt;/td&gt;</span><br><span class="line">				&lt;td&gt;&lt;span&gt;<span class="variable">$&#123;user.userPwd&#125;</span>&lt;/span&gt;&lt;/td&gt;</span><br><span class="line">				&lt;td&gt;&lt;span&gt;<span class="variable">$&#123;user.userBirthday.year+1900&#125;</span>-&lt;c:<span class="keyword">if</span></span><br><span class="line">							<span class="built_in">test</span>=<span class="string">"<span class="variable">$&#123;user.userBirthday.month+1 &lt; 10&#125;</span>"</span>&gt;0&lt;/c:<span class="keyword">if</span>&gt;<span class="variable">$&#123;user.userBirthday.month+1&#125;</span>-&lt;c:<span class="keyword">if</span></span><br><span class="line">							<span class="built_in">test</span>=<span class="string">"<span class="variable">$&#123;user.userBirthday.date &lt; 10&#125;</span>"</span>&gt;0&lt;/c:<span class="keyword">if</span>&gt;<span class="variable">$&#123;user.userBirthday.date&#125;</span>&lt;/span&gt;</span><br><span class="line">				&lt;/td&gt;</span><br><span class="line">				&lt;td&gt;&lt;a</span><br><span class="line">					href=<span class="string">"<span class="variable">$&#123;pageContext.request.contextPath&#125;</span>/user/usermodify.html?id=<span class="variable">$&#123;user.id &#125;</span>"</span>&gt;ä¿®æ”¹&lt;/a&gt;</span><br><span class="line">					&lt;a href=<span class="string">"<span class="variable">$&#123;pageContext.request.contextPath&#125;</span>/user/userdelete.html?id=<span class="variable">$&#123;user.id &#125;</span>"</span>&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">			&lt;/tr&gt;</span><br><span class="line">		&lt;/c:forEach&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> import=<span class="string">"java.util.*"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@taglib prefix=<span class="string">"fm"</span> uri=<span class="string">"http://www.springframework.org/tags/form"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">String path = request.getContextPath();</span><br><span class="line">String basePath = request.getScheme()+<span class="string">"://"</span>+request.getServerName()+<span class="string">":"</span>+request.getServerPort()+path+<span class="string">"/"</span>;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;base href=<span class="string">"&lt;%=basePath%&gt;"</span>&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;title&gt;My JSP <span class="string">'doSaveUserInfo.jsp'</span> starting page&lt;/title&gt;</span><br><span class="line">    </span><br><span class="line">	&lt;meta http-equiv=<span class="string">"pragma"</span> content=<span class="string">"no-cache"</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">"cache-control"</span> content=<span class="string">"no-cache"</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">"expires"</span> content=<span class="string">"0"</span>&gt;    </span><br><span class="line">	&lt;meta http-equiv=<span class="string">"keywords"</span> content=<span class="string">"keyword1,keyword2,keyword3"</span>&gt;</span><br><span class="line">	&lt;meta http-equiv=<span class="string">"description"</span> content=<span class="string">"This is my page"</span>&gt;</span><br><span class="line">	&lt;!--</span><br><span class="line">	&lt;link rel=<span class="string">"stylesheet"</span> <span class="built_in">type</span>=<span class="string">"text/css"</span> href=<span class="string">"styles.css"</span>&gt;</span><br><span class="line">	--&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h2&gt;æ–°å¢ç”¨æˆ·&lt;/h2&gt;</span><br><span class="line">    </span><br><span class="line">     &lt;fm:form method=<span class="string">"post"</span> modelAttribute=<span class="string">"user"</span> action=<span class="string">"<span class="variable">$&#123;pageContext.request.contextPath&#125;</span>/user/addUsersave.html"</span>&gt;</span><br><span class="line">    	&lt;fm:errors path=<span class="string">"userName"</span>/&gt;&lt;br/&gt;</span><br><span class="line">    	ç”¨æˆ·åç§°ï¼š&lt;fm:input path=<span class="string">"userName"</span>/&gt;&lt;br/&gt;</span><br><span class="line">    	&lt;fm:errors path=<span class="string">"userPwd"</span>/&gt;&lt;br/&gt;</span><br><span class="line">    	ç”¨æˆ·å¯†ç ï¼š&lt;fm:password path=<span class="string">"userPwd"</span>/&gt;&lt;br/&gt;</span><br><span class="line">    	&lt;fm:errors path=<span class="string">"userBirthday"</span>/&gt;&lt;br/&gt;</span><br><span class="line">    	ç”¨æˆ·ç”Ÿæ—¥ï¼š&lt;fm:input path=<span class="string">"userBirthday"</span> Class=<span class="string">"Wdate"</span> id=<span class="string">"birthday"</span> name=<span class="string">"userBirthday"</span> <span class="built_in">readonly</span>=<span class="string">"readonly"</span> /&gt;&lt;br/&gt;</span><br><span class="line">    	</span><br><span class="line">    	&lt;input <span class="built_in">type</span>=<span class="string">"submit"</span> value=<span class="string">"ä¿å­˜"</span>&gt;</span><br><span class="line">    &lt;/fm:form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> &lt;body&gt;</span><br><span class="line">    &lt;h2&gt;ç”¨æˆ·ä¿®æ”¹é¡µé¢&lt;/h2&gt;</span><br><span class="line">    &lt;form action=<span class="string">"<span class="variable">$&#123;pageContext.request.contextPath&#125;</span>/user/usermodifysave.html"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"hidden"</span> name=<span class="string">"id"</span> value=<span class="string">"<span class="variable">$&#123;user.id &#125;</span>"</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"userName"</span> value=<span class="string">"<span class="variable">$&#123;user.userName &#125;</span>"</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"userPwd"</span> value=<span class="string">"<span class="variable">$&#123;user.userPwd &#125;</span>"</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"userBirthday"</span> value=<span class="string">"<span class="variable">$&#123;user.userBirthday &#125;</span>"</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"submit"</span> value=<span class="string">"ä¿®æ”¹"</span>&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"button"</span> value=<span class="string">"è¿”å›ä¸»é¡µé¢"</span>&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">  </span><br><span class="line"><span class="comment">### æœ‰å½¢çš„ä¸œè¥¿è¿Ÿæ—©ä¼šå‡‹é›¶ï¼Œä½†åªæœ‰å›å¿†æ˜¯æ°¸è¿œä¸ä¼šå‡‹é›¶çš„</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/11/SSMåŸºç¡€æ¡ˆä¾‹æ–‡ä»¶/" data-id="cjrabl6q6001vvkdq40rsyp8p" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Hibernateå…³ç³»æ˜ å°„" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/08/Hibernateå…³ç³»æ˜ å°„/" class="article-date">
  <time datetime="2018-11-08T14:21:23.000Z" itemprop="datePublished">2018-11-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/08/Hibernateå…³ç³»æ˜ å°„/">Hibernateå…³ç³»æ˜ å°„</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="æ˜ å°„å…³ç³»çš„å½¢æˆ"><a href="#æ˜ å°„å…³ç³»çš„å½¢æˆ" class="headerlink" title="æ˜ å°„å…³ç³»çš„å½¢æˆ"></a>æ˜ å°„å…³ç³»çš„å½¢æˆ</h3><p> hibernateåœ¨å®ç°ORMåŠŸèƒ½çš„æ—¶å€™ä¸»è¦ç”¨åˆ°çš„æ–‡ä»¶æœ‰ï¼šæ˜ å°„ç±»ï¼ˆ<em>.Javaï¼‰ã€æ˜ å°„æ–‡ä»¶ï¼ˆ</em>.hbm.xmlï¼‰å’Œæ•°æ®åº“é…ç½®æ–‡ä»¶ï¼ˆ<em>.properties/</em>.cfg.xmlï¼‰</p>
<p> æ˜ å°„ç±»ï¼ˆ*.javaï¼‰ï¼šå®ƒæ˜¯æè¿°æ•°æ®åº“è¡¨çš„ç»“æ„ï¼Œè¡¨ä¸­çš„å­—æ®µåœ¨ç±»ä¸­è¢«æè¿°æˆå±æ€§ï¼Œå°†æ¥å°±å¯ä»¥å®ç°æŠŠè¡¨ä¸­çš„è®°å½•æ˜ å°„æˆä¸ºè¯¥ç±»çš„å¯¹è±¡äº†ã€‚</p>
<p>æ˜ å°„æ–‡ä»¶ï¼ˆ*.hbm.xmlï¼‰ï¼šå®ƒæ˜¯æŒ‡å®šæ•°æ®åº“è¡¨å’Œæ˜ å°„ç±»ä¹‹é—´çš„å…³ç³»ï¼ŒåŒ…æ‹¬æ˜ å°„ç±»å’Œæ•°æ®åº“è¡¨çš„å¯¹åº”å…³ç³»ã€è¡¨å­—æ®µå’Œç±»å±æ€§ç±»å‹çš„å¯¹åº”å…³ç³»ä»¥åŠè¡¨å­—æ®µå’Œç±»å±æ€§åç§°çš„å¯¹åº”å…³ç³»ç­‰ã€‚</p>
<p>æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼ˆ<em>.properties/</em>.cfg.xmlï¼‰ï¼šå®ƒæ˜¯æŒ‡å®šä¸æ•°æ®åº“è¿æ¥æ—¶éœ€è¦çš„è¿æ¥ä¿¡æ¯ï¼Œæ¯”å¦‚è¿æ¥å“ªç§æ•°æ®åº“ã€ç™»å½•æ•°æ®åº“çš„ç”¨æˆ·åã€ç™»å½•å¯†ç ä»¥åŠè¿æ¥å­—ç¬¦ä¸²ç­‰ã€‚å½“ç„¶è¿˜å¯ä»¥æŠŠæ˜ å°„ç±»çš„åœ°å€æ˜ å°„ä¿¡æ¯æ”¾åœ¨è¿™é‡Œã€‚</p>
<h3 id="hibernateä¸­çš„å…³è”å…³ç³»æœ‰å››ç§ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤š"><a href="#hibernateä¸­çš„å…³è”å…³ç³»æœ‰å››ç§ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤š" class="headerlink" title="hibernateä¸­çš„å…³è”å…³ç³»æœ‰å››ç§ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤š"></a>hibernateä¸­çš„å…³è”å…³ç³»æœ‰å››ç§ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤š</h3><h3 id="å…³è”å…³ç³»-æ˜¯æœ‰æ–¹å‘çš„"><a href="#å…³è”å…³ç³»-æ˜¯æœ‰æ–¹å‘çš„" class="headerlink" title="å…³è”å…³ç³»(æ˜¯æœ‰æ–¹å‘çš„)"></a>å…³è”å…³ç³»(æ˜¯æœ‰æ–¹å‘çš„)</h3><p>Dept(éƒ¨é—¨è¡¨)ï¼ŒEmp(å‘˜å·¥è¡¨),ä¸€ä¸ªéƒ¨é—¨ä¸‹æœ‰å¤šä¸ªå‘˜å·¥ï¼Œè€Œä¸€ä¸ªå‘˜å·¥åªå±äºä¸€ä¸ªéƒ¨é—¨ï¼Œæ‰€ä»¥Emp-&gt;Deptæ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œæ¯ä¸ªEmpå¯¹è±¡åªä¼šå¼•ç”¨ä¸€ä¸ªDeptå¯¹è±¡,è€ŒDept-&gt;Empæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè¡¨ç¤ºæ¯ä¸ªDeptå¯¹è±¡ä¼šå¼•ç”¨ä¸€ç»„Empå¯¹è±¡ï¼Œå› æ­¤åœ¨Empç±»ä¸­åº”è¯¥å®šä¹‰ä¸€ä¸ªDeptç±»å‹çš„å±æ€§ï¼Œè€Œåœ¨Deptç±»ä¸­éœ€è¦å®šä¹‰ä¸€ä¸ªé›†åˆç±»å‹çš„å±æ€§ï¼Œæ¥å¼•ç”¨Empæ‰€æœ‰å…³è”çš„Empå¯¹è±¡ï¼Œå¦‚æœåªé…ç½®ä¸€æ–¹è¢«æˆä¸ºå•å‘æ˜ å°„ï¼Œä¸¤ä¸ªéƒ½é…ç½®è¢«ç§°ä¸ºåŒå‘</p>
<h4 id="å•å‘å…³è”"><a href="#å•å‘å…³è”" class="headerlink" title="å•å‘å…³è”"></a>å•å‘å…³è”</h4><p>å•å‘å…³è”æ˜¯æŒ‡åªæœ‰ä¸€æ–¹æœ‰å¦ä¸€æ–¹çš„å…³è”ä¿¡æ¯è€Œå¦ä¸€æ–¹æ²¡æœ‰å…³è”ä¿¡æ¯<br>Aâ€”â€”&gt;B<br>Aå¯¹è±¡ä¸­æœ‰Bå¯¹è±¡çš„å…³è”ä¿¡æ¯<br>Bå¯¹è±¡ä¸­æ²¡æœ‰Aå¯¹è±¡çš„å…³è”ä¿¡æ¯<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡Aå¯¹è±¡ä¸­Bçš„å…³è”ä¿¡æ¯æŸ¥è¯¢æˆ–ä¿®æ”¹Bå¯¹è±¡çš„ä¿¡æ¯ä½†æ— æ³•é€šè¿‡Bå¯¹è±¡æ¥æŸ¥è¯¢ä¿®æ”¹Aå¯¹è±¡çš„ä¿¡æ¯<br>åŒç†A&lt;â€”â€”Bä¹Ÿæ˜¯å•å‘å…³è”</p>
<h4 id="åŒå‘å…³è”"><a href="#åŒå‘å…³è”" class="headerlink" title="åŒå‘å…³è”"></a>åŒå‘å…³è”</h4><p>A&lt;â€”â€”&gt;B<br>Aå¯¹è±¡ä¸­æœ‰Bå¯¹è±¡çš„å…³è”ä¿¡æ¯<br>Bå¯¹è±¡ä¸­ä¹Ÿæœ‰Aå¯¹è±¡çš„å…³è”ä¿¡æ¯<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡Aå¯¹è±¡ä¸­Bçš„å…³è”ä¿¡æ¯æŸ¥è¯¢æˆ–ä¿®æ”¹Bå¯¹è±¡çš„ä¿¡æ¯ä¹Ÿå¯ä»¥é€šè¿‡Bå¯¹è±¡æ¥æŸ¥è¯¢ä¿®æ”¹Aå¯¹è±¡çš„ä¿¡æ¯</p>
<p> å•å‘å…³è”ä¸€èˆ¬åœ¨ä¸€æ–¹é…ç½®å¤šæ–¹ä¸è¿›è¡Œé…ç½®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€å¦‚ï¼šä¸€å¯¹å¤š å•å‘å…³è”åœ¨â€œä¸€â€çš„ä¸€æ–¹é…ç½®æ–‡ä»¶é‡Œè¿›è¡Œé…ç½®,<span class="string">"å¤š"</span>çš„ä¸€æ–¹ä¸è¿›è¡Œé…ç½®</span><br><span class="line"></span><br><span class="line">åŒå‘å…³è”ä¸¤æ–¹éƒ½è¦é…ç½®</span><br><span class="line"></span><br><span class="line">ã€€ã€€å¦‚ï¼šä¸€å¯¹å¤š åŒå‘å…³è”åœ¨â€œä¸€â€çš„ä¸€æ–¹é…ç½®æ–‡ä»¶é‡Œéœ€è¦é…ç½®ï¼Œâ€œå¤šâ€çš„ä¸€æ–¹ä¹Ÿéœ€è¦è¿›è¡Œé…ç½®</span><br></pre></td></tr></table></figure>
<h3 id="ä¸€å¯¹ä¸€å…³è”æ˜ å°„"><a href="#ä¸€å¯¹ä¸€å…³è”æ˜ å°„" class="headerlink" title="ä¸€å¯¹ä¸€å…³è”æ˜ å°„"></a>ä¸€å¯¹ä¸€å…³è”æ˜ å°„</h3><p>ä¸€å¯¹ä¸€æ˜¯æŒ‡ä¸€ä¸ªå¯¹è±¡å¯¹åº”ä¸€ä¸ªå¯¹è±¡  å¦‚ï¼šä¸€ä¸ªäººåªæœ‰ä¸€ä¸ªèº«ä»½è¯ã€‚</p>
<p>åœ¨ä¸¤ä¸ªæ•°æ®è¡¨ä¹‹é—´çš„ä¸€å¯¹ä¸€å…³ç³»å¯ä»¥æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ç§å°±æ˜¯é€šè¿‡ä¸¤ä¸ªè¡¨çš„ä¸»é”®ç›¸å…³è”ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡å¤–é”®ç›¸å…³è”</p>
<p>ä¸€ä¸ªäººï¼ˆPersonï¼‰å¯¹åº”ä¸€ä¸ªåœ°å€ï¼ˆAddressï¼‰</p>
<h4 id="ä¸€å¯¹ä¸€ä¸»é”®å•å‘å…³è”"><a href="#ä¸€å¯¹ä¸€ä¸»é”®å•å‘å…³è”" class="headerlink" title="ä¸€å¯¹ä¸€ä¸»é”®å•å‘å…³è”"></a>ä¸€å¯¹ä¸€ä¸»é”®å•å‘å…³è”</h4><p>pojo<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line">    private int personid;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">    //åœ¨Personå¯¹è±¡ä¸­æœ‰Addresså¯¹è±¡çš„å…³è”ä¿¡æ¯</span><br><span class="line">    private Address address;</span><br><span class="line"> </span><br><span class="line">public class Address&#123;</span><br><span class="line">    //Addresså¯¹è±¡ä¸­æ²¡æœ‰Personå¯¹è±¡çš„å…³è”ä¿¡æ¯</span><br><span class="line">    private int addressid;</span><br><span class="line">    private String addressdetail;</span><br></pre></td></tr></table></figure></p>
<p>æ˜ å°„hbm.xmlæ–‡ä»¶<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Person.hbm.xml</span><br><span class="line">&lt;hibernate-mapping&gt;</span><br><span class="line">    &lt;class name=<span class="string">"com.entity.Person"</span> table=<span class="string">"PERSON"</span>&gt;</span><br><span class="line">        &lt;id name=<span class="string">"personid"</span> column=<span class="string">"presonid"</span>&gt;</span><br><span class="line">            &lt;!--åŸºäºä¸»é”®å…³è”æ—¶ï¼Œä¸»é”®ç”Ÿæˆç­–ç•¥æ˜¯foreignï¼Œè¡¨æ˜æ ¹æ®å…³è”ç±»ç”Ÿæˆä¸»é”®--&gt;</span><br><span class="line">            &lt;generator class=<span class="string">"foreign"</span>&gt;</span><br><span class="line">                &lt;!--å…³è”æŒä¹…åŒ–ç±»çš„å±æ€§å--&gt;</span><br><span class="line">                &lt;param name=<span class="string">"property"</span>&gt;address&lt;/param&gt;</span><br><span class="line">            &lt;/generator&gt;</span><br><span class="line">        &lt;/id&gt;</span><br><span class="line">        &lt;property name=<span class="string">"name"</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">"age"</span>/&gt;</span><br><span class="line">        &lt;!--constrainedè®¾å®šä¸º<span class="literal">true</span>ï¼Œè¡¨ç¤ºçš„ä¸»é”®å¿…é¡»ä¸Personä¸­å¯¹åº”èµ„æ–™çš„ä¸»é”®ç›¸åŒã€‚--&gt;</span><br><span class="line">        &lt;one-to-one name=<span class="string">"address"</span> constrained=<span class="string">"true"</span>/&gt;</span><br><span class="line">    &lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<p>Address.hbm.xmlä¸­ä¸åšä»»ä½•é…ç½®</p>
<h4 id="ä¸€å¯¹ä¸€ä¸»é”®åŒå‘å…³è”"><a href="#ä¸€å¯¹ä¸€ä¸»é”®åŒå‘å…³è”" class="headerlink" title="ä¸€å¯¹ä¸€ä¸»é”®åŒå‘å…³è”"></a>ä¸€å¯¹ä¸€ä¸»é”®åŒå‘å…³è”</h4><p>Person&lt;â€”â€”&gt;Address<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Person implements java.io.Serializable &#123; </span><br><span class="line"></span><br><span class="line">  private Long id; </span><br><span class="line">  private String name; </span><br><span class="line">  //åŒå‘å…³è”ä¸­Personå¯¹è±¡ä¸­æœ‰Addersså¯¹è±¡çš„å…³è”ä¿¡æ¯  </span><br><span class="line">  private Address address;</span><br><span class="line"> </span><br><span class="line">public class Address implements java.io.Serializable &#123; </span><br><span class="line">  private Long id; </span><br><span class="line">  //Addersså¯¹è±¡ä¸­ä¹Ÿæœ‰Personå¯¹è±¡çš„å…³è”ä¿¡æ¯  </span><br><span class="line">  private Person person; </span><br><span class="line">  private String detail;</span><br></pre></td></tr></table></figure></p>
<p>Person.hbm.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping&gt; </span><br><span class="line">  &lt;class name=<span class="string">"entity.Person"</span> table=<span class="string">"person"</span>&gt; </span><br><span class="line">    &lt;id name=<span class="string">"id"</span> <span class="built_in">type</span>=<span class="string">"java.lang.Long"</span>&gt; </span><br><span class="line">      &lt;column name=<span class="string">"id"</span> /&gt; </span><br><span class="line">      &lt;generator class=<span class="string">"identity"</span> /&gt; </span><br><span class="line">    &lt;/id&gt; </span><br><span class="line">    &lt;property name=<span class="string">"name"</span> <span class="built_in">type</span>=<span class="string">"java.lang.String"</span>&gt; </span><br><span class="line">      &lt;column name=<span class="string">"name"</span> length=<span class="string">"24"</span> not-null=<span class="string">"true"</span>&gt; </span><br><span class="line">        &lt;comment&gt;å§“å&lt;/comment&gt; </span><br><span class="line">      &lt;/column&gt; </span><br><span class="line">    &lt;/property&gt; </span><br><span class="line">    &lt;one-to-one name=<span class="string">"address"</span>/&gt; </span><br><span class="line">  &lt;/class&gt; </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<p>Address.hbm.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping&gt; </span><br><span class="line">  &lt;class name=<span class="string">"entity.Address"</span> table=<span class="string">"address"</span> catalog=<span class="string">"mydb"</span>&gt; </span><br><span class="line">    &lt;id name=<span class="string">"id"</span> <span class="built_in">type</span>=<span class="string">"java.lang.Long"</span>&gt; </span><br><span class="line">      &lt;column name=<span class="string">"id"</span> /&gt; </span><br><span class="line">      &lt;!-- class=<span class="string">"foreign"</span>: ä¸€å¯¹ä¸€ä¸»é”®æ˜ å°„ä¸­ï¼Œä½¿ç”¨å¦å¤–ä¸€ä¸ªç›¸å…³è”çš„å¯¹è±¡çš„æ ‡è¯†ç¬¦ --&gt; </span><br><span class="line">      &lt;generator class=<span class="string">"foreign"</span>&gt; //è¡¨æ˜idçš„ç”Ÿæˆæ–¹å¼æ˜¯å¼•ç”¨è¡¨peopleçš„ä¸»é”®</span><br><span class="line">        &lt;param name=<span class="string">"property"</span>&gt;person&lt;/param&gt; </span><br><span class="line">      &lt;/generator&gt; </span><br><span class="line">    &lt;/id&gt; </span><br><span class="line">    &lt;property name=<span class="string">"detail"</span> <span class="built_in">type</span>=<span class="string">"java.lang.String"</span>&gt; </span><br><span class="line">      &lt;column name=<span class="string">"detail"</span> length=<span class="string">"120"</span> not-null=<span class="string">"true"</span>&gt; </span><br><span class="line">        &lt;comment&gt;è¯¦ç»†åœ°å€&lt;/comment&gt; </span><br><span class="line">      &lt;/column&gt; </span><br><span class="line">    &lt;/property&gt; </span><br><span class="line">    &lt;!-- è¡¨ç¤ºåœ¨addressè¡¨å­˜åœ¨ä¸€ä¸ªå¤–é”®çº¦æŸï¼Œå¤–é”®å‚è€ƒç›¸å…³è”çš„è¡¨person --&gt; </span><br><span class="line">    &lt;one-to-one name=<span class="string">"person"</span> constrained=<span class="string">"true"</span> /&gt; </span><br><span class="line">  &lt;/class&gt; </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="ä¸€å¯¹ä¸€å¤–é”®å•å‘å…³è”"><a href="#ä¸€å¯¹ä¸€å¤–é”®å•å‘å…³è”" class="headerlink" title="ä¸€å¯¹ä¸€å¤–é”®å•å‘å…³è”"></a>ä¸€å¯¹ä¸€å¤–é”®å•å‘å…³è”</h4><p>Personâ€”â€”&gt;Address<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line">    private int personid;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">    private Address address;</span><br><span class="line"> </span><br><span class="line">public class Address&#123;</span><br><span class="line">    private int addressid;</span><br><span class="line">    private String addressdetail;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Address.hbm.xml</span><br><span class="line">&lt;!--addressä¸­ä¸åšä»»ä½•é…ç½®æ‰€ä»¥æˆ‘ä»¬çœç•¥--&gt;</span><br><span class="line"></span><br><span class="line">ã€€ã€€â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦</span><br><span class="line"></span><br><span class="line">&lt;!--å•å‘å…³è”å’ŒåŒå‘å…³è”çš„åŒºåˆ«åœ¨äºå•å‘å…³è”åªåœ¨ä¸€æ–¹é…ç½®åŒå‘å…³è”ä¸¤æ–¹éƒ½è¦é…ç½®--&gt;</span><br><span class="line">Person.hbm.xml</span><br><span class="line">&lt;hibernate-mapping&gt; </span><br><span class="line">        &lt;class name=<span class="string">"com.entity.Person"</span> table=<span class="string">"PERSON"</span>&gt; </span><br><span class="line">                &lt;id name=<span class="string">"personid"</span>&gt; </span><br><span class="line">                        &lt;generator class=<span class="string">"identity"</span>/&gt; </span><br><span class="line">                &lt;/id&gt; </span><br><span class="line">                &lt;property name=<span class="string">"name"</span>/&gt; </span><br><span class="line">                &lt;property name=<span class="string">"age"</span>/&gt; </span><br><span class="line">                &lt;!--ç”¨æ¥æ˜ å°„å…³è”PO columnæ˜¯Addressåœ¨è¯¥è¡¨ä¸­çš„å¤–é”®åˆ—å,å¢åŠ uniqueå˜æˆå”¯ä¸€çš„--&gt; </span><br><span class="line">                &lt;many-to-one name=<span class="string">"address"</span> unique=<span class="string">"true"</span>/&gt; </span><br><span class="line">        &lt;/class&gt; </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>å¤–é”®å…³è”å’Œä¸»é”®å…³è”ä¸åŒçš„åœ°æ–¹æ˜¯é‡‡ç”¨<many-to-one>æ ‡ç­¾æ¥æ˜ å°„ï¼Œä¸€å¯¹ä¸€å”¯ä¸€å¤–é”®å…³è”æ˜ å°„å…¶å®æ˜¯å¤šå¯¹ä¸€çš„ç‰¹ä¾‹ã€‚<many-to-one>æŒ‡å®šå¤šçš„ä¸€ç«¯uniqueä¸ºtrueï¼Œè¿™æ ·å°±é™åˆ¶äº†å¤šçš„ä¸€ç«¯çš„å¤šé‡æ€§ä¸ºä¸€ï¼Œå°±æ˜¯è¿™æ ·æ¥æ˜ å°„çš„ã€‚</many-to-one></many-to-one></p>
<h4 id="ä¸€å¯¹ä¸€å¤–é”®åŒå‘å…³è”"><a href="#ä¸€å¯¹ä¸€å¤–é”®åŒå‘å…³è”" class="headerlink" title="ä¸€å¯¹ä¸€å¤–é”®åŒå‘å…³è”"></a>ä¸€å¯¹ä¸€å¤–é”®åŒå‘å…³è”</h4><p>Person&lt;â€”â€”&gt;Address<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Person implements java.io.Serializable &#123; </span><br><span class="line"></span><br><span class="line">  private Long id; </span><br><span class="line">  private String name; </span><br><span class="line">  private Address address;</span><br><span class="line"> </span><br><span class="line">public class Address implements java.io.Serializable &#123; </span><br><span class="line">  private Long id; </span><br><span class="line">  private Person person; </span><br><span class="line">  private String detail;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Person.hbm.xml</span><br><span class="line">&lt;hibernate-mapping&gt; </span><br><span class="line">  &lt;class name=<span class="string">"com.entity.Person"</span> table=<span class="string">"person"</span>&gt; </span><br><span class="line">    &lt;id name=<span class="string">"personid"</span> <span class="built_in">type</span>=<span class="string">"java.lang.Long"</span>&gt; </span><br><span class="line">      &lt;column name=<span class="string">"personid"</span> /&gt; </span><br><span class="line">      &lt;generator class=<span class="string">"identity"</span> /&gt; </span><br><span class="line">    &lt;/id&gt; </span><br><span class="line">    &lt;property name=<span class="string">"name"</span> <span class="built_in">type</span>=<span class="string">"java.lang.String"</span>&gt; </span><br><span class="line">      &lt;column name=<span class="string">"name"</span> length=<span class="string">"24"</span> not-null=<span class="string">"true"</span>&gt; </span><br><span class="line">        &lt;comment&gt;å§“å&lt;/comment&gt; </span><br><span class="line">      &lt;/column&gt; </span><br><span class="line">    &lt;/property&gt; </span><br><span class="line">ã€€ã€€&lt;!--åŒå‘å…³è”é…ç½®--&gt;</span><br><span class="line">    &lt;one-to-one name=<span class="string">"address"</span> /&gt; </span><br><span class="line">  &lt;/class&gt; </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br><span class="line"></span><br><span class="line">Address.hbm.xml</span><br><span class="line">&lt;hibernate-mapping&gt; </span><br><span class="line">  &lt;class name=<span class="string">"com.entity.Address"</span> table=<span class="string">"address"</span> catalog=<span class="string">"testdb"</span>&gt; </span><br><span class="line">    &lt;id name=<span class="string">"addressid"</span> <span class="built_in">type</span>=<span class="string">"java.lang.Long"</span>&gt; </span><br><span class="line">      &lt;column name=<span class="string">"addressid"</span> /&gt; </span><br><span class="line">      &lt;generator class=<span class="string">"identity"</span> /&gt; </span><br><span class="line">    &lt;/id&gt; </span><br><span class="line">    &lt;property name=<span class="string">"detail"</span> <span class="built_in">type</span>=<span class="string">"java.lang.String"</span>&gt; </span><br><span class="line">      &lt;column name=<span class="string">"detail"</span> length=<span class="string">"120"</span> not-null=<span class="string">"true"</span>&gt; </span><br><span class="line">        &lt;comment&gt;è¯¦ç»†åœ°å€&lt;/comment&gt; </span><br><span class="line">      &lt;/column&gt; </span><br><span class="line">    &lt;/property&gt; </span><br><span class="line">    &lt;many-to-one name=<span class="string">"person"</span> class=<span class="string">"entity.Person"</span> unique=<span class="string">"true"</span>&gt; </span><br><span class="line">      &lt;column name=<span class="string">"personid"</span>&gt; </span><br><span class="line">        &lt;comment&gt;äººçš„ID&lt;/comment&gt; </span><br><span class="line">      &lt;/column&gt; </span><br><span class="line">    &lt;/many-to-one&gt; </span><br><span class="line">  &lt;/class&gt; </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸€å¯¹å¤šå…³è”æ˜ å°„"><a href="#ä¸€å¯¹å¤šå…³è”æ˜ å°„" class="headerlink" title="ä¸€å¯¹å¤šå…³è”æ˜ å°„"></a>ä¸€å¯¹å¤šå…³è”æ˜ å°„</h3><h4 id="ä¸€å¯¹å¤šå•å‘å…³è”"><a href="#ä¸€å¯¹å¤šå•å‘å…³è”" class="headerlink" title="ä¸€å¯¹å¤šå•å‘å…³è”"></a>ä¸€å¯¹å¤šå•å‘å…³è”</h4><p>Classesâ€”â€”&gt;Student<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Classes &#123;  </span><br><span class="line">    private int id;  </span><br><span class="line">    private String name;     </span><br><span class="line">    //Setæ”¯æŒå»¶è¿ŸåŠ è½½å› ä¸ºå¤šä¸ªå­¦ç”Ÿæ‰€ä»¥æˆ‘ä»¬ç”¨Seté›†åˆå…³è” </span><br><span class="line">    private Set students;  </span><br><span class="line">&#125;  </span><br><span class="line">public class Student &#123;  </span><br><span class="line">    private int id;  </span><br><span class="line">    private String name;      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Classeså¯¹è±¡ä¸­ä½¿ç”¨äº†setå±æ€§ï¼Œä½†æ˜¯åªæ˜¯è¯´æ˜äº†å»¶è¿ŸåŠ è½½çš„å±æ€§ï¼Œå¹¶æ²¡æœ‰ä¸ºå±æ€§é…ç½®å¯¹åº”çš„å¯¹è±¡ï¼Œå±æ€§çš„å¯¹è±¡æ˜¯è¦åœ¨æ˜ å°„æ–‡ä»¶ä¸­æ¥é…ç½®çš„ï¼Œéœ€è¦æ·»åŠ setæ ‡ç­¾ï¼Œå¹¶åœ¨setæ ‡ç­¾ä¸­æ·»åŠ <one-to-many>æ ‡ç­¾<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping&gt;  </span><br><span class="line">    &lt;class name=<span class="string">"com.hibernate.Classes"</span> table=<span class="string">"t_classes"</span>&gt;  </span><br><span class="line">        &lt;id name=<span class="string">"id"</span>&gt;  </span><br><span class="line">            &lt;generator class=<span class="string">"native"</span>/&gt;  </span><br><span class="line">        &lt;/id&gt;  </span><br><span class="line">        &lt;property name=<span class="string">"name"</span>/&gt;  </span><br><span class="line">        &lt;<span class="built_in">set</span> name=<span class="string">"students"</span>&gt;  </span><br><span class="line">            &lt;key column=<span class="string">"classesid"</span>&gt;&lt;/key&gt;  </span><br><span class="line">            &lt;one-to-many class=<span class="string">"com.hibernate.Student"</span>&gt;&lt;/one-to-many&gt;  </span><br><span class="line">        &lt;/<span class="built_in">set</span>&gt;  </span><br><span class="line">    &lt;/class&gt;  </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></one-to-many></p>
<p>Student.hbm.xmlä¸åšä»»ä½•æ”¹å˜</p>
<h4 id="ä¸€å¯¹å¤šåŒå‘å…³è”"><a href="#ä¸€å¯¹å¤šåŒå‘å…³è”" class="headerlink" title="ä¸€å¯¹å¤šåŒå‘å…³è”"></a>ä¸€å¯¹å¤šåŒå‘å…³è”</h4><p>Classes&lt;â€”â€”&gt;Student<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Classes &#123;  </span><br><span class="line">    private int id;  </span><br><span class="line">    private String name;     </span><br><span class="line">    //Setæ”¯æŒå»¶è¿ŸåŠ è½½  </span><br><span class="line">    private Set&lt;Student&gt; students;  </span><br><span class="line">&#125;  </span><br><span class="line">public class Student &#123;  </span><br><span class="line">    private int id;  </span><br><span class="line">    private String name; </span><br><span class="line">    //æ·»åŠ classå¯¹è±¡å…³è”ä¿¡æ¯å› ä¸ºæ˜¯ä¸€æ–¹æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€ä¸ªå¯¹è±¡å…³è”</span><br><span class="line">    private Classes classes;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Student.hbm.xml</span><br><span class="line">&lt;hibernate-mapping&gt;  </span><br><span class="line">    &lt;class name=<span class="string">"com.hibernate.Student"</span> table=<span class="string">"t_student"</span>&gt;  </span><br><span class="line">        &lt;id name=<span class="string">"id"</span>&gt;  </span><br><span class="line">            &lt;generator class=<span class="string">"native"</span>/&gt;  </span><br><span class="line">        &lt;/id&gt;  </span><br><span class="line">        &lt;property name=<span class="string">"name"</span>/&gt;  </span><br><span class="line">        &lt;!-- åœ¨å¤šçš„ä¸€ç«¯Studentä¸­æ·»åŠ ä¸€è¡Œæ–°çš„Classesåˆ— ,å¹¶ä¸”åˆ—çš„åç§°è¦å’ŒClasses.hbm.xmlçš„åˆ—æ˜ç›¸åŒ--&gt;  </span><br><span class="line">        &lt;many-to-one name=<span class="string">"classes"</span> column=<span class="string">"classesid"</span>&gt;&lt;/many-to-one&gt;  </span><br><span class="line">    &lt;/class&gt;  </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<h3 id="å¤šå¯¹å¤šå…³è”æ˜ å°„"><a href="#å¤šå¯¹å¤šå…³è”æ˜ å°„" class="headerlink" title="å¤šå¯¹å¤šå…³è”æ˜ å°„"></a>å¤šå¯¹å¤šå…³è”æ˜ å°„</h3><p>å¤šå¯¹å¤šå…³è”æ˜¯æŒ‡å¤šä¸ªå¯¹è±¡å¯¹åº”å¤šä¸ªå¯¹è±¡ å¦‚ï¼šè€å¸ˆå¯ä»¥æœ‰å¤šä¸ªå­¦ç”Ÿï¼Œå­¦ç”Ÿä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè€å¸ˆ</p>
<h4 id="å¤šå¯¹å¤šå•å‘å…³è”"><a href="#å¤šå¯¹å¤šå•å‘å…³è”" class="headerlink" title="å¤šå¯¹å¤šå•å‘å…³è”"></a>å¤šå¯¹å¤šå•å‘å…³è”</h4><p>Teacherâ€”â€”&gt;Student<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Teacher &#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private Set&lt;Student&gt; students = new HashSet&lt;Student&gt;();</span><br><span class="line">ï½</span><br><span class="line"></span><br><span class="line">public class Student &#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private String title;</span><br><span class="line">ï½</span><br></pre></td></tr></table></figure></p>
<p>Teacher.hbm.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping&gt;  </span><br><span class="line">    &lt;class name=<span class="string">"com.hibernate.Teacher"</span> table=<span class="string">"t_teacher"</span>&gt;  </span><br><span class="line">        &lt;id name=<span class="string">"id"</span>&gt;  </span><br><span class="line">            &lt;generator class=<span class="string">"native"</span>/&gt;  </span><br><span class="line">        &lt;/id&gt;  </span><br><span class="line">        &lt;property name=<span class="string">"name"</span>/&gt;  </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€&lt;!--ç”Ÿæˆä¸€å¼ æ–°è¡¨å­˜æ”¾ä¸¤ä¸ªå…³è”å¯¹è±¡çš„ID--&gt;</span><br><span class="line">        &lt;<span class="built_in">set</span> name=<span class="string">"students"</span> table=<span class="string">"Teacher_Sutdent"</span>&gt;  </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;!--å°†Teacherè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±æ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt;</span><br><span class="line">            &lt;key column=<span class="string">"teacher_id"</span>&gt;&lt;/key&gt;  </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;!--å°†Studentè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±æ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt; </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;many-to-many class=<span class="string">"com.hibernate.Student"</span> column=<span class="string">"student_id"</span>&gt;&lt;/many-to-many&gt; </span><br><span class="line">ã€€ã€€ã€€ã€€  &lt;/<span class="built_in">set</span>&gt; </span><br><span class="line">ã€€ã€€ã€€&lt;/class&gt; </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="å¤šå¯¹å¤šåŒå‘å…³è”"><a href="#å¤šå¯¹å¤šåŒå‘å…³è”" class="headerlink" title="å¤šå¯¹å¤šåŒå‘å…³è”"></a>å¤šå¯¹å¤šåŒå‘å…³è”</h4><p>Teacher&lt;â€”â€”&gt;Student<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Teacher &#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private Set&lt;Student&gt; students = new HashSet&lt;Student&gt;();</span><br><span class="line">ï½</span><br><span class="line"></span><br><span class="line">public class Student &#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private String title;</span><br><span class="line">    private Set&lt;Teacher&gt; teachers = new HashSet&lt;Teacher&gt;();</span><br><span class="line">ï½</span><br></pre></td></tr></table></figure></p>
<p>Student.hbm.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping&gt;  </span><br><span class="line">    &lt;class name=<span class="string">"com.hibernate.Student"</span> table=<span class="string">"t_student"</span>&gt;  </span><br><span class="line">        &lt;id name=<span class="string">"id"</span>&gt;  </span><br><span class="line">            &lt;generator class=<span class="string">"native"</span>/&gt;  </span><br><span class="line">        &lt;/id&gt;  </span><br><span class="line">        &lt;property name=<span class="string">"name"</span>/&gt;  </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€&lt;!--ç”Ÿæˆä¸€å¼ æ–°è¡¨å­˜æ”¾ä¸¤ä¸ªè¡¨çš„Id--&gt;</span><br><span class="line">        &lt;<span class="built_in">set</span> name=<span class="string">"teachers"</span> table=<span class="string">"Teacher_Student"</span>&gt;  </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;!--å°†Teacherè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±æ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt;</span><br><span class="line">            &lt;key column=<span class="string">"student_id"</span>&gt;&lt;/key&gt;  </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;!--å°†Studentè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±æ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt; </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;many-to-many class=<span class="string">"com.hibernate.Teacher"</span> column=<span class="string">"teacher_id"</span>&gt;&lt;/many-to-many&gt; </span><br><span class="line">ã€€ã€€ã€€ã€€  &lt;/<span class="built_in">set</span>&gt; </span><br><span class="line">ã€€ã€€ã€€&lt;/class&gt; </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<p>Teacher.hbm.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping&gt;  </span><br><span class="line">    &lt;class name=<span class="string">"com.hibernate.Teacher"</span> table=<span class="string">"t_teacher"</span>&gt;  </span><br><span class="line">        &lt;id name=<span class="string">"id"</span>&gt;  </span><br><span class="line">            &lt;generator class=<span class="string">"native"</span>/&gt;  </span><br><span class="line">        &lt;/id&gt;  </span><br><span class="line">        &lt;property name=<span class="string">"name"</span>/&gt;  </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€&lt;!--ç”Ÿæˆä¸€å¼ æ–°è¡¨å­˜æ”¾ä¸¤ä¸ªå…³è”å¯¹è±¡çš„ID--&gt;</span><br><span class="line">        &lt;<span class="built_in">set</span> name=<span class="string">"students"</span> table=<span class="string">"Teacher_Sutdent"</span>&gt;  </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;!--å°†Teacherè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±æ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt;</span><br><span class="line">            &lt;key column=<span class="string">"teacher_id"</span>&gt;&lt;/key&gt;  </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;!--å°†Studentè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±æ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt; </span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;many-to-many class=<span class="string">"com.hibernate.Student"</span> column=<span class="string">"student_id"</span>&gt;&lt;/many-to-many&gt; </span><br><span class="line">ã€€ã€€ã€€ã€€  &lt;/<span class="built_in">set</span>&gt; </span><br><span class="line">ã€€ã€€ã€€&lt;/class&gt; </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="å¤šå¯¹ä¸€å…³è”"><a href="#å¤šå¯¹ä¸€å…³è”" class="headerlink" title="å¤šå¯¹ä¸€å…³è”"></a>å¤šå¯¹ä¸€å…³è”</h3><p>å¯¹æ¯”ä¸€å¯¹ä¸€å…³è”æ˜ å°„å’Œå¤šå¯¹ä¸€å”¯ä¸€å¤–é”®å…³è”æ˜ å°„ï¼Œå…¶å®å®ƒä»¬ä¸¤ä¸ªéƒ½æ˜¯ä½¿ç”¨äº†<many-to-one>æœ¬è´¨ä¸Šéƒ½æ˜¯å¤–é”®çº¦æŸï¼Œåªä¸è¿‡ä¸€å¯¹ä¸€çš„æ˜¯å”¯ä¸€æ˜ å°„ï¼Œéœ€è¦æ·»åŠ unique=â€trueâ€çš„å±æ€§ï¼Œå…¶å®ƒçš„å®ƒä»¬ä¸¤ä¸ªæ˜¯ç›¸åŒçš„</many-to-one></p>
<p>å¤šå¯¹ä¸€å…³è”æ˜¯æŒ‡å¤šä¸ªå¯¹è±¡å¯¹åº”ä¸€ä¸ªå¯¹è±¡ å¦‚ï¼šå¤šä¸ªå‘˜å·¥å¯¹åº”ä¸€ä¸ªéƒ¨é—¨</p>
<h4 id="å¤šå¯¹ä¸€å•å‘å…³è”"><a href="#å¤šå¯¹ä¸€å•å‘å…³è”" class="headerlink" title="å¤šå¯¹ä¸€å•å‘å…³è”"></a>å¤šå¯¹ä¸€å•å‘å…³è”</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Department &#123;  </span><br><span class="line">    private int id;  </span><br><span class="line">    private String name;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">public class Employee &#123;  </span><br><span class="line">    private int id;  </span><br><span class="line">    private String name;  </span><br><span class="line">    private Department depart;//æ³¨æ„è¿™é‡Œæ˜¯ä»¥éƒ¨é—¨çš„å¯¹è±¡æ¥ä½œä¸ºå‘˜å·¥çš„å±æ€§çš„</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Employee.hbm.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping package=<span class="string">"com.suo.domain"</span>&gt;  </span><br><span class="line">      </span><br><span class="line">    &lt;class name=<span class="string">"Employee"</span>&gt;  </span><br><span class="line">        &lt;id name=<span class="string">"id"</span>&gt;  </span><br><span class="line">            &lt;generator class=<span class="string">"native"</span>/&gt;  </span><br><span class="line">        &lt;/id&gt;  </span><br><span class="line">        &lt;property name=<span class="string">"name"</span>/&gt;  </span><br><span class="line">        &lt;many-to-one name=<span class="string">"depart"</span>&gt;&lt;/many-to-one&gt;  </span><br><span class="line">        &lt;!-- many-to-oneæŒ‡æ˜äº†å¤–é”® ï¼Œä¼šæ ¹æ®åå°„æœºåˆ¶ï¼Œæ‰¾åˆ°è¦å’ŒEmployeeå»ºç«‹å¤šå¯¹ä¸€å…³ç³»çš„ç±»ï¼Œè¯¥åˆ—é»˜è®¤çš„æ˜¯å¯ä»¥ä¸ºç©ºçš„--&gt;  </span><br><span class="line">    &lt;/class&gt;  </span><br><span class="line">      </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="å¤šå¯¹ä¸€åŒå‘å…³è”"><a href="#å¤šå¯¹ä¸€åŒå‘å…³è”" class="headerlink" title="å¤šå¯¹ä¸€åŒå‘å…³è”"></a>å¤šå¯¹ä¸€åŒå‘å…³è”</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Department &#123;  </span><br><span class="line">    private int id;  </span><br><span class="line">    private String name;</span><br><span class="line">    private Set&lt;Employee&gt; emps;//ç”¨é›†åˆæ¥å­˜å‚¨å‘˜å·¥     </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">public class Employee &#123;  </span><br><span class="line">    private int id;  </span><br><span class="line">    private String name;  </span><br><span class="line">    private Department depart;//æ³¨æ„è¿™é‡Œæ˜¯ä»¥éƒ¨é—¨çš„å¯¹è±¡æ¥ä½œä¸ºå‘˜å·¥çš„å±æ€§çš„ï¼Œè¿™ä¸ªæ€æƒ³å¾ˆå…³é”®ï¼Œæ˜¯å»ºç«‹èµ·éƒ¨é—¨å’Œå‘˜å·¥å…³è”çš„å…³é”®  </span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Departement .hbm.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping package=<span class="string">"com.suo.domain"</span>&gt;  </span><br><span class="line"></span><br><span class="line">    &lt;class name=<span class="string">"Department"</span>&gt;  </span><br><span class="line">        &lt;id name=<span class="string">"id"</span>&gt;  </span><br><span class="line">            &lt;generator class=<span class="string">"native"</span>/&gt;  </span><br><span class="line">        &lt;/id&gt;  </span><br><span class="line">        &lt;property name=<span class="string">"name"</span>/&gt;  </span><br><span class="line">          </span><br><span class="line">        &lt;<span class="built_in">set</span> name=<span class="string">"emps"</span>&gt;  </span><br><span class="line">            &lt;key column=<span class="string">"depart_id"</span>/&gt;&lt;!-- keyæŒ‡æ˜äº†å‘˜å·¥è¡¨ä¸­çš„å¤–é”®--&gt;  </span><br><span class="line">            &lt;one-to-many class=<span class="string">"Employee"</span>/&gt;&lt;!-- one-to-manyæŒ‡æ˜äº†å’Œå“ªä¸ªç±»è¿›è¡Œä¸€å¯¹å¤šçš„æ˜ å°„ --&gt;  </span><br><span class="line">        &lt;/<span class="built_in">set</span>&gt;  </span><br><span class="line">        &lt;!--   </span><br><span class="line">            ç”¨<span class="built_in">set</span>æ ‡ç­¾è¡¨ç¤ºDepartmentä¸­çš„å‘˜å·¥é›†åˆçš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§å¹¶æ²¡æœ‰æ˜ å°„åˆ°æ•°æ®åº“ä¸­çš„éƒ¨é—¨è¡¨ä¸­ï¼Œ  </span><br><span class="line">            å³éƒ¨é—¨è¡¨ä¸­ï¼Œå¹¶æ²¡æœ‰empsè¿™æ ·çš„ä¸€ä¸ªåˆ—ã€‚  </span><br><span class="line">         --&gt;  </span><br><span class="line">    &lt;/class&gt;  </span><br><span class="line">      </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<p>Employee.hbm.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping package=<span class="string">"com.suo.domain"</span>&gt;  </span><br><span class="line">      </span><br><span class="line">    &lt;class name=<span class="string">"Employee"</span>&gt;  </span><br><span class="line">        &lt;id name=<span class="string">"id"</span>&gt;  </span><br><span class="line">            &lt;generator class=<span class="string">"native"</span>/&gt;  </span><br><span class="line">        &lt;/id&gt;  </span><br><span class="line">        &lt;property name=<span class="string">"name"</span>/&gt;  </span><br><span class="line">        &lt;many-to-one name=<span class="string">"depart"</span>&gt;&lt;/many-to-one&gt;  </span><br><span class="line">        &lt;!-- many-to-oneæŒ‡æ˜äº†å¤–é”® ï¼Œä¼šæ ¹æ®åå°„æœºåˆ¶ï¼Œæ‰¾åˆ°è¦å’ŒEmployeeå»ºç«‹å¤šå¯¹ä¸€å…³ç³»çš„ç±»ï¼Œè¯¥åˆ—é»˜è®¤çš„æ˜¯å¯ä»¥ä¸ºç©ºçš„--&gt;  </span><br><span class="line">    &lt;/class&gt;  </span><br><span class="line">      </span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="çº§è”æ“ä½œ"><a href="#çº§è”æ“ä½œ" class="headerlink" title="çº§è”æ“ä½œ"></a>çº§è”æ“ä½œ</h3><h4 id="Casade"><a href="#Casade" class="headerlink" title="Casade"></a>Casade</h4><p>Casadeç”¨æ¥è¯´æ˜å½“å¯¹ä¸»å¯¹è±¡è¿›è¡ŒæŸç§æ“ä½œæ—¶æ˜¯å¦å¯¹å…¶å…³è”çš„ä»å¯¹è±¡ä¹Ÿä½œç±»ä¼¼çš„æ“ä½œï¼Œå¸¸ç”¨çš„cascade:none,all,save-update,delete</p>
<p>ä¸€èˆ¬å¯¹many-to-one,many-to-manyä¸è®¾ç½®çº§è”ï¼Œåœ¨<one-to-one>å’Œ<one-to-many>ä¸­è®¾ç½®çº§è”</one-to-many></one-to-one></p>
<h4 id="inverse"><a href="#inverse" class="headerlink" title="inverse"></a>inverse</h4><p>inverseè¡¨â€œæ˜¯å¦æ”¾å¼ƒç»´æŠ¤å…³è”å…³ç³»â€(åœ¨Javaé‡Œä¸¤ä¸ªå¯¹è±¡äº§ç”Ÿå…³è”æ—¶ï¼Œå¯¹æ•°æ®åº“è¡¨çš„å½±å“)ï¼Œåœ¨one-to-manyå’Œmany-to-manyçš„é›†åˆå®šä¹‰ä¸­ä½¿ç”¨ï¼Œinverse=â€trueâ€è¡¨ç¤ºè¯¥å¯¹è±¡ä¸ç»´æŠ¤å…³è”å…³ç³»</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/08/Hibernateå…³ç³»æ˜ å°„/" data-id="cjrabl6mw000avkdqbn12tslh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HQLå®ç”¨æŠ€æœ¯" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/08/HQLå®ç”¨æŠ€æœ¯/" class="article-date">
  <time datetime="2018-11-08T13:24:14.000Z" itemprop="datePublished">2018-11-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SSH/">SSH</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/08/HQLå®ç”¨æŠ€æœ¯/">HQLå®ç”¨æŠ€æœ¯</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä»Šå¤©æ¥å­¦ä¹ HQLè¯­å¥</p>
<h3 id="ç¼–å†™HQLè¯­å¥"><a href="#ç¼–å†™HQLè¯­å¥" class="headerlink" title="ç¼–å†™HQLè¯­å¥"></a>ç¼–å†™HQLè¯­å¥</h3><h4 id="fromå­å¥"><a href="#fromå­å¥" class="headerlink" title="fromå­å¥"></a>fromå­å¥</h4><p>  ä¾‹ï¼šfrom com.entity.Dept;<br>                    from Dept dept;â€“ä¸ºæŒä¹…åŒ–ç±»DeptæŒ‡å®šäº†åˆ«ådeptï¼›å¯çœç•¥åŒ…å</p>
<h4 id="selectå­å¥"><a href="#selectå­å¥" class="headerlink" title="selectå­å¥"></a>selectå­å¥</h4><p> ä¾‹ï¼šselect dept from Dept as dept;<br>                    select dept.DeptName from Dept as dept;â€“é€‰å–å•ä¸ªå±æ€§ï¼Œå¯é€‰æ‹©å¤šä¸ª</p>
<h4 id="whereå­å¥"><a href="#whereå­å¥" class="headerlink" title="whereå­å¥"></a>whereå­å¥</h4><p>ä¾‹ï¼šfrom Dept where DeptName=â€™SALESâ€™;<br>                    from Dept dept where dept.DeptName=â€™SALESâ€™;<br>                    from Dept dept where dept.location is not null;â€“æŸ¥è¯¢åœ°å€ä¸ä¸ºç©ºçš„éƒ¨é—¨</p>
<h4 id="ä½¿ç”¨è¡¨è¾¾å¼"><a href="#ä½¿ç”¨è¡¨è¾¾å¼" class="headerlink" title="ä½¿ç”¨è¡¨è¾¾å¼"></a>ä½¿ç”¨è¡¨è¾¾å¼</h4><p> ä¾‹ï¼šfrom Dept dept where lower(dept.DeptName)=â€™salesâ€™;â€“lower()æŠŠå­—ç¬¦ä¸²ä¸­çš„å­—æ¯è½¬æ¢æˆå°å†™<br>                    from Emp where year(hireDate)=1980;â€“year()ç”¨äºè·å–æ—¥æœŸå­—æ®µçš„å¹´ä»½</p>
<h4 id="order-byå­å¥"><a href="#order-byå­å¥" class="headerlink" title="order byå­å¥"></a>order byå­å¥</h4><p> ä¾‹ï¼šfrom Emp order by hireDate asc<br>                    from Emp order by hireDate,salary desc;</p>
<h3 id="æ‰§è¡ŒHQLè¯­å¥"><a href="#æ‰§è¡ŒHQLè¯­å¥" class="headerlink" title="æ‰§è¡ŒHQLè¯­å¥"></a>æ‰§è¡ŒHQLè¯­å¥</h3><p> æ‰§è¡ŒHQLè¯­å¥æ­¥éª¤<br>                    1ã€è·å–sessionå¯¹è±¡<br>                    2ã€ç¼–å†™HQLè¯­å¥<br>                    3ã€åˆ›å»ºQueryå¯¹è±¡<br>                    4ã€æ‰§è¡ŒæŸ¥è¯¢</p>
<p>å…ˆç»™å¤§å®¶çœ‹ä¸€äº›ç®€å•çš„ä¾‹å­å§</p>
<h4 id="DAOå±‚"><a href="#DAOå±‚" class="headerlink" title="DAOå±‚"></a>DAOå±‚</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">// æŸ¥è¯¢</span><br><span class="line">public List&lt;User&gt; <span class="function"><span class="title">findAllUser</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User"</span>).list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Iteratorè¿”å›</span><br><span class="line">public Iterator&lt;User&gt; <span class="function"><span class="title">findAllUser_iterate</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User"</span>).iterate();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®å§“åæŸ¥è¯¢</span><br><span class="line">public Iterator&lt;User&gt; <span class="function"><span class="title">findAllUserByName</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User where name='æé’°æ´‹'"</span>).iterate();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è·å–å”¯ä¸€ç»“æœ</span><br><span class="line">public Long <span class="function"><span class="title">countUser</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> (Long) this.currentSession().createQuery(<span class="string">"select count(id) from User"</span>).uniqueResult();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å‚æ•°æŸ¥è¯¢,ä½ç½®ä»0å¼€å§‹</span><br><span class="line">public List&lt;User&gt; findUserByName(String name) &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User where name=?"</span>).setString(0, name).list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŒ‰å‚æ•°åç»‘å®š</span><br><span class="line">public List&lt;User&gt; findUserByName1(String name) &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User where name=:name1"</span>).setString(<span class="string">"name1"</span>, name).list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¤šå‚æ•°æŸ¥è¯¢ +ç»“åˆä½ç½®</span><br><span class="line">public List&lt;User&gt; findByCoditions(Object[] param) &#123;</span><br><span class="line">	Query query = this.currentSession().createQuery(<span class="string">"from User where name=? and telephone=?"</span>);</span><br><span class="line">	<span class="keyword">if</span> (param != null &amp;&amp; param.length != 0) &#123;</span><br><span class="line">		<span class="keyword">for</span> (int i = 0; i &lt; param.length; i++) &#123;</span><br><span class="line">			query.setParameter(i, param[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> query.list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¤šå‚æ•°æŸ¥è¯¢ +ç»“åˆåç§° èµ›é«˜</span><br><span class="line">public List&lt;User&gt; findByCoditions(User param) &#123;</span><br><span class="line">	Query query = this.currentSession().createQuery(<span class="string">"from User where name=:name and telephone=:telephone"</span>);</span><br><span class="line">	query.setProperties(param); // èµ›é«˜</span><br><span class="line">	<span class="built_in">return</span> query.list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¤šå‚æ•°æŸ¥è¯¢ +ç»“åˆåç§° èµ›é«˜ åŠ¨æ€hql</span><br><span class="line">public List&lt;User&gt; findByCoditions(String hql, User param) &#123;</span><br><span class="line">	Query query = this.currentSession().createQuery(hql);</span><br><span class="line">	query.setProperties(param); // èµ›é«˜</span><br><span class="line">	<span class="built_in">return</span> query.list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¤šå‚æ•°æŸ¥è¯¢ +ç»“åˆåç§° èµ›é«˜ åŠ¨æ€hql map</span><br><span class="line">public List&lt;User&gt; findByCoditions(String hql, Map&lt;String, Object&gt; param) &#123;</span><br><span class="line">	Query query = this.currentSession().createQuery(hql);</span><br><span class="line">	query.setProperties(param); // èµ›é«˜</span><br><span class="line">	<span class="built_in">return</span> query.list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åˆ†é¡µ</span><br><span class="line">public List&lt;User&gt; findByPage(int pageNo, int pageSize) &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User order by id"</span>).setFirstResult((pageNo - 1) * pageSize)</span><br><span class="line">			.setMaxResults(pageSize).list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®idé™åºè·å–å‰3</span><br><span class="line">public List&lt;User&gt; findByOrder(int topSize) &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User order by id"</span>).setMaxResults(topSize).list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŠ•å½±æŸ¥è¯¢</span><br><span class="line">public List <span class="function"><span class="title">findByProjection</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"select name from User"</span>).list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŠ•å½±æŸ¥è¯¢ æŸ¥å¤šåˆ—</span><br><span class="line">public List&lt;Object[]&gt; <span class="function"><span class="title">findByProjection2</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"select name,telephone from User"</span>).list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//æ„é€ å‡½æ•°å°è£…å¯¹è±¡</span><br><span class="line">public List&lt;User&gt; <span class="function"><span class="title">findByProjection3</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"select new User(name,telephone) from User"</span>).list();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SERVICEå±‚"><a href="#SERVICEå±‚" class="headerlink" title="SERVICEå±‚"></a>SERVICEå±‚</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br></pre></td><td class="code"><pre><span class="line">// æŸ¥è¯¢</span><br><span class="line">public List&lt;User&gt; <span class="function"><span class="title">findAllUser</span></span>() &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findAllUser();</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Iteratorè¿”å›</span><br><span class="line">public Iterator&lt;User&gt; <span class="function"><span class="title">findAllUser_Iterator</span></span>() &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	Iterator&lt;User&gt; list = null;</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findAllUser_iterate();</span><br><span class="line">		User u = new User();</span><br><span class="line">		<span class="keyword">while</span> (list.hasNext()) &#123;</span><br><span class="line">			u = list.next();</span><br><span class="line">			System.out.println(u.getName() + <span class="string">"è‰¸"</span>);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®å§“åIteratorè¿”å›</span><br><span class="line">public Iterator&lt;User&gt; <span class="function"><span class="title">findAllUser_IteratorByName</span></span>() &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	Iterator&lt;User&gt; list = null;</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findAllUserByName();</span><br><span class="line">		User u = new User();</span><br><span class="line">		<span class="keyword">while</span> (list.hasNext()) &#123;</span><br><span class="line">			u = list.next();</span><br><span class="line">			System.out.println(u.getName() + <span class="string">"\\"</span> + u.getTelephone());</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è¿”å›å”¯ä¸€ç»“æœ</span><br><span class="line">public Long <span class="function"><span class="title">findAllUser_count</span></span>() &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	Long count = null;</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		count = userDao.countUser();</span><br><span class="line"></span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŸ¥è¯¢+å‚æ•°</span><br><span class="line">public List&lt;User&gt; findAllUser_Name(String name) &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findUserByName(name);</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŸ¥è¯¢+åç§°å‚æ•°</span><br><span class="line">public List&lt;User&gt; findAllUser_Name1(String name) &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findUserByName1(name);</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŸ¥è¯¢+å¤šå‚æ•°</span><br><span class="line">public List&lt;User&gt; findAllbyCondinitions(Object[] param) &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findByCoditions(param);</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŸ¥è¯¢+å¤šå‚æ•°</span><br><span class="line">public List&lt;User&gt; findAllbyCondinitions(User param) &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findByCoditions(param);</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŸ¥è¯¢+å¤šå‚æ•° åŠ¨æ€hql</span><br><span class="line">public List&lt;User&gt; findAllbyCondinitions1(User param) &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		StringBuilder hql = new StringBuilder(<span class="string">"from User where 1=1"</span>);</span><br><span class="line">		<span class="keyword">if</span> (param.getName() != null &amp;&amp; param.getName().length() != 0) &#123;</span><br><span class="line">			hql.append(<span class="string">" and name=:name"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (param.getTelephone() != null &amp;&amp; param.getTelephone().length() != 0) &#123;</span><br><span class="line">			hql.append(<span class="string">" and telephone=:telephone"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		list = userDao.findByCoditions(hql.toString(), param);</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŸ¥è¯¢+å¤šå‚æ•° åŠ¨æ€hql</span><br><span class="line">public List&lt;User&gt; findAllbyCondinitions2(Map&lt;String, Object&gt; param) &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		StringBuilder hql = new StringBuilder(<span class="string">"from User where 1=1"</span>);</span><br><span class="line">		<span class="keyword">if</span> (param.get(<span class="string">"name"</span>) != null &amp; ((String) param.get(<span class="string">"name"</span>)).length() != 0) &#123;</span><br><span class="line">			hql.append(<span class="string">" and name=:name"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (param.get(<span class="string">"telephone"</span>) != null &amp; ((String) param.get(<span class="string">"telephone"</span>)).length() != 0) &#123;</span><br><span class="line">			hql.append(<span class="string">" and telephone=:telephone"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		list = userDao.findByCoditions(hql.toString(), param);</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŸ¥è¯¢åˆ†é¡µ</span><br><span class="line">public List&lt;User&gt; findAllbyCondinitions3(int pageNo, int pageSize) &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findByPage(pageNo, pageSize);</span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®idé™åºæŸ¥è¯¢</span><br><span class="line">public List&lt;User&gt; findAllbyCondinitions4(int topSize) &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findByOrder(topSize);</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŠ•å½±æŸ¥è¯¢</span><br><span class="line">public List&lt;Object&gt; <span class="function"><span class="title">findAllbyCondinitions5</span></span>() &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;Object&gt; list = null;</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findByProjection();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŠ•å½±æŸ¥è¯¢ objectæ•°ç»„</span><br><span class="line">public List&lt;Object[]&gt; <span class="function"><span class="title">findAllbyCondinitions6</span></span>() &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;Object[]&gt; list = null;</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findByProjection2();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æŠ•å½±æŸ¥è¯¢ æ„é€ å‡½æ•°å¯¹è±¡</span><br><span class="line">public List&lt;User&gt; <span class="function"><span class="title">findAllbyCondinitions7</span></span>() &#123;</span><br><span class="line">	Transaction tx = null;</span><br><span class="line">	List&lt;User&gt; list = null;</span><br><span class="line">	try &#123;</span><br><span class="line">		UserDao userDao = new UserDao();</span><br><span class="line">		tx = userDao.currentSession().beginTransaction();</span><br><span class="line">		list = userDao.findByProjection3();</span><br><span class="line">	&#125; catch (HibernateException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">			tx.rollback();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å‚æ•°ç»‘å®šå½¢å¼"><a href="#å‚æ•°ç»‘å®šå½¢å¼" class="headerlink" title="å‚æ•°ç»‘å®šå½¢å¼"></a>å‚æ•°ç»‘å®šå½¢å¼</h3><h4 id="æŒ‰å‚æ•°ä½ç½®ç»‘å®š"><a href="#æŒ‰å‚æ•°ä½ç½®ç»‘å®š" class="headerlink" title="æŒ‰å‚æ•°ä½ç½®ç»‘å®š"></a>æŒ‰å‚æ•°ä½ç½®ç»‘å®š</h4><p>ä¾‹ï¼šQuery query = session.createQueryï¼ˆâ€from Emp where job=? and salary&gt;?â€ï¼‰ï¼›<br>                query.setString(0,job);â€“ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½®ä¸ºé›¶<br>                query.setDouble(1,salary);</p>
<h4 id="æŒ‰å‚æ•°åç§°ç»‘å®š"><a href="#æŒ‰å‚æ•°åç§°ç»‘å®š" class="headerlink" title="æŒ‰å‚æ•°åç§°ç»‘å®š"></a>æŒ‰å‚æ•°åç§°ç»‘å®š</h4><p> ä¾‹ï¼šQuery query = session.createQuery(â€œfrom Emp where job=:empJob and salary&gt;:empSalaryâ€);<br>                query.setString(â€œempJobâ€,empJob);<br>                query.setDouble(â€œempSalaryâ€,empSalary);</p>
<p>//æ³¨æ„è¿™é‡Œçš„æ‰€æœ‰å±æ€§åŒ…æ‹¬è¡¨åéƒ½æ˜¯.hbm.xmlæ–‡ä»¶æ˜ å°„æ¥çš„æŒä¹…åŒ–ç±»å±æ€§</p>
<h4 id="ç»‘å®šå„ç§ç±»å‹çš„å‚æ•°"><a href="#ç»‘å®šå„ç§ç±»å‹çš„å‚æ•°" class="headerlink" title="ç»‘å®šå„ç§ç±»å‹çš„å‚æ•°"></a>ç»‘å®šå„ç§ç±»å‹çš„å‚æ•°</h4><p> setBoolean():ç»‘å®šç±»å‹ä¸ºBooleançš„å‚æ•°<br>            setByte():ç»‘å®šç±»å‹ä¸ºByteçš„å‚æ•°<br>            setDouble():ç»‘å®šç±»å‹ä¸ºDoubleçš„å‚æ•°<br>            setDate():ç»‘å®šç±»å‹ä¸ºDateçš„å‚æ•°<br>            setString():ç»‘å®šç±»å‹ä¸ºStringçš„å‚æ•°<br>            ä»¥ä¸Šæ–¹æ³•éƒ½æœ‰ä¸¤ç§é‡è½½æ–¹å¼ å¦‚ï¼š<br>                setString(int position,String val);â€“æŒ‰ä½ç½®ç»‘å®šå‚æ•°<br>                setString(String name,String val);â€“æŒ‰åç§°ç»‘å®šå‚æ•°</p>
<h4 id="setParameter-æ–¹æ³•ï¼šç»‘å®šä»»æ„ç±»å‹å‚æ•°"><a href="#setParameter-æ–¹æ³•ï¼šç»‘å®šä»»æ„ç±»å‹å‚æ•°" class="headerlink" title="setParameter()æ–¹æ³•ï¼šç»‘å®šä»»æ„ç±»å‹å‚æ•°"></a>setParameter()æ–¹æ³•ï¼šç»‘å®šä»»æ„ç±»å‹å‚æ•°</h4><p>è¯¥æ–¹æ³•ä½¿ç”¨objectç±»å‹ä½œä¸ºHQLå‚æ•°çš„ç±»å‹ï¼Œå½“ä¸ä¾¿æŒ‡å®šå‚æ•°çš„ç±»å‹å¸ˆï¼Œä½¿ç”¨setParameter()æ–¹æ³•</p>
<h4 id="setProperties-ç›´æ¥æ”¾å…¥ä¸€ä¸ªå¯¹è±¡-èµ›é«˜"><a href="#setProperties-ç›´æ¥æ”¾å…¥ä¸€ä¸ªå¯¹è±¡-èµ›é«˜" class="headerlink" title="setProperties(ç›´æ¥æ”¾å…¥ä¸€ä¸ªå¯¹è±¡)èµ›é«˜"></a>setProperties(ç›´æ¥æ”¾å…¥ä¸€ä¸ªå¯¹è±¡)èµ›é«˜</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;User&gt; findByCoditions(User param) &#123;</span><br><span class="line">		Query query = this.currentSession().createQuery(<span class="string">"from User where name=:name and telephone=:telephone"</span>);</span><br><span class="line">		query.setProperties(param); // èµ›é«˜</span><br><span class="line">		<span class="built_in">return</span> query.list();</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    -----</span><br><span class="line">    </span><br><span class="line">    public List&lt;User&gt; findAllbyCondinitions(User param) &#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">		try &#123;</span><br><span class="line">			UserDao userDao = new UserDao();</span><br><span class="line">			tx = userDao.currentSession().beginTransaction();</span><br><span class="line">			list = userDao.findByCoditions(param);</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (HibernateException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> list;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>//å‰ææ˜¯å­—æ®µä¸€è‡´ï¼Œå¹¶ä¸”ä¸ä¸ºç©ºï¼ˆåŠ¨æ€hqlé™¤å¤–ï¼‰</p>
<h4 id="ä½¿ç”¨uniqueResult-æ–¹æ³•è·å–å”¯ä¸€ç»“æœ"><a href="#ä½¿ç”¨uniqueResult-æ–¹æ³•è·å–å”¯ä¸€ç»“æœ" class="headerlink" title="ä½¿ç”¨uniqueResult()æ–¹æ³•è·å–å”¯ä¸€ç»“æœ"></a>ä½¿ç”¨uniqueResult()æ–¹æ³•è·å–å”¯ä¸€ç»“æœ</h4><p>å½“æŸ¥è¯¢ç»“æœä¸å”¯ä¸€æ—¶ï¼Œä¸èƒ½ä½¿ç”¨query.uniqueResult()æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p>
<h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><h4 id="LIST"><a href="#LIST" class="headerlink" title="LIST()"></a>LIST()</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;User&gt; <span class="function"><span class="title">findAllUser</span></span>() &#123;</span><br><span class="line">	<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User"</span>).list();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">--serviceä½¿ç”¨listé›†åˆ</span><br><span class="line"></span><br><span class="line">public List&lt;User&gt; <span class="function"><span class="title">findAllUser</span></span>() &#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">		try &#123;</span><br><span class="line">			UserDao userDao = new UserDao();</span><br><span class="line">			tx = userDao.currentSession().beginTransaction();</span><br><span class="line">			list = userDao.findAllUser();</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (HibernateException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> list;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ITERATE"><a href="#ITERATE" class="headerlink" title="ITERATE()"></a>ITERATE()</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public Iterator&lt;User&gt; <span class="function"><span class="title">findAllUser_iterate</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User"</span>).iterate();</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">--serviceä½¿ç”¨Iterator&lt;&gt;</span><br><span class="line"></span><br><span class="line">	public Iterator&lt;User&gt; <span class="function"><span class="title">findAllUser_Iterator</span></span>() &#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		Iterator&lt;User&gt; list = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			UserDao userDao = new UserDao();</span><br><span class="line">			tx = userDao.currentSession().beginTransaction();</span><br><span class="line">			list = userDao.findAllUser_iterate();</span><br><span class="line">			User u = new User();</span><br><span class="line">			<span class="keyword">while</span> (list.hasNext()) &#123;</span><br><span class="line">				u = list.next();</span><br><span class="line">				System.out.println(u.getName() + <span class="string">"è‰¸"</span>);</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (HibernateException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> list;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>//ITERATE()è¦æ¯”LIST()æ•ˆç‡å¥½ï¼Œä½†æ˜¯ITERATEå¿…é¡»åœ¨serviceå±‚è¾“å‡ºæˆ–èµ‹å€¼ï¼Œå®ƒæ˜¯å…ˆæŸ¥ä¸»é”®idï¼Œå†å»æŸ¥æ‰¾æ•°æ®</p>
<h4 id="åŠ¨æ€æŸ¥è¯¢"><a href="#åŠ¨æ€æŸ¥è¯¢" class="headerlink" title="åŠ¨æ€æŸ¥è¯¢"></a>åŠ¨æ€æŸ¥è¯¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;User&gt; findByCoditions(String hql, User param) &#123;</span><br><span class="line">		Query query = this.currentSession().createQuery(hql);</span><br><span class="line">		query.setProperties(param); // èµ›é«˜</span><br><span class="line">		<span class="built_in">return</span> query.list();</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    ---ä¸»è¦çš„service</span><br><span class="line">    public List&lt;User&gt; findAllbyCondinitions1(User param) &#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">		try &#123;</span><br><span class="line">			UserDao userDao = new UserDao();</span><br><span class="line">			tx = userDao.currentSession().beginTransaction();</span><br><span class="line">			StringBuilder hql = new StringBuilder(<span class="string">"from User where 1=1"</span>);</span><br><span class="line">			<span class="keyword">if</span> (param.getName() != null &amp;&amp; param.getName().length() != 0) &#123;</span><br><span class="line">				hql.append(<span class="string">" and name=:name"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (param.getTelephone() != null &amp;&amp; param.getTelephone().length() != 0) &#123;</span><br><span class="line">				hql.append(<span class="string">" and telephone=:telephone"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			list = userDao.findByCoditions(hql.toString(), param);</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (HibernateException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> list;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åŠ¨æ€æŸ¥è¯¢-mapå‚æ•°"><a href="#åŠ¨æ€æŸ¥è¯¢-mapå‚æ•°" class="headerlink" title="åŠ¨æ€æŸ¥è¯¢ mapå‚æ•°"></a>åŠ¨æ€æŸ¥è¯¢ mapå‚æ•°</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;User&gt; findByCoditions(String hql, Map&lt;String, Object&gt; param) &#123;</span><br><span class="line">		Query query = this.currentSession().createQuery(hql);</span><br><span class="line">		query.setProperties(param); // èµ›é«˜</span><br><span class="line">		<span class="built_in">return</span> query.list();</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    ---service</span><br><span class="line">    </span><br><span class="line">    public List&lt;User&gt; findAllbyCondinitions2(Map&lt;String, Object&gt; param) &#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">		try &#123;</span><br><span class="line">			UserDao userDao = new UserDao();</span><br><span class="line">			tx = userDao.currentSession().beginTransaction();</span><br><span class="line">			StringBuilder hql = new StringBuilder(<span class="string">"from User where 1=1"</span>);</span><br><span class="line">			<span class="keyword">if</span> (param.get(<span class="string">"name"</span>) != null &amp; ((String) param.get(<span class="string">"name"</span>)).length() != 0) &#123;</span><br><span class="line">				hql.append(<span class="string">" and name=:name"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (param.get(<span class="string">"telephone"</span>) != null &amp; ((String) param.get(<span class="string">"telephone"</span>)).length() != 0) &#123;</span><br><span class="line">				hql.append(<span class="string">" and telephone=:telephone"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			list = userDao.findByCoditions(hql.toString(), param);</span><br><span class="line">			tx.commit();</span><br><span class="line">		&#125; catch (HibernateException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> list;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h4><p>ä¸»è¦çš„æ˜¯setFirstResult()ä¸setMaxResults()<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;User&gt; findByPage(int pageNo, int pageSize) &#123;</span><br><span class="line">		<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User order by id"</span>).setFirstResult((pageNo - 1) * pageSize)</span><br><span class="line">				.setMaxResults(pageSize).list();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="è·å–å‰å‡ ä¸ªæ•°æ®"><a href="#è·å–å‰å‡ ä¸ªæ•°æ®" class="headerlink" title="è·å–å‰å‡ ä¸ªæ•°æ®"></a>è·å–å‰å‡ ä¸ªæ•°æ®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;User&gt; findByOrder(int topSize) &#123;</span><br><span class="line">		<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"from User order by id"</span>).setMaxResults(topSize).list();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æŠ•å½±æŸ¥è¯¢-åªè·å–å•ä¸ª"><a href="#æŠ•å½±æŸ¥è¯¢-åªè·å–å•ä¸ª" class="headerlink" title="æŠ•å½±æŸ¥è¯¢(åªè·å–å•ä¸ª)"></a>æŠ•å½±æŸ¥è¯¢(åªè·å–å•ä¸ª)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public List <span class="function"><span class="title">findByProjection</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"select name from User"</span>).list();</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    ---service</span><br><span class="line">    </span><br><span class="line">    public List&lt;Object&gt; <span class="function"><span class="title">findAllbyCondinitions5</span></span>() &#123;</span><br><span class="line">		Transaction tx = null;</span><br><span class="line">		List&lt;Object&gt; list = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			UserDao userDao = new UserDao();</span><br><span class="line">			tx = userDao.currentSession().beginTransaction();</span><br><span class="line">			list = userDao.findByProjection();</span><br><span class="line">		&#125; catch (HibernateException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">if</span> (tx != null) &#123;</span><br><span class="line">				tx.rollback();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">return</span> list;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æŠ•å½±æŸ¥è¯¢-å¤šä¸ªå­—æ®µ"><a href="#æŠ•å½±æŸ¥è¯¢-å¤šä¸ªå­—æ®µ" class="headerlink" title="æŠ•å½±æŸ¥è¯¢(å¤šä¸ªå­—æ®µ)"></a>æŠ•å½±æŸ¥è¯¢(å¤šä¸ªå­—æ®µ)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;Object[]&gt; <span class="function"><span class="title">findByProjection2</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"select name,telephone from User"</span>).list();</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    ---<span class="built_in">test</span></span><br><span class="line">    </span><br><span class="line">    public void <span class="function"><span class="title">findPro2</span></span>() &#123;</span><br><span class="line">		List&lt;Object[]&gt; list = new UserBiz().findAllbyCondinitions6();</span><br><span class="line">		<span class="keyword">for</span> (Object[] object : list) &#123;</span><br><span class="line">			System.out.println(object[0] + <span class="string">"\t"</span> + object[1]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å°†æŸ¥è¯¢ç»“æœé€šè¿‡æ„é€ å‡½æ•°å°è£…ä¸ºå¯¹è±¡"><a href="#å°†æŸ¥è¯¢ç»“æœé€šè¿‡æ„é€ å‡½æ•°å°è£…ä¸ºå¯¹è±¡" class="headerlink" title="å°†æŸ¥è¯¢ç»“æœé€šè¿‡æ„é€ å‡½æ•°å°è£…ä¸ºå¯¹è±¡"></a>å°†æŸ¥è¯¢ç»“æœé€šè¿‡æ„é€ å‡½æ•°å°è£…ä¸ºå¯¹è±¡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;User&gt; <span class="function"><span class="title">findByProjection3</span></span>() &#123;</span><br><span class="line">		<span class="built_in">return</span> this.currentSession().createQuery(<span class="string">"select new User(name,telephone) from User"</span>).list();</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    --æ„é€ æ–¹æ³•</span><br><span class="line">    </span><br><span class="line">    public User(String name,String telephone)&#123;</span><br><span class="line">		this.name=name;</span><br><span class="line">		this.telephone=telephone;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/08/HQLå®ç”¨æŠ€æœ¯/" data-id="cjrabl6mq0005vkdqcf5bxsz6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-é¢è¯•26é—®" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/08/é¢è¯•26é—®/" class="article-date">
  <time datetime="2018-11-08T00:05:15.000Z" itemprop="datePublished">2018-11-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/08/é¢è¯•26é—®/">é¢è¯•26é—®</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="è¯·ä½ è‡ªæˆ‘ä»‹ç»ä¸€ä¸‹è‡ªå·±å¥½å—"><a href="#è¯·ä½ è‡ªæˆ‘ä»‹ç»ä¸€ä¸‹è‡ªå·±å¥½å—" class="headerlink" title="è¯·ä½ è‡ªæˆ‘ä»‹ç»ä¸€ä¸‹è‡ªå·±å¥½å—"></a>è¯·ä½ è‡ªæˆ‘ä»‹ç»ä¸€ä¸‹è‡ªå·±å¥½å—</h4><p>ä¸€èˆ¬äººå›ç­”è¿™ä¸ªé—®é¢˜è¿‡äºå¹³å¸¸ï¼Œåªè¯´å§“åã€å¹´é¾„ã€çˆ±å¥½ã€å·¥ä½œç»éªŒï¼Œè¿™äº›åœ¨ç®€å†ä¸Šéƒ½æœ‰ã€‚å…¶å®ï¼Œä¼ä¸šæœ€å¸Œæœ›çŸ¥é“çš„æ˜¯æ±‚èŒè€…èƒ½å¦èƒœä»»å·¥ä½œï¼ŒåŒ…æ‹¬ï¼šæœ€å¼ºçš„æŠ€èƒ½ã€æœ€æ·±å…¥ç ”ç©¶çš„çŸ¥è¯†é¢†åŸŸã€ä¸ªæ€§ä¸­æœ€ç§¯æçš„éƒ¨åˆ†ã€åšè¿‡çš„æœ€æˆåŠŸçš„äº‹ï¼Œä¸»è¦çš„æˆå°±ç­‰ï¼Œè¿™äº›éƒ½å¯ä»¥å’Œå­¦ä¹ æ— å…³ï¼Œä¹Ÿå¯ä»¥å’Œå­¦ä¹ æœ‰å…³ï¼Œä½†è¦çªå‡ºç§¯æçš„ä¸ªæ€§å’Œåšäº‹çš„èƒ½åŠ›ï¼Œè¯´å¾—åˆæƒ…åˆç†ä¼ä¸šæ‰ä¼šç›¸ä¿¡ã€‚ä¼ä¸šå¾ˆé‡è§†ä¸€ä¸ªäººçš„ç¤¼è²Œï¼Œæ±‚èŒè€…è¦å°Šé‡è€ƒå®˜ï¼Œåœ¨å›ç­”æ¯ä¸ªé—®é¢˜ä¹‹åéƒ½è¯´ä¸€å¥â€œè°¢è°¢â€ï¼Œä¼ä¸šå–œæ¬¢æœ‰ç¤¼è²Œçš„æ±‚èŒè€…ã€‚</p>
<h4 id="ä½ è§‰å¾—ä½ ä¸ªæ€§ä¸Šæœ€å¤§çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ"><a href="#ä½ è§‰å¾—ä½ ä¸ªæ€§ä¸Šæœ€å¤§çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä½ è§‰å¾—ä½ ä¸ªæ€§ä¸Šæœ€å¤§çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ"></a>ä½ è§‰å¾—ä½ ä¸ªæ€§ä¸Šæœ€å¤§çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ</h4><p>æ²‰ç€å†·é™ã€æ¡ç†æ¸…æ¥šã€ç«‹åœºåšå®šã€é¡½å¼ºå‘ä¸Šã€ä¹äºåŠ©äººå’Œå…³å¿ƒä»–äººã€é€‚åº”èƒ½åŠ›å’Œå¹½é»˜æ„Ÿã€ä¹è§‚å’Œå‹çˆ±ã€‚æˆ‘åœ¨xxxç»è¿‡ä¸€åˆ°ä¸¤å¹´çš„é¡¹ç›®å®æˆ˜ï¼ŒåŠ ä¸Šå®ä¹ å·¥ä½œï¼Œä½¿æˆ‘é€‚åˆè¿™ä»½å·¥ä½œ</p>
<h4 id="è¯´è¯´ä½ æœ€å¤§çš„ç¼ºç‚¹"><a href="#è¯´è¯´ä½ æœ€å¤§çš„ç¼ºç‚¹" class="headerlink" title="è¯´è¯´ä½ æœ€å¤§çš„ç¼ºç‚¹"></a>è¯´è¯´ä½ æœ€å¤§çš„ç¼ºç‚¹</h4><p>è¿™ä¸ªé—®é¢˜ä¼ä¸šé—®çš„æ¦‚ç‡å¾ˆå¤§ï¼Œé€šå¸¸ä¸å¸Œæœ›å¬åˆ°ç›´æ¥å›ç­”çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆç­‰ï¼Œå¦‚æœæ±‚èŒè€…è¯´è‡ªå·±å°å¿ƒçœ¼ã€çˆ±å¿Œå¦’äººã€éå¸¸æ‡’ã€è„¾æ°”å¤§ã€å·¥ä½œæ•ˆç‡ä½ï¼Œä¼ä¸šè‚¯å®šä¸ä¼šå½•ç”¨ä½ ã€‚ç»å¯¹ä¸è¦è‡ªä½œèªæ˜åœ°å›ç­”â€œæˆ‘æœ€å¤§çš„ç¼ºç‚¹æ˜¯è¿‡äºè¿½æ±‚å®Œç¾â€ï¼Œæœ‰çš„äººä»¥ä¸ºè¿™æ ·å›ç­”ä¼šæ˜¾å¾—è‡ªå·±æ¯”è¾ƒå‡ºè‰²ï¼Œä½†äº‹å®ä¸Šï¼Œä»–å·²ç»å²Œå²Œå¯å±äº†ã€‚ä¼ä¸šå–œæ¬¢æ±‚èŒè€…ä»è‡ªå·±çš„ä¼˜ç‚¹è¯´èµ·ï¼Œä¸­é—´åŠ ä¸€äº›å°ç¼ºç‚¹ï¼Œæœ€åå†æŠŠé—®é¢˜è½¬å›åˆ°ä¼˜ç‚¹ä¸Šï¼Œçªå‡ºä¼˜ç‚¹çš„éƒ¨åˆ†ï¼Œä¼ä¸šå–œæ¬¢èªæ˜çš„æ±‚èŒè€…</p>
<h4 id="ä½ å¯¹è–ªèµ„çš„è¦æ±‚"><a href="#ä½ å¯¹è–ªèµ„çš„è¦æ±‚" class="headerlink" title="ä½ å¯¹è–ªèµ„çš„è¦æ±‚"></a>ä½ å¯¹è–ªèµ„çš„è¦æ±‚</h4><p>å¦‚æœä½ å¯¹è–ªé…¬çš„è¦æ±‚å¤ªä½ï¼Œé‚£æ˜¾ç„¶è´¬ä½è‡ªå·±çš„èƒ½åŠ›ï¼›å¦‚æœä½ å¯¹è–ªé…¬çš„è¦æ±‚å¤ªé«˜ï¼Œé‚£åˆä¼šæ˜¾å¾—ä½ åˆ†é‡è¿‡é‡ï¼Œå…¬å¸å—ç”¨ä¸èµ·ã€‚ä¸€äº›é›‡ä¸»é€šå¸¸éƒ½äº‹å…ˆå¯¹æ±‚è˜çš„èŒä½å®šä¸‹å¼€æ”¯é¢„ç®—ï¼Œå› è€Œä»–ä»¬ç¬¬ä¸€æ¬¡æå‡ºçš„ä»·é’±å¾€å¾€æ˜¯ä»–ä»¬æ‰€èƒ½ç»™äºˆçš„æœ€é«˜ä»·é’±ï¼Œä»–ä»¬é—®ä½ åªä¸è¿‡æƒ³è¯å®ä¸€ä¸‹è¿™ç¬”é’±æ˜¯å¦è¶³ä»¥å¼•èµ·ä½ å¯¹è¯¥å·¥ä½œçš„å…´è¶£</p>
<p>å›ç­”æ ·æœ¬ä¸€ï¼šæˆ‘å¯¹å·¥èµ„æ²¡æœ‰ç¡¬æ€§è¦æ±‚ï¼Œæˆ‘ç›¸ä¿¡è´µå…¬å¸åœ¨å¤„ç†æˆ‘çš„é—®é¢˜ä¸Šä¼šå‹å–„åˆç†ã€‚æˆ‘æ³¨é‡çš„æ˜¯æ‰¾å¯¹å·¥ä½œæœºä¼šï¼Œæ‰€ä»¥åªè¦æ¡ä»¶å…¬å¹³ï¼Œæˆ‘åˆ™ä¸ä¼šè®¡è¾ƒå¤ªå¤šã€‚</p>
<p>å›ç­”æ ·æœ¬äºŒï¼šæˆ‘å—è¿‡ç³»ç»Ÿçš„è½¯ä»¶ç¼–ç¨‹çš„è®­ç»ƒï¼Œä¸éœ€è¦è¿›è¡Œå¤§é‡çš„åŸ¹è®­ï¼Œè€Œä¸”æˆ‘æœ¬äººä¹Ÿå¯¹ç¼–ç¨‹ç‰¹åˆ«æ„Ÿå…´è¶£ã€‚å› æ­¤ï¼Œæˆ‘å¸Œæœ›å…¬å¸èƒ½æ ¹æ®æˆ‘çš„æƒ…å†µå’Œå¸‚åœºæ ‡å‡†çš„æ°´å¹³ï¼Œç»™æˆ‘åˆç†çš„è–ªæ°´ã€‚</p>
<h4 id="ä½ å¯¹åŠ ç­çš„çœ‹æ³•"><a href="#ä½ å¯¹åŠ ç­çš„çœ‹æ³•" class="headerlink" title="ä½ å¯¹åŠ ç­çš„çœ‹æ³•"></a>ä½ å¯¹åŠ ç­çš„çœ‹æ³•</h4><p>å®é™…ä¸Šå¥½å¤šå…¬å¸é—®è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸è¯æ˜ä¸€å®šè¦åŠ ç­ï¼Œåªæ˜¯æƒ³æµ‹è¯•ä½ æ˜¯å¦æ„¿æ„ä¸ºå…¬å¸å¥‰çŒ®</p>
<p>å›ç­”æ ·æœ¬ï¼šå¦‚æœå·¥ä½œéœ€è¦æˆ‘ä¼šä¹‰ä¸å®¹è¾åŠ ç­ï¼Œæˆ‘ç°åœ¨å•èº«ï¼Œæ²¡æœ‰ä»»ä½•å®¶åº­è´Ÿæ‹…ï¼Œå¯ä»¥å…¨èº«å¿ƒçš„æŠ•å…¥å·¥ä½œã€‚ä½†åŒæ—¶æˆ‘ä¹Ÿä¼šæé«˜å·¥ä½œæ•ˆç‡ï¼Œå‡å°‘ä¸å¿…è¦çš„åŠ ç­</p>
<h4 id="å¦‚æœé€šè¿‡è¿™æ¬¡é¢è¯•æˆ‘ä»¬å½•ç”¨äº†ä½ ï¼Œä½†å·¥ä½œä¸€æ®µæ—¶é—´å´å‘ç°ä½ æ ¹æœ¬ä¸é€‚åˆè¿™ä¸ªèŒä½ï¼Œä½ æ€ä¹ˆåŠ"><a href="#å¦‚æœé€šè¿‡è¿™æ¬¡é¢è¯•æˆ‘ä»¬å½•ç”¨äº†ä½ ï¼Œä½†å·¥ä½œä¸€æ®µæ—¶é—´å´å‘ç°ä½ æ ¹æœ¬ä¸é€‚åˆè¿™ä¸ªèŒä½ï¼Œä½ æ€ä¹ˆåŠ" class="headerlink" title="å¦‚æœé€šè¿‡è¿™æ¬¡é¢è¯•æˆ‘ä»¬å½•ç”¨äº†ä½ ï¼Œä½†å·¥ä½œä¸€æ®µæ—¶é—´å´å‘ç°ä½ æ ¹æœ¬ä¸é€‚åˆè¿™ä¸ªèŒä½ï¼Œä½ æ€ä¹ˆåŠ"></a>å¦‚æœé€šè¿‡è¿™æ¬¡é¢è¯•æˆ‘ä»¬å½•ç”¨äº†ä½ ï¼Œä½†å·¥ä½œä¸€æ®µæ—¶é—´å´å‘ç°ä½ æ ¹æœ¬ä¸é€‚åˆè¿™ä¸ªèŒä½ï¼Œä½ æ€ä¹ˆåŠ</h4><p>ä¸€æ®µæ—¶é—´å‘ç°å·¥ä½œä¸é€‚åˆæˆ‘ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼šâ‘ å¦‚æœä½ ç¡®å®çƒ­çˆ±è¿™ä¸ªèŒä¸šï¼Œé‚£ä½ å°±è¦ä¸æ–­å­¦ä¹ ï¼Œè™šå¿ƒå‘é¢†å¯¼å’ŒåŒäº‹å­¦ä¹ ä¸šåŠ¡çŸ¥è¯†å’Œå¤„äº‹ç»éªŒï¼Œäº†è§£è¿™ä¸ªèŒä¸šçš„ç²¾ç¥å†…æ¶µå’ŒèŒä¸šè¦æ±‚ï¼ŒåŠ›äº‰å‡å°‘å·®è·ï¼›â‘¡ä½ è§‰å¾—è¿™ä¸ªèŒä¸šå¯æœ‰å¯æ— ï¼Œé‚£è¿˜æ˜¯è¶æ—©æ¢ä¸ªèŒä¸šï¼Œå»å‘ç°é€‚åˆä½ çš„ï¼Œä½ çƒ­çˆ±çš„èŒä¸šï¼Œé‚£æ ·ä½ çš„å‘å±•å‰é€”ä¹Ÿä¼šå¤§ç‚¹ï¼Œå¯¹å•ä½å’Œä¸ªäººéƒ½æœ‰å¥½å¤„</p>
<h4 id="è°ˆè°ˆä½ å¯¹è·³æ§½çš„çœ‹æ³•"><a href="#è°ˆè°ˆä½ å¯¹è·³æ§½çš„çœ‹æ³•" class="headerlink" title="è°ˆè°ˆä½ å¯¹è·³æ§½çš„çœ‹æ³•"></a>è°ˆè°ˆä½ å¯¹è·³æ§½çš„çœ‹æ³•</h4><p>â‘ æ­£å¸¸çš„â€œè·³æ§½â€èƒ½ä¿ƒè¿›äººæ‰åˆç†æµåŠ¨ï¼Œåº”è¯¥æ”¯æŒã€‚â‘¡é¢‘ç¹çš„è·³æ§½å¯¹å•ä½å’Œä¸ªäººåŒæ–¹éƒ½ä¸åˆ©ï¼Œåº”è¯¥åå¯¹</p>
<h4 id="å·¥ä½œä¸­éš¾ä»¥å’ŒåŒäº‹ã€ä¸Šå¸ç›¸å¤„ï¼Œä½ è¯¥æ€ä¹ˆåŠ"><a href="#å·¥ä½œä¸­éš¾ä»¥å’ŒåŒäº‹ã€ä¸Šå¸ç›¸å¤„ï¼Œä½ è¯¥æ€ä¹ˆåŠ" class="headerlink" title="å·¥ä½œä¸­éš¾ä»¥å’ŒåŒäº‹ã€ä¸Šå¸ç›¸å¤„ï¼Œä½ è¯¥æ€ä¹ˆåŠ"></a>å·¥ä½œä¸­éš¾ä»¥å’ŒåŒäº‹ã€ä¸Šå¸ç›¸å¤„ï¼Œä½ è¯¥æ€ä¹ˆåŠ</h4><p>â‘ æˆ‘ä¼šæœä»é¢†å¯¼çš„æŒ‡æŒ¥ï¼Œé…åˆåŒäº‹çš„å·¥ä½œã€‚â‘¡æˆ‘ä¼šä»è‡ªèº«æ‰¾åŸå› ï¼Œä»”ç»†åˆ†ææ˜¯ä¸æ˜¯è‡ªå·±å·¥ä½œåšå¾—ä¸å¥½è®©é¢†å¯¼ä¸æ»¡æ„ï¼ŒåŒäº‹çœ‹ä¸æƒ¯ã€‚è¿˜è¦çœ‹çœ‹æ˜¯ä¸æ˜¯ä¸ºäººå¤„ä¸–æ–¹é¢åšå¾—ä¸å¥½ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯æˆ‘ä¼šåŠªåŠ›æ”¹æ­£ã€‚â‘¢å¦‚æœæˆ‘æ‰¾ä¸åˆ°åŸå› ï¼Œæˆ‘ä¼šæ‰¾æœºä¼šè·Ÿä»–ä»¬æ²Ÿé€šï¼Œè¯·ä»–ä»¬æŒ‡å‡ºæˆ‘çš„ä¸è¶³ï¼Œæœ‰é—®é¢˜å°±åŠæ—¶æ”¹æ­£ã€‚â‘£ä½œä¸ºä¼˜ç§€çš„å‘˜å·¥ï¼Œåº”è¯¥æ—¶åˆ»ä»¥å¤§å±€ä¸ºé‡ï¼Œå³ä½¿åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œé¢†å¯¼å’ŒåŒäº‹å¯¹æˆ‘ä¸ç†è§£ï¼Œæˆ‘ä¹Ÿä¼šåšå¥½æœ¬èŒå·¥ä½œï¼Œè™šå¿ƒå‘ä»–ä»¬å­¦ä¹ ï¼Œæˆ‘ç›¸ä¿¡ï¼Œä»–ä»¬ä¼šçœ‹è§æˆ‘åœ¨åŠªåŠ›ï¼Œæ€»æœ‰ä¸€å¤©ä¼šå¯¹æˆ‘å¾®ç¬‘çš„</p>
<h4 id="ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘"><a href="#ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘" class="headerlink" title="ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘"></a>ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘</h4><p>åœ¨å»å…¬å¸é¢è¯•å‰ä¸Šç½‘æŸ¥ä¸€ä¸‹è¯¥å…¬å¸ä¸»è¥ä¸šåŠ¡ã€‚å¦‚å›ç­”ï¼šè´µå…¬å¸æœ‰æ„æ”¹å˜ç­–ç•¥ï¼ŒåŠ å¼ºä¸å›½å¤–å¤§å‚çš„OEMåˆä½œï¼Œè‡ªæœ‰å“ç‰Œçš„éƒ¨åˆ†åˆ™é€è¿‡æµ·å¤–ç»é”€å•†</p>
<h4 id="æœ€èƒ½æ¦‚æ‹¬ä½ è‡ªå·±çš„ä¸‰ä¸ªè¯æ˜¯ä»€ä¹ˆ"><a href="#æœ€èƒ½æ¦‚æ‹¬ä½ è‡ªå·±çš„ä¸‰ä¸ªè¯æ˜¯ä»€ä¹ˆ" class="headerlink" title="æœ€èƒ½æ¦‚æ‹¬ä½ è‡ªå·±çš„ä¸‰ä¸ªè¯æ˜¯ä»€ä¹ˆ"></a>æœ€èƒ½æ¦‚æ‹¬ä½ è‡ªå·±çš„ä¸‰ä¸ªè¯æ˜¯ä»€ä¹ˆ</h4><p>é€‚åº”èƒ½åŠ›å¼ºï¼Œæœ‰è´£ä»»å¿ƒå’Œåšäº‹æœ‰å§‹ç»ˆï¼Œç»“åˆå…·ä½“ä¾‹å­å‘ä¸»è€ƒå®˜è§£é‡Š</p>
<h4 id="ä½ çš„ä¸šä½™çˆ±å¥½æ˜¯ä»€ä¹ˆ"><a href="#ä½ çš„ä¸šä½™çˆ±å¥½æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä½ çš„ä¸šä½™çˆ±å¥½æ˜¯ä»€ä¹ˆ"></a>ä½ çš„ä¸šä½™çˆ±å¥½æ˜¯ä»€ä¹ˆ</h4><p>æ‰¾ä¸€äº›å¯Œäºå›¢ä½“åˆä½œç²¾ç¥çš„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªçœŸå®çš„æ•…äº‹ï¼šæœ‰äººè¢«å¦å†³æ‰ï¼Œå› ä¸ºä»–çš„çˆ±å¥½æ˜¯æ·±æµ·æ½œæ°´ã€‚ä¸»è€ƒå®˜è¯´ï¼šå› ä¸ºè¿™æ˜¯ä¸€é¡¹å•äººæ´»åŠ¨ï¼Œæˆ‘ä¸æ•¢è‚¯å®šä»–èƒ½å¦é€‚åº”å›¢ä½“å·¥ä½œ</p>
<h4 id="ä½œä¸ºè¢«é¢è¯•è€…ç»™æˆ‘æ‰“ä¸€ä¸‹åˆ†"><a href="#ä½œä¸ºè¢«é¢è¯•è€…ç»™æˆ‘æ‰“ä¸€ä¸‹åˆ†" class="headerlink" title="ä½œä¸ºè¢«é¢è¯•è€…ç»™æˆ‘æ‰“ä¸€ä¸‹åˆ†"></a>ä½œä¸ºè¢«é¢è¯•è€…ç»™æˆ‘æ‰“ä¸€ä¸‹åˆ†</h4><p>è¯•ç€åˆ—å‡ºå››ä¸ªä¼˜ç‚¹å’Œä¸€ä¸ªéå¸¸éå¸¸éå¸¸å°çš„ç¼ºç‚¹ï¼ˆå¯ä»¥æŠ±æ€¨ä¸€ä¸‹è®¾æ–½ï¼Œæ²¡æœ‰æ˜ç¡®è´£ä»»äººçš„ç¼ºç‚¹æ˜¯ä¸ä¼šæœ‰äººä»‹æ„çš„ï¼‰</p>
<h4 id="ä½ ä¸ºä»€ä¹ˆè¦ç¦»å¼€åŸæ¥çš„å…¬å¸"><a href="#ä½ ä¸ºä»€ä¹ˆè¦ç¦»å¼€åŸæ¥çš„å…¬å¸" class="headerlink" title="ä½ ä¸ºä»€ä¹ˆè¦ç¦»å¼€åŸæ¥çš„å…¬å¸"></a>ä½ ä¸ºä»€ä¹ˆè¦ç¦»å¼€åŸæ¥çš„å…¬å¸</h4><p>â‘ å›ç­”è¿™ä¸ªé—®é¢˜æ—¶ä¸€å®šè¦å°å¿ƒï¼Œå°±ç®—åœ¨å‰ä¸€ä¸ªå·¥ä½œå—åˆ°å†å¤§çš„å§”å±ˆï¼Œå¯¹å…¬å¸æœ‰å¤šå°‘çš„æ€¨è¨€ï¼Œéƒ½åƒä¸‡ä¸è¦è¡¨ç°å‡ºæ¥ï¼Œå°¤å…¶è¦é¿å…å¯¹å…¬å¸æœ¬èº«ä¸»ç®¡çš„æ‰¹è¯„ï¼Œé¿å…é¢è¯•å®˜çš„è´Ÿé¢æƒ…ç»ªåŠå°è±¡ã€‚å»ºè®®æ­¤æ—¶æœ€å¥½çš„å›ç­”æ–¹å¼æ˜¯å°†é—®é¢˜å½’å’åœ¨è‡ªå·±èº«ä¸Šï¼Œä¾‹å¦‚è§‰å¾—å·¥ä½œæ²¡æœ‰å­¦ä¹ å‘å±•çš„ç©ºé—´ï¼Œè‡ªå·±æƒ³åœ¨é¢è¯•å·¥ä½œçš„ç›¸å…³äº§ä¸šä¸­å¤šåŠ å­¦ä¹ ï¼Œæˆ–æ˜¯å‰ä¸€ä»½å·¥ä½œä¸è‡ªå·±çš„ç”Ÿæ¶¯è§„åˆ’ä¸åˆç­‰ç­‰ï¼Œå›ç­”çš„ç­”æ¡ˆæœ€å¥½æ˜¯ç§¯ææ­£é¢çš„ã€‚â‘¡æˆ‘å¸Œæœ›èƒ½è·å¾—ä¸€ä»½æ›´å¥½çš„å·¥ä½œï¼Œå¦‚æœæœºä¼šæ¥ä¸´ï¼Œæˆ‘ä¼šæŠ“ä½ã€‚æˆ‘è§‰å¾—ç›®å‰çš„å·¥ä½œï¼Œå·²ç»è¾¾åˆ°é¡¶å³°ï¼Œå³æ²¡æœ‰å‡è¿æœºä¼š</p>
<h4 id="ä½ æ¬£èµå“ªç§æ€§æ ¼çš„äºº"><a href="#ä½ æ¬£èµå“ªç§æ€§æ ¼çš„äºº" class="headerlink" title="ä½ æ¬£èµå“ªç§æ€§æ ¼çš„äºº"></a>ä½ æ¬£èµå“ªç§æ€§æ ¼çš„äºº</h4><p>è¯šå®ã€ä¸æ­»æ¿è€Œä¸”å®¹æ˜“ç›¸å¤„çš„äººã€æœ‰â€œå®é™…è¡ŒåŠ¨â€çš„äºº</p>
<h4 id="ä½ é€šå¸¸å¦‚ä½•å¯¹å¾…åˆ«äººçš„æ‰¹è¯„"><a href="#ä½ é€šå¸¸å¦‚ä½•å¯¹å¾…åˆ«äººçš„æ‰¹è¯„" class="headerlink" title="ä½ é€šå¸¸å¦‚ä½•å¯¹å¾…åˆ«äººçš„æ‰¹è¯„"></a>ä½ é€šå¸¸å¦‚ä½•å¯¹å¾…åˆ«äººçš„æ‰¹è¯„</h4><p>â‘ æ²ˆé»˜æ˜¯é‡‘ï¼Œä¸å¿…è¯´ä»€ä¹ˆï¼Œå¦åˆ™æƒ…å†µæ›´ç³Ÿï¼Œä¸è¿‡æˆ‘ä¼šæ¥å—å»ºè®¾æ€§çš„æ‰¹è¯„ã€‚â‘¡æˆ‘ä¼šç­‰å¤§å®¶å†·é™ä¸‹æ¥å†è®¨è®º</p>
<h4 id="æ€æ ·å¯¹å¾…è‡ªå·±çš„å¤±è´¥"><a href="#æ€æ ·å¯¹å¾…è‡ªå·±çš„å¤±è´¥" class="headerlink" title="æ€æ ·å¯¹å¾…è‡ªå·±çš„å¤±è´¥"></a>æ€æ ·å¯¹å¾…è‡ªå·±çš„å¤±è´¥</h4><p>æˆ‘ä»¬å¤§å®¶ç”Ÿæ¥éƒ½ä¸æ˜¯åå…¨åç¾çš„ï¼Œæˆ‘ç›¸ä¿¡æˆ‘æœ‰ç¬¬äºŒä¸ªæœºä¼šæ”¹æ­£æˆ‘çš„é”™è¯¯</p>
<h4 id="ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸æ¥å·¥ä½œ"><a href="#ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸æ¥å·¥ä½œ" class="headerlink" title="ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸æ¥å·¥ä½œ"></a>ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸æ¥å·¥ä½œ</h4><p>å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œä½ è¦æ ¼å¤–å°å¿ƒï¼Œå¦‚æœä½ å·²ç»å¯¹è¯¥å•ä½ä½œäº†ç ”ç©¶ï¼Œä½ å¯ä»¥å›ç­”ä¸€äº›è¯¦ç»†çš„åŸå› ï¼Œåƒâ€œå…¬å¸æœ¬èº«çš„é«˜æŠ€æœ¯å¼€å‘ç¯å¢ƒå¾ˆå¸å¼•æˆ‘ã€‚â€ã€â€œæˆ‘åŒå…¬å¸å‡ºç”Ÿåœ¨åŒæ ·çš„æ—¶ä»£ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿè¿›å…¥ä¸€å®¶ä¸æˆ‘å…±åŒæˆé•¿çš„å…¬å¸ã€‚â€ã€â€œä½ ä»¬å…¬å¸ä¸€ç›´éƒ½ç¨³å®šå‘å±•ï¼Œåœ¨è¿‘å‡ å¹´æ¥åœ¨å¸‚åœºä¸Šå¾ˆæœ‰ç«äº‰åŠ›ã€‚â€ã€â€œæˆ‘è®¤ä¸ºè´µå…¬å¸èƒ½å¤Ÿç»™æˆ‘æä¾›ä¸€ä¸ªä¸ä¼—ä¸åŒçš„å‘å±•é“è·¯ã€‚â€è¿™éƒ½æ˜¾ç¤ºå‡ºä½ å·²ç»åšäº†ä¸€äº›è°ƒæŸ¥ï¼Œä¹Ÿè¯´æ˜ä½ å¯¹è‡ªå·±çš„æœªæ¥æœ‰äº†è¾ƒä¸ºå…·ä½“çš„è¿œæ™¯è§„åˆ’</p>
<h4 id="å¯¹è¿™é¡¹å·¥ä½œï¼Œä½ æœ‰å“ªäº›å¯é¢„è§çš„å›°éš¾"><a href="#å¯¹è¿™é¡¹å·¥ä½œï¼Œä½ æœ‰å“ªäº›å¯é¢„è§çš„å›°éš¾" class="headerlink" title="å¯¹è¿™é¡¹å·¥ä½œï¼Œä½ æœ‰å“ªäº›å¯é¢„è§çš„å›°éš¾"></a>å¯¹è¿™é¡¹å·¥ä½œï¼Œä½ æœ‰å“ªäº›å¯é¢„è§çš„å›°éš¾</h4><p>â‘ ä¸å®œç›´æ¥è¯´å‡ºå…·ä½“çš„å›°éš¾ï¼Œå¦åˆ™å¯èƒ½ä»¤å¯¹æ–¹æ€€ç–‘åº”è˜è€…ä¸è¡Œã€‚â‘¡å¯ä»¥å°è¯•è¿‚å›æˆ˜æœ¯ï¼Œè¯´å‡ºåº”è˜è€…å¯¹å›°éš¾æ‰€æŒæœ‰çš„æ€åº¦â€”â€”å·¥ä½œä¸­å‡ºç°ä¸€äº›å›°éš¾æ˜¯æ­£å¸¸çš„ï¼Œä¹Ÿæ˜¯éš¾å…çš„ï¼Œä½†æ˜¯åªè¦æœ‰åšå¿ä¸æ‹”çš„æ¯…åŠ›ã€è‰¯å¥½çš„åˆä½œç²¾ç¥ä»¥åŠäº‹å‰å‘¨å¯†è€Œå……åˆ†çš„å‡†å¤‡ï¼Œä»»ä½•å›°éš¾éƒ½æ˜¯å¯ä»¥å…‹æœ</p>
<h4 id="å¦‚æœå½•ç”¨äº†ä½ ï¼Œä½ å°†æ€æ ·å¼€å±•å·¥ä½œ"><a href="#å¦‚æœå½•ç”¨äº†ä½ ï¼Œä½ å°†æ€æ ·å¼€å±•å·¥ä½œ" class="headerlink" title="å¦‚æœå½•ç”¨äº†ä½ ï¼Œä½ å°†æ€æ ·å¼€å±•å·¥ä½œ"></a>å¦‚æœå½•ç”¨äº†ä½ ï¼Œä½ å°†æ€æ ·å¼€å±•å·¥ä½œ</h4><p> â‘ å¦‚æœåº”è˜è€…å¯¹äºåº”è˜çš„èŒä½ç¼ºä¹è¶³å¤Ÿçš„äº†è§£ï¼Œæœ€å¥½ä¸è¦ç›´æ¥è¯´å‡ºè‡ªå·±å¼€å±•å·¥ä½œçš„å…·ä½“åŠæ³•ã€‚â‘¡å¯ä»¥å°è¯•é‡‡ç”¨è¿‚å›æˆ˜æœ¯æ¥å›ç­”ï¼Œå¦‚â€œé¦–å…ˆå¬å–é¢†å¯¼çš„æŒ‡ç¤ºå’Œè¦æ±‚ï¼Œç„¶åå°±æœ‰å…³æƒ…å†µè¿›è¡Œäº†è§£å’Œç†Ÿæ‚‰ï¼Œæ¥ä¸‹æ¥åˆ¶å®šä¸€ä»½è¿‘æœŸçš„å·¥ä½œè®¡åˆ’å¹¶æŠ¥é¢†å¯¼æ‰¹å‡†ï¼Œæœ€åæ ¹æ®è®¡åˆ’å¼€å±•å·¥ä½œã€‚â€ã€‚<br>åˆ†æï¼šè¿™ä¸ªé—®é¢˜çš„ä¸»è¦ç›®çš„ä¹Ÿæ˜¯äº†è§£åº”è˜è€…çš„å·¥ä½œèƒ½åŠ›å’Œè®¡åˆ’æ€§ã€æ¡ç†æ€§ï¼Œè€Œä¸”é‡ç‚¹æƒ³è¦çŸ¥é“ç»†èŠ‚ã€‚å¦‚æœå‘æ€è·¯ä¸­æ‰€è®²çš„è¿‚å›æˆ˜æœ¯ï¼Œé¢è¯•å®˜ä¼šè®¤ä¸ºå›é¿é—®é¢˜ï¼Œå¦‚æœå¼•å¯¼äº†å‡ æ¬¡ä»ç„¶æ˜¯å›é¿çš„è¯ï¼Œæ­¤äººç»å¯¹ä¸ä¼šå½•ç”¨äº†</p>
<h4 id="ä½ å¸Œæœ›ä¸ä»€ä¹ˆæ ·çš„ä¸Šçº§å…±äº‹"><a href="#ä½ å¸Œæœ›ä¸ä»€ä¹ˆæ ·çš„ä¸Šçº§å…±äº‹" class="headerlink" title="ä½ å¸Œæœ›ä¸ä»€ä¹ˆæ ·çš„ä¸Šçº§å…±äº‹"></a>ä½ å¸Œæœ›ä¸ä»€ä¹ˆæ ·çš„ä¸Šçº§å…±äº‹</h4><p>â‘ é€šè¿‡åº”è˜è€…å¯¹ä¸Šçº§çš„â€œå¸Œæœ›â€å¯ä»¥åˆ¤æ–­å‡ºåº”è˜è€…å¯¹è‡ªæˆ‘è¦æ±‚çš„æ„è¯†ï¼Œè¿™æ—¢ä¸Šä¸€ä¸ªé™·é˜±ï¼Œåˆæ˜¯ä¸€æ¬¡æœºä¼šã€‚â‘¡æœ€å¥½å›é¿å¯¹ä¸Šçº§å…·ä½“çš„å¸Œæœ›ï¼Œå¤šè°ˆå¯¹è‡ªå·±çš„è¦æ±‚ã€‚â‘¢å¦‚â€œåšä¸ºåˆšæ­¥å…¥ç¤¾ä¼šçš„æ–°äººï¼Œæˆ‘åº”è¯¥å¤šè¦æ±‚è‡ªå·±å°½å¿«ç†Ÿæ‚‰ç¯å¢ƒã€é€‚åº”ç¯å¢ƒï¼Œè€Œä¸åº”è¯¥å¯¹ç¯å¢ƒæå‡ºä»€ä¹ˆè¦æ±‚ï¼Œåªè¦èƒ½å‘æŒ¥æˆ‘çš„ä¸“é•¿å°±å¯ä»¥äº†ã€‚<br>åˆ†æï¼šè¿™ä¸ªé—®é¢˜æ¯”è¾ƒå¥½çš„å›ç­”æ˜¯ï¼Œå¸Œæœ›æˆ‘çš„ä¸Šçº§èƒ½å¤Ÿåœ¨å·¥ä½œä¸­å¯¹æˆ‘å¤šæŒ‡å¯¼ï¼Œå¯¹æˆ‘å·¥ä½œä¸­çš„é”™è¯¯èƒ½å¤Ÿç«‹å³æŒ‡å‡ºã€‚æ€»ä¹‹ï¼Œä»ä¸Šçº§æŒ‡å¯¼è¿™ä¸ªæ–¹é¢è°ˆï¼Œä¸ä¼šæœ‰å¤§çš„çº°æ¼</p>
<h4 id="ä¸ä¸Šçº§æ„è§ä¸ä¸€æ—¶ï¼Œä½ å°†æ€ä¹ˆåŠ"><a href="#ä¸ä¸Šçº§æ„è§ä¸ä¸€æ—¶ï¼Œä½ å°†æ€ä¹ˆåŠ" class="headerlink" title="ä¸ä¸Šçº§æ„è§ä¸ä¸€æ—¶ï¼Œä½ å°†æ€ä¹ˆåŠ"></a>ä¸ä¸Šçº§æ„è§ä¸ä¸€æ—¶ï¼Œä½ å°†æ€ä¹ˆåŠ</h4><p>â‘ ä¸€èˆ¬å¯ä»¥è¿™æ ·å›ç­”â€œæˆ‘ä¼šç»™ä¸Šçº§ä»¥å¿…è¦çš„è§£é‡Šå’Œæé†’ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä¼šæœä»ä¸Šçº§çš„æ„è§ã€‚â€â‘¡å¦‚æœé¢è¯•ä½ çš„æ˜¯æ€»ç»ç†ï¼Œè€Œä½ æ‰€åº”è˜çš„èŒä½å¦æœ‰ä¸€ä½ç»ç†ï¼Œä¸”è¿™ä½ç»ç†å½“æ—¶ä¸åœ¨åœºï¼Œå¯ä»¥è¿™æ ·å›ç­”ï¼šâ€œå¯¹äºéåŸåˆ™æ€§é—®é¢˜ï¼Œæˆ‘ä¼šæœä»ä¸Šçº§çš„æ„è§ï¼Œå¯¹äºæ¶‰åŠå…¬å¸åˆ©ç›Šçš„é‡å¤§é—®é¢˜ï¼Œæˆ‘å¸Œæœ›èƒ½å‘æ›´é«˜å±‚é¢†å¯¼åæ˜ </p>
<h4 id="è°ˆè°ˆå¦‚ä½•é€‚åº”åŠå…¬å®¤å·¥ä½œçš„æ–°ç¯å¢ƒ"><a href="#è°ˆè°ˆå¦‚ä½•é€‚åº”åŠå…¬å®¤å·¥ä½œçš„æ–°ç¯å¢ƒ" class="headerlink" title="è°ˆè°ˆå¦‚ä½•é€‚åº”åŠå…¬å®¤å·¥ä½œçš„æ–°ç¯å¢ƒ"></a>è°ˆè°ˆå¦‚ä½•é€‚åº”åŠå…¬å®¤å·¥ä½œçš„æ–°ç¯å¢ƒ</h4><p>â‘ åŠå…¬å®¤é‡Œæ¯ä¸ªäººæœ‰å„è‡ªçš„å²—ä½ä¸èŒè´£ï¼Œä¸å¾—æ“…ç¦»å²—ä½ã€‚â‘¡æ ¹æ®é¢†å¯¼æŒ‡ç¤ºå’Œå·¥ä½œå®‰æ’ï¼Œåˆ¶å®šå·¥ä½œè®¡åˆ’ï¼Œæå‰é¢„å¤‡ï¼Œå¹¶æŒ‰è®¡åˆ’å®Œæˆã€‚â‘¢å¤šè¯·ç¤ºå¹¶åŠæ—¶æ±‡æŠ¥ï¼Œé‡åˆ°ä¸æ˜ç™½çš„è¦è™šå¿ƒè¯·æ•™ã€‚â‘£æŠ“é—´éš™æ—¶é—´ï¼Œå¤šå­¦ä¹ ï¼ŒåŠªåŠ›æé«˜è‡ªå·±çš„æ”¿æ²»ç´ è´¨å’Œä¸šåŠ¡æ°´å¹³</p>
<h4 id="é™¤äº†æœ¬å…¬å¸å¤–ï¼Œè¿˜åº”è˜äº†å“ªäº›å…¬å¸"><a href="#é™¤äº†æœ¬å…¬å¸å¤–ï¼Œè¿˜åº”è˜äº†å“ªäº›å…¬å¸" class="headerlink" title="é™¤äº†æœ¬å…¬å¸å¤–ï¼Œè¿˜åº”è˜äº†å“ªäº›å…¬å¸"></a>é™¤äº†æœ¬å…¬å¸å¤–ï¼Œè¿˜åº”è˜äº†å“ªäº›å…¬å¸</h4><p>å¾ˆå¥‡æ€ªï¼Œè¿™æ˜¯ç›¸å½“å¤šå…¬å¸ä¼šé—®çš„é—®é¢˜ï¼Œå…¶ç”¨æ„æ˜¯è¦æ¦‚ç•¥çŸ¥é“åº”å¾µè€…çš„æ±‚èŒå¿—å‘ï¼Œæ‰€ä»¥è¿™å¹¶éç»å¯¹æ˜¯è´Ÿé¢ç­”æ¡ˆï¼Œå°±ç®—ä¸ä¾¿è¯´å‡ºå…¬å¸åç§°ï¼Œä¹Ÿåº”å›ç­”â€œé”€å”®åŒç§äº§å“çš„å…¬å¸â€ï¼Œå¦‚æœåº”è˜çš„å…¶ä»–å…¬å¸æ˜¯ä¸åŒä¸šç•Œï¼Œå®¹æ˜“è®©äººäº§ç”Ÿæ— æ³•ä¿¡ä»»çš„æ„Ÿè§‰</p>
<h4 id="ä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®å—"><a href="#ä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®å—" class="headerlink" title="ä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®å—"></a>ä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®å—</h4><p>ä¼ä¸šçš„è¿™ä¸ªé—®é¢˜çœ‹ä¸Šå»å¯æœ‰å¯æ— ï¼Œå…¶å®å¾ˆå…³é”®ï¼Œä¼ä¸šä¸å–œæ¬¢è¯´â€œæ²¡é—®é¢˜â€çš„äººï¼Œå› ä¸ºå…¶å¾ˆæ³¨é‡å‘˜å·¥çš„ä¸ªæ€§å’Œåˆ›æ–°èƒ½åŠ›ã€‚ä¼ä¸šä¸å–œæ¬¢æ±‚èŒè€…é—®ä¸ªäººç¦åˆ©ä¹‹ç±»çš„é—®é¢˜ï¼Œå¦‚æœæœ‰äººè¿™æ ·é—®ï¼šè´µå…¬å¸å¯¹æ–°å…¥å…¬å¸çš„å‘˜å·¥æœ‰æ²¡æœ‰ä»€ä¹ˆåŸ¹è®­é¡¹ç›®ï¼Œæˆ‘å¯ä»¥å‚åŠ å—ï¼Ÿæˆ–è€…è¯´è´µå…¬å¸çš„æ™‹å‡æœºåˆ¶æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿä¼ä¸šå°†å¾ˆæ¬¢è¿ï¼Œå› ä¸ºä½“ç°å‡ºä½ å¯¹å­¦ä¹ çš„çƒ­æƒ…å’Œå¯¹å…¬å¸çš„å¿ è¯šåº¦ä»¥åŠä½ çš„ä¸Šè¿›å¿ƒ</p>
<h4 id="å¦‚æœä½ è¢«å½•ç”¨ï¼Œä½•æ—¶å¯ä»¥åˆ°èŒ"><a href="#å¦‚æœä½ è¢«å½•ç”¨ï¼Œä½•æ—¶å¯ä»¥åˆ°èŒ" class="headerlink" title="å¦‚æœä½ è¢«å½•ç”¨ï¼Œä½•æ—¶å¯ä»¥åˆ°èŒ"></a>å¦‚æœä½ è¢«å½•ç”¨ï¼Œä½•æ—¶å¯ä»¥åˆ°èŒ</h4><p>å¤§å¤šæ•°ä¼ä¸šä¼šå…³å¿ƒå°±èŒæ—¶é—´ï¼Œæœ€å¥½æ˜¯å›ç­”â€œå¦‚æœè¢«å½•ç”¨çš„è¯ï¼Œåˆ°èŒæ—¥å¯æŒ‰å…¬å¸è§„å®šä¸Šç­â€ï¼Œä½†å¦‚æœè¿˜æœªè¾å»ä¸Šä¸€ä¸ªå·¥ä½œã€ä¸Šç­æ—¶é—´åˆå¤ªè¿‘ï¼Œä¼¼ä¹æœ‰äº›å¼ºäººæ‰€éš¾ï¼Œå› ä¸ºäº¤æ¥è‡³å°‘è¦ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œåº”è¿›ä¸€æ­¥è¯´æ˜åŸå› ï¼Œå½•å–å…¬å¸åº”è¯¥ä¼šé€šèçš„</p>
<h4 id="ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬å…¬å¸"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬å…¬å¸" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬å…¬å¸"></a>ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬å…¬å¸</h4><p>æ›¾ç»åœ¨æŠ¥ç« æ‚å¿—çœ‹è¿‡å…³äºè´µå…¬å¸çš„æŠ¥é“ï¼Œä¸è‡ªå·±æ‰€è¿½æ±‚çš„ç†å¿µæœ‰å¿—ä¸€åŒã€‚è€Œè´µå…¬å¸åœ¨ä¸šç•Œçš„æˆç»©ä¹Ÿæ˜¯æœ‰ç›®å…±ç¹çš„ï¼Œè€Œä¸”å¯¹å‘˜å·¥çš„æ•™è‚²è®­ç»ƒã€å‡è¿ç­‰ä¹Ÿéƒ½å¾ˆæœ‰åˆ¶åº¦</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://fankekeke.club/2018/11/08/é¢è¯•26é—®/" data-id="cjrabl6rv004avkdq3vmuw94z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/åˆ†äº«/">åˆ†äº«</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Javaå·¥å…·ä¸ä¸­é—´ä»¶/">Javaå·¥å…·ä¸ä¸­é—´ä»¶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Oracle/">Oracle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSH/">SSH</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSM/">SSM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringData/">SpringData</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/æ¶ˆæ¯é˜Ÿåˆ—/">æ¶ˆæ¯é˜Ÿåˆ—</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/é¢è¯•é¢˜/">é¢è¯•é¢˜</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/">API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/åˆ†äº«/">åˆ†äº«</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¯¼èˆª/">å¯¼èˆª</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å·¥å…·/">å·¥å…·</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/API/" style="font-size: 10px;">API</a> <a href="/tags/åˆ†äº«/" style="font-size: 20px;">åˆ†äº«</a> <a href="/tags/å¯¼èˆª/" style="font-size: 10px;">å¯¼èˆª</a> <a href="/tags/å·¥å…·/" style="font-size: 10px;">å·¥å…·</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/21/Rabbitäº¤æ¢å™¨/">Rabbitäº¤æ¢å™¨</a>
          </li>
        
          <li>
            <a href="/2019/01/16/ç›‘æ§SpringBootå¥åº·çŠ¶å†µ/">ç›‘æ§SpringBootå¥åº·çŠ¶å†µ</a>
          </li>
        
          <li>
            <a href="/2019/01/14/Javaè·å–å½“å‰è®¡ç®—æœºä¿¡æ¯/">Javaè·å–å½“å‰è®¡ç®—æœºä¿¡æ¯</a>
          </li>
        
          <li>
            <a href="/2019/01/14/ä¸‰ç½‘çŸ­ä¿¡éªŒè¯ç API/">ä¸‰ç½‘çŸ­ä¿¡éªŒè¯ç API</a>
          </li>
        
          <li>
            <a href="/2019/01/11/Quartz/">Quartz</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 æ¨Šå¯<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>