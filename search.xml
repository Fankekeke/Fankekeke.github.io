<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Struts2é…ç½®è¯¦è§£]]></title>
    <url>%2F2018%2F11%2F22%2FStruts2%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å›žå¿†ç”¨æˆ·ç™»å½•è¿‡ç¨‹ JSPé¡µé¢è¯·æ±‚ðŸ‘‡æ ¸å¿ƒæŽ§åˆ¶å™¨ðŸ‘‡ActionðŸ‘‡ResultðŸ‘‡JSPé¡µé¢æ˜¾ç¤º æ ¸å¿ƒæŽ§åˆ¶å™¨ åœ¨web.xmlä¸­é…ç½®ï¼Œå¯¹æ¡†æž¶è¿›è¡Œåˆå§‹åŒ–ï¼Œä»¥åŠå¤„ç†æ‰€æœ‰çš„è¯·æ±‚ Action ä¸šåŠ¡æŽ§åˆ¶å™¨ åˆ›å»ºAction,å®žçŽ°ActionæŽ¥å£ï¼Œç»§æ‰¿ActionSupportç±»nameå±žæ€§ä¸èƒ½é‡åï¼Œclasså±žæ€§ä¸ºActionçš„è·¯å¾„ 12345&lt;action name="Login" class="cn.ssh.LoginAction"&gt; &lt;result name="success"&gt;/success.jsp&lt;/result&gt; &lt;result name="fail"&gt;/fail.jsp&lt;/result&gt; &lt;result name="input"&gt;/login.jsp&lt;/result&gt;&lt;/action&gt; Result å®žçŽ°å¯¹ç»“æžœçš„å¤„ç† å®žçŽ°å¯¹ç»“æžœçš„è°ƒç”¨resultå…ƒç´ çš„å€¼æŒ‡å®šå¯¹åº”çš„å®žé™…èµ„æºä½ç½®nameå±žæ€§è¡¨ç¤ºresultçš„é€»è¾‘åï¼ŒActionè¿”å›žçš„å­—ç¬¦ä¸² Struts.xml constantå…ƒç´ ï¼Œå¯ä»¥æ”¹å˜struts2æ¡†æž¶çš„ä¸€äº›è¡Œä¸ºnameè¡¨ç¤ºå¸¸é‡åç§°ï¼Œvalueè¡¨ç¤ºå¸¸é‡å€¼ 12345&lt;!-- å¤„ç†ä¸­æ–‡ä¹±ç  --&gt;&lt;constant name="struts.i18n.encoding" value="UTF-8"&gt;&lt;/constant&gt; &lt;!-- è®¾ç½®actionåŠ¨æ€æ–¹æ³•è°ƒç”¨ --&gt;&lt;constant name="struts.enable.DynamicMethodInvocation" value="true"&gt;&lt;/constant&gt; packageå…ƒç´  â€“ç®€åŒ–ç»´æŠ¤å·¥ä½œï¼Œæé«˜é‡ç”¨æ€§åŒ…å¯ä»¥ç»§æ‰¿å·²å®šä¹‰çš„åŒ…nameå±žæ€§å¿…é¡»ä¸”å”¯ä¸€ï¼Œç”¨äºŽæŒ‡å®šåŒ…çš„åç§°extendså±žæ€§æŒ‡å®šè¦æ‰©å±•çš„åŒ…ï¼Œæ€»æ˜¯æ‰©å±•struts-defaultåŒ…namespaceå±žæ€§å®šä¹‰è¯¥åŒ…actionçš„å‘½åç©ºé—´ï¼Œå¯é€‰ é…ç½®Action Action,å°è£…å·¥ä½œå•å…ƒï¼Œæ•°æ®è½¬ç§»çš„åœºæ‰€ï¼Œè¿”å›žç»“æžœå­—ç¬¦ä¸² methodå±žæ€§ å±žäºŽactionå±žæ€§ï¼Œé»˜è®¤å€¼ï¼šexecuteï¼Œå¯ä»¥æ›´æ”¹å±žæ€§å€¼å®žçŽ°Actionä¸­ä¸åŒæ–¹æ³•çš„è°ƒç”¨ 123456789101112131415161718192021 //ç™»å½• public String login()&#123; //return "success"; return "dologin"; &#125; //æ³¨å†Œ public String register()&#123; //return "success"; return "doregister"; &#125; &lt;action name="login" class="cn.ssh.UserAction" method="login"&gt; &lt;result&gt;/login.jsp&lt;/result&gt; &lt;/action&gt;&lt;action name="register" class="cn.ssh.UserAction" method="register"&gt; &lt;result&gt;/register.jsp&lt;/result&gt; &lt;/action é…ç½®é»˜è®¤action æ²¡æœ‰ActionåŒ¹é…è¯·æ±‚æ—¶ï¼Œé»˜è®¤Actionå°†è¢«æ‰§è¡Œ 1234567891011&lt;!-- æŒ‡å®šé»˜è®¤çš„action ï¼Œ/user/a.actionä¼šè·³è½¬error --&gt;&lt;default-action-ref name="defaultAction"&gt;&lt;/default-action-ref&gt;&lt;!-- å…¨å±€ç»“æžœ --&gt;&lt;global-results&gt; &lt;result name="error"&gt;/error.jsp&lt;/result&gt;&lt;/global-results&gt;&lt;!-- çœç•¥classï¼Œç›´æŽ¥ä½¿ç”¨ActionSupportç±» --&gt;&lt;action name="defaultAction"&gt; &lt;result&gt;/error.jsp&lt;/result&gt;&lt;/action&gt; ç®€åŒ–Actionçš„é…ç½®ï¼Œè°ƒç”¨æ–¹å¼ å¯¹äºŽç”¨ä¸€ä¸ªactionç±»çš„æ¯ä¸€ä¸ªæ–¹æ³•éƒ½é™ªç€äº†ä¸€æ¬¡ï¼Œé€ æˆactionå…ƒç´ æ•°é‡å¤ªå¤š åŠ¨æ€æ–¹æ³•è°ƒç”¨ ä½¿ç”¨ï¼šactionName!methodName.actionç¦ç”¨ï¼šå°†å±žæ€§Struts.enable.DynmicMethodInvocationè®¾ç½®ä¸ºfalse 123456789&lt;!-- è®¾ç½®actionåŠ¨æ€æ–¹æ³•è°ƒç”¨ --&gt;&lt;constant name="struts.enable.DynamicMethodInvocation" value="true"&gt;&lt;/constant&gt;&lt;!-- ç®€åŒ–action åŠ¨æ€æ–¹æ³•è°ƒç”¨ struts2-core-2.3.16.3.jarçš„default.propertiesè®¾ç½® struts.enable.DynamicMethodInvocation = true --&gt; &lt;action name="user" class="cn.ssh.UserAction"&gt; &lt;result name="dologin"&gt;/login.jsp&lt;/result&gt; &lt;result name="doregister"&gt;/register.jsp&lt;/result&gt; &lt;!-- è°ƒç”¨ action name ! actionæ–¹æ³•name.action --&gt; &lt;/action&gt; ä½¿ç”¨é€šé…ç¬¦ ç®€åŒ–ç›¸åŒæ–¹æ³• 123456789101112131415161718192021222324//æ·»åŠ ç”¨æˆ· public String add()&#123; return "input"; &#125; //åˆ é™¤ç”¨æˆ· public String delete()&#123; if(id.length()==0)&#123; this.message="åˆ é™¤å¤±è´¥"; return "input"; &#125;else&#123; this.message="åˆ é™¤æˆåŠŸ"; System.out.println("åˆ é™¤-----"); return "success"; &#125; &#125;&lt;action name="*User" class="cn.ssh.UserAction" method="&#123;1&#125;"&gt; &lt;result name="input"&gt;/page/&#123;1&#125;.jsp&lt;/result&gt; &lt;result name="success" type="redirect"&gt;/page/&#123;1&#125;_success.jsp&lt;/result&gt; &lt;/action&gt; è°ƒç”¨ï¼š[ä½ è¦è¾“å…¥çš„å­—ç¬¦]User.action Resultå¸¸ç”¨ç»“æžœç±»åž‹ dispatcherï¼šé»˜è®¤ç»“æžœç±»åž‹ï¼ŒåŽå°ä½¿ç”¨RequestDispatcherè½¬å‘è¯·æ±‚redirectï¼šåŽå°ä½¿ç”¨sendRedirect()å°†è¯·æ±‚é‡å®šå‘è‡³æŒ‡å®šçš„urlredirectActionï¼šä¸»è¦ç”¨äºŽé‡å®šå‘åˆ°action åŠ¨æ€ç»“æžœ é…ç½®æ—¶ä¸çŸ¥é“æ‰§è¡ŒåŽç»“æžœæ˜¯å“ªä¸€ä¸ªï¼Œè¿è¡Œæ—¶æ‰çŸ¥é“å“ªä¸ªç»“æžœä½œä¸ºè§†å›¾æ˜¾ç¤ºç»™ç”¨æˆ· 1234567891011121314151617181920212223private String nextDispose="";public String doLogin()&#123; System.out.println("åˆ¤æ–­-----"); if(isManager())&#123; nextDispose="manager"; &#125;else&#123; nextDispose="common"; &#125; return "success"; &#125; &lt;action name="doLogins" class="cn.ssh.UserAction" method="doLogin"&gt; &lt;result type="redirectAction"&gt;$&#123;nextDispose&#125;&lt;/result&gt; &lt;result name="error"&gt;.page/error.jsp&lt;/result&gt; &lt;/action&gt; &lt;action name="manager"&gt; &lt;result&gt;/page/manager.jsp&lt;/result&gt; &lt;/action&gt; &lt;action name="common"&gt; &lt;result&gt;/page/common.jsp&lt;/result&gt; &lt;/action&gt; å…¨å±€ç»“æžœ å®žçŽ°åŒä¸€ä¸ªåŒ…ä¸­å¤šä¸ªactionå…±äº«ä¸€ä¸ªç»“æžœå¦‚æžœè¿”å›žerrorï¼Œä½†æ˜¯actionå¹¶æ²¡æœ‰é…ç½®ï¼Œä¼šåŽ»æ‰¾global-results 1234&lt;!-- å…¨å±€ç»“æžœ --&gt; &lt;global-results&gt; &lt;result name="error"&gt;/error.jsp&lt;/result&gt; &lt;/global-results&gt;]]></content>
      <categories>
        <category>SSH</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Struts2å…¥é—¨]]></title>
    <url>%2F2018%2F11%2F21%2FStruts2%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[Struts2çš„å‰èº«æ˜¯Opensymphonyçš„Webwork2ï¼Œå®žé™…ä¸ŠStrutå’ŒWebwork2åˆå¹¶åŽå½¢æˆStruts2 Struts2çš„ä¼˜åŠ¿ 1.å®žçŽ°mvcæ¨¡å¼ï¼Œå±‚æ¬¡ç»“æž„æ¸…æ™°ï¼Œæ˜¯å¼€å‘è€…ä¸“æ³¨ä¸šåŠ¡é€»è¾‘å®žçŽ°2.ä¸°å¯Œçš„æ ‡ç­¾åº“æé«˜å¼€å‘æ•ˆçŽ‡3.åŸºäºŽaopæ€æƒ³çš„æ‹¦æˆªå™¨æœºåˆ¶é™ä½Žä¸šåŠ¡è§çš„è€¦åˆ4.é€šè¿‡é…ç½®æ–‡ä»¶æ—¢å¯æŽŒæ¡ç³»ç»Ÿé—´å„éƒ¨åˆ†çš„å…³ç³»5.æ›´æ–¹ä¾¿çš„å¼‚å¸¸å¤„ç†æœºåˆ¶6.é«˜æ‰©å±•æ€§ é…ç½®Struts2çŽ¯å¢ƒjaråŒ… asm-3.3.jarasm-commons-3.3.jarasm-tree-3.3.jarcommons-fileupload-1.3.1.jarcommons-io-2.2.jarcommons-lang3-3.1.jarcommons-logging-1.1.3.jarfreemarker-2.3.19.jarjavassist-3.11.0.GA.jarlog4j-1.2.17.jarognl-3.0.6.jarstruts2-core-2.3.16.3.jarxwork-core-2.3.16.3.jar web.xmlé…ç½® è¿™ä¸ªæ–‡ä»¶ä¸ºæ¯ä¸ªwebåº”ç”¨ç¨‹åºæä¾›æŽ¥å…¥ç‚¹ã€‚åœ¨éƒ¨ç½²æè¿°ç¬¦ï¼ˆweb.xmlï¼‰ä¸­ï¼ŒStruts2 åº”ç”¨ç¨‹åºçš„æŽ¥å…¥ç‚¹å°†ä¼šå®šä¹‰ä¸ºä¸€ä¸ªè¿‡æ»¤å™¨ã€‚å› æ­¤æˆ‘ä»¬å°†åœ¨web.xmlé‡Œå®šä¹‰ä¸€ä¸ªFilterDispatcherç±»çš„æŽ¥å…¥ç‚¹ 123456789101112131415161718192021222324&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app id="WebApp_9" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"&gt; &lt;display-name&gt;Struts Blank&lt;/display-name&gt; &lt;!-- è¿‡æ»¤å™¨ --&gt; &lt;filter&gt; &lt;filter-name&gt;struts2&lt;/filter-name&gt; &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;struts2&lt;/filter-name&gt; &lt;!-- å°†å…¨éƒ¨è¯·æ±‚å®šä½åˆ°æŒ‡å®šçš„Struts2è¿‡æ»¤å™¨ä¸­--&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; &lt;welcome-file-list&gt; &lt;welcome-file&gt;index.html&lt;/welcome-file&gt; &lt;/welcome-file-list&gt;&lt;/web-app&gt; æˆ‘ä»¬å°†Struts2 è¿‡æ»¤å™¨æ˜ å°„åˆ° / ï¼Œè€Œä¸æ˜¯ /.action ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰çš„urléƒ½ä¼šè¢«Strutsè¿‡æ»¤å™¨è§£æž åœ¨srcç›®å½•ä¸‹åˆ›å»ºStruts2æ ¸å¿ƒæ–‡ä»¶(struts.xml) struts.xmlæ–‡ä»¶åŒ…å«æœ‰éšç€Actionsçš„å¼€å‘ä½ å°†è¦ä¿®æ”¹çš„é…ç½®ä¿¡æ¯ã€‚å®ƒå¯ç”¨äºŽè¦†ç›–åº”ç”¨ç¨‹åºçš„é»˜è®¤è®¾ç½®è¿™ä¸ªæ–‡ä»¶å¯åœ¨WEB-INF/classesæ–‡ä»¶å¤¹ä¸‹åˆ›å»º1234567891011121314151617181920212223&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN" "http://struts.apache.org/dtds/struts-2.3.dtd"&gt;&lt;struts&gt; &lt;!-- å¤„ç†ä¸­æ–‡ä¹±ç  --&gt; &lt;constant name="struts.i18n.encoding" value="UTF-8"&gt;&lt;/constant&gt; &lt;!-- åˆ›å»ºä¸€ä¸ªdefaultåŒ…ï¼Œç»§æ‰¿struts2çš„struts-default namespaceä¸º actionæŒ‡å®šäº†ä¸€ä¸ªè®¿é—®è·¯å¾„çš„å‰ç¼€--&gt; &lt;package name="default" namespace="/" extends="struts-default"&gt; &lt;!-- æŽ¥æ”¶HelloWorldActionçš„è¯·æ±‚,helloWorldå¯¹åº”formè¡¨å•--&gt; &lt;action name="helloWorld" class="cn.ssh.HelloWorldAction"&gt; &lt;result name="success"&gt;/helloWorld.jsp&lt;/result&gt; &lt;/action&gt; &lt;!-- resultçš„nameå¯¹åº”actionè¿”å›žçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥æœ‰å¤šä¸ªresult å¯¹åº”è§†å›¾--&gt; &lt;action name="Login" class="cn.ssh.LoginAction"&gt; &lt;result name="success"&gt;/success.jsp&lt;/result&gt; //æˆåŠŸè¿”å›ž &lt;result name="fail"&gt;/fail.jsp&lt;/result&gt; //å¤±è´¥è¿”å›ž &lt;result name="input"&gt;/login.jsp&lt;/result&gt; //å…¶ä»–è¿”å›ž &lt;/action&gt; &lt;/package&gt; &lt;/struts&gt; å±žæ€§ æè¿° nameï¼ˆå¿…éœ€ï¼‰ ä¸ºpackageçš„å”¯ä¸€æ ‡è¯† extends æŒ‡å®špackageç»§æ‰¿å¦ä¸€packageçš„æ‰€æœ‰é…ç½®ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨struts-defaultä½œä¸ºpackageçš„åŸºç¡€ã€‚ abstract å®šä¹‰packageä¸ºæŠ½è±¡çš„ã€‚å¦‚æžœæ ‡è®°ä¸ºtrueï¼Œåˆ™packageä¸èƒ½è¢«æœ€ç»ˆç”¨æˆ·ä½¿ç”¨ã€‚ namespace Actionsçš„å”¯ä¸€å‘½åç©ºé—´ åˆ›å»ºActionæ–‡ä»¶1234567891011121314package cn.ssh;import com.opensymphony.xwork2.ActionSupport;public class HelloWorld extends ActionSupport &#123; private String message; private String name; @Override public String execute() throws Exception &#123; message = "Hello World,Struts2"; return SUCCESS; &#125; public String getMessage()&#123; return message; &#125;&#125; åˆ›å»º.jspæ–‡ä»¶1234567891011121314151617&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;&lt;!-- å¼•ç”¨Struts2çš„æ ‡ç­¾åº“--&gt;&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;s:property value="message"/&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; è¾“å‡ºæ˜¾ç¤ºè¯­å¥ï¼š&lt;s:property value="message"/&gt; æ¥è‡ªactionçš„å±žæ€§ helloWorldä¸º &lt;package&gt; namespace="/" actionä¸ºhelloWorldï¼Œ.actioné»˜è®¤ï¼Œname=â€œnameâ€æ¥è‡ªactionçš„å±žæ€§ &lt;form action="helloWorld.action" method="post"&gt; è¯·è¾“å…¥æ‚¨çš„åå­—:&lt;input type="text" name="name"&gt; &lt;input type="submit" value="æäº¤"&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; Struts2çš„æ‰§è¡Œæµç¨‹ 1.P helloWorld.actionå‘é€è¯·æ±‚2.web.xmlè¿›è¡Œè¿‡æ»¤3.åœ¨srruts.xml ä¸­æ‰¾åˆ°ç›¸å¯¹çš„action4.æ‰¾åˆ°helloWorldAction5.helloWorldActionè¿”å›žå­—ç¬¦ä¸²åˆ°struts.xml è¿›è¡ŒResultè·³è½¬ Struts2ç™»å½•è¿‡ç¨‹åˆ†æžåˆ›å»º LoginAction12345678....public String execute() throws Exception &#123; if(name.equals("æ†¨å…«é¾Ÿ")&amp;&amp;password.equals("123456"))&#123; return "success"; &#125;else&#123; return "fail"; &#125; &#125; struts.xml è¿›è¡ŒResultè¿”å›žè§†å›¾ 1234567891011&lt;package name="default" namespace="/" extends="struts-default"&gt; &lt;action name="helloWorld" class="cn.ssh.HelloWorldAction"&gt; &lt;result name="success"&gt;/helloWorld.jsp&lt;/result&gt; &lt;/action&gt; &lt;action name="Login" class="cn.ssh.LoginAction"&gt; &lt;result name="success"&gt;/success.jsp&lt;/result&gt; &lt;result name="fail"&gt;/fail.jsp&lt;/result&gt; &lt;result name="input"&gt;/login.jsp&lt;/result&gt; &lt;/action&gt; &lt;/package&gt; JSP login.jsp12345&lt;form action="Login.action" method="post"&gt; è¯·è¾“å…¥æ‚¨çš„åå­—:&lt;input type="text" name="name"&gt; è¯·è¾“å…¥æ‚¨çš„å¯†ç :&lt;input type="password" name="password"&gt; &lt;input type="submit" value="æäº¤"&gt; &lt;/form&gt; Struts2è®¿é—®Servlet APIè§£è€¦æ–¹å¼è®¿é—® æä¾›äº†ä¸‰ä¸ªmapå¯¹è±¡è®¿é—®ï¼Œrequestï¼Œsessionå’Œapplicationåœ¨é€šè¿‡ActionContextç±»èŽ·å–è¿™ä¸‰ä¸ªmapå¯¹è±¡ object get(â€œrequestâ€)map getSession()map getApplication() 1234//è§£è€¦æ–¹å¼èŽ·å–session,key/valueæ–¹å¼å­˜å‚¨Map&lt;String, Object&gt;session=null;session=ActionContext.getContext().getSession();session.put("current_user", name); JSPæ˜¾ç¤ºsessionä¿¡æ¯ 1$&#123;sessionScope.current_user &#125; //èŽ·å–keyå€¼ ä¸ŽServletè€¦åˆçš„è®¿é—® é€šè¿‡ServletActionContextç±»èŽ·å–Servlet APIå¯¹è±¡ 1234//è€¦åˆæ–¹å¼èŽ·å–sessionHttpSession ssion=null;session=ServletActionContext.getRequest().getSession();session.setAttribute("current_user", name); å»ºè®®ä½¿ç”¨ActionContextç±»è§£è€¦å’Œçš„æ–¹å¼ï¼Œå› ä¸ºæ‰€æœ‰ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®éƒ½åŒ…æ‹¬åœ¨ActionContextç±» Strutsæ•°æ®æ ¡éªŒ é€šè¿‡åœ¨æœåŠ¡å™¨ç«¯æ ¡éªŒå¯é˜²æ­¢ç”¨æˆ·ç»•è¿‡å®¢æˆ·ç«¯è„šæœ¬éªŒè¯ ctionSupportç±»,ä¸ä»…å¯¹ActionæŽ¥å£è¿›è¡Œäº†ç®€å•å®žçŽ°ï¼ŒåŒæ—¶å¢žåŠ äº†æ•°æ®æ ¡éªŒï¼Œæœ¬åœ°åŒ–ç­‰æ”¯æŒ 12345678910@Override public void validate() &#123; if(name.length()==0)&#123; this.addFieldError("name", "å§“åä¸èƒ½ä¸ºç©º"); &#125; if(password.length()==0)&#123; this.addFieldError("password", "å¯†ç ä¸èƒ½ä¸ºç©º"); &#125; //å¦‚æžœå‘çŽ°é”™è¯¯,ä¼šè¿”å›žâ€inputâ€œï¼Œå¦åˆ™ç»§ç»­æ‰§è¡ŒåŽç»­æ–¹æ³• &#125; å°†æ ¡éªŒé”™è¯¯ä¿¡æ¯è¾“å‡ºåœ¨é¡µé¢ ä½¿ç”¨Struts2æä¾›çš„æ ‡ç­¾fielderroråªé’ˆå¯¹å­—æ®µactionerroré’ˆå¯¹å½“å‰çš„action12&lt;s:fielderror fieldName="name"/&gt;&lt;s:fielderror fieldName="password"/&gt; Struts2 UIæ ‡ç­¾è¡¨å•æ ‡ç­¾ ä¸Žognlè¡¨è¾¾å¼ç»“åˆä½¿ç”¨å‘æŒ¥æœ€å¤§å®žåŠ› æ ‡ç­¾ è¯´æ˜Ž &lt;s:form&gt;â€¦&lt;/s:form&gt; è¡¨å•æ ‡ç­¾ &lt;s:textfield&gt;â€¦&lt;/s: textfield&gt; è¾“å…¥æ¡† &lt;s:password&gt;â€¦&lt;/s: password &gt; å¯†ç è¾“å…¥æ¡† &lt;s:textarea&gt;â€¦&lt;/s: textarea &gt; æ–‡æœ¬åŸŸè¾“å…¥æ¡† &lt;s:radio&gt;â€¦&lt;/s: radio &gt; å•é€‰æŒ‰é’® &lt;s:checkbox&gt;â€¦&lt;/s: checkbox &gt; å¤šé€‰æ¡† &lt;s:submit/&gt; æäº¤æ ‡ç­¾ &lt;s:reset/&gt; é‡ç½®æ ‡ç­¾ &lt;s:hidden/&gt; éšè—åŸŸæ ‡ç­¾ 12345&lt;s:form action="Login.action" method="post"&gt; &lt;s:textfield name="name" value="" label="ç”¨æˆ·å"&gt;&lt;/s:textfield&gt; &lt;s:password name="password" value="" label="å¯†ç "&gt;&lt;/s:password&gt; &lt;s:submit value="ç™»å½•"&gt;&lt;/s:submit&gt; &lt;/s:form&gt; labelå±žæ€§æ›´ç®€æ´ï¼Œæ–¹ä¾¿ éžè¡¨å•æ ‡ç­¾ æ ‡ç­¾ è¯´æ˜Ž &lt;s:actionerror/s:actionerror&gt; æ˜¾ç¤ºactioné”™è¯¯ &lt;s:actionmessage&gt;â€¦&lt;/s: actionmessage&gt; æ˜¾ç¤ºerroræ¶ˆæ¯ &lt;s:fielderror&gt;â€¦&lt;/s: fielderror &gt; æ˜¾ç¤ºå­—æ®µé”™è¯¯ Struts2é€šç”¨æ ‡ç­¾ æŽ§åˆ¶æ ‡ç­¾ åç§° æ ‡ç­¾ è¯´æ˜Ž æ¡ä»¶æ ‡ç­¾ &lt;s:if&gt;&lt;/s:if&gt; æ ¹æ®è¡¨è¾¾å¼çš„å€¼åˆ¤æ–­æ‰§è¡Œçš„å†…å®¹ æ¡ä»¶æ ‡ç­¾ &lt;s:elseif&gt;&lt;/s:elseif&gt; æ ¹æ®è¡¨è¾¾å¼çš„å€¼åˆ¤æ–­æ‰§è¡Œçš„å†…å®¹ æ¡ä»¶æ ‡ç­¾ &lt;s:else&gt;&lt;/s:else&gt; æ ¹æ®è¡¨è¾¾å¼çš„å€¼åˆ¤æ–­æ‰§è¡Œçš„å†…å®¹ å¾ªçŽ¯æ ‡ç­¾ &lt;s:iterator&gt;&lt;/s:iterator&gt; ç”¨äºŽä¾¿åˆ©é›†åˆ 123456&lt;input type="radio" name="sex" value="1"&gt;ç”·&lt;input type="radio" name="sex" value="0"&gt;å¥³&lt;s:if test="sex==1"&gt;ç”·äºº&lt;/s:if&gt;&lt;s:elseif test="sex==0"&gt;å¥³äºº&lt;/s:elseif&gt;&lt;s:else&gt;!&lt;/s:else&gt; 1234567891011121314151617181920private List&lt;String&gt;users=new ArrayList&lt;String&gt;();users.add("æ¨Šå¯");users.add("æŽé’°æ´‹");users.add("fankekeke");//valueå±žæ€§ï¼šè¿›è¡ŒéåŽ†çš„é›†åˆå¯¹è±¡//statuså±žæ€§ï¼šå½“å‰å¾ªçŽ¯å…ƒç´ çš„IteratorStatuså®žä¾‹//idå±žæ€§ï¼šå½“å‰å¾ªçŽ¯å…ƒç´ çš„idï¼Œå¯ç›´æŽ¥è®¿é—®å…ƒç´ &lt;s:iterator value="users" status="st" id="user"&gt;&lt;s:property value="user"/&gt;&lt;br/&gt;&lt;/s:iterator&gt;&lt;s:iterator value="users" status="st"&gt;&lt;s:property/&gt;&lt;br/&gt;&lt;/s:iterator&gt;&lt;s:iterator value="userList" status="user"&gt;å§“åï¼š&lt;s:property value="user.userName" /&gt;å¹´é¾„ï¼š&lt;s:property value="user.age" /&gt;&lt;/s:iterator&gt; ç”¨çš„æ•°æ®æ ‡ç­¾ æ ‡ç­¾ è¯´æ˜Ž actionæ ‡ç­¾ï¼š äºŽåœ¨è§†å›¾é¡µé¢è·³è½¬åˆ°ä¸€ä¸ªAction beanæ ‡ç­¾ï¼š ç”¨äºŽåˆ›å»ºä¸€ä¸ªJavabeanå®žä¾‹ï¼ŒæŒ‰éœ€ä¿å­˜åˆ°contextä¸­ dateæ ‡ç­¾ï¼š ç”¨äºŽæ ¼å¼åŒ–è¾“å‡ºä¸€ä¸ªæ—¥æœŸ debugæ ‡ç­¾ï¼š ç”¨äºŽè°ƒè¯•æŸ¥çœ‹ognlä¸Šä¸‹æ–‡ä¸­å†…å®¹ includeæ ‡ç­¾ï¼š ç”¨äºŽåŒ…å«å…¶ä»–çš„jspæˆ–è€…servleté¡µé¢èµ„æº paramæ ‡ç­¾ï¼š ä¸»è¦é…åˆåˆ«çš„æ ‡ç­¾ä½œä¸ºå­æ ‡ç­¾ä½¿ç”¨ pushæ ‡ç­¾ï¼š ç”¨äºŽå°†æŸä¸ªå€¼æ”¾å…¥åˆ°rootæ ˆé¡¶ setæ ‡ç­¾ï¼š è®¾ç½®ä¸€ä¸ªæ–°å˜é‡ï¼Œæ”¾å…¥æŒ‡å®šèŒƒå›´ urlæ ‡ç­¾ï¼š ç”¨äºŽç”Ÿæˆä¸€ä¸ªURLåœ°å€]]></content>
      <categories>
        <category>SSH</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[HQLè¿žæŽ¥æŸ¥è¯¢å’Œæ³¨è§£]]></title>
    <url>%2F2018%2F11%2F19%2FHQL%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%B3%A8%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[HQLè¿žæŽ¥æŸ¥è¯¢ç±»åž‹å†…è¿žæŽ¥ INNER JOIN å…³é”®å­—è¡¨ç¤ºå†…è¿žæŽ¥, ä¹Ÿå¯ä»¥çœç•¥ INNER å…³é”®å­— list() æ–¹æ³•çš„é›†åˆä¸­å­˜æ”¾çš„æ¯ä¸ªå…ƒç´ å¯¹åº”æŸ¥è¯¢ç»“æžœçš„ä¸€æ¡è®°å½•, æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯¹è±¡æ•°ç»„ç±»åž‹ï¼Œ å¦‚æžœå¸Œæœ› list() æ–¹æ³•çš„è¿”å›žçš„é›†åˆä»…åŒ…å« Department å¯¹è±¡, å¯ä»¥åœ¨ HQL æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨ SELECT å…³é”®å­— 123456789101112131415161718public void testInnerJoin()&#123; Transaction tx = null; try &#123; Session session=HibernateUtil.currentSession(); tx=session.beginTransaction(); String hql = "from Depts d join d.emps"; //d.empsä¸ºDeptsè¡¨ä¸­çš„empså±žæ€§ List&lt;Object[]&gt; result=session.createQuery(hql).list(); for (Object[] object : result) &#123; System.out.println(((Depts)object[0]).getDeptName()); System.out.println("\t"+((Emps)object[1]).getUserName()); &#125; tx.commit(); &#125; catch (Exception e) &#123; if(tx!=null)&#123; tx.rollback(); &#125; &#125; &#125; å·¦å¤–è¿žæŽ¥123456789101112131415161718public void testLeftJoin()&#123; Transaction tx = null; try &#123; Session session=HibernateUtil.currentSession(); tx=session.beginTransaction(); String hql = "from Depts d left join d.emps"; //from Emps e left join e.depts List&lt;Object[]&gt; result=session.createQuery(hql).list(); for (Object[] object : result) &#123; System.out.println(((Depts)object[0]).getDeptName()); System.out.println("\t"+((Emps)object[1]).getUserName()); &#125; tx.commit(); &#125; catch (Exception e) &#123; if(tx!=null)&#123; tx.rollback(); &#125; &#125; &#125; è¿«åˆ‡è¿žæŽ¥è¿«åˆ‡è¿žæŽ¥å¿…é¡»ç”¨å±žæ€§æŽ¥å— INNER JOIN FETCH å…³é”®å­—è¡¨ç¤ºè¿«åˆ‡å†…è¿žæŽ¥, ä¹Ÿå¯ä»¥çœç•¥ INNER å…³é”®å­—list() æ–¹æ³•è¿”å›žçš„é›†åˆä¸­å­˜æ”¾Departmentå¯¹è±¡çš„å¼•ç”¨, æ¯ä¸ªDepartmentå¯¹è±¡çš„ Employee é›†åˆéƒ½è¢«åˆå§‹åŒ–, å­˜æ”¾æ‰€æœ‰å…³è”çš„ Employee å¯¹è±¡LEFT JOIN FETCH å…³é”®å­—è¡¨ç¤ºè¿«åˆ‡å·¦å¤–è¿žæŽ¥æ£€ç´¢ç­–ç•¥. 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * è¿«åˆ‡å·¦è¿žæŽ¥å’Œè¿«åˆ‡å†…è¿žæŽ¥ï¼Œå°è£…ä¸ºæœ€å·¦è¾¹çš„å±žæ€§ï¼Œå·²ç»å»ºç«‹äº†å…³ç³» * æ™®é€šè¿žæŽ¥å’Œè¿«åˆ‡è¿žæŽ¥çš„åŒºåˆ«ï¼šå…³è”å±žæ€§çš„åˆå§‹åŒ–çŠ¶æ€ */ @Test public void testLeftJoinFetch()&#123; Transaction tx = null; try &#123; Session session=HibernateUtil.currentSession(); tx=session.beginTransaction(); String hql = "from Depts d left join fetch d.emps"; List&lt;Depts&gt; result=session.createQuery(hql).list(); for (Depts depts : result) &#123; System.out.println(depts.getDeptName()); for (Emps emps : depts.getEmps()) &#123; System.out.println("\t"+emps.getUserName()); &#125; &#125; tx.commit(); &#125; catch (Exception e) &#123; if(tx!=null)&#123; tx.rollback(); &#125; &#125; &#125; @Test public void testLeftJoinFetch1()&#123; Transaction tx = null; try &#123; Session session=HibernateUtil.currentSession(); tx=session.beginTransaction(); String hql = "from Emps e left join fetch e.depts"; List&lt;Emps&gt; result=session.createQuery(hql).list(); for (Emps emps : result) &#123; System.out.println(emps.getUserName()); System.out.println("\t"+emps.getDepts().getDeptName()); &#125; tx.commit(); &#125; catch (Exception e) &#123; if(tx!=null)&#123; tx.rollback(); &#125; &#125; &#125; ç­‰å€¼è¿žæŽ¥(å’Œæ™®é€šå†…è¿žæŽ¥å·®ä¸å¤š)12345678910111213141516171819@Test public void testLeftJoinFetch2()&#123; Transaction tx = null; try &#123; Session session=HibernateUtil.currentSession(); tx=session.beginTransaction(); String hql = "from Depts d,Emps e where d=e.depts"; List&lt;Object[]&gt; result=session.createQuery(hql).list(); for (Object[] object : result) &#123; System.out.println(((Depts)object[0]).getDeptName()); System.out.println("\t"+((Emps)object[1]).getUserName()); &#125; tx.commit(); &#125; catch (Exception e) &#123; if(tx!=null)&#123; tx.rollback(); &#125; &#125; &#125; éšå¼å†…è¿žæŽ¥12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849/** * éšå¼å†…è¿žæŽ¥ * from Emp e where e.depts.deptName='' --ç”¨äºŽwhereå­å¥ * select empNo,empName,depts.deptName from Emps --ç”¨äºŽselectå­å¥ * æ ¹æ®å…³è”å…³ç³»è‡ªåŠ¨ä½¿ç”¨ç­‰å€¼è¿žæŽ¥ï¼Œç›´æŽ¥å·²å¯¹è±¡çš„æ–¹å¼è€ƒè™‘æ¡ä»¶ */ @Test public void testLeftJoinFetch3()&#123; Transaction tx = null; try &#123; Session session=HibernateUtil.currentSession(); tx=session.beginTransaction(); String hql = "from Emps e where e.depts.deptNo=1"; List result=session.createQuery(hql).list(); for (Object object : result) &#123; System.out.println(((Emps)object).getUserName()+"\t"+((Emps)object).getDepts().getDeptName()); &#125; tx.commit(); &#125; catch (Exception e) &#123; if(tx!=null)&#123; tx.rollback(); &#125; &#125; &#125; /** * éšå¼å†…é“¾æŽ¥ select */ @Test public void testLeftJoinFetch4()&#123; Transaction tx = null; try &#123; Session session=HibernateUtil.currentSession(); tx=session.beginTransaction(); String hql = "select userId,userName,depts.deptName from Emps"; List&lt;Object[]&gt; result=session.createQuery(hql).list(); for (Object[] object : result) &#123; System.out.println(object[0]+"\t"+object[1]+"\t"+object[2]); &#125; tx.commit(); &#125; catch (Exception e) &#123; if(tx!=null)&#123; tx.rollback(); &#125; &#125; &#125; èšåˆå‡½æ•° count(),avg(),max(),min()1234567891011121314151617181920212223242526/** * hqlèšåˆå‡½æ•° count(),avg(),max(),min() */ @Test public void testLeftJoinFetch5()&#123; Transaction tx = null; try &#123; Session session=HibernateUtil.currentSession(); tx=session.beginTransaction(); /*String hql = "select count(userId),e.deptId from Emps e group by e.deptId";*/ /*String hql = "select max(userId),min(userId) from Emps"; */ /*String hql = "select max(userId),min(userId),e.deptNo from Emps e group by e.deptNo"; */ /*String hql = "select max(e.userId),d.deptName from Emps e,Depts d where e.depts=d group by d.deptName";*/ /*String hql = "select max(e.userId),depts.deptName from Emps e group by depts.deptName";*/ String hql = "select max(e.userId),depts.deptName from Emps e group by depts.deptName having depts.deptName='æš—-éƒ¨'"; List&lt;Object[]&gt; list=session.createQuery(hql).list(); for (Object[] objects : list) &#123; System.out.println(objects[0]+"\t"+objects[1]); &#125; tx.commit(); &#125; catch (Exception e) &#123; if(tx!=null)&#123; tx.rollback(); &#125; &#125; &#125; å­æŸ¥è¯¢ å¦‚æžœå­æŸ¥è¯¢è¿”å›žå¤šæ¡è®°å½•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸‹é¢å…³é”®å­—ï¼š all:è¡¨ç¤ºå­æŸ¥è¯¢è¯­å¥è¿”å›žçš„æ‰€æœ‰è®°å½• any:è¡¨ç¤ºå­æŸ¥è¯¢è¯­å¥è¿”å›žçš„ä»»æ„ä¸€æ¡ç»“æžœ some:ä¸Žâ€anyâ€ç­‰ä»· in:ä¸Žâ€=anyâ€ç­‰ä»· exists:è¡¨ç¤ºå­æŸ¥è¯¢è¯­å¥è‡³å°‘è¿”å›žä¸€æ¡è®°å½• 123456789101112131415161718192021222324252627282930/** * å­æŸ¥è¯¢ */ @Test public void testLeftJoinFetch6()&#123; Transaction tx = null; try &#123; Session session=HibernateUtil.currentSession(); tx=session.beginTransaction(); /*String hql = "select userId,userName,depts.deptName from Emps where userId &lt; (select max(userId) from Emps)"; */ //any ä»»æ„ä¸€æ¡ /*String hql = "select d.deptNo,d.deptName from Depts d where 5 &gt; any(select userId from Emps e where e.depts=d)";*/ //all å…¨éƒ¨ /*String hql = "select d.deptNo,d.deptName from Depts d where 5 &gt; all(select userId from Emps e where e.depts=d)";*/ //in /*String hql = "select d.deptNo,d.deptName from Depts d where 5 in(select userId from Emps e where e.depts=d)";*/ //size() æˆ–.size String hql = "select d.deptNo,d.deptName from Depts d where 5 &gt; all(select userId from Emps e where e.depts=d) and size(d.emps)&gt;0"; List&lt;Object[]&gt; result=session.createQuery(hql).list(); for (Object[] object : result) &#123; System.out.println(object[0]+"\t"+object[1]+"\t"); &#125; tx.commit(); &#125; catch (Exception e) &#123; if(tx!=null)&#123; tx.rollback(); &#125; &#125; &#125; æ“ä½œé›†åˆçš„å‡½æ•°å±žæ€§æˆ–å±žæ€§ size()æˆ–size:èŽ·å–é›†åˆä¸­çš„å…ƒç´ æ•°ç›®ã€‚minIndex()æˆ–minIndex:å¯¹äºŽå»ºç«‹ç´¢å¼•çš„é›†åˆï¼ŒèŽ·å–æœ€å°çš„ç´¢å¼•maxIndex()æˆ–maxIndex:å¯¹äºŽå»ºç«‹ç´¢å¼•çš„é›†åˆï¼ŒèŽ·å–æœ€å¤§çš„ç´¢å¼•ã€‚minElement()æˆ–minElement:å¯¹äºŽåŒ…å«åŸºæœ¬ç±»åž‹çš„å…ƒç´ é›†åˆï¼ŒèŽ·å¾—é›†åˆä¸­å–å€¼æœ€å°çš„å…ƒç´ ã€‚maxElement()æˆ–maxElement: å¯¹äºŽåŒ…å«åŸºæœ¬ç±»åž‹çš„å…ƒç´ é›†åˆï¼ŒèŽ·å¾—é›†åˆä¸­å–å€¼æœ€å¤§çš„å…ƒç´ ã€‚Elements();èŽ·å–é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚1String hql = "select d.deptNo,d.deptName from Depts d where 5 &gt; all(select userId from Emps e where e.depts=d) and size(d.emps)&gt;0"; æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ– hibernateæŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥ï¼ˆ1.ï¼‰ä½¿ç”¨è¿«åˆ‡å·¦å¤–è¿žæŽ¥ï¼Œæˆ–è¿«åˆ‡è¿žæŽ¥æŸ¥è¯¢ç­–ç•¥ï¼Œé…ç½®äºŒçº§ç¼“å­˜å’ŒæŸ¥è¯¢ç­‰æ–¹å¼ï¼Œå‡å°‘selectè¯­å¥æ•°ç›®ï¼Œé™ä½Žè®¿é—®æ•°æ®åº“çš„é¢‘çŽ‡ã€‚ï¼ˆ2.ï¼‰ä½¿ç”¨å»¶è¿ŸåŠ è½½ç­‰æ–¹å¼é¿å…åŠ è½½å¤šä½™ä¸éœ€è¦è®¿é—®çš„æ•°æ®ã€‚ï¼ˆ3.ï¼‰ä½¿ç”¨QueryæŽ¥å£çš„iterateï¼ˆï¼‰æ–¹æ³•å‡å°‘selectè¯­å¥çš„å­—æ®µï¼Œé™ä½Žè®¿é—®æ•°æ®åº“çš„æ•°æ®é‡ï¼Œå¹¶ç»“åˆç¼“å­˜ç­‰æœºåˆ¶å‡å°‘æ•°æ®åº“çš„è®¿é—®æ¬¡æ•°ï¼Œæé«˜æŸ¥è¯¢æ•ˆçŽ‡ã€‚ HQLä¼˜åŒ–ï¼ˆ1.ï¼‰é¿å…ä½¿ç”¨oræ“ä½œçš„ä¸å½“ã€‚ï¼ˆ2.ï¼‰é¿å…ä½¿ç”¨notã€‚ï¼ˆ3.ï¼‰é¿å…ä½¿ç”¨likeçš„ç‰¹æ®Šå½¢å¼ã€‚ï¼ˆ4.ï¼‰é¿å…ä½¿ç”¨havingå­å¥ã€‚ï¼ˆ5.ï¼‰é¿å…ä½¿ç”¨distinctã€‚ï¼ˆ6.ï¼‰ç´¢å¼•åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¤±æ•ˆï¼Œä½¿ç”¨æ—¶æ³¨æ„ã€‚ å¯¹å­—æ®µä½¿ç”¨å‡½æ•°ï¼Œè¯¥å­—æ®µçš„ç´¢å¼•å°†ä¸èµ·ä½œç”¨ã€‚å¦‚ï¼šsubstringï¼ˆaa,1,2ï¼‰=â€™xxxâ€™ å¯¹å­—æ®µè¿›è¡Œè®¡ç®—ï¼Œè¯¥å­—æ®µçš„ç´¢å¼•å°†ä¸èµ·ä½œç”¨ã€‚å¦‚ï¼šprice+10ã€‚ hibernateæ³¨è§£å•å¯¹è±¡æ“ä½œ 1234567891011121314151617181920212223242526272829303132@Entity ---&gt; å¦‚æžœæˆ‘ä»¬å½“å‰è¿™ä¸ªbeanè¦è®¾ç½®æˆå®žä½“å¯¹è±¡ï¼Œå°±éœ€è¦åŠ ä¸ŠEntityè¿™ä¸ªæ³¨è§£@Table(name="t_user") ----&gt; è®¾ç½®æ•°æ®åº“çš„è¡¨åpublic class User&#123; private int id; private String username; private String password; private Date born; private Date registerDate; @Column(name="register_date") ---&gt; Columnä¸­çš„nameå±žæ€§å¯¹åº”äº†æ•°æ®åº“çš„è¯¥å­—æ®µåå­—ï¼Œé‡Œé¢è¿˜æœ‰å…¶ä»–å±žæ€§ï¼Œä¾‹å¦‚lengthï¼Œnullableç­‰ç­‰ public Date getRegisterDate() &#123; return registerDate; &#125; public void setRegisterDate(Date registerDate) &#123; this.registerDate = registerDate; &#125; @Id ---&gt; å®šä¹‰ä¸ºæ•°æ®åº“çš„ä¸»é”®ID (å»ºè®®ä¸è¦åœ¨å±žæ€§ä¸Šå¼•å…¥æ³¨è§£ï¼Œå› ä¸ºå±žæ€§æ˜¯privateçš„ï¼Œå¦‚æžœå¼•å…¥æ³¨è§£ä¼šç ´åå…¶å°è£…ç‰¹æ€§ï¼Œæ‰€ä»¥å»ºè®®åœ¨getteræ–¹æ³•ä¸ŠåŠ å…¥æ³¨è§£) @GeneratedValue ----&gt; IDçš„ç”Ÿæˆç­–ç•¥ä¸ºè‡ªåŠ¨ç”Ÿæˆ public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; ............&#125; ä¸€å¯¹å¤šçš„æ˜ å°„(one-to-many) ClassRoomç±»ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253@Entity@Table(name="t_classroom")public class ClassRoom&#123; private int id; private String className; private Set&lt;Student&gt; students; public ClassRoom() &#123; students = new HashSet&lt;Student&gt;(); &#125; public void addStudent(Student student) &#123; students.add(student); &#125; @Id @GeneratedValue public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getClassName() &#123; return className; &#125; public void setClassName(String className) &#123; this.className = className; &#125; @OneToMany(mappedBy="room") ---&gt; OneToManyæŒ‡å®šäº†ä¸€å¯¹å¤šçš„å…³ç³»ï¼ŒmappedBy="room"æŒ‡å®šäº†ç”±å¤šçš„é‚£ä¸€æ–¹æ¥ç»´æŠ¤å…³è”å…³ç³»ï¼ŒmappedByæŒ‡çš„æ˜¯å¤šçš„ä¸€æ–¹å¯¹1çš„è¿™ä¸€æ–¹çš„ä¾èµ–çš„å±žæ€§ï¼Œ(æ³¨æ„ï¼šå¦‚æžœæ²¡æœ‰æŒ‡å®šç”±è°æ¥ç»´æŠ¤å…³è”å…³ç³»ï¼Œåˆ™ç³»ç»Ÿä¼šç»™æˆ‘ä»¬åˆ›å»ºä¸€å¼ ä¸­é—´è¡¨) @LazyCollection(LazyCollectionOption.EXTRA) ---&gt; LazyCollectionå±žæ€§è®¾ç½®æˆEXTRAæŒ‡å®šäº†å½“å¦‚æžœæŸ¥è¯¢æ•°æ®çš„ä¸ªæ•°æ—¶å€™ï¼Œåªä¼šå‘å‡ºä¸€æ¡ count(*)çš„è¯­å¥ï¼Œæé«˜æ€§èƒ½ public Set&lt;Student&gt; getStudents() &#123; return students; &#125; public void setStudents(Set&lt;Student&gt; students) &#123; this.students = students; &#125; &#125; Studentç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@Entity@Table(name="t_student")public class Student&#123; private int id; private String name; private int age; private ClassRoom room; @ManyToOne(fetch=FetchType.LAZY) ---&gt; ManyToOneæŒ‡å®šäº†å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œfetch=FetchType.LAZYå±žæ€§è¡¨ç¤ºåœ¨å¤šçš„é‚£ä¸€æ–¹é€šè¿‡å»¶è¿ŸåŠ è½½çš„æ–¹å¼åŠ è½½å¯¹è±¡(é»˜è®¤ä¸æ˜¯å»¶è¿ŸåŠ è½½) @JoinColumn(name="rid") ---&gt; é€šè¿‡ JoinColumn çš„nameå±žæ€§æŒ‡å®šäº†å¤–é”®çš„åç§° rid (æ³¨æ„ï¼šå¦‚æžœæˆ‘ä»¬ä¸é€šè¿‡JoinColumæ¥æŒ‡å®šå¤–é”®çš„åç§°ï¼Œç³»ç»Ÿä¼šç»™æˆ‘ä»¬å£°æ˜Žä¸€ä¸ªåç§°) public ClassRoom getRoom() &#123; return room; &#125; public void setRoom(ClassRoom room) &#123; this.room = room; &#125; @Id @GeneratedValue public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; &#125; ä¸€å¯¹ä¸€æ˜ å°„(One-to-One)ä¸€å¯¹ä¸€å…³ç³»è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªPersonå¯¹è±¡ä»¥åŠä¸€ä¸ªIDCardå¯¹è±¡ Personç±» 12345678910111213141516171819202122232425262728293031323334353637@Entity@Table(name="t_person")public class Person&#123; private int id; private String name; private IDCard card; @OneToOne(mappedBy="person") ---&gt; æŒ‡å®šäº†OneToOneçš„å…³è”å…³ç³»ï¼ŒmappedByåŒæ ·æŒ‡å®šç”±å¯¹æ–¹æ¥è¿›è¡Œç»´æŠ¤å…³è”å…³ç³» public IDCard getCard() &#123; return card; &#125; public void setCard(IDCard card) &#123; this.card = card; &#125; @Id @GeneratedValue public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; &#125; IDCardç±» 12345678910111213141516171819202122232425262728293031323334353637@Entity@Table(name="t_id_card")public class IDCard&#123; private int id; private String no; private Person person; @Id @GeneratedValue public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getNo() &#123; return no; &#125; public void setNo(String no) &#123; this.no = no; &#125; @OneToOne ---&gt; OnetoOneæŒ‡å®šäº†ä¸€å¯¹ä¸€çš„å…³è”å…³ç³»ï¼Œä¸€å¯¹ä¸€ä¸­éšä¾¿æŒ‡å®šä¸€æ–¹æ¥ç»´æŠ¤æ˜ å°„å…³ç³»ï¼Œè¿™é‡Œé€‰æ‹©IDCardæ¥è¿›è¡Œç»´æŠ¤ @JoinColumn(name="pid") ---&gt; æŒ‡å®šå¤–é”®çš„åå­— pid public Person getPerson() &#123; return person; &#125; public void setPerson(Person person) &#123; this.person = person; &#125;&#125; åœ¨åˆ¤æ–­åˆ°åº•æ˜¯è°ç»´æŠ¤å…³è”å…³ç³»æ—¶ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹å¤–é”®ï¼Œå“ªä¸ªå®žä½“ç±»å®šä¹‰äº†å¤–é”®ï¼Œå“ªä¸ªç±»å°±è´Ÿè´£ç»´æŠ¤å…³è”å…³ç³»ã€‚ Many-to-Manyæ˜ å°„(å¤šå¯¹å¤šæ˜ å°„å…³ç³»)é€šè¿‡ä¸­é—´è¡¨ç”±ä»»ä¸€ä¸€ä¸ªå¤šçš„ä¸€æ–¹æ¥ç»´æŠ¤å…³è”å…³ç³» Teacher 12345678910111213141516171819202122232425262728293031323334353637383940414243444546@Entity@Table(name="t_teacher")public class Teacher&#123; private int id; private String name; private Set&lt;Course&gt; courses; public Teacher() &#123; courses = new HashSet&lt;Course&gt;(); &#125; public void addCourse(Course course) &#123; courses.add(course); &#125; @Id @GeneratedValue public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; @ManyToMany(mappedBy="teachers") ---&gt; è¡¨ç¤ºç”±Courseé‚£ä¸€æ–¹æ¥è¿›è¡Œç»´æŠ¤ public Set&lt;Course&gt; getCourses() &#123; return courses; &#125; public void setCourses(Set&lt;Course&gt; courses) &#123; this.courses = courses; &#125; &#125; Courseç±» 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152@Entity@Table(name="t_course")public class Course&#123; private int id; private String name; private Set&lt;Teacher&gt; teachers; public Course() &#123; teachers = new HashSet&lt;Teacher&gt;(); &#125; public void addTeacher(Teacher teacher) &#123; teachers.add(teacher); &#125; @ManyToMany ---&gt; ManyToManyæŒ‡å®šå¤šå¯¹å¤šçš„å…³è”å…³ç³» @JoinTable(name="t_teacher_course", joinColumns=&#123; @JoinColumn(name="cid")&#125;, inverseJoinColumns=&#123; @JoinColumn(name = "tid") &#125;) ---&gt; å› ä¸ºå¤šå¯¹å¤šä¹‹é—´ä¼šé€šè¿‡ä¸€å¼ ä¸­é—´è¡¨æ¥ç»´æŠ¤ä¸¤è¡¨ç›´æŽ¥çš„å…³ç³»ï¼Œæ‰€ä»¥é€šè¿‡ JoinTable è¿™ä¸ªæ³¨è§£æ¥å£°æ˜Žï¼Œnameå°±æ˜¯æŒ‡å®šäº†ä¸­é—´è¡¨çš„åå­—ï¼ŒJoinColumnsæ˜¯ä¸€ä¸ª @JoinColumnç±»åž‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºçš„æ˜¯æˆ‘è¿™æ–¹åœ¨å¯¹æ–¹ä¸­çš„å¤–é”®åç§°ï¼Œæˆ‘æ–¹æ˜¯Courseï¼Œæ‰€ä»¥åœ¨å¯¹æ–¹å¤–é”®çš„åç§°å°±æ˜¯ ridï¼ŒinverseJoinColumnsä¹Ÿæ˜¯ä¸€ä¸ª @JoinColumnç±»åž‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºçš„æ˜¯å¯¹æ–¹åœ¨æˆ‘è¿™æ”¾ä¸­çš„å¤–é”®åç§°ï¼Œå¯¹æ–¹æ˜¯Teacherï¼Œæ‰€ä»¥åœ¨æˆ‘æ–¹å¤–é”®çš„åç§°å°±æ˜¯ tid public Set&lt;Teacher&gt; getTeachers() &#123; return teachers; &#125; public void setTeachers(Set&lt;Teacher&gt; teachers) &#123; this.teachers = teachers; &#125; @Id @GeneratedValue public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125;&#125; é€šè¿‡hibernateæ¥è¿›è¡Œæ’å…¥æ“ä½œçš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯ä¸€å¯¹å¤šã€ä¸€å¯¹ä¸€è¿˜æ˜¯å¤šå¯¹å¤šï¼Œéƒ½åªéœ€è¦è®°ä½ä¸€ç‚¹ï¼Œåœ¨å“ªä¸ªå®žä½“ç±»å£°æ˜Žäº†å¤–é”®ï¼Œå°±ç”±å“ªä¸ªç±»æ¥ç»´æŠ¤å…³ç³»ï¼Œåœ¨ä¿å­˜æ•°æ®æ—¶ï¼Œæ€»æ˜¯å…ˆä¿å­˜çš„æ˜¯æ²¡æœ‰ç»´æŠ¤å…³è”å…³ç³»çš„é‚£ä¸€æ–¹çš„æ•°æ®ï¼ŒåŽä¿å­˜ç»´æŠ¤äº†å…³è”å…³ç³»çš„é‚£ä¸€æ–¹çš„æ•°æ®]]></content>
      <categories>
        <category>SSH</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Oracleä¸»é”®è‡ªå¢žå®žçŽ°]]></title>
    <url>%2F2018%2F11%2F16%2FOracle%E4%B8%BB%E9%94%AE%E8%87%AA%E5%A2%9E%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[Oracleæ²¡æœ‰è¿™ä¸ªâ€auto_incrementâ€å±žæ€§ï¼Œæ‰€ä»¥å®ƒæ²¡æ³•åƒMySQLèˆ¬åœ¨è¡¨å†…å®šä¹‰è‡ªå¢žä¸»é”®ã€‚ä½†æ˜¯ï¼ŒOracleé‡Œçš„åºåˆ—ï¼ˆSEQUENCEï¼‰ï¼Œå¯é—´æŽ¥å®žçŽ°è‡ªå¢žä¸»é”®çš„ä½œç”¨ã€‚ åºåˆ—ï¼ˆSequenceï¼‰ï¼Œåˆå«åºåˆ—ç”Ÿæˆå™¨ï¼Œç”¨äºŽæä¾›ä¸€ç³»åˆ—çš„æ•°å­—ï¼Œå¼€å‘äººå‘˜ä½¿ç”¨åºåˆ—ç”Ÿæˆå”¯ä¸€é”®ã€‚æ¯æ¬¡è®¿é—®åºåˆ—ï¼Œåºåˆ—æŒ‰ç…§ä¸€å®šçš„è§„å¾‹å¢žåŠ æˆ–è€…å‡å°‘ã€‚åºåˆ—çš„å®šä¹‰å­˜å‚¨åœ¨SYSTEMè¡¨ç©ºé—´ä¸­ï¼Œåºåˆ—ä¸åƒè¡¨ï¼Œå®ƒä¸ä¼šå ç”¨ç£ç›˜ç©ºé—´ã€‚åºåˆ—ç‹¬ç«‹äºŽäº‹åŠ¡ï¼Œæ¯æ¬¡äº‹åŠ¡çš„æäº¤å’Œå›žæ»šéƒ½ä¸ä¼šå½±å“åºåˆ—ã€‚ åˆ›å»ºç”¨æˆ·æ•°æ®è¡¨1234567-- åˆ›å»ºç”¨æˆ·æ•°æ®è¡¨DROP TABLE DECTUSER;CREATE TABLE DECTUSER( USERID INTEGER PRIMARY KEY, NAME VARCHAR2(20), SEX VARCHAR2(2)); åˆ›å»ºè‡ªåŠ¨å¢žé•¿åºåˆ—12345-- åˆ›å»ºè‡ªåŠ¨å¢žé•¿åºåˆ—DROP SEQUENCE DECTUSER_tb_seq;CREATE SEQUENCE DECTUSER_tb_seq MINVALUE 1 MAXVALUE 99999999INCREMENT BY 1START WITH 1; åˆ›å»ºè§¦å‘å™¨1234567-- åˆ›å»ºè§¦å‘å™¨CREATE OR REPLACE TRIGGER DECTUSER_tb_triBEFORE INSERT ON DECTUSER FOR EACH ROWBEGINSELECT DECTUSER_tb_seq.nextval INTO :NEW.USERID FROM DUAL;END; å°è¯•æ·»åŠ æ•°æ®12345-- å°è¯•æ·»åŠ æ•°æ®INSERT INTO DECTUSER(NAME,SEX) VALUES('æ†¨å…«é¾Ÿ','ç”·')INSERT INTO DECTUSER(NAME,SEX) VALUES('å°ç«é¾™','ç”·')INSERT INTO DECTUSER(NAME,SEX) VALUES('æ°å°¼é¾Ÿ','å¥³')commit ç»“æžœ12345 USERID NAME SEX---------- ---------------------------------------- ---------- 1 æ†¨å…«é¾Ÿ ç”· 2 å°ç«é¾™ ç”· 3 æ°å°¼é¾Ÿ å¥³]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[é•œèŠ±æ°´æœˆ]]></title>
    <url>%2F2018%2F11%2F14%2F%E9%95%9C%E8%8A%B1%E6%B0%B4%E6%9C%88%2F</url>
    <content type="text"><![CDATA[åªè¦æ˜¯äººéƒ½æ˜¯ä¾é è‡ªå·±çš„çŸ¥è¯†ä¸Žè®¤çŸ¥å¹¶ä¸”è¢«ä¹‹æŸç¼šç”Ÿæ´»ç€çš„ï¼Œé‚£å°±å«åšçŽ°å®žã€‚ä½†æ˜¯çŸ¥è¯†ä¸Žè®¤çŸ¥æ˜¯æ¨¡ç³Šä¸æ¸…çš„ä¸œè¥¿ï¼ŒçŽ°å®žä¹Ÿè®¸åªæ˜¯é•œä¸­èŠ±æ°´ä¸­æœˆï¼Œäººéƒ½æ˜¯æ´»åœ¨è‡ªå·±çš„æ‰§å¿µä¸­çš„ã€‚]]></content>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSMåŸºç¡€æ¡ˆä¾‹æ–‡ä»¶]]></title>
    <url>%2F2018%2F11%2F11%2FSSM%E5%9F%BA%E7%A1%80%E6%A1%88%E4%BE%8B%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[BaseController.java(è¿™ä¸ªåŸºç±»ç”¨æ¥è®¾ç½®ç»§æ‰¿ä»–çš„å­ç±»çš„æŒä¹…åŒ–ç±»çš„dateå±žæ€§)12345@InitBinder public void initBinder(WebDataBinder dataBinder)&#123; System.out.println("initBinder======================="); dataBinder.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat("yyyy-MM-dd"), true)); &#125; daoå±‚æŽ¥å£ä¸ŽxmlæŽ¥å£1234567891011121314151617181920212223242526272829303132333435// å¢žåŠ public int insertUser(User user);// ä¿®æ”¹public int updateUser(User user);// åˆ é™¤public int deleteUser(@Param("uid") int uid);//åˆ é™¤åœ°å€public int deleteAddress(@Param("uid") int uid);// æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢åœ°å€ä¿¡æ¯public List&lt;User&gt; selectUser(@Param("uid") int uid);// æ ¹æ®åœ°å€idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯public List&lt;Address&gt; selectAddress(@Param("addressid") int addressid);// æ ¹æ®å¤šä¸ªç”¨æˆ·æŸ¥è¯¢public List&lt;User&gt; selectUsers(UserVo vo);//åŠ¨æ€trimæ¨¡ç³ŠæŸ¥è¯¢public List&lt;User&gt;seleteUserByUser(User user);//ç™»å½•public User login(User user);//æ¨¡ç³ŠæŸ¥è¯¢public List&lt;User&gt;getUserList(User user);//æ ¹æ®idèŽ·å–ç”¨æˆ·ä¿¡æ¯public User getUserById(@Param("uid") int uid);//èŽ·å–æ‰€æœ‰ç”¨æˆ·public List&lt;User&gt;getUsers(); xml(mapperæ˜ å°„)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE mapperPUBLIC "-//mybatis.org//DTD Mapper 3.0//EN""http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;mapper namespace="cn.dao.UserMapper"&gt; &lt;!-- å¢žåŠ  --&gt; &lt;insert id="insertUser" parameterType="User"&gt; INSERT INTO user_info(user_name,user_pwd,user_birthday)VALUES(#&#123;userName&#125;,#&#123;userPwd&#125;,#&#123;userBirthday&#125;) &lt;/insert&gt; &lt;!-- åŠ¨æ€trimä¿®æ”¹ --&gt; &lt;update id="updateUser" parameterType="User"&gt; UPDATE user_info &lt;trim prefix="set" suffixOverrides=","&gt; &lt;if test="userName!=null and userName!=''"&gt; user_name=#&#123;userName&#125;, &lt;/if&gt; &lt;if test="userPwd!=null and userPwd!=''"&gt; user_pwd=#&#123;userPwd&#125;, &lt;/if&gt; &lt;if test="userBirthday!=null and userBirthday!=''"&gt; user_birthday=#&#123;userBirthday&#125;, &lt;/if&gt; &lt;/trim&gt; where id=#&#123;id&#125; &lt;/update&gt; &lt;!-- åˆ é™¤ --&gt; &lt;delete id="deleteUser" parameterType="int"&gt; DELETE from user_info WHERE id=#&#123;uid&#125; &lt;/delete&gt; &lt;!-- åˆ é™¤åœ°å€ --&gt; &lt;delete id="deleteAddress" parameterType="int"&gt; DELETE from address_info WHERE user_id=#&#123;uid&#125; &lt;/delete&gt; &lt;!-- trimæŸ¥è¯¢user --&gt; &lt;select id="seleteUserByUser" resultMap="UserList" parameterType="User"&gt; SELECT *FROM user_info WHERE user_name=#&#123;userName&#125; and user_pwd=#&#123;userPwd&#125; &lt;/select&gt; &lt;resultMap type="User" id="UserList"&gt; &lt;result property="id" column="id" /&gt; &lt;result property="userName" column="user_name" /&gt; &lt;result property="userPwd" column="user_pwd" /&gt; &lt;result property="userBirthday" column="user_birthday" /&gt; &lt;/resultMap&gt; &lt;!-- æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢åœ°å€ä¿¡æ¯ --&gt; &lt;select id="selectUser" parameterType="User" resultMap="getAddress"&gt; SELECT * FROM user_info u,address_info a WHERE a.user_id=u.id AND u.id=#&#123;uid&#125; &lt;/select&gt; &lt;resultMap type="User" id="getAddress"&gt; &lt;result property="id" column="id" /&gt; &lt;result property="userName" column="user_name" /&gt; &lt;result property="userPwd" column="user_pwd" /&gt; &lt;result property="userBirthday" column="user_birthday" /&gt; &lt;collection property="addresses" ofType="Address"&gt; &lt;result property="id" column="id" /&gt; &lt;result property="addressName" column="address_name" /&gt; &lt;result property="userId" column="user_id" /&gt; &lt;/collection&gt; &lt;/resultMap&gt; &lt;!-- æ ¹æ®åœ°å€idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ --&gt; &lt;select id="selectAddress" resultMap="getUser"&gt; SELECT * FROM user_info u,address_info a WHERE a.user_id=u.id AND a.id=#&#123;addressid&#125; &lt;/select&gt; &lt;resultMap type="Address" id="getUser"&gt; &lt;result property="id" column="id" /&gt; &lt;result property="addressName" column="address_name" /&gt; &lt;result property="userId" column="user_id" /&gt; &lt;association property="user" javaType="User"&gt; &lt;result property="id" column="id" /&gt; &lt;result property="userName" column="user_name" /&gt; &lt;result property="userPwd" column="user_pwd" /&gt; &lt;result property="userBirthday" column="user_birthday" /&gt; &lt;/association&gt; &lt;/resultMap&gt; &lt;!-- æ ¹æ®å¤šä¸ªç”¨æˆ·æŸ¥è¯¢ --&gt; &lt;select id="selectUsers" parameterType="UserVo" resultMap="UserList"&gt; SELECT * FROM user_info &lt;where&gt; &lt;foreach collection="list" item="id" open="and (" close=")" separator="or"&gt; id=#&#123;id&#125; &lt;/foreach&gt; &lt;/where&gt; &lt;/select&gt; &lt;!-- ç™»å½• --&gt; &lt;select id="login" resultMap="UserList" parameterType="User"&gt; SELECT * FROM user_info WHERE user_name=#&#123;userName&#125; and user_pwd=#&#123;userPwd&#125; &lt;/select&gt; &lt;!-- æ¨¡ç³ŠæŸ¥è¯¢ --&gt; &lt;select id="getUserList" resultMap="UserList" parameterType="User"&gt; SELECT * FROM user_info &lt;trim prefix="where" prefixOverrides="and | or"&gt; &lt;if test="userName!=null and userName!=''"&gt; and user_name like CONCAT('%',#&#123;userName&#125;,'%') &lt;/if&gt; &lt;if test="id!=null and id!=''"&gt; and id=#&#123;id&#125; &lt;/if&gt; &lt;/trim&gt; &lt;/select&gt; &lt;!-- æ ¹æ®idèŽ·å–ç”¨æˆ·ä¿¡æ¯ --&gt; &lt;select id="getUserById" resultMap="UserList"&gt; select * from user_info where id=#&#123;uid&#125; &lt;/select&gt; &lt;!-- èŽ·å–æ‰€æœ‰ç”¨æˆ· --&gt; &lt;select id="getUsers" resultMap="UserList"&gt; select * from user_info &lt;/select&gt;&lt;/mapper&gt; pojoç±»(æŒä¹…åŒ–ç±»åŒ…æ‹¬JSR-303éªŒè¯)1234567891011121314//id private int id; //name @NotEmpty(message="ç”¨æˆ·åç§°ä¸èƒ½ä¸ºç©º") private String userName; //pwd @NotEmpty(message="ç”¨æˆ·å¯†ç ä¸èƒ½ä¸ºç©º") private String userPwd; //birthday @JSONField(format="yyyy-MM-dd") private Date userBirthday; serviceå±‚(å®žçŽ°ç±»)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687@Service("userServiceImpl")public class UserServiceImpl implements UserService &#123; @Autowired @Qualifier("userMapper") private UserMapper userMapper; public UserMapper getUserMapper() &#123; return userMapper; &#125; public void setUserMapper(UserMapper userMapper) &#123; this.userMapper = userMapper; &#125; @Override public int addUser(User user) &#123; // TODO Auto-generated method stub return userMapper.insertUser(user); &#125; @Override public int modifyUser(User user) &#123; // TODO Auto-generated method stub return userMapper.updateUser(user); &#125; @Override public int removerUser(int uid) &#123; // TODO Auto-generated method stub userMapper.deleteAddress(uid); return userMapper.deleteUser(uid); &#125; @Override public List&lt;User&gt; findUser(int uid) &#123; // TODO Auto-generated method stub return userMapper.selectUser(uid); &#125; @Override public List&lt;Address&gt; findAddress(int addressid) &#123; // TODO Auto-generated method stub return userMapper.selectAddress(addressid); &#125; @Override public List&lt;User&gt; findUsers(UserVo vo) &#123; // TODO Auto-generated method stub return userMapper.selectUsers(vo); &#125; @Override public List&lt;User&gt; findUserByUser(User user) &#123; // TODO Auto-generated method stub return userMapper.seleteUserByUser(user); &#125; @Override public int deleteAddress(int uid) &#123; // TODO Auto-generated method stub return userMapper.deleteAddress(uid); &#125; @Override public User login(User user) &#123; // TODO Auto-generated method stub return userMapper.login(user); &#125; @Override public List&lt;User&gt; getUserList(User user) &#123; // TODO Auto-generated method stub return userMapper.getUserList(user); &#125; @Override public User getUserById(int uid) &#123; // TODO Auto-generated method stub return userMapper.getUserById(uid); &#125; @Override public List&lt;User&gt; getUsers() &#123; // TODO Auto-generated method stub return userMapper.getUsers(); &#125; logger(AOP)1234567891011121314151617181920212223242526272829303132/** * å®šä¹‰åˆ‡é¢ * @author F117 * */@Aspectpublic class logger &#123; private static final Logger LOGGER=Logger.getLogger(logger.class); @Pointcut("execution(* cn.service..*.*(..))") public void Pointcut()&#123;&#125; @AfterReturning(pointcut="Pointcut()",returning="returnCalue") public void afterReturning(JoinPoint jp,Object returnCalue)&#123; LOGGER.info("è°ƒç”¨"+jp.getTarget()+"çš„"+jp.getSignature().getName()+"æ–¹æ³•,è¿”å›žå€¼"+returnCalue); &#125; @Around("Pointcut()") public Object aroundLogger(ProceedingJoinPoint jp) throws Throwable&#123; LOGGER.info("è°ƒç”¨"+jp.getTarget()+"çš„"+jp.getSignature().getName()+"æ–¹æ³•,æ–¹æ³•å…¥å‚"+Arrays.toString(jp.getArgs())); try &#123; Object result=jp.proceed(); LOGGER.info("è°ƒç”¨"+jp.getTarget()+"çš„"+jp.getSignature().getName()+"æ–¹æ³•,è¿”å›žå€¼"+result); return result; &#125; catch (Throwable e) &#123; // TODO: handle exception throw e; &#125;finally &#123; LOGGER.info("====&gt;"+jp.getSignature().getName()+"æ–¹æ³•ç»“æŸ"); &#125; &#125;&#125; StringToDateConverter(è‡ªå®šä¹‰è½¬æ¢å™¨)123456789101112131415161718192021222324public class StringToDateConverter implements Converter&lt;String, Date&gt; &#123; private String dataPattern; public StringToDateConverter(String dataPattern) &#123; System.out.println("StringToDateConverter conver"+dataPattern); this.dataPattern=dataPattern; &#125; @Override public Date convert(String s) &#123; // TODO Auto-generated method stub Date date=null; try &#123; date= new SimpleDateFormat(dataPattern).parse(s); System.out.println("convert date:"+date); &#125; catch (ParseException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; return date; &#125;&#125; applicationContextl.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd"&gt; &lt;context:component-scan base-package="cn.service"&gt;&lt;/context:component-scan&gt; &lt;context:component-scan base-package="cn.controller"&gt;&lt;/context:component-scan&gt; &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt; &lt;bean class="cn.tool.logger" /&gt; &lt;!-- è¯»å–æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location="classpath:database.properties" /&gt; &lt;!-- JNDIèŽ·å–æ•°æ®æº(ä½¿ç”¨dbcpè¿žæŽ¥æ± ) --&gt; &lt;bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" scope="singleton" id="dataSource"&gt; &lt;property name="driverClassName" value="$&#123;driver&#125;" /&gt; &lt;property name="url" value="$&#123;url&#125;" /&gt; &lt;property name="username" value="$&#123;user&#125;" /&gt; &lt;property name="password" value="$&#123;password&#125;" /&gt; &lt;property name="initialSize" value="$&#123;initialSize&#125;" /&gt; &lt;property name="maxActive" value="$&#123;maxActive&#125;" /&gt; &lt;property name="maxIdle" value="$&#123;maxIdle&#125;" /&gt; &lt;property name="minIdle" value="$&#123;minIdle&#125;" /&gt; &lt;property name="maxWait" value="$&#123;maxWait&#125;" /&gt; &lt;property name="removeAbandonedTimeout" value="$&#123;removeAbandonedTimeout&#125;" /&gt; &lt;property name="removeAbandoned" value="$&#123;removeAbandoned&#125;" /&gt; &lt;!-- sql å¿ƒè·³ --&gt; &lt;property name="testWhileIdle" value="true" /&gt; &lt;property name="testOnBorrow" value="false" /&gt; &lt;property name="testOnReturn" value="false" /&gt; &lt;property name="validationQuery" value="select 1" /&gt; &lt;property name="timeBetweenEvictionRunsMillis" value="60000" /&gt; &lt;property name="numTestsPerEvictionRun" value="$&#123;maxActive&#125;" /&gt; &lt;/bean&gt; &lt;!-- é…ç½®SqlSessionFactoryBean --&gt; &lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt; &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt; &lt;property name="configLocation" value="classpath:mybatis-configl.xml"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- é…ç½®Dao --&gt; &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt; &lt;property name="basePackage" value="cn.dao"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- äº‹åŠ¡å¢žå¼º --&gt; &lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt; &lt;tx:attributes&gt; &lt;tx:method name="*" propagation="REQUIRED" /&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!-- é…ç½®åˆ‡é¢ --&gt; &lt;aop:config&gt; &lt;aop:pointcut expression="execution(* cn.service..*.*(..))" id="myPoint" /&gt; &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="myPoint" /&gt; &lt;/aop:config&gt;&lt;/beans&gt; database.properties1234567891011driver=com.mysql.jdbc.Driverurl=jdbc:mysql://localhost:3306/sm_db?useUnicode=true&amp;characterEncoding=utf-8user=rootpassword=rootminIdle=45maxIdle=50initialSize=5maxActive=100maxWait=100removeAbandonedTimeout=180removeAbandoned=true log4j.properties123456789101112131415161718192021222324252627282930313233343536log4j.rootLogger=DEBUG,CONSOLE,file#log4j.rootLogger=ERROR,ROLLING_FILElog4j.logger.cn.smbms.dao=debuglog4j.logger.com.ibatis=debug log4j.logger.com.ibatis.common.jdbc.SimpleDataSource=debug log4j.logger.com.ibatis.common.jdbc.ScriptRunner=debug log4j.logger.com.ibatis.sqlmap.engine.impl.SqlMapClientDelegate=debug log4j.logger.java.sql.Connection=debug log4j.logger.java.sql.Statement=debug log4j.logger.java.sql.PreparedStatement=debug log4j.logger.java.sql.ResultSet=debug log4j.logger.org.tuckey.web.filters.urlrewrite.UrlRewriteFilter=debug####################################################################################### Console Appender \u65e5\u5fd7\u5728\u63a7\u5236\u8f93\u51fa\u914d\u7f6e######################################################################################log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppenderlog4j.appender.Threshold=errorlog4j.appender.CONSOLE.Target=System.outlog4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayoutlog4j.appender.CONSOLE.layout.ConversionPattern= [%p] %d %c - %m%n####################################################################################### DailyRolling File \u6bcf\u5929\u4ea7\u751f\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u683c\u5f0f:log2009-09-11######################################################################################log4j.appender.file=org.apache.log4j.DailyRollingFileAppenderlog4j.appender.file.DatePattern=yyyy-MM-ddlog4j.appender.file.File=log.loglog4j.appender.file.Append=truelog4j.appender.file.Threshold=errorlog4j.appender.file.layout=org.apache.log4j.PatternLayoutlog4j.appender.file.layout.ConversionPattern=%d&#123;yyyy-M-d HH:mm:ss&#125;%x[%5p](%F:%L) %m%nlog4j.logger.com.opensymphony.xwork2=error mybatis-configl.xml1234567891011121314151617&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE configurationPUBLIC "-//mybatis.org//DTD Config 3.0//EN""http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;!-- é…ç½®mybatisçš„logå®žçŽ°ä¸ºLOG4J --&gt; &lt;settings&gt; &lt;!-- &lt;setting name="logImpl" value="LOG4J" /&gt; --&gt; &lt;setting name="lazyLoadingEnabled" value="false"/&gt; &lt;setting name="autoMappingBehavior" value="FULL"/&gt; &lt;/settings&gt; &lt;typeAliases&gt; &lt;package name="cn.pojo"/&gt; &lt;/typeAliases&gt;&lt;/configuration&gt; springmvc-servlet.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;!-- é…ç½®å¤„ç†å™¨æ˜ å°„ HandlerMapping --&gt; &lt;!-- &lt;bean name="/index.html" class="cn.smbms.controller.IndexController" /&gt; --&gt; &lt;!-- &lt;bean name="/welcome" class="cn.smbms.controller.IndexController" /&gt; --&gt; &lt;!-- &lt;bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean"&gt; &lt;/bean&gt; --&gt; &lt;context:component-scan base-package="cn.controller" /&gt; &lt;!-- è‡ªå®šä¹‰è½¬æ¢å™¨ --&gt; &lt;bean id="myConversionService" class="org.springframework.context.support.ConversionServiceFactoryBean"&gt; &lt;property name="converters"&gt; &lt;list&gt; &lt;bean class="cn.tool.StringToDateConverter"&gt; &lt;constructor-arg type="java.lang.String" value="yyyy-MM-dd" /&gt; &lt;/bean&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;mvc:annotation-driven&gt; &lt;!-- æ¶ˆæ¯è½¬æ¢å™¨ --&gt; &lt;mvc:message-converters&gt; &lt;bean class="org.springframework.http.converter.StringHttpMessageConverter"&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;application/json;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;bean class="com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter"&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;application/json;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;property name="features"&gt; &lt;list&gt; &lt;value&gt;WriteDateUseDateFormat&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt; &lt;/mvc:annotation-driven&gt; &lt;!-- å®Œæˆè§†å›¾çš„å¯¹åº” --&gt; &lt;!-- å¯¹è½¬å‘é¡µé¢çš„è·¯å¾„è§£æžã€‚prefixï¼šå‰ç¼€ï¼Œ suffixï¼šåŽç¼€ --&gt; &lt;!-- &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/jsp/" /&gt; &lt;property name="suffix" value=".jsp" /&gt; &lt;/bean&gt; --&gt; &lt;!-- é…ç½®å¤šè§†å›¾è§£æžå™¨ ï¼šå…è®¸ç»Ÿä¸€çš„å†…å®¹æ•°æ®å‘ˆçŽ°åœ¨ä¸åŒçš„viewä¸­ --&gt; &lt;bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver"&gt; &lt;!-- æ”¯æŒå‚æ•°åŒ¹é… --&gt; &lt;property name="favorParameter" value="true" /&gt; &lt;property name="mediaTypes"&gt; &lt;map&gt; &lt;entry key="html" value="text/html;charset=UTF-8"&gt;&lt;/entry&gt; &lt;entry key="json" value="application/json;charset=UTF-8"&gt;&lt;/entry&gt; &lt;entry key="xml" value="application/xml;charset=UTF-8"&gt;&lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;!-- ç½‘é¡µè§†å›¾è§£æžå™¨ --&gt; &lt;property name="viewResolvers"&gt; &lt;list&gt; &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/jsp/" /&gt; &lt;property name="suffix" value=".jsp" /&gt; &lt;/bean&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;mvc:resources location="/statics/" mapping="/statics/**"&gt;&lt;/mvc:resources&gt; &lt;!-- å…¨å±€å¼‚å¸¸çš„é…ç½® --&gt; &lt;bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"&gt; &lt;property name="exceptionMappings"&gt; &lt;props&gt; &lt;prop key="java.lang.RuntimeException"&gt;error&lt;/prop&gt; &lt;/props&gt; &lt;/property&gt; &lt;/bean&gt; &lt;!-- é…ç½®MulitpartResolverï¼Œç”¨äºŽæ–‡ä»¶ä¸Šä¼  --&gt; &lt;bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"&gt; &lt;property name="maxUploadSize" value="5000000" /&gt; &lt;property name="defaultEncoding" value="utf-8" /&gt; &lt;/bean&gt;&lt;/beans&gt; web.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0"&gt; &lt;display-name&gt;CG09&lt;/display-name&gt; &lt;!-- é…ç½®çŽ¯å¢ƒå‚æ•°ï¼ŒæŒ‡å®šspringé…ç½®æ–‡ä»¶çš„æ‰€åœ¨ç›®å½•--&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContextl.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;!-- é…ç½®springçš„ContextLoaderListenerç›‘å¬å™¨ï¼Œåˆå§‹åŒ–springå®¹å™¨--&gt; &lt;listener&gt; &lt;listener-class&gt; org.springframework.web.context.ContextLoaderListener &lt;/listener-class&gt; &lt;/listener&gt; &lt;welcome-file-list&gt; &lt;welcome-file&gt;index.html&lt;/welcome-file&gt; &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt; &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt; &lt;welcome-file&gt;default.html&lt;/welcome-file&gt; &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt; &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt; &lt;/welcome-file-list&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt; org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;filter&gt; &lt;filter-name&gt;characterEncoding&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter &lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;characterEncoding&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; &lt;context-param&gt; &lt;param-name&gt;log4jConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:log4j.properties&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt; org.springframework.web.util.Log4jConfigListener &lt;/listener-class&gt; &lt;/listener&gt; &lt;context-param&gt;&lt;param-name&gt;webAppRootKey&lt;/param-name&gt;&lt;param-value&gt; app.root &lt;/param-value&gt;&lt;/context-param&gt; &lt;/web-app&gt; UserController(æ ¸å¿ƒ)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130@Controller@RequestMapping("/user")public class UserController extends BaseController &#123; public UserService getUserService() &#123; return userService; &#125; public void setUserService(UserService userService) &#123; this.userService = userService; &#125; private Logger logger = Logger.getLogger(UserController.class); @Autowired @Qualifier("userServiceImpl") private UserService userService; // å®žçŽ°è·³è½¬åˆ°ç™»å½•é¡µ @RequestMapping(value = "/login.html") public String login() &#123; logger.info("ç”¨æˆ·è·³è½¬åˆ°ç™»å½•é¡µ====================&gt;"); return "login"; &#125; // ä¸»é¡µé¢ @RequestMapping(value = "main.html") public String hetmain() &#123; logger.info("ç”¨æˆ·è·³è½¬åˆ°ä¸»é¡µé¢====================&gt;"); return "main"; &#125; // å®žçŽ°ç™»å½• @RequestMapping(value = "dologin.html", method = RequestMethod.POST) public String doLogin(String userName, String userPwd, HttpSession session, HttpServletRequest request,RedirectAttributes attr) throws Exception &#123; logger.info("ç™»å½•ä¸­======================&gt;"); // è°ƒç”¨serviceæ–¹æ³•è¿›è¡Œç”¨æˆ·åŒ¹é… User user=new User(); user.setUserName(userName); user.setUserPwd(userPwd); User user2=new User(); user2 = userService.login(user); if(null!=user2)&#123;//ç™»é™†æˆåŠŸ attr.addFlashAttribute("u1", user2); return "redirect:/user/main.html"; //response.sendRedirect("jsp/frame.jsp") &#125;else&#123; request.setAttribute("error","ç”¨æˆ·åå¯†ç ä¸æ­£ç¡®"); return "login"; &#125; &#125; //æ ¹æ®ç”¨æˆ·idèŽ·å–ç”¨æˆ·ä¿¡æ¯ @RequestMapping(value="usermodify.html",method = RequestMethod.GET) public String getUserByID(@RequestParam int id,Model model)&#123; User user=new User(); user=userService.getUserById(id); model.addAttribute("user", user); return "toEditUserView"; &#125; @RequestMapping(value="usermodifysave.html",method=RequestMethod.POST) public String modifyUserSave(User user,HttpSession session)&#123; if(userService.modifyUser(user)&gt;0)&#123; return "redirect:/user/userlist.html"; &#125; return "toEditUserView"; &#125; @RequestMapping(value="userlist.html",method = RequestMethod.GET) public String getUserList(Model model)&#123; List&lt;User&gt;userList=new ArrayList&lt;User&gt;(); userList=userService.getUsers(); model.addAttribute("userList", userList); return "userInfoList"; &#125; //æ·»åŠ  @RequestMapping(value="addUser.html",method=RequestMethod.GET) public String add(@ModelAttribute("user") User user,Model model)&#123; return "doSaveUserInfo"; &#125; @RequestMapping(value="addUsersave.html",method=RequestMethod.POST) public String addSave(@Valid User user, BindingResult bindingResult, HttpSession session)&#123; if(bindingResult.hasErrors())&#123; return "doSaveUserInfo"; &#125; int num=userService.addUser(user); System.out.println("==================="+num); if(num&gt;0)&#123; return "redirect:/user/userlist.html"; &#125; return "doSaveUserInfo"; &#125; @RequestMapping(value = "/error.html") public String error() &#123; return "error"; &#125; @RequestMapping(value="userdelete.html",method = RequestMethod.GET) public String getUserByIDs(@RequestParam int id,Model model)&#123; User user=new User(); user=userService.getUserById(id); model.addAttribute("user", user); return "deleteUserInfo"; &#125; //åˆ é™¤ @RequestMapping(value="/deleteUser.html",method=RequestMethod.POST) public String deleteUser(@RequestParam int id)&#123; int nums=userService.removerUser(id); System.out.println("===================&gt;"+nums); if(nums&gt;=1)&#123; return "redirect:/user/userlist.html"; &#125;else&#123; return "error"; &#125; &#125;&#125; ä¿å­˜æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960//è·³è½¬åˆ°æ–°å¢žappinfoé¡µé¢ @RequestMapping(value="/appinfoadd",method=RequestMethod.GET) public String add(@ModelAttribute("appInfo") AppInfo appInfo)&#123; return "developer/appinfoadd"; &#125; //ä¿å­˜appinfoæ•°æ® @RequestMapping(value="/appinfoaddsave",method=RequestMethod.POST) public String addSave(AppInfo appInfo,HttpSession session,HttpServletRequest request, @RequestParam(value="a_logoPicPath",required= false) MultipartFile attach)&#123; String logoPicPath = null; String logoLocPath = null; if(!attach.isEmpty())&#123; String path = request.getSession().getServletContext().getRealPath("statics"+java.io.File.separator+"uploadfiles"); logger.info("uploadFile path: " + path); String oldFileName = attach.getOriginalFilename();//åŽŸæ–‡ä»¶å String prefix = FilenameUtils.getExtension(oldFileName);//åŽŸæ–‡ä»¶åŽç¼€ int filesize = 500000; if(attach.getSize() &gt; filesize)&#123;//ä¸Šä¼ å¤§å°ä¸å¾—è¶…è¿‡ 50k request.setAttribute("fileUploadError", Constants.FILEUPLOAD_ERROR_4); return "developer/appinfoadd"; &#125;else if(prefix.equalsIgnoreCase("jpg") || prefix.equalsIgnoreCase("png") ||prefix.equalsIgnoreCase("jepg") || prefix.equalsIgnoreCase("pneg"))&#123;//ä¸Šä¼ å›¾ç‰‡æ ¼å¼ String fileName = appInfo.getAPKName() + ".jpg";//ä¸Šä¼ LOGOå›¾ç‰‡å‘½å:apkåç§°.apk File targetFile = new File(path,fileName); if(!targetFile.exists())&#123; targetFile.mkdirs(); &#125; try &#123; attach.transferTo(targetFile); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); request.setAttribute("fileUploadError", Constants.FILEUPLOAD_ERROR_2); return "developer/appinfoadd"; &#125; logoPicPath = request.getContextPath()+"/statics/uploadfiles/"+fileName; //ç»å¯¹è·¯å¾„ logoLocPath = path+File.separator+fileName; //ç›¸å¯¹è·¯å¾„ &#125;else&#123; request.setAttribute("fileUploadError", Constants.FILEUPLOAD_ERROR_3); return "developer/appinfoadd"; &#125; &#125; appInfo.setCreatedBy(((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId()); appInfo.setCreationDate(new Date()); appInfo.setLogoPicPath(logoPicPath); appInfo.setLogoLocPath(logoLocPath); appInfo.setDevId(((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId()); appInfo.setStatus(1); try &#123; if(appInfoService.add(appInfo))&#123; return "redirect:/dev/flatform/app/list"; &#125; &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; return "developer/appinfoadd"; &#125; JSPé¡µé¢åˆ—è¡¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;&lt;% String path = request.getContextPath(); String basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort() + path + "/";%&gt;&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;&lt;html&gt;&lt;head&gt;&lt;base href="&lt;%=basePath%&gt;"&gt;&lt;title&gt;My JSP 'userInfoList.jsp' starting page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;a href="user/addUser.html"&gt;æ·»åŠ ç”¨æˆ·&lt;/a&gt; &lt;h2&gt;ç”¨æˆ·åˆ—è¡¨&lt;/h2&gt; &lt;table class="providerTable" cellpadding="0" cellspacing="0"&gt; &lt;tr class="firstTr"&gt; &lt;th width="10%"&gt;ç”¨æˆ·id&lt;/th&gt; &lt;th width="20%"&gt;ç”¨æˆ·åç§°&lt;/th&gt; &lt;th width="10%"&gt;ç”¨æˆ·å¯†ç &lt;/th&gt; &lt;th width="10%"&gt;ç”Ÿæ—¥æ—¥æœŸ&lt;/th&gt; &lt;th width="10%"&gt;æ“ä½œ&lt;/th&gt; &lt;/tr&gt; &lt;c:forEach var="user" items="$&#123;userList &#125;" varStatus="status" begin="0"&gt; &lt;tr&gt; &lt;td&gt;&lt;span&gt;$&#123;user.id &#125;&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span&gt;$&#123;user.userName &#125;&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span&gt;$&#123;user.userPwd&#125;&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span&gt;$&#123;user.userBirthday.year+1900&#125;-&lt;c:if test="$&#123;user.userBirthday.month+1 &lt; 10&#125;"&gt;0&lt;/c:if&gt;$&#123;user.userBirthday.month+1&#125;-&lt;c:if test="$&#123;user.userBirthday.date &lt; 10&#125;"&gt;0&lt;/c:if&gt;$&#123;user.userBirthday.date&#125;&lt;/span&gt; &lt;/td&gt; &lt;td&gt;&lt;a href="$&#123;pageContext.request.contextPath&#125;/user/usermodify.html?id=$&#123;user.id &#125;"&gt;ä¿®æ”¹&lt;/a&gt; &lt;a href="$&#123;pageContext.request.contextPath&#125;/user/userdelete.html?id=$&#123;user.id &#125;"&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/c:forEach&gt;&lt;/body&gt;&lt;/html&gt; æ·»åŠ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;&lt;%@taglib prefix="fm" uri="http://www.springframework.org/tags/form" %&gt;&lt;%String path = request.getContextPath();String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";%&gt;&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;&lt;html&gt; &lt;head&gt; &lt;base href="&lt;%=basePath%&gt;"&gt; &lt;title&gt;My JSP 'doSaveUserInfo.jsp' starting page&lt;/title&gt; &lt;meta http-equiv="pragma" content="no-cache"&gt; &lt;meta http-equiv="cache-control" content="no-cache"&gt; &lt;meta http-equiv="expires" content="0"&gt; &lt;meta http-equiv="keywords" content="keyword1,keyword2,keyword3"&gt; &lt;meta http-equiv="description" content="This is my page"&gt; &lt;!-- &lt;link rel="stylesheet" type="text/css" href="styles.css"&gt; --&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt;æ–°å¢žç”¨æˆ·&lt;/h2&gt; &lt;fm:form method="post" modelAttribute="user" action="$&#123;pageContext.request.contextPath&#125;/user/addUsersave.html"&gt; &lt;fm:errors path="userName"/&gt;&lt;br/&gt; ç”¨æˆ·åç§°ï¼š&lt;fm:input path="userName"/&gt;&lt;br/&gt; &lt;fm:errors path="userPwd"/&gt;&lt;br/&gt; ç”¨æˆ·å¯†ç ï¼š&lt;fm:password path="userPwd"/&gt;&lt;br/&gt; &lt;fm:errors path="userBirthday"/&gt;&lt;br/&gt; ç”¨æˆ·ç”Ÿæ—¥ï¼š&lt;fm:input path="userBirthday" Class="Wdate" id="birthday" name="userBirthday" readonly="readonly" /&gt;&lt;br/&gt; &lt;input type="submit" value="ä¿å­˜"&gt; &lt;/fm:form&gt; &lt;/body&gt;&lt;/html&gt; ä¿®æ”¹1234567891011121314 &lt;body&gt; &lt;h2&gt;ç”¨æˆ·ä¿®æ”¹é¡µé¢&lt;/h2&gt; &lt;form action="$&#123;pageContext.request.contextPath&#125;/user/usermodifysave.html" method="post"&gt; &lt;input type="hidden" name="id" value="$&#123;user.id &#125;"&gt;&lt;br/&gt; &lt;input type="text" name="userName" value="$&#123;user.userName &#125;"&gt;&lt;br/&gt; &lt;input type="text" name="userPwd" value="$&#123;user.userPwd &#125;"&gt;&lt;br/&gt; &lt;input type="text" name="userBirthday" value="$&#123;user.userBirthday &#125;"&gt;&lt;br/&gt; &lt;input type="submit" value="ä¿®æ”¹"&gt; &lt;input type="button" value="è¿”å›žä¸»é¡µé¢"&gt; &lt;/form&gt; &lt;/body&gt; ### æœ‰å½¢çš„ä¸œè¥¿è¿Ÿæ—©ä¼šå‡‹é›¶ï¼Œä½†åªæœ‰å›žå¿†æ˜¯æ°¸è¿œä¸ä¼šå‡‹é›¶çš„]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hibernateå…³ç³»æ˜ å°„]]></title>
    <url>%2F2018%2F11%2F08%2FHibernate%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%2F</url>
    <content type="text"><![CDATA[æ˜ å°„å…³ç³»çš„å½¢æˆ hibernateåœ¨å®žçŽ°ORMåŠŸèƒ½çš„æ—¶å€™ä¸»è¦ç”¨åˆ°çš„æ–‡ä»¶æœ‰ï¼šæ˜ å°„ç±»ï¼ˆ.Javaï¼‰ã€æ˜ å°„æ–‡ä»¶ï¼ˆ.hbm.xmlï¼‰å’Œæ•°æ®åº“é…ç½®æ–‡ä»¶ï¼ˆ.properties/.cfg.xmlï¼‰ æ˜ å°„ç±»ï¼ˆ*.javaï¼‰ï¼šå®ƒæ˜¯æè¿°æ•°æ®åº“è¡¨çš„ç»“æž„ï¼Œè¡¨ä¸­çš„å­—æ®µåœ¨ç±»ä¸­è¢«æè¿°æˆå±žæ€§ï¼Œå°†æ¥å°±å¯ä»¥å®žçŽ°æŠŠè¡¨ä¸­çš„è®°å½•æ˜ å°„æˆä¸ºè¯¥ç±»çš„å¯¹è±¡äº†ã€‚ æ˜ å°„æ–‡ä»¶ï¼ˆ*.hbm.xmlï¼‰ï¼šå®ƒæ˜¯æŒ‡å®šæ•°æ®åº“è¡¨å’Œæ˜ å°„ç±»ä¹‹é—´çš„å…³ç³»ï¼ŒåŒ…æ‹¬æ˜ å°„ç±»å’Œæ•°æ®åº“è¡¨çš„å¯¹åº”å…³ç³»ã€è¡¨å­—æ®µå’Œç±»å±žæ€§ç±»åž‹çš„å¯¹åº”å…³ç³»ä»¥åŠè¡¨å­—æ®µå’Œç±»å±žæ€§åç§°çš„å¯¹åº”å…³ç³»ç­‰ã€‚ æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼ˆ.properties/.cfg.xmlï¼‰ï¼šå®ƒæ˜¯æŒ‡å®šä¸Žæ•°æ®åº“è¿žæŽ¥æ—¶éœ€è¦çš„è¿žæŽ¥ä¿¡æ¯ï¼Œæ¯”å¦‚è¿žæŽ¥å“ªç§æ•°æ®åº“ã€ç™»å½•æ•°æ®åº“çš„ç”¨æˆ·åã€ç™»å½•å¯†ç ä»¥åŠè¿žæŽ¥å­—ç¬¦ä¸²ç­‰ã€‚å½“ç„¶è¿˜å¯ä»¥æŠŠæ˜ å°„ç±»çš„åœ°å€æ˜ å°„ä¿¡æ¯æ”¾åœ¨è¿™é‡Œã€‚ hibernateä¸­çš„å…³è”å…³ç³»æœ‰å››ç§ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤šå…³è”å…³ç³»(æ˜¯æœ‰æ–¹å‘çš„)Dept(éƒ¨é—¨è¡¨)ï¼ŒEmp(å‘˜å·¥è¡¨),ä¸€ä¸ªéƒ¨é—¨ä¸‹æœ‰å¤šä¸ªå‘˜å·¥ï¼Œè€Œä¸€ä¸ªå‘˜å·¥åªå±žäºŽä¸€ä¸ªéƒ¨é—¨ï¼Œæ‰€ä»¥Emp-&gt;Deptæ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œæ¯ä¸ªEmpå¯¹è±¡åªä¼šå¼•ç”¨ä¸€ä¸ªDeptå¯¹è±¡,è€ŒDept-&gt;Empæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè¡¨ç¤ºæ¯ä¸ªDeptå¯¹è±¡ä¼šå¼•ç”¨ä¸€ç»„Empå¯¹è±¡ï¼Œå› æ­¤åœ¨Empç±»ä¸­åº”è¯¥å®šä¹‰ä¸€ä¸ªDeptç±»åž‹çš„å±žæ€§ï¼Œè€Œåœ¨Deptç±»ä¸­éœ€è¦å®šä¹‰ä¸€ä¸ªé›†åˆç±»åž‹çš„å±žæ€§ï¼Œæ¥å¼•ç”¨Empæ‰€æœ‰å…³è”çš„Empå¯¹è±¡ï¼Œå¦‚æžœåªé…ç½®ä¸€æ–¹è¢«æˆä¸ºå•å‘æ˜ å°„ï¼Œä¸¤ä¸ªéƒ½é…ç½®è¢«ç§°ä¸ºåŒå‘ å•å‘å…³è”å•å‘å…³è”æ˜¯æŒ‡åªæœ‰ä¸€æ–¹æœ‰å¦ä¸€æ–¹çš„å…³è”ä¿¡æ¯è€Œå¦ä¸€æ–¹æ²¡æœ‰å…³è”ä¿¡æ¯Aâ€”â€”&gt;BAå¯¹è±¡ä¸­æœ‰Bå¯¹è±¡çš„å…³è”ä¿¡æ¯Bå¯¹è±¡ä¸­æ²¡æœ‰Aå¯¹è±¡çš„å…³è”ä¿¡æ¯æˆ‘ä»¬å¯ä»¥é€šè¿‡Aå¯¹è±¡ä¸­Bçš„å…³è”ä¿¡æ¯æŸ¥è¯¢æˆ–ä¿®æ”¹Bå¯¹è±¡çš„ä¿¡æ¯ä½†æ— æ³•é€šè¿‡Bå¯¹è±¡æ¥æŸ¥è¯¢ä¿®æ”¹Aå¯¹è±¡çš„ä¿¡æ¯åŒç†A&lt;â€”â€”Bä¹Ÿæ˜¯å•å‘å…³è” åŒå‘å…³è”A&lt;â€”â€”&gt;BAå¯¹è±¡ä¸­æœ‰Bå¯¹è±¡çš„å…³è”ä¿¡æ¯Bå¯¹è±¡ä¸­ä¹Ÿæœ‰Aå¯¹è±¡çš„å…³è”ä¿¡æ¯æˆ‘ä»¬å¯ä»¥é€šè¿‡Aå¯¹è±¡ä¸­Bçš„å…³è”ä¿¡æ¯æŸ¥è¯¢æˆ–ä¿®æ”¹Bå¯¹è±¡çš„ä¿¡æ¯ä¹Ÿå¯ä»¥é€šè¿‡Bå¯¹è±¡æ¥æŸ¥è¯¢ä¿®æ”¹Aå¯¹è±¡çš„ä¿¡æ¯ å•å‘å…³è”ä¸€èˆ¬åœ¨ä¸€æ–¹é…ç½®å¤šæ–¹ä¸è¿›è¡Œé…ç½® 12345 å¦‚ï¼šä¸€å¯¹å¤š å•å‘å…³è”åœ¨â€œä¸€â€çš„ä¸€æ–¹é…ç½®æ–‡ä»¶é‡Œè¿›è¡Œé…ç½®,"å¤š"çš„ä¸€æ–¹ä¸è¿›è¡Œé…ç½®åŒå‘å…³è”ä¸¤æ–¹éƒ½è¦é…ç½® å¦‚ï¼šä¸€å¯¹å¤š åŒå‘å…³è”åœ¨â€œä¸€â€çš„ä¸€æ–¹é…ç½®æ–‡ä»¶é‡Œéœ€è¦é…ç½®ï¼Œâ€œå¤šâ€çš„ä¸€æ–¹ä¹Ÿéœ€è¦è¿›è¡Œé…ç½® ä¸€å¯¹ä¸€å…³è”æ˜ å°„ä¸€å¯¹ä¸€æ˜¯æŒ‡ä¸€ä¸ªå¯¹è±¡å¯¹åº”ä¸€ä¸ªå¯¹è±¡ å¦‚ï¼šä¸€ä¸ªäººåªæœ‰ä¸€ä¸ªèº«ä»½è¯ã€‚ åœ¨ä¸¤ä¸ªæ•°æ®è¡¨ä¹‹é—´çš„ä¸€å¯¹ä¸€å…³ç³»å¯ä»¥æœ‰ä¸¤ç§å®žçŽ°æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ç§å°±æ˜¯é€šè¿‡ä¸¤ä¸ªè¡¨çš„ä¸»é”®ç›¸å…³è”ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡å¤–é”®ç›¸å…³è” ä¸€ä¸ªäººï¼ˆPersonï¼‰å¯¹åº”ä¸€ä¸ªåœ°å€ï¼ˆAddressï¼‰ ä¸€å¯¹ä¸€ä¸»é”®å•å‘å…³è”pojo1234567891011public class Person &#123; private int personid; private String name; private int age; //åœ¨Personå¯¹è±¡ä¸­æœ‰Addresså¯¹è±¡çš„å…³è”ä¿¡æ¯ private Address address; public class Address&#123; //Addresså¯¹è±¡ä¸­æ²¡æœ‰Personå¯¹è±¡çš„å…³è”ä¿¡æ¯ private int addressid; private String addressdetail; æ˜ å°„hbm.xmlæ–‡ä»¶12345678910111213141516Person.hbm.xml&lt;hibernate-mapping&gt; &lt;class name="com.entity.Person" table="PERSON"&gt; &lt;id name="personid" column="presonid"&gt; &lt;!--åŸºäºŽä¸»é”®å…³è”æ—¶ï¼Œä¸»é”®ç”Ÿæˆç­–ç•¥æ˜¯foreignï¼Œè¡¨æ˜Žæ ¹æ®å…³è”ç±»ç”Ÿæˆä¸»é”®--&gt; &lt;generator class="foreign"&gt; &lt;!--å…³è”æŒä¹…åŒ–ç±»çš„å±žæ€§å--&gt; &lt;param name="property"&gt;address&lt;/param&gt; &lt;/generator&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;property name="age"/&gt; &lt;!--constrainedè®¾å®šä¸ºtrueï¼Œè¡¨ç¤ºçš„ä¸»é”®å¿…é¡»ä¸ŽPersonä¸­å¯¹åº”èµ„æ–™çš„ä¸»é”®ç›¸åŒã€‚--&gt; &lt;one-to-one name="address" constrained="true"/&gt; &lt;/class&gt;&lt;/hibernate-mapping&gt; Address.hbm.xmlä¸­ä¸åšä»»ä½•é…ç½® ä¸€å¯¹ä¸€ä¸»é”®åŒå‘å…³è”Person&lt;â€”â€”&gt;Address123456789101112public class Person implements java.io.Serializable &#123; private Long id; private String name; //åŒå‘å…³è”ä¸­Personå¯¹è±¡ä¸­æœ‰Addersså¯¹è±¡çš„å…³è”ä¿¡æ¯ private Address address; public class Address implements java.io.Serializable &#123; private Long id; //Addersså¯¹è±¡ä¸­ä¹Ÿæœ‰Personå¯¹è±¡çš„å…³è”ä¿¡æ¯ private Person person; private String detail; Person.hbm.xml1234567891011121314&lt;hibernate-mapping&gt; &lt;class name="entity.Person" table="person"&gt; &lt;id name="id" type="java.lang.Long"&gt; &lt;column name="id" /&gt; &lt;generator class="identity" /&gt; &lt;/id&gt; &lt;property name="name" type="java.lang.String"&gt; &lt;column name="name" length="24" not-null="true"&gt; &lt;comment&gt;å§“å&lt;/comment&gt; &lt;/column&gt; &lt;/property&gt; &lt;one-to-one name="address"/&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; Address.hbm.xml123456789101112131415161718&lt;hibernate-mapping&gt; &lt;class name="entity.Address" table="address" catalog="mydb"&gt; &lt;id name="id" type="java.lang.Long"&gt; &lt;column name="id" /&gt; &lt;!-- class="foreign": ä¸€å¯¹ä¸€ä¸»é”®æ˜ å°„ä¸­ï¼Œä½¿ç”¨å¦å¤–ä¸€ä¸ªç›¸å…³è”çš„å¯¹è±¡çš„æ ‡è¯†ç¬¦ --&gt; &lt;generator class="foreign"&gt; //è¡¨æ˜Židçš„ç”Ÿæˆæ–¹å¼æ˜¯å¼•ç”¨è¡¨peopleçš„ä¸»é”® &lt;param name="property"&gt;person&lt;/param&gt; &lt;/generator&gt; &lt;/id&gt; &lt;property name="detail" type="java.lang.String"&gt; &lt;column name="detail" length="120" not-null="true"&gt; &lt;comment&gt;è¯¦ç»†åœ°å€&lt;/comment&gt; &lt;/column&gt; &lt;/property&gt; &lt;!-- è¡¨ç¤ºåœ¨addressè¡¨å­˜åœ¨ä¸€ä¸ªå¤–é”®çº¦æŸï¼Œå¤–é”®å‚è€ƒç›¸å…³è”çš„è¡¨person --&gt; &lt;one-to-one name="person" constrained="true" /&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; ä¸€å¯¹ä¸€å¤–é”®å•å‘å…³è”Personâ€”â€”&gt;Address123456789public class Person &#123; private int personid; private String name; private int age; private Address address; public class Address&#123; private int addressid; private String addressdetail; 123456789101112131415161718Address.hbm.xml&lt;!--addressä¸­ä¸åšä»»ä½•é…ç½®æ‰€ä»¥æˆ‘ä»¬çœç•¥--&gt; â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦&lt;!--å•å‘å…³è”å’ŒåŒå‘å…³è”çš„åŒºåˆ«åœ¨äºŽå•å‘å…³è”åªåœ¨ä¸€æ–¹é…ç½®åŒå‘å…³è”ä¸¤æ–¹éƒ½è¦é…ç½®--&gt;Person.hbm.xml&lt;hibernate-mapping&gt; &lt;class name="com.entity.Person" table="PERSON"&gt; &lt;id name="personid"&gt; &lt;generator class="identity"/&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;property name="age"/&gt; &lt;!--ç”¨æ¥æ˜ å°„å…³è”PO columnæ˜¯Addressåœ¨è¯¥è¡¨ä¸­çš„å¤–é”®åˆ—å,å¢žåŠ uniqueå˜æˆå”¯ä¸€çš„--&gt; &lt;many-to-one name="address" unique="true"/&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; å¤–é”®å…³è”å’Œä¸»é”®å…³è”ä¸åŒçš„åœ°æ–¹æ˜¯é‡‡ç”¨æ ‡ç­¾æ¥æ˜ å°„ï¼Œä¸€å¯¹ä¸€å”¯ä¸€å¤–é”®å…³è”æ˜ å°„å…¶å®žæ˜¯å¤šå¯¹ä¸€çš„ç‰¹ä¾‹ã€‚æŒ‡å®šå¤šçš„ä¸€ç«¯uniqueä¸ºtrueï¼Œè¿™æ ·å°±é™åˆ¶äº†å¤šçš„ä¸€ç«¯çš„å¤šé‡æ€§ä¸ºä¸€ï¼Œå°±æ˜¯è¿™æ ·æ¥æ˜ å°„çš„ã€‚ ä¸€å¯¹ä¸€å¤–é”®åŒå‘å…³è”Person&lt;â€”â€”&gt;Address12345678910public class Person implements java.io.Serializable &#123; private Long id; private String name; private Address address; public class Address implements java.io.Serializable &#123; private Long id; private Person person; private String detail; 123456789101112131415161718192021222324252627282930313233343536Person.hbm.xml&lt;hibernate-mapping&gt; &lt;class name="com.entity.Person" table="person"&gt; &lt;id name="personid" type="java.lang.Long"&gt; &lt;column name="personid" /&gt; &lt;generator class="identity" /&gt; &lt;/id&gt; &lt;property name="name" type="java.lang.String"&gt; &lt;column name="name" length="24" not-null="true"&gt; &lt;comment&gt;å§“å&lt;/comment&gt; &lt;/column&gt; &lt;/property&gt; &lt;!--åŒå‘å…³è”é…ç½®--&gt; &lt;one-to-one name="address" /&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt;Address.hbm.xml&lt;hibernate-mapping&gt; &lt;class name="com.entity.Address" table="address" catalog="testdb"&gt; &lt;id name="addressid" type="java.lang.Long"&gt; &lt;column name="addressid" /&gt; &lt;generator class="identity" /&gt; &lt;/id&gt; &lt;property name="detail" type="java.lang.String"&gt; &lt;column name="detail" length="120" not-null="true"&gt; &lt;comment&gt;è¯¦ç»†åœ°å€&lt;/comment&gt; &lt;/column&gt; &lt;/property&gt; &lt;many-to-one name="person" class="entity.Person" unique="true"&gt; &lt;column name="personid"&gt; &lt;comment&gt;äººçš„ID&lt;/comment&gt; &lt;/column&gt; &lt;/many-to-one&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; ä¸€å¯¹å¤šå…³è”æ˜ å°„ä¸€å¯¹å¤šå•å‘å…³è”Classesâ€”â€”&gt;Student12345678910public class Classes &#123; private int id; private String name; //Setæ”¯æŒå»¶è¿ŸåŠ è½½å› ä¸ºå¤šä¸ªå­¦ç”Ÿæ‰€ä»¥æˆ‘ä»¬ç”¨Seté›†åˆå…³è” private Set students; &#125; public class Student &#123; private int id; private String name; &#125; Classeså¯¹è±¡ä¸­ä½¿ç”¨äº†setå±žæ€§ï¼Œä½†æ˜¯åªæ˜¯è¯´æ˜Žäº†å»¶è¿ŸåŠ è½½çš„å±žæ€§ï¼Œå¹¶æ²¡æœ‰ä¸ºå±žæ€§é…ç½®å¯¹åº”çš„å¯¹è±¡ï¼Œå±žæ€§çš„å¯¹è±¡æ˜¯è¦åœ¨æ˜ å°„æ–‡ä»¶ä¸­æ¥é…ç½®çš„ï¼Œéœ€è¦æ·»åŠ setæ ‡ç­¾ï¼Œå¹¶åœ¨setæ ‡ç­¾ä¸­æ·»åŠ æ ‡ç­¾123456789101112&lt;hibernate-mapping&gt; &lt;class name="com.hibernate.Classes" table="t_classes"&gt; &lt;id name="id"&gt; &lt;generator class="native"/&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;set name="students"&gt; &lt;key column="classesid"&gt;&lt;/key&gt; &lt;one-to-many class="com.hibernate.Student"&gt;&lt;/one-to-many&gt; &lt;/set&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; Student.hbm.xmlä¸åšä»»ä½•æ”¹å˜ ä¸€å¯¹å¤šåŒå‘å…³è”Classes&lt;â€”â€”&gt;Student123456789101112public class Classes &#123; private int id; private String name; //Setæ”¯æŒå»¶è¿ŸåŠ è½½ private Set&lt;Student&gt; students; &#125; public class Student &#123; private int id; private String name; //æ·»åŠ classå¯¹è±¡å…³è”ä¿¡æ¯å› ä¸ºæ˜¯ä¸€æ–¹æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€ä¸ªå¯¹è±¡å…³è” private Classes classes; &#125; 1234567891011Student.hbm.xml&lt;hibernate-mapping&gt; &lt;class name="com.hibernate.Student" table="t_student"&gt; &lt;id name="id"&gt; &lt;generator class="native"/&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;!-- åœ¨å¤šçš„ä¸€ç«¯Studentä¸­æ·»åŠ ä¸€è¡Œæ–°çš„Classesåˆ— ,å¹¶ä¸”åˆ—çš„åç§°è¦å’ŒClasses.hbm.xmlçš„åˆ—æ˜Žç›¸åŒ--&gt; &lt;many-to-one name="classes" column="classesid"&gt;&lt;/many-to-one&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; å¤šå¯¹å¤šå…³è”æ˜ å°„å¤šå¯¹å¤šå…³è”æ˜¯æŒ‡å¤šä¸ªå¯¹è±¡å¯¹åº”å¤šä¸ªå¯¹è±¡ å¦‚ï¼šè€å¸ˆå¯ä»¥æœ‰å¤šä¸ªå­¦ç”Ÿï¼Œå­¦ç”Ÿä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè€å¸ˆ å¤šå¯¹å¤šå•å‘å…³è”Teacherâ€”â€”&gt;Student1234567891011public class Teacher &#123; private int id; private String name; private Set&lt;Student&gt; students = new HashSet&lt;Student&gt;();ï½public class Student &#123; private int id; private String name; private String title;ï½ Teacher.hbm.xml123456789101112131415&lt;hibernate-mapping&gt; &lt;class name="com.hibernate.Teacher" table="t_teacher"&gt; &lt;id name="id"&gt; &lt;generator class="native"/&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;!--ç”Ÿæˆä¸€å¼ æ–°è¡¨å­˜æ”¾ä¸¤ä¸ªå…³è”å¯¹è±¡çš„ID--&gt; &lt;set name="students" table="Teacher_Sutdent"&gt; &lt;!--å°†Teacherè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±žæ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt; &lt;key column="teacher_id"&gt;&lt;/key&gt; &lt;!--å°†Studentè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±žæ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt; &lt;many-to-many class="com.hibernate.Student" column="student_id"&gt;&lt;/many-to-many&gt; &lt;/set&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; å¤šå¯¹å¤šåŒå‘å…³è”Teacher&lt;â€”â€”&gt;Student123456789101112public class Teacher &#123; private int id; private String name; private Set&lt;Student&gt; students = new HashSet&lt;Student&gt;();ï½public class Student &#123; private int id; private String name; private String title; private Set&lt;Teacher&gt; teachers = new HashSet&lt;Teacher&gt;();ï½ Student.hbm.xml123456789101112131415&lt;hibernate-mapping&gt; &lt;class name="com.hibernate.Student" table="t_student"&gt; &lt;id name="id"&gt; &lt;generator class="native"/&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;!--ç”Ÿæˆä¸€å¼ æ–°è¡¨å­˜æ”¾ä¸¤ä¸ªè¡¨çš„Id--&gt; &lt;set name="teachers" table="Teacher_Student"&gt; &lt;!--å°†Teacherè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±žæ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt; &lt;key column="student_id"&gt;&lt;/key&gt; &lt;!--å°†Studentè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±žæ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt; &lt;many-to-many class="com.hibernate.Teacher" column="teacher_id"&gt;&lt;/many-to-many&gt; &lt;/set&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; Teacher.hbm.xml123456789101112131415&lt;hibernate-mapping&gt; &lt;class name="com.hibernate.Teacher" table="t_teacher"&gt; &lt;id name="id"&gt; &lt;generator class="native"/&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;!--ç”Ÿæˆä¸€å¼ æ–°è¡¨å­˜æ”¾ä¸¤ä¸ªå…³è”å¯¹è±¡çš„ID--&gt; &lt;set name="students" table="Teacher_Sutdent"&gt; &lt;!--å°†Teacherè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±žæ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt; &lt;key column="teacher_id"&gt;&lt;/key&gt; &lt;!--å°†Studentè¡¨çš„å¤–é”®å…³è” æ³¨æ„ä¸æ˜¯å¯¹è±¡çš„å±žæ€§æ˜¯è¡¨ä¸­çš„å­—æ®µ--&gt; &lt;many-to-many class="com.hibernate.Student" column="student_id"&gt;&lt;/many-to-many&gt; &lt;/set&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; å¤šå¯¹ä¸€å…³è”å¯¹æ¯”ä¸€å¯¹ä¸€å…³è”æ˜ å°„å’Œå¤šå¯¹ä¸€å”¯ä¸€å¤–é”®å…³è”æ˜ å°„ï¼Œå…¶å®žå®ƒä»¬ä¸¤ä¸ªéƒ½æ˜¯ä½¿ç”¨äº†æœ¬è´¨ä¸Šéƒ½æ˜¯å¤–é”®çº¦æŸï¼Œåªä¸è¿‡ä¸€å¯¹ä¸€çš„æ˜¯å”¯ä¸€æ˜ å°„ï¼Œéœ€è¦æ·»åŠ unique=â€trueâ€çš„å±žæ€§ï¼Œå…¶å®ƒçš„å®ƒä»¬ä¸¤ä¸ªæ˜¯ç›¸åŒçš„ å¤šå¯¹ä¸€å…³è”æ˜¯æŒ‡å¤šä¸ªå¯¹è±¡å¯¹åº”ä¸€ä¸ªå¯¹è±¡ å¦‚ï¼šå¤šä¸ªå‘˜å·¥å¯¹åº”ä¸€ä¸ªéƒ¨é—¨ å¤šå¯¹ä¸€å•å‘å…³è”12345678910public class Department &#123; private int id; private String name; &#125; public class Employee &#123; private int id; private String name; private Department depart;//æ³¨æ„è¿™é‡Œæ˜¯ä»¥éƒ¨é—¨çš„å¯¹è±¡æ¥ä½œä¸ºå‘˜å·¥çš„å±žæ€§çš„&#125; Employee.hbm.xml123456789101112&lt;hibernate-mapping package="com.suo.domain"&gt; &lt;class name="Employee"&gt; &lt;id name="id"&gt; &lt;generator class="native"/&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;many-to-one name="depart"&gt;&lt;/many-to-one&gt; &lt;!-- many-to-oneæŒ‡æ˜Žäº†å¤–é”® ï¼Œä¼šæ ¹æ®åå°„æœºåˆ¶ï¼Œæ‰¾åˆ°è¦å’ŒEmployeeå»ºç«‹å¤šå¯¹ä¸€å…³ç³»çš„ç±»ï¼Œè¯¥åˆ—é»˜è®¤çš„æ˜¯å¯ä»¥ä¸ºç©ºçš„--&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; å¤šå¯¹ä¸€åŒå‘å…³è”123456789101112public class Department &#123; private int id; private String name; private Set&lt;Employee&gt; emps;//ç”¨é›†åˆæ¥å­˜å‚¨å‘˜å·¥ &#125; public class Employee &#123; private int id; private String name; private Department depart;//æ³¨æ„è¿™é‡Œæ˜¯ä»¥éƒ¨é—¨çš„å¯¹è±¡æ¥ä½œä¸ºå‘˜å·¥çš„å±žæ€§çš„ï¼Œè¿™ä¸ªæ€æƒ³å¾ˆå…³é”®ï¼Œæ˜¯å»ºç«‹èµ·éƒ¨é—¨å’Œå‘˜å·¥å…³è”çš„å…³é”® &#125; Departement .hbm.xml12345678910111213141516171819&lt;hibernate-mapping package="com.suo.domain"&gt; &lt;class name="Department"&gt; &lt;id name="id"&gt; &lt;generator class="native"/&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;set name="emps"&gt; &lt;key column="depart_id"/&gt;&lt;!-- keyæŒ‡æ˜Žäº†å‘˜å·¥è¡¨ä¸­çš„å¤–é”®--&gt; &lt;one-to-many class="Employee"/&gt;&lt;!-- one-to-manyæŒ‡æ˜Žäº†å’Œå“ªä¸ªç±»è¿›è¡Œä¸€å¯¹å¤šçš„æ˜ å°„ --&gt; &lt;/set&gt; &lt;!-- ç”¨setæ ‡ç­¾è¡¨ç¤ºDepartmentä¸­çš„å‘˜å·¥é›†åˆçš„å±žæ€§ï¼Œè¿™ä¸ªå±žæ€§å¹¶æ²¡æœ‰æ˜ å°„åˆ°æ•°æ®åº“ä¸­çš„éƒ¨é—¨è¡¨ä¸­ï¼Œ å³éƒ¨é—¨è¡¨ä¸­ï¼Œå¹¶æ²¡æœ‰empsè¿™æ ·çš„ä¸€ä¸ªåˆ—ã€‚ --&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; Employee.hbm.xml123456789101112&lt;hibernate-mapping package="com.suo.domain"&gt; &lt;class name="Employee"&gt; &lt;id name="id"&gt; &lt;generator class="native"/&gt; &lt;/id&gt; &lt;property name="name"/&gt; &lt;many-to-one name="depart"&gt;&lt;/many-to-one&gt; &lt;!-- many-to-oneæŒ‡æ˜Žäº†å¤–é”® ï¼Œä¼šæ ¹æ®åå°„æœºåˆ¶ï¼Œæ‰¾åˆ°è¦å’ŒEmployeeå»ºç«‹å¤šå¯¹ä¸€å…³ç³»çš„ç±»ï¼Œè¯¥åˆ—é»˜è®¤çš„æ˜¯å¯ä»¥ä¸ºç©ºçš„--&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; çº§è”æ“ä½œCasadeCasadeç”¨æ¥è¯´æ˜Žå½“å¯¹ä¸»å¯¹è±¡è¿›è¡ŒæŸç§æ“ä½œæ—¶æ˜¯å¦å¯¹å…¶å…³è”çš„ä»Žå¯¹è±¡ä¹Ÿä½œç±»ä¼¼çš„æ“ä½œï¼Œå¸¸ç”¨çš„cascade:none,all,save-update,delete ä¸€èˆ¬å¯¹many-to-one,many-to-manyä¸è®¾ç½®çº§è”ï¼Œåœ¨å’Œä¸­è®¾ç½®çº§è” inverseinverseè¡¨â€œæ˜¯å¦æ”¾å¼ƒç»´æŠ¤å…³è”å…³ç³»â€(åœ¨Javaé‡Œä¸¤ä¸ªå¯¹è±¡äº§ç”Ÿå…³è”æ—¶ï¼Œå¯¹æ•°æ®åº“è¡¨çš„å½±å“)ï¼Œåœ¨one-to-manyå’Œmany-to-manyçš„é›†åˆå®šä¹‰ä¸­ä½¿ç”¨ï¼Œinverse=â€trueâ€è¡¨ç¤ºè¯¥å¯¹è±¡ä¸ç»´æŠ¤å…³è”å…³ç³»]]></content>
      <categories>
        <category>SSH</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[HQLå®žç”¨æŠ€æœ¯]]></title>
    <url>%2F2018%2F11%2F08%2FHQL%E5%AE%9E%E7%94%A8%E6%8A%80%E6%9C%AF%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æ¥å­¦ä¹ HQLè¯­å¥ ç¼–å†™HQLè¯­å¥fromå­å¥ ä¾‹ï¼šfrom com.entity.Dept; from Dept dept;â€“ä¸ºæŒä¹…åŒ–ç±»DeptæŒ‡å®šäº†åˆ«ådeptï¼›å¯çœç•¥åŒ…å selectå­å¥ ä¾‹ï¼šselect dept from Dept as dept; select dept.DeptName from Dept as dept;â€“é€‰å–å•ä¸ªå±žæ€§ï¼Œå¯é€‰æ‹©å¤šä¸ª whereå­å¥ä¾‹ï¼šfrom Dept where DeptName=â€™SALESâ€™; from Dept dept where dept.DeptName=â€™SALESâ€™; from Dept dept where dept.location is not null;â€“æŸ¥è¯¢åœ°å€ä¸ä¸ºç©ºçš„éƒ¨é—¨ ä½¿ç”¨è¡¨è¾¾å¼ ä¾‹ï¼šfrom Dept dept where lower(dept.DeptName)=â€™salesâ€™;â€“lower()æŠŠå­—ç¬¦ä¸²ä¸­çš„å­—æ¯è½¬æ¢æˆå°å†™ from Emp where year(hireDate)=1980;â€“year()ç”¨äºŽèŽ·å–æ—¥æœŸå­—æ®µçš„å¹´ä»½ order byå­å¥ ä¾‹ï¼šfrom Emp order by hireDate asc from Emp order by hireDate,salary desc; æ‰§è¡ŒHQLè¯­å¥ æ‰§è¡ŒHQLè¯­å¥æ­¥éª¤ 1ã€èŽ·å–sessionå¯¹è±¡ 2ã€ç¼–å†™HQLè¯­å¥ 3ã€åˆ›å»ºQueryå¯¹è±¡ 4ã€æ‰§è¡ŒæŸ¥è¯¢ å…ˆç»™å¤§å®¶çœ‹ä¸€äº›ç®€å•çš„ä¾‹å­å§ DAOå±‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687// æŸ¥è¯¢public List&lt;User&gt; findAllUser() &#123; return this.currentSession().createQuery("from User").list();&#125;// Iteratorè¿”å›žpublic Iterator&lt;User&gt; findAllUser_iterate() &#123; return this.currentSession().createQuery("from User").iterate();&#125;// æ ¹æ®å§“åæŸ¥è¯¢public Iterator&lt;User&gt; findAllUserByName() &#123; return this.currentSession().createQuery("from User where name='æŽé’°æ´‹'").iterate();&#125;// èŽ·å–å”¯ä¸€ç»“æžœpublic Long countUser() &#123; return (Long) this.currentSession().createQuery("select count(id) from User").uniqueResult();&#125;// å‚æ•°æŸ¥è¯¢,ä½ç½®ä»Ž0å¼€å§‹public List&lt;User&gt; findUserByName(String name) &#123; return this.currentSession().createQuery("from User where name=?").setString(0, name).list();&#125;// æŒ‰å‚æ•°åç»‘å®špublic List&lt;User&gt; findUserByName1(String name) &#123; return this.currentSession().createQuery("from User where name=:name1").setString("name1", name).list();&#125;// å¤šå‚æ•°æŸ¥è¯¢ +ç»“åˆä½ç½®public List&lt;User&gt; findByCoditions(Object[] param) &#123; Query query = this.currentSession().createQuery("from User where name=? and telephone=?"); if (param != null &amp;&amp; param.length != 0) &#123; for (int i = 0; i &lt; param.length; i++) &#123; query.setParameter(i, param[i]); &#125; &#125; return query.list();&#125;// å¤šå‚æ•°æŸ¥è¯¢ +ç»“åˆåç§° èµ›é«˜public List&lt;User&gt; findByCoditions(User param) &#123; Query query = this.currentSession().createQuery("from User where name=:name and telephone=:telephone"); query.setProperties(param); // èµ›é«˜ return query.list();&#125;// å¤šå‚æ•°æŸ¥è¯¢ +ç»“åˆåç§° èµ›é«˜ åŠ¨æ€hqlpublic List&lt;User&gt; findByCoditions(String hql, User param) &#123; Query query = this.currentSession().createQuery(hql); query.setProperties(param); // èµ›é«˜ return query.list();&#125;// å¤šå‚æ•°æŸ¥è¯¢ +ç»“åˆåç§° èµ›é«˜ åŠ¨æ€hql mappublic List&lt;User&gt; findByCoditions(String hql, Map&lt;String, Object&gt; param) &#123; Query query = this.currentSession().createQuery(hql); query.setProperties(param); // èµ›é«˜ return query.list();&#125;// åˆ†é¡µpublic List&lt;User&gt; findByPage(int pageNo, int pageSize) &#123; return this.currentSession().createQuery("from User order by id").setFirstResult((pageNo - 1) * pageSize) .setMaxResults(pageSize).list();&#125;// æ ¹æ®idé™åºèŽ·å–å‰3public List&lt;User&gt; findByOrder(int topSize) &#123; return this.currentSession().createQuery("from User order by id").setMaxResults(topSize).list();&#125;// æŠ•å½±æŸ¥è¯¢public List findByProjection() &#123; return this.currentSession().createQuery("select name from User").list();&#125;// æŠ•å½±æŸ¥è¯¢ æŸ¥å¤šåˆ—public List&lt;Object[]&gt; findByProjection2() &#123; return this.currentSession().createQuery("select name,telephone from User").list();&#125;//æž„é€ å‡½æ•°å°è£…å¯¹è±¡public List&lt;User&gt; findByProjection3() &#123; return this.currentSession().createQuery("select new User(name,telephone) from User").list();&#125; SERVICEå±‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292// æŸ¥è¯¢public List&lt;User&gt; findAllUser() &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findAllUser(); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// Iteratorè¿”å›žpublic Iterator&lt;User&gt; findAllUser_Iterator() &#123; Transaction tx = null; Iterator&lt;User&gt; list = null; try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findAllUser_iterate(); User u = new User(); while (list.hasNext()) &#123; u = list.next(); System.out.println(u.getName() + "è‰¸"); &#125; tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æ ¹æ®å§“åIteratorè¿”å›žpublic Iterator&lt;User&gt; findAllUser_IteratorByName() &#123; Transaction tx = null; Iterator&lt;User&gt; list = null; try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findAllUserByName(); User u = new User(); while (list.hasNext()) &#123; u = list.next(); System.out.println(u.getName() + "\\" + u.getTelephone()); &#125; tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// è¿”å›žå”¯ä¸€ç»“æžœpublic Long findAllUser_count() &#123; Transaction tx = null; Long count = null; try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); count = userDao.countUser(); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return count;&#125;// æŸ¥è¯¢+å‚æ•°public List&lt;User&gt; findAllUser_Name(String name) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findUserByName(name); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æŸ¥è¯¢+åç§°å‚æ•°public List&lt;User&gt; findAllUser_Name1(String name) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findUserByName1(name); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æŸ¥è¯¢+å¤šå‚æ•°public List&lt;User&gt; findAllbyCondinitions(Object[] param) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findByCoditions(param); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æŸ¥è¯¢+å¤šå‚æ•°public List&lt;User&gt; findAllbyCondinitions(User param) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findByCoditions(param); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æŸ¥è¯¢+å¤šå‚æ•° åŠ¨æ€hqlpublic List&lt;User&gt; findAllbyCondinitions1(User param) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); StringBuilder hql = new StringBuilder("from User where 1=1"); if (param.getName() != null &amp;&amp; param.getName().length() != 0) &#123; hql.append(" and name=:name"); &#125; if (param.getTelephone() != null &amp;&amp; param.getTelephone().length() != 0) &#123; hql.append(" and telephone=:telephone"); &#125; list = userDao.findByCoditions(hql.toString(), param); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æŸ¥è¯¢+å¤šå‚æ•° åŠ¨æ€hqlpublic List&lt;User&gt; findAllbyCondinitions2(Map&lt;String, Object&gt; param) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); StringBuilder hql = new StringBuilder("from User where 1=1"); if (param.get("name") != null &amp; ((String) param.get("name")).length() != 0) &#123; hql.append(" and name=:name"); &#125; if (param.get("telephone") != null &amp; ((String) param.get("telephone")).length() != 0) &#123; hql.append(" and telephone=:telephone"); &#125; list = userDao.findByCoditions(hql.toString(), param); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æŸ¥è¯¢åˆ†é¡µpublic List&lt;User&gt; findAllbyCondinitions3(int pageNo, int pageSize) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findByPage(pageNo, pageSize); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æ ¹æ®idé™åºæŸ¥è¯¢public List&lt;User&gt; findAllbyCondinitions4(int topSize) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findByOrder(topSize); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æŠ•å½±æŸ¥è¯¢public List&lt;Object&gt; findAllbyCondinitions5() &#123; Transaction tx = null; List&lt;Object&gt; list = null; try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findByProjection(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æŠ•å½±æŸ¥è¯¢ objectæ•°ç»„public List&lt;Object[]&gt; findAllbyCondinitions6() &#123; Transaction tx = null; List&lt;Object[]&gt; list = null; try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findByProjection2(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125;// æŠ•å½±æŸ¥è¯¢ æž„é€ å‡½æ•°å¯¹è±¡public List&lt;User&gt; findAllbyCondinitions7() &#123; Transaction tx = null; List&lt;User&gt; list = null; try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findByProjection3(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list;&#125; å‚æ•°ç»‘å®šå½¢å¼æŒ‰å‚æ•°ä½ç½®ç»‘å®šä¾‹ï¼šQuery query = session.createQueryï¼ˆâ€from Emp where job=? and salary&gt;?â€ï¼‰ï¼› query.setString(0,job);â€“ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½®ä¸ºé›¶ query.setDouble(1,salary); æŒ‰å‚æ•°åç§°ç»‘å®š ä¾‹ï¼šQuery query = session.createQuery(â€œfrom Emp where job=:empJob and salary&gt;:empSalaryâ€); query.setString(â€œempJobâ€,empJob); query.setDouble(â€œempSalaryâ€,empSalary); //æ³¨æ„è¿™é‡Œçš„æ‰€æœ‰å±žæ€§åŒ…æ‹¬è¡¨åéƒ½æ˜¯.hbm.xmlæ–‡ä»¶æ˜ å°„æ¥çš„æŒä¹…åŒ–ç±»å±žæ€§ ç»‘å®šå„ç§ç±»åž‹çš„å‚æ•° setBoolean():ç»‘å®šç±»åž‹ä¸ºBooleançš„å‚æ•° setByte():ç»‘å®šç±»åž‹ä¸ºByteçš„å‚æ•° setDouble():ç»‘å®šç±»åž‹ä¸ºDoubleçš„å‚æ•° setDate():ç»‘å®šç±»åž‹ä¸ºDateçš„å‚æ•° setString():ç»‘å®šç±»åž‹ä¸ºStringçš„å‚æ•° ä»¥ä¸Šæ–¹æ³•éƒ½æœ‰ä¸¤ç§é‡è½½æ–¹å¼ å¦‚ï¼š setString(int position,String val);â€“æŒ‰ä½ç½®ç»‘å®šå‚æ•° setString(String name,String val);â€“æŒ‰åç§°ç»‘å®šå‚æ•° setParameter()æ–¹æ³•ï¼šç»‘å®šä»»æ„ç±»åž‹å‚æ•°è¯¥æ–¹æ³•ä½¿ç”¨objectç±»åž‹ä½œä¸ºHQLå‚æ•°çš„ç±»åž‹ï¼Œå½“ä¸ä¾¿æŒ‡å®šå‚æ•°çš„ç±»åž‹å¸ˆï¼Œä½¿ç”¨setParameter()æ–¹æ³• setProperties(ç›´æŽ¥æ”¾å…¥ä¸€ä¸ªå¯¹è±¡)èµ›é«˜123456789101112131415161718192021222324public List&lt;User&gt; findByCoditions(User param) &#123; Query query = this.currentSession().createQuery("from User where name=:name and telephone=:telephone"); query.setProperties(param); // èµ›é«˜ return query.list(); &#125; ----- public List&lt;User&gt; findAllbyCondinitions(User param) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findByCoditions(param); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list; &#125; //å‰ææ˜¯å­—æ®µä¸€è‡´ï¼Œå¹¶ä¸”ä¸ä¸ºç©ºï¼ˆåŠ¨æ€hqlé™¤å¤–ï¼‰ ä½¿ç”¨uniqueResult()æ–¹æ³•èŽ·å–å”¯ä¸€ç»“æžœå½“æŸ¥è¯¢ç»“æžœä¸å”¯ä¸€æ—¶ï¼Œä¸èƒ½ä½¿ç”¨query.uniqueResult()æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥é”™ æŸ¥è¯¢LIST()12345678910111213141516171819202122public List&lt;User&gt; findAllUser() &#123; return this.currentSession().createQuery("from User").list();&#125;--serviceä½¿ç”¨listé›†åˆpublic List&lt;User&gt; findAllUser() &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findAllUser(); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list; &#125; ITERATE()12345678910111213141516171819202122232425262728public Iterator&lt;User&gt; findAllUser_iterate() &#123; return this.currentSession().createQuery("from User").iterate(); &#125; --serviceä½¿ç”¨Iterator&lt;&gt; public Iterator&lt;User&gt; findAllUser_Iterator() &#123; Transaction tx = null; Iterator&lt;User&gt; list = null; try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findAllUser_iterate(); User u = new User(); while (list.hasNext()) &#123; u = list.next(); System.out.println(u.getName() + "è‰¸"); &#125; tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list; &#125; //ITERATE()è¦æ¯”LIST()æ•ˆçŽ‡å¥½ï¼Œä½†æ˜¯ITERATEå¿…é¡»åœ¨serviceå±‚è¾“å‡ºæˆ–èµ‹å€¼ï¼Œå®ƒæ˜¯å…ˆæŸ¥ä¸»é”®idï¼Œå†åŽ»æŸ¥æ‰¾æ•°æ® åŠ¨æ€æŸ¥è¯¢123456789101112131415161718192021222324252627282930public List&lt;User&gt; findByCoditions(String hql, User param) &#123; Query query = this.currentSession().createQuery(hql); query.setProperties(param); // èµ›é«˜ return query.list(); &#125; ---ä¸»è¦çš„service public List&lt;User&gt; findAllbyCondinitions1(User param) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); StringBuilder hql = new StringBuilder("from User where 1=1"); if (param.getName() != null &amp;&amp; param.getName().length() != 0) &#123; hql.append(" and name=:name"); &#125; if (param.getTelephone() != null &amp;&amp; param.getTelephone().length() != 0) &#123; hql.append(" and telephone=:telephone"); &#125; list = userDao.findByCoditions(hql.toString(), param); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list; &#125; åŠ¨æ€æŸ¥è¯¢ mapå‚æ•°12345678910111213141516171819202122232425262728293031public List&lt;User&gt; findByCoditions(String hql, Map&lt;String, Object&gt; param) &#123; Query query = this.currentSession().createQuery(hql); query.setProperties(param); // èµ›é«˜ return query.list(); &#125; ---service public List&lt;User&gt; findAllbyCondinitions2(Map&lt;String, Object&gt; param) &#123; Transaction tx = null; List&lt;User&gt; list = new ArrayList&lt;User&gt;(); try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); StringBuilder hql = new StringBuilder("from User where 1=1"); if (param.get("name") != null &amp; ((String) param.get("name")).length() != 0) &#123; hql.append(" and name=:name"); &#125; if (param.get("telephone") != null &amp; ((String) param.get("telephone")).length() != 0) &#123; hql.append(" and telephone=:telephone"); &#125; list = userDao.findByCoditions(hql.toString(), param); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list; &#125; åˆ†é¡µæŸ¥è¯¢ä¸»è¦çš„æ˜¯setFirstResult()ä¸ŽsetMaxResults()1234public List&lt;User&gt; findByPage(int pageNo, int pageSize) &#123; return this.currentSession().createQuery("from User order by id").setFirstResult((pageNo - 1) * pageSize) .setMaxResults(pageSize).list(); &#125; èŽ·å–å‰å‡ ä¸ªæ•°æ®123public List&lt;User&gt; findByOrder(int topSize) &#123; return this.currentSession().createQuery("from User order by id").setMaxResults(topSize).list(); &#125; æŠ•å½±æŸ¥è¯¢(åªèŽ·å–å•ä¸ª)123456789101112131415161718192021public List findByProjection() &#123; return this.currentSession().createQuery("select name from User").list(); &#125; ---service public List&lt;Object&gt; findAllbyCondinitions5() &#123; Transaction tx = null; List&lt;Object&gt; list = null; try &#123; UserDao userDao = new UserDao(); tx = userDao.currentSession().beginTransaction(); list = userDao.findByProjection(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if (tx != null) &#123; tx.rollback(); &#125; &#125; return list; &#125; æŠ•å½±æŸ¥è¯¢(å¤šä¸ªå­—æ®µ)123456789101112public List&lt;Object[]&gt; findByProjection2() &#123; return this.currentSession().createQuery("select name,telephone from User").list(); &#125; ---test public void findPro2() &#123; List&lt;Object[]&gt; list = new UserBiz().findAllbyCondinitions6(); for (Object[] object : list) &#123; System.out.println(object[0] + "\t" + object[1]); &#125; &#125; å°†æŸ¥è¯¢ç»“æžœé€šè¿‡æž„é€ å‡½æ•°å°è£…ä¸ºå¯¹è±¡12345678910public List&lt;User&gt; findByProjection3() &#123; return this.currentSession().createQuery("select new User(name,telephone) from User").list(); &#125; --æž„é€ æ–¹æ³• public User(String name,String telephone)&#123; this.name=name; this.telephone=telephone; &#125;]]></content>
      <categories>
        <category>SSH</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[é¢è¯•26é—®]]></title>
    <url>%2F2018%2F11%2F08%2F%E9%9D%A2%E8%AF%9526%E9%97%AE%2F</url>
    <content type="text"><![CDATA[è¯·ä½ è‡ªæˆ‘ä»‹ç»ä¸€ä¸‹è‡ªå·±å¥½å—ä¸€èˆ¬äººå›žç­”è¿™ä¸ªé—®é¢˜è¿‡äºŽå¹³å¸¸ï¼Œåªè¯´å§“åã€å¹´é¾„ã€çˆ±å¥½ã€å·¥ä½œç»éªŒï¼Œè¿™äº›åœ¨ç®€åŽ†ä¸Šéƒ½æœ‰ã€‚å…¶å®žï¼Œä¼ä¸šæœ€å¸Œæœ›çŸ¥é“çš„æ˜¯æ±‚èŒè€…èƒ½å¦èƒœä»»å·¥ä½œï¼ŒåŒ…æ‹¬ï¼šæœ€å¼ºçš„æŠ€èƒ½ã€æœ€æ·±å…¥ç ”ç©¶çš„çŸ¥è¯†é¢†åŸŸã€ä¸ªæ€§ä¸­æœ€ç§¯æžçš„éƒ¨åˆ†ã€åšè¿‡çš„æœ€æˆåŠŸçš„äº‹ï¼Œä¸»è¦çš„æˆå°±ç­‰ï¼Œè¿™äº›éƒ½å¯ä»¥å’Œå­¦ä¹ æ— å…³ï¼Œä¹Ÿå¯ä»¥å’Œå­¦ä¹ æœ‰å…³ï¼Œä½†è¦çªå‡ºç§¯æžçš„ä¸ªæ€§å’Œåšäº‹çš„èƒ½åŠ›ï¼Œè¯´å¾—åˆæƒ…åˆç†ä¼ä¸šæ‰ä¼šç›¸ä¿¡ã€‚ä¼ä¸šå¾ˆé‡è§†ä¸€ä¸ªäººçš„ç¤¼è²Œï¼Œæ±‚èŒè€…è¦å°Šé‡è€ƒå®˜ï¼Œåœ¨å›žç­”æ¯ä¸ªé—®é¢˜ä¹‹åŽéƒ½è¯´ä¸€å¥â€œè°¢è°¢â€ï¼Œä¼ä¸šå–œæ¬¢æœ‰ç¤¼è²Œçš„æ±‚èŒè€…ã€‚ ä½ è§‰å¾—ä½ ä¸ªæ€§ä¸Šæœ€å¤§çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆæ²‰ç€å†·é™ã€æ¡ç†æ¸…æ¥šã€ç«‹åœºåšå®šã€é¡½å¼ºå‘ä¸Šã€ä¹äºŽåŠ©äººå’Œå…³å¿ƒä»–äººã€é€‚åº”èƒ½åŠ›å’Œå¹½é»˜æ„Ÿã€ä¹è§‚å’Œå‹çˆ±ã€‚æˆ‘åœ¨xxxç»è¿‡ä¸€åˆ°ä¸¤å¹´çš„é¡¹ç›®å®žæˆ˜ï¼ŒåŠ ä¸Šå®žä¹ å·¥ä½œï¼Œä½¿æˆ‘é€‚åˆè¿™ä»½å·¥ä½œ è¯´è¯´ä½ æœ€å¤§çš„ç¼ºç‚¹è¿™ä¸ªé—®é¢˜ä¼ä¸šé—®çš„æ¦‚çŽ‡å¾ˆå¤§ï¼Œé€šå¸¸ä¸å¸Œæœ›å¬åˆ°ç›´æŽ¥å›žç­”çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆç­‰ï¼Œå¦‚æžœæ±‚èŒè€…è¯´è‡ªå·±å°å¿ƒçœ¼ã€çˆ±å¿Œå¦’äººã€éžå¸¸æ‡’ã€è„¾æ°”å¤§ã€å·¥ä½œæ•ˆçŽ‡ä½Žï¼Œä¼ä¸šè‚¯å®šä¸ä¼šå½•ç”¨ä½ ã€‚ç»å¯¹ä¸è¦è‡ªä½œèªæ˜Žåœ°å›žç­”â€œæˆ‘æœ€å¤§çš„ç¼ºç‚¹æ˜¯è¿‡äºŽè¿½æ±‚å®Œç¾Žâ€ï¼Œæœ‰çš„äººä»¥ä¸ºè¿™æ ·å›žç­”ä¼šæ˜¾å¾—è‡ªå·±æ¯”è¾ƒå‡ºè‰²ï¼Œä½†äº‹å®žä¸Šï¼Œä»–å·²ç»å²Œå²Œå¯å±äº†ã€‚ä¼ä¸šå–œæ¬¢æ±‚èŒè€…ä»Žè‡ªå·±çš„ä¼˜ç‚¹è¯´èµ·ï¼Œä¸­é—´åŠ ä¸€äº›å°ç¼ºç‚¹ï¼Œæœ€åŽå†æŠŠé—®é¢˜è½¬å›žåˆ°ä¼˜ç‚¹ä¸Šï¼Œçªå‡ºä¼˜ç‚¹çš„éƒ¨åˆ†ï¼Œä¼ä¸šå–œæ¬¢èªæ˜Žçš„æ±‚èŒè€… ä½ å¯¹è–ªèµ„çš„è¦æ±‚å¦‚æžœä½ å¯¹è–ªé…¬çš„è¦æ±‚å¤ªä½Žï¼Œé‚£æ˜¾ç„¶è´¬ä½Žè‡ªå·±çš„èƒ½åŠ›ï¼›å¦‚æžœä½ å¯¹è–ªé…¬çš„è¦æ±‚å¤ªé«˜ï¼Œé‚£åˆä¼šæ˜¾å¾—ä½ åˆ†é‡è¿‡é‡ï¼Œå…¬å¸å—ç”¨ä¸èµ·ã€‚ä¸€äº›é›‡ä¸»é€šå¸¸éƒ½äº‹å…ˆå¯¹æ±‚è˜çš„èŒä½å®šä¸‹å¼€æ”¯é¢„ç®—ï¼Œå› è€Œä»–ä»¬ç¬¬ä¸€æ¬¡æå‡ºçš„ä»·é’±å¾€å¾€æ˜¯ä»–ä»¬æ‰€èƒ½ç»™äºˆçš„æœ€é«˜ä»·é’±ï¼Œä»–ä»¬é—®ä½ åªä¸è¿‡æƒ³è¯å®žä¸€ä¸‹è¿™ç¬”é’±æ˜¯å¦è¶³ä»¥å¼•èµ·ä½ å¯¹è¯¥å·¥ä½œçš„å…´è¶£ å›žç­”æ ·æœ¬ä¸€ï¼šæˆ‘å¯¹å·¥èµ„æ²¡æœ‰ç¡¬æ€§è¦æ±‚ï¼Œæˆ‘ç›¸ä¿¡è´µå…¬å¸åœ¨å¤„ç†æˆ‘çš„é—®é¢˜ä¸Šä¼šå‹å–„åˆç†ã€‚æˆ‘æ³¨é‡çš„æ˜¯æ‰¾å¯¹å·¥ä½œæœºä¼šï¼Œæ‰€ä»¥åªè¦æ¡ä»¶å…¬å¹³ï¼Œæˆ‘åˆ™ä¸ä¼šè®¡è¾ƒå¤ªå¤šã€‚ å›žç­”æ ·æœ¬äºŒï¼šæˆ‘å—è¿‡ç³»ç»Ÿçš„è½¯ä»¶ç¼–ç¨‹çš„è®­ç»ƒï¼Œä¸éœ€è¦è¿›è¡Œå¤§é‡çš„åŸ¹è®­ï¼Œè€Œä¸”æˆ‘æœ¬äººä¹Ÿå¯¹ç¼–ç¨‹ç‰¹åˆ«æ„Ÿå…´è¶£ã€‚å› æ­¤ï¼Œæˆ‘å¸Œæœ›å…¬å¸èƒ½æ ¹æ®æˆ‘çš„æƒ…å†µå’Œå¸‚åœºæ ‡å‡†çš„æ°´å¹³ï¼Œç»™æˆ‘åˆç†çš„è–ªæ°´ã€‚ ä½ å¯¹åŠ ç­çš„çœ‹æ³•å®žé™…ä¸Šå¥½å¤šå…¬å¸é—®è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸è¯æ˜Žä¸€å®šè¦åŠ ç­ï¼Œåªæ˜¯æƒ³æµ‹è¯•ä½ æ˜¯å¦æ„¿æ„ä¸ºå…¬å¸å¥‰çŒ® å›žç­”æ ·æœ¬ï¼šå¦‚æžœå·¥ä½œéœ€è¦æˆ‘ä¼šä¹‰ä¸å®¹è¾žåŠ ç­ï¼Œæˆ‘çŽ°åœ¨å•èº«ï¼Œæ²¡æœ‰ä»»ä½•å®¶åº­è´Ÿæ‹…ï¼Œå¯ä»¥å…¨èº«å¿ƒçš„æŠ•å…¥å·¥ä½œã€‚ä½†åŒæ—¶æˆ‘ä¹Ÿä¼šæé«˜å·¥ä½œæ•ˆçŽ‡ï¼Œå‡å°‘ä¸å¿…è¦çš„åŠ ç­ å¦‚æžœé€šè¿‡è¿™æ¬¡é¢è¯•æˆ‘ä»¬å½•ç”¨äº†ä½ ï¼Œä½†å·¥ä½œä¸€æ®µæ—¶é—´å´å‘çŽ°ä½ æ ¹æœ¬ä¸é€‚åˆè¿™ä¸ªèŒä½ï¼Œä½ æ€Žä¹ˆåŠžä¸€æ®µæ—¶é—´å‘çŽ°å·¥ä½œä¸é€‚åˆæˆ‘ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼šâ‘ å¦‚æžœä½ ç¡®å®žçƒ­çˆ±è¿™ä¸ªèŒä¸šï¼Œé‚£ä½ å°±è¦ä¸æ–­å­¦ä¹ ï¼Œè™šå¿ƒå‘é¢†å¯¼å’ŒåŒäº‹å­¦ä¹ ä¸šåŠ¡çŸ¥è¯†å’Œå¤„äº‹ç»éªŒï¼Œäº†è§£è¿™ä¸ªèŒä¸šçš„ç²¾ç¥žå†…æ¶µå’ŒèŒä¸šè¦æ±‚ï¼ŒåŠ›äº‰å‡å°‘å·®è·ï¼›â‘¡ä½ è§‰å¾—è¿™ä¸ªèŒä¸šå¯æœ‰å¯æ— ï¼Œé‚£è¿˜æ˜¯è¶æ—©æ¢ä¸ªèŒä¸šï¼ŒåŽ»å‘çŽ°é€‚åˆä½ çš„ï¼Œä½ çƒ­çˆ±çš„èŒä¸šï¼Œé‚£æ ·ä½ çš„å‘å±•å‰é€”ä¹Ÿä¼šå¤§ç‚¹ï¼Œå¯¹å•ä½å’Œä¸ªäººéƒ½æœ‰å¥½å¤„ è°ˆè°ˆä½ å¯¹è·³æ§½çš„çœ‹æ³•â‘ æ­£å¸¸çš„â€œè·³æ§½â€èƒ½ä¿ƒè¿›äººæ‰åˆç†æµåŠ¨ï¼Œåº”è¯¥æ”¯æŒã€‚â‘¡é¢‘ç¹çš„è·³æ§½å¯¹å•ä½å’Œä¸ªäººåŒæ–¹éƒ½ä¸åˆ©ï¼Œåº”è¯¥åå¯¹ å·¥ä½œä¸­éš¾ä»¥å’ŒåŒäº‹ã€ä¸Šå¸ç›¸å¤„ï¼Œä½ è¯¥æ€Žä¹ˆåŠžâ‘ æˆ‘ä¼šæœä»Žé¢†å¯¼çš„æŒ‡æŒ¥ï¼Œé…åˆåŒäº‹çš„å·¥ä½œã€‚â‘¡æˆ‘ä¼šä»Žè‡ªèº«æ‰¾åŽŸå› ï¼Œä»”ç»†åˆ†æžæ˜¯ä¸æ˜¯è‡ªå·±å·¥ä½œåšå¾—ä¸å¥½è®©é¢†å¯¼ä¸æ»¡æ„ï¼ŒåŒäº‹çœ‹ä¸æƒ¯ã€‚è¿˜è¦çœ‹çœ‹æ˜¯ä¸æ˜¯ä¸ºäººå¤„ä¸–æ–¹é¢åšå¾—ä¸å¥½ï¼Œå¦‚æžœæ˜¯è¿™æ ·çš„è¯æˆ‘ä¼šåŠªåŠ›æ”¹æ­£ã€‚â‘¢å¦‚æžœæˆ‘æ‰¾ä¸åˆ°åŽŸå› ï¼Œæˆ‘ä¼šæ‰¾æœºä¼šè·Ÿä»–ä»¬æ²Ÿé€šï¼Œè¯·ä»–ä»¬æŒ‡å‡ºæˆ‘çš„ä¸è¶³ï¼Œæœ‰é—®é¢˜å°±åŠæ—¶æ”¹æ­£ã€‚â‘£ä½œä¸ºä¼˜ç§€çš„å‘˜å·¥ï¼Œåº”è¯¥æ—¶åˆ»ä»¥å¤§å±€ä¸ºé‡ï¼Œå³ä½¿åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œé¢†å¯¼å’ŒåŒäº‹å¯¹æˆ‘ä¸ç†è§£ï¼Œæˆ‘ä¹Ÿä¼šåšå¥½æœ¬èŒå·¥ä½œï¼Œè™šå¿ƒå‘ä»–ä»¬å­¦ä¹ ï¼Œæˆ‘ç›¸ä¿¡ï¼Œä»–ä»¬ä¼šçœ‹è§æˆ‘åœ¨åŠªåŠ›ï¼Œæ€»æœ‰ä¸€å¤©ä¼šå¯¹æˆ‘å¾®ç¬‘çš„ ä½ å¯¹äºŽæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘åœ¨åŽ»å…¬å¸é¢è¯•å‰ä¸Šç½‘æŸ¥ä¸€ä¸‹è¯¥å…¬å¸ä¸»è¥ä¸šåŠ¡ã€‚å¦‚å›žç­”ï¼šè´µå…¬å¸æœ‰æ„æ”¹å˜ç­–ç•¥ï¼ŒåŠ å¼ºä¸Žå›½å¤–å¤§åŽ‚çš„OEMåˆä½œï¼Œè‡ªæœ‰å“ç‰Œçš„éƒ¨åˆ†åˆ™é€è¿‡æµ·å¤–ç»é”€å•† æœ€èƒ½æ¦‚æ‹¬ä½ è‡ªå·±çš„ä¸‰ä¸ªè¯æ˜¯ä»€ä¹ˆé€‚åº”èƒ½åŠ›å¼ºï¼Œæœ‰è´£ä»»å¿ƒå’Œåšäº‹æœ‰å§‹ç»ˆï¼Œç»“åˆå…·ä½“ä¾‹å­å‘ä¸»è€ƒå®˜è§£é‡Š ä½ çš„ä¸šä½™çˆ±å¥½æ˜¯ä»€ä¹ˆæ‰¾ä¸€äº›å¯ŒäºŽå›¢ä½“åˆä½œç²¾ç¥žçš„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªçœŸå®žçš„æ•…äº‹ï¼šæœ‰äººè¢«å¦å†³æŽ‰ï¼Œå› ä¸ºä»–çš„çˆ±å¥½æ˜¯æ·±æµ·æ½œæ°´ã€‚ä¸»è€ƒå®˜è¯´ï¼šå› ä¸ºè¿™æ˜¯ä¸€é¡¹å•äººæ´»åŠ¨ï¼Œæˆ‘ä¸æ•¢è‚¯å®šä»–èƒ½å¦é€‚åº”å›¢ä½“å·¥ä½œ ä½œä¸ºè¢«é¢è¯•è€…ç»™æˆ‘æ‰“ä¸€ä¸‹åˆ†è¯•ç€åˆ—å‡ºå››ä¸ªä¼˜ç‚¹å’Œä¸€ä¸ªéžå¸¸éžå¸¸éžå¸¸å°çš„ç¼ºç‚¹ï¼ˆå¯ä»¥æŠ±æ€¨ä¸€ä¸‹è®¾æ–½ï¼Œæ²¡æœ‰æ˜Žç¡®è´£ä»»äººçš„ç¼ºç‚¹æ˜¯ä¸ä¼šæœ‰äººä»‹æ„çš„ï¼‰ ä½ ä¸ºä»€ä¹ˆè¦ç¦»å¼€åŽŸæ¥çš„å…¬å¸â‘ å›žç­”è¿™ä¸ªé—®é¢˜æ—¶ä¸€å®šè¦å°å¿ƒï¼Œå°±ç®—åœ¨å‰ä¸€ä¸ªå·¥ä½œå—åˆ°å†å¤§çš„å§”å±ˆï¼Œå¯¹å…¬å¸æœ‰å¤šå°‘çš„æ€¨è¨€ï¼Œéƒ½åƒä¸‡ä¸è¦è¡¨çŽ°å‡ºæ¥ï¼Œå°¤å…¶è¦é¿å…å¯¹å…¬å¸æœ¬èº«ä¸»ç®¡çš„æ‰¹è¯„ï¼Œé¿å…é¢è¯•å®˜çš„è´Ÿé¢æƒ…ç»ªåŠå°è±¡ã€‚å»ºè®®æ­¤æ—¶æœ€å¥½çš„å›žç­”æ–¹å¼æ˜¯å°†é—®é¢˜å½’å’Žåœ¨è‡ªå·±èº«ä¸Šï¼Œä¾‹å¦‚è§‰å¾—å·¥ä½œæ²¡æœ‰å­¦ä¹ å‘å±•çš„ç©ºé—´ï¼Œè‡ªå·±æƒ³åœ¨é¢è¯•å·¥ä½œçš„ç›¸å…³äº§ä¸šä¸­å¤šåŠ å­¦ä¹ ï¼Œæˆ–æ˜¯å‰ä¸€ä»½å·¥ä½œä¸Žè‡ªå·±çš„ç”Ÿæ¶¯è§„åˆ’ä¸åˆç­‰ç­‰ï¼Œå›žç­”çš„ç­”æ¡ˆæœ€å¥½æ˜¯ç§¯æžæ­£é¢çš„ã€‚â‘¡æˆ‘å¸Œæœ›èƒ½èŽ·å¾—ä¸€ä»½æ›´å¥½çš„å·¥ä½œï¼Œå¦‚æžœæœºä¼šæ¥ä¸´ï¼Œæˆ‘ä¼šæŠ“ä½ã€‚æˆ‘è§‰å¾—ç›®å‰çš„å·¥ä½œï¼Œå·²ç»è¾¾åˆ°é¡¶å³°ï¼Œå³æ²¡æœ‰å‡è¿æœºä¼š ä½ æ¬£èµå“ªç§æ€§æ ¼çš„äººè¯šå®žã€ä¸æ­»æ¿è€Œä¸”å®¹æ˜“ç›¸å¤„çš„äººã€æœ‰â€œå®žé™…è¡ŒåŠ¨â€çš„äºº ä½ é€šå¸¸å¦‚ä½•å¯¹å¾…åˆ«äººçš„æ‰¹è¯„â‘ æ²ˆé»˜æ˜¯é‡‘ï¼Œä¸å¿…è¯´ä»€ä¹ˆï¼Œå¦åˆ™æƒ…å†µæ›´ç³Ÿï¼Œä¸è¿‡æˆ‘ä¼šæŽ¥å—å»ºè®¾æ€§çš„æ‰¹è¯„ã€‚â‘¡æˆ‘ä¼šç­‰å¤§å®¶å†·é™ä¸‹æ¥å†è®¨è®º æ€Žæ ·å¯¹å¾…è‡ªå·±çš„å¤±è´¥æˆ‘ä»¬å¤§å®¶ç”Ÿæ¥éƒ½ä¸æ˜¯åå…¨åç¾Žçš„ï¼Œæˆ‘ç›¸ä¿¡æˆ‘æœ‰ç¬¬äºŒä¸ªæœºä¼šæ”¹æ­£æˆ‘çš„é”™è¯¯ ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸æ¥å·¥ä½œå¯¹äºŽè¿™ä¸ªé—®é¢˜ï¼Œä½ è¦æ ¼å¤–å°å¿ƒï¼Œå¦‚æžœä½ å·²ç»å¯¹è¯¥å•ä½ä½œäº†ç ”ç©¶ï¼Œä½ å¯ä»¥å›žç­”ä¸€äº›è¯¦ç»†çš„åŽŸå› ï¼Œåƒâ€œå…¬å¸æœ¬èº«çš„é«˜æŠ€æœ¯å¼€å‘çŽ¯å¢ƒå¾ˆå¸å¼•æˆ‘ã€‚â€ã€â€œæˆ‘åŒå…¬å¸å‡ºç”Ÿåœ¨åŒæ ·çš„æ—¶ä»£ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿè¿›å…¥ä¸€å®¶ä¸Žæˆ‘å…±åŒæˆé•¿çš„å…¬å¸ã€‚â€ã€â€œä½ ä»¬å…¬å¸ä¸€ç›´éƒ½ç¨³å®šå‘å±•ï¼Œåœ¨è¿‘å‡ å¹´æ¥åœ¨å¸‚åœºä¸Šå¾ˆæœ‰ç«žäº‰åŠ›ã€‚â€ã€â€œæˆ‘è®¤ä¸ºè´µå…¬å¸èƒ½å¤Ÿç»™æˆ‘æä¾›ä¸€ä¸ªä¸Žä¼—ä¸åŒçš„å‘å±•é“è·¯ã€‚â€è¿™éƒ½æ˜¾ç¤ºå‡ºä½ å·²ç»åšäº†ä¸€äº›è°ƒæŸ¥ï¼Œä¹Ÿè¯´æ˜Žä½ å¯¹è‡ªå·±çš„æœªæ¥æœ‰äº†è¾ƒä¸ºå…·ä½“çš„è¿œæ™¯è§„åˆ’ å¯¹è¿™é¡¹å·¥ä½œï¼Œä½ æœ‰å“ªäº›å¯é¢„è§çš„å›°éš¾â‘ ä¸å®œç›´æŽ¥è¯´å‡ºå…·ä½“çš„å›°éš¾ï¼Œå¦åˆ™å¯èƒ½ä»¤å¯¹æ–¹æ€€ç–‘åº”è˜è€…ä¸è¡Œã€‚â‘¡å¯ä»¥å°è¯•è¿‚å›žæˆ˜æœ¯ï¼Œè¯´å‡ºåº”è˜è€…å¯¹å›°éš¾æ‰€æŒæœ‰çš„æ€åº¦â€”â€”å·¥ä½œä¸­å‡ºçŽ°ä¸€äº›å›°éš¾æ˜¯æ­£å¸¸çš„ï¼Œä¹Ÿæ˜¯éš¾å…çš„ï¼Œä½†æ˜¯åªè¦æœ‰åšå¿ä¸æ‹”çš„æ¯…åŠ›ã€è‰¯å¥½çš„åˆä½œç²¾ç¥žä»¥åŠäº‹å‰å‘¨å¯†è€Œå……åˆ†çš„å‡†å¤‡ï¼Œä»»ä½•å›°éš¾éƒ½æ˜¯å¯ä»¥å…‹æœ å¦‚æžœå½•ç”¨äº†ä½ ï¼Œä½ å°†æ€Žæ ·å¼€å±•å·¥ä½œ â‘ å¦‚æžœåº”è˜è€…å¯¹äºŽåº”è˜çš„èŒä½ç¼ºä¹è¶³å¤Ÿçš„äº†è§£ï¼Œæœ€å¥½ä¸è¦ç›´æŽ¥è¯´å‡ºè‡ªå·±å¼€å±•å·¥ä½œçš„å…·ä½“åŠžæ³•ã€‚â‘¡å¯ä»¥å°è¯•é‡‡ç”¨è¿‚å›žæˆ˜æœ¯æ¥å›žç­”ï¼Œå¦‚â€œé¦–å…ˆå¬å–é¢†å¯¼çš„æŒ‡ç¤ºå’Œè¦æ±‚ï¼Œç„¶åŽå°±æœ‰å…³æƒ…å†µè¿›è¡Œäº†è§£å’Œç†Ÿæ‚‰ï¼ŒæŽ¥ä¸‹æ¥åˆ¶å®šä¸€ä»½è¿‘æœŸçš„å·¥ä½œè®¡åˆ’å¹¶æŠ¥é¢†å¯¼æ‰¹å‡†ï¼Œæœ€åŽæ ¹æ®è®¡åˆ’å¼€å±•å·¥ä½œã€‚â€ã€‚åˆ†æžï¼šè¿™ä¸ªé—®é¢˜çš„ä¸»è¦ç›®çš„ä¹Ÿæ˜¯äº†è§£åº”è˜è€…çš„å·¥ä½œèƒ½åŠ›å’Œè®¡åˆ’æ€§ã€æ¡ç†æ€§ï¼Œè€Œä¸”é‡ç‚¹æƒ³è¦çŸ¥é“ç»†èŠ‚ã€‚å¦‚æžœå‘æ€è·¯ä¸­æ‰€è®²çš„è¿‚å›žæˆ˜æœ¯ï¼Œé¢è¯•å®˜ä¼šè®¤ä¸ºå›žé¿é—®é¢˜ï¼Œå¦‚æžœå¼•å¯¼äº†å‡ æ¬¡ä»ç„¶æ˜¯å›žé¿çš„è¯ï¼Œæ­¤äººç»å¯¹ä¸ä¼šå½•ç”¨äº† ä½ å¸Œæœ›ä¸Žä»€ä¹ˆæ ·çš„ä¸Šçº§å…±äº‹â‘ é€šè¿‡åº”è˜è€…å¯¹ä¸Šçº§çš„â€œå¸Œæœ›â€å¯ä»¥åˆ¤æ–­å‡ºåº”è˜è€…å¯¹è‡ªæˆ‘è¦æ±‚çš„æ„è¯†ï¼Œè¿™æ—¢ä¸Šä¸€ä¸ªé™·é˜±ï¼Œåˆæ˜¯ä¸€æ¬¡æœºä¼šã€‚â‘¡æœ€å¥½å›žé¿å¯¹ä¸Šçº§å…·ä½“çš„å¸Œæœ›ï¼Œå¤šè°ˆå¯¹è‡ªå·±çš„è¦æ±‚ã€‚â‘¢å¦‚â€œåšä¸ºåˆšæ­¥å…¥ç¤¾ä¼šçš„æ–°äººï¼Œæˆ‘åº”è¯¥å¤šè¦æ±‚è‡ªå·±å°½å¿«ç†Ÿæ‚‰çŽ¯å¢ƒã€é€‚åº”çŽ¯å¢ƒï¼Œè€Œä¸åº”è¯¥å¯¹çŽ¯å¢ƒæå‡ºä»€ä¹ˆè¦æ±‚ï¼Œåªè¦èƒ½å‘æŒ¥æˆ‘çš„ä¸“é•¿å°±å¯ä»¥äº†ã€‚åˆ†æžï¼šè¿™ä¸ªé—®é¢˜æ¯”è¾ƒå¥½çš„å›žç­”æ˜¯ï¼Œå¸Œæœ›æˆ‘çš„ä¸Šçº§èƒ½å¤Ÿåœ¨å·¥ä½œä¸­å¯¹æˆ‘å¤šæŒ‡å¯¼ï¼Œå¯¹æˆ‘å·¥ä½œä¸­çš„é”™è¯¯èƒ½å¤Ÿç«‹å³æŒ‡å‡ºã€‚æ€»ä¹‹ï¼Œä»Žä¸Šçº§æŒ‡å¯¼è¿™ä¸ªæ–¹é¢è°ˆï¼Œä¸ä¼šæœ‰å¤§çš„çº°æ¼ ä¸Žä¸Šçº§æ„è§ä¸ä¸€æ—¶ï¼Œä½ å°†æ€Žä¹ˆåŠžâ‘ ä¸€èˆ¬å¯ä»¥è¿™æ ·å›žç­”â€œæˆ‘ä¼šç»™ä¸Šçº§ä»¥å¿…è¦çš„è§£é‡Šå’Œæé†’ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä¼šæœä»Žä¸Šçº§çš„æ„è§ã€‚â€â‘¡å¦‚æžœé¢è¯•ä½ çš„æ˜¯æ€»ç»ç†ï¼Œè€Œä½ æ‰€åº”è˜çš„èŒä½å¦æœ‰ä¸€ä½ç»ç†ï¼Œä¸”è¿™ä½ç»ç†å½“æ—¶ä¸åœ¨åœºï¼Œå¯ä»¥è¿™æ ·å›žç­”ï¼šâ€œå¯¹äºŽéžåŽŸåˆ™æ€§é—®é¢˜ï¼Œæˆ‘ä¼šæœä»Žä¸Šçº§çš„æ„è§ï¼Œå¯¹äºŽæ¶‰åŠå…¬å¸åˆ©ç›Šçš„é‡å¤§é—®é¢˜ï¼Œæˆ‘å¸Œæœ›èƒ½å‘æ›´é«˜å±‚é¢†å¯¼åæ˜  è°ˆè°ˆå¦‚ä½•é€‚åº”åŠžå…¬å®¤å·¥ä½œçš„æ–°çŽ¯å¢ƒâ‘ åŠžå…¬å®¤é‡Œæ¯ä¸ªäººæœ‰å„è‡ªçš„å²—ä½ä¸ŽèŒè´£ï¼Œä¸å¾—æ“…ç¦»å²—ä½ã€‚â‘¡æ ¹æ®é¢†å¯¼æŒ‡ç¤ºå’Œå·¥ä½œå®‰æŽ’ï¼Œåˆ¶å®šå·¥ä½œè®¡åˆ’ï¼Œæå‰é¢„å¤‡ï¼Œå¹¶æŒ‰è®¡åˆ’å®Œæˆã€‚â‘¢å¤šè¯·ç¤ºå¹¶åŠæ—¶æ±‡æŠ¥ï¼Œé‡åˆ°ä¸æ˜Žç™½çš„è¦è™šå¿ƒè¯·æ•™ã€‚â‘£æŠ“é—´éš™æ—¶é—´ï¼Œå¤šå­¦ä¹ ï¼ŒåŠªåŠ›æé«˜è‡ªå·±çš„æ”¿æ²»ç´ è´¨å’Œä¸šåŠ¡æ°´å¹³ é™¤äº†æœ¬å…¬å¸å¤–ï¼Œè¿˜åº”è˜äº†å“ªäº›å…¬å¸å¾ˆå¥‡æ€ªï¼Œè¿™æ˜¯ç›¸å½“å¤šå…¬å¸ä¼šé—®çš„é—®é¢˜ï¼Œå…¶ç”¨æ„æ˜¯è¦æ¦‚ç•¥çŸ¥é“åº”å¾µè€…çš„æ±‚èŒå¿—å‘ï¼Œæ‰€ä»¥è¿™å¹¶éžç»å¯¹æ˜¯è´Ÿé¢ç­”æ¡ˆï¼Œå°±ç®—ä¸ä¾¿è¯´å‡ºå…¬å¸åç§°ï¼Œä¹Ÿåº”å›žç­”â€œé”€å”®åŒç§äº§å“çš„å…¬å¸â€ï¼Œå¦‚æžœåº”è˜çš„å…¶ä»–å…¬å¸æ˜¯ä¸åŒä¸šç•Œï¼Œå®¹æ˜“è®©äººäº§ç”Ÿæ— æ³•ä¿¡ä»»çš„æ„Ÿè§‰ ä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®å—ä¼ä¸šçš„è¿™ä¸ªé—®é¢˜çœ‹ä¸ŠåŽ»å¯æœ‰å¯æ— ï¼Œå…¶å®žå¾ˆå…³é”®ï¼Œä¼ä¸šä¸å–œæ¬¢è¯´â€œæ²¡é—®é¢˜â€çš„äººï¼Œå› ä¸ºå…¶å¾ˆæ³¨é‡å‘˜å·¥çš„ä¸ªæ€§å’Œåˆ›æ–°èƒ½åŠ›ã€‚ä¼ä¸šä¸å–œæ¬¢æ±‚èŒè€…é—®ä¸ªäººç¦åˆ©ä¹‹ç±»çš„é—®é¢˜ï¼Œå¦‚æžœæœ‰äººè¿™æ ·é—®ï¼šè´µå…¬å¸å¯¹æ–°å…¥å…¬å¸çš„å‘˜å·¥æœ‰æ²¡æœ‰ä»€ä¹ˆåŸ¹è®­é¡¹ç›®ï¼Œæˆ‘å¯ä»¥å‚åŠ å—ï¼Ÿæˆ–è€…è¯´è´µå…¬å¸çš„æ™‹å‡æœºåˆ¶æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿä¼ä¸šå°†å¾ˆæ¬¢è¿Žï¼Œå› ä¸ºä½“çŽ°å‡ºä½ å¯¹å­¦ä¹ çš„çƒ­æƒ…å’Œå¯¹å…¬å¸çš„å¿ è¯šåº¦ä»¥åŠä½ çš„ä¸Šè¿›å¿ƒ å¦‚æžœä½ è¢«å½•ç”¨ï¼Œä½•æ—¶å¯ä»¥åˆ°èŒå¤§å¤šæ•°ä¼ä¸šä¼šå…³å¿ƒå°±èŒæ—¶é—´ï¼Œæœ€å¥½æ˜¯å›žç­”â€œå¦‚æžœè¢«å½•ç”¨çš„è¯ï¼Œåˆ°èŒæ—¥å¯æŒ‰å…¬å¸è§„å®šä¸Šç­â€ï¼Œä½†å¦‚æžœè¿˜æœªè¾žåŽ»ä¸Šä¸€ä¸ªå·¥ä½œã€ä¸Šç­æ—¶é—´åˆå¤ªè¿‘ï¼Œä¼¼ä¹Žæœ‰äº›å¼ºäººæ‰€éš¾ï¼Œå› ä¸ºäº¤æŽ¥è‡³å°‘è¦ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œåº”è¿›ä¸€æ­¥è¯´æ˜ŽåŽŸå› ï¼Œå½•å–å…¬å¸åº”è¯¥ä¼šé€šèžçš„ ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬å…¬å¸æ›¾ç»åœ¨æŠ¥ç« æ‚å¿—çœ‹è¿‡å…³äºŽè´µå…¬å¸çš„æŠ¥é“ï¼Œä¸Žè‡ªå·±æ‰€è¿½æ±‚çš„ç†å¿µæœ‰å¿—ä¸€åŒã€‚è€Œè´µå…¬å¸åœ¨ä¸šç•Œçš„æˆç»©ä¹Ÿæ˜¯æœ‰ç›®å…±ç¹çš„ï¼Œè€Œä¸”å¯¹å‘˜å·¥çš„æ•™è‚²è®­ç»ƒã€å‡è¿ç­‰ä¹Ÿéƒ½å¾ˆæœ‰åˆ¶åº¦]]></content>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hibernateå…¥é—¨]]></title>
    <url>%2F2018%2F11%2F07%2FHibernate%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[helloï¼Œå¤§å®¶å¥½ï¼Œä»Šå¤©æ™šä¸Šæ¥å­¦ä¹ Hibernate ä»€ä¹ˆæ˜¯Hibernateæ¡†æž¶ï¼ŸHibernateæ˜¯ä¸€ç§ORMæ¡†æž¶ï¼Œå…¨ç§°ä¸º Object_Relative DateBase-Mappingï¼Œåœ¨Javaå¯¹è±¡ä¸Žå…³ç³»æ•°æ®åº“ä¹‹é—´å»ºç«‹æŸç§æ˜ å°„ï¼Œä»¥å®žçŽ°ç›´æŽ¥å­˜å–Javaå¯¹è±¡ï¼æ¯”SSMçš„ormè¦å¼º Hibernateä¼˜ç¼ºç‚¹1.Hibernateä¼˜ç‚¹ï¼š ï¼ˆ1ï¼‰å¯¹è±¡/å…³ç³»æ•°æ®åº“æ˜ å°„(Basic O/R Mapping) å®ƒä½¿ç”¨æ—¶åªéœ€è¦æ“çºµå¯¹è±¡ï¼Œä½¿å¼€å‘æ›´å¯¹è±¡åŒ–ï¼ŒæŠ›å¼ƒäº†æ•°æ®åº“ä¸­å¿ƒçš„æ€æƒ³ï¼Œå®Œå…¨çš„é¢å‘å¯¹è±¡æ€æƒ³ã€‚ ï¼ˆ2ï¼‰é€æ˜ŽæŒä¹…åŒ–(Persistent) å¸¦æœ‰æŒä¹…åŒ–çŠ¶æ€çš„ã€å…·æœ‰ä¸šåŠ¡åŠŸèƒ½çš„å•çº¿ç¨‹å¯¹è±¡ï¼Œæ­¤å¯¹è±¡ç”Ÿå­˜æœŸå¾ˆçŸ­ã€‚è¿™äº›å¯¹è±¡å¯èƒ½æ˜¯æ™®é€šçš„JavaBeans/POJOï¼Œè¿™ä¸ªå¯¹è±¡æ²¡æœ‰å®žçŽ°ç¬¬ä¸‰æ–¹æ¡†æž¶æˆ–è€…æŽ¥å£ï¼Œå”¯ä¸€ç‰¹æ®Šçš„æ˜¯ä»–ä»¬æ­£ä¸Žï¼ˆä»…ä»…ä¸€ä¸ªï¼‰Sessionç›¸å…³è”ã€‚ä¸€æ—¦è¿™ä¸ªSessionè¢«å…³é—­ï¼Œè¿™äº›å¯¹è±¡å°±ä¼šè„±ç¦»æŒä¹…åŒ–çŠ¶æ€ï¼Œè¿™æ ·å°±å¯è¢«åº”ç”¨ç¨‹åºçš„ä»»ä½•å±‚è‡ªç”±ä½¿ç”¨ã€‚ï¼ˆä¾‹å¦‚ï¼Œç”¨ä½œè·Ÿè¡¨ç¤ºå±‚æ‰“äº¤é“çš„æ•°æ®ä¼ è¾“å¯¹è±¡ã€‚ï¼‰ ï¼ˆ3ï¼‰äº‹åŠ¡Transaction (org.Hibernate.Transaction) åº”ç”¨ç¨‹åºç”¨æ¥æŒ‡å®šåŽŸå­æ“ä½œå•å…ƒèŒƒå›´çš„å¯¹è±¡ï¼Œå®ƒæ˜¯å•çº¿ç¨‹çš„ï¼Œç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ã€‚å®ƒé€šè¿‡æŠ½è±¡å°†åº”ç”¨ä»Žåº•å±‚å…·ä½“çš„JDBCã€JTAä»¥åŠCORBAäº‹åŠ¡éš”ç¦»å¼€ã€‚æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªSessionä¹‹å†…å¯èƒ½åŒ…å«å¤šä¸ªTransactionå¯¹è±¡ã€‚å°½ç®¡æ˜¯å¦ä½¿ç”¨è¯¥å¯¹è±¡æ˜¯å¯é€‰çš„ï¼Œä½†æ— è®ºæ˜¯ä½¿ç”¨åº•å±‚çš„APIè¿˜æ˜¯ä½¿ç”¨Transactionå¯¹è±¡ï¼Œäº‹åŠ¡è¾¹ç•Œçš„å¼€å¯ä¸Žå…³é—­æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ ï¼ˆ4ï¼‰å®ƒæ²¡æœ‰ä¾µå…¥æ€§ï¼Œå³æ‰€è°“çš„è½»é‡çº§æ¡†æž¶ã€‚ ï¼ˆ5ï¼‰ç§»æ¤æ€§ä¼šå¾ˆå¥½ã€‚ ï¼ˆ6ï¼‰ç¼“å­˜æœºåˆ¶ã€‚æä¾›ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ã€‚ ï¼ˆ7ï¼‰ç®€æ´çš„HQLç¼–ç¨‹ã€‚ 2.Hibernateç¼ºç‚¹ï¼š ï¼ˆ1ï¼‰Hibernateåœ¨æ‰¹é‡æ•°æ®å¤„ç†çš„æ—¶å€™æ˜¯æœ‰å¼±åŠ¿ã€‚ ï¼ˆ2ï¼‰é’ˆå¯¹æŸä¸€å¯¹è±¡(å•ä¸ªå¯¹è±¡)ç®€å•çš„æŸ¥\æ”¹\åˆ \å¢žï¼Œä¸æ˜¯æ‰¹é‡ä¿®æ”¹ã€åˆ é™¤ï¼Œé€‚åˆç”¨Hibernateï¼›è€Œå¯¹äºŽæ‰¹é‡ä¿®æ”¹ã€åˆ é™¤ï¼Œä¸é€‚åˆç”¨Hibernateï¼Œè¿™ä¹Ÿæ˜¯ORæ¡†æž¶çš„å¼±ç‚¹;è¦ä½¿ç”¨æ•°æ®åº“çš„ç‰¹å®šä¼˜åŒ–æœºåˆ¶çš„æ—¶å€™ï¼Œä¸é€‚åˆç”¨Hibernateã€‚ HibernateçŽ¯å¢ƒæ­å»ºå¼•å…¥ç›¸å…³jaråŒ…antlr-2.7.6.jarcommons-collections-3.1.jardom4j-1.6.1.jarhibernate-jpa-2.0-api-1.0.1.Final.jarhibernate3.jarjavassist-3.12.0.GA.jarjta-1.1.jarlog4j-1.2.17.jarojdbc6.jarslf4j-api-1.6.1.jarslf4j-log4j12-1.6.1.jar åˆ›å»ºHibernateæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆhibernate.cfg.xmlï¼‰1234567891011121314151617181920212223242526272829&lt;!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"&gt;&lt;hibernate-configuration&gt;&lt;session-factory&gt; &lt;!-- æ•°æ®åº“è¿žæŽ¥ --&gt; &lt;property name="connection.driver_class"&gt; oracle.jdbc.OracleDriver &lt;/property&gt; &lt;property name="connection.url"&gt; jdbc:oracle:thin:@localhost:1521:orcl &lt;/property&gt; &lt;property name="connection.username"&gt;martin&lt;/property&gt; &lt;property name="connection.password"&gt;mpwd&lt;/property&gt; &lt;!-- è¾…åŠ©å‚æ•° --&gt; &lt;!-- &lt;property name="show_sql"&gt;true&lt;/property&gt; --&gt; &lt;property name="format_sql"&gt;true&lt;/property&gt; &lt;property name="dialect"&gt; org.hibernate.dialect.Oracle10gDialect &lt;/property&gt; &lt;property name="current_session_context_class"&gt;thread&lt;/property&gt; &lt;!-- æ˜ å°„ä¿¡æ¯ --&gt; &lt;mapping resource="cn/house/pojo/Depts.hbm.xml" /&gt; &lt;mapping resource="cn/house/pojo/Emps.hbm.xml" /&gt; &lt;mapping resource="cn/house/pojo/Employee.hbm.xml" /&gt; &lt;mapping resource="cn/house/pojo/Project.hbm.xml" /&gt;&lt;/session-factory&gt;&lt;/hibernate-configuration&gt; åˆ›å»ºæŒä¹…åŒ–ç±»å’Œæ˜ å°„æ–‡ä»¶æŒä¹…åŒ–ç±»éœ€è¦implement SerializableæŽ¥å£å¿…é¡»å°±æœ‰ä¸€ä¸ªæ— å‚æ•°çš„æž„é€ æ–¹æ³• æ˜ å°„æ–‡ä»¶ï¼ˆä¸ºæŒä¹…åŒ–ç±»å+hbm.xmlï¼‰123456789101112131415&lt;?xml version="1.0"?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"&gt;&lt;hibernate-mapping&gt; &lt;class name="cn.hibernatedemo.entity.Emp" table="`EMP`"&gt; &lt;id name="empNo" column="`EMPNO`" type="java.lang.Integer"&gt; &lt;generator class="increment"/&gt; &lt;/id&gt; &lt;property name="empName" type="java.lang.String" column="`ENAME`"/&gt; &lt;property name="job" type="java.lang.String" column="`JOB`"/&gt; &lt;property name="salary" type="java.lang.Double" column="`SAL`"/&gt; &lt;property name="hireDate" type="java.util.Date"/&gt; &lt;/class&gt;&lt;/hibernate-mapping&gt; propertyå±žæ€§ä¸­å¯ä»¥è®¾ç½®length ä»¥åŠ not-null è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ12345678910111213141516171819202122232425262728293031323334353637383940public void firstShow() &#123; Configuration conf = null; // åŠ è½½hibernateé…ç½®æ–‡ä»¶ SessionFactory sf = null; // åˆ›å»ºsession ä¼šè¯æŽ¥å£ Session session = null; //sessionå®žæ–½æŒä¹…åŒ–æ“ä½œå…³é”®api Transaction tx = null; //äº‹åŠ¡æŽ§åˆ¶ try &#123; conf = new Configuration().configure(); sf = conf.buildSessionFactory(); session = sf.getCurrentSession(); //æŽ¨èä½¿ç”¨ /*session = sf.openSession(); *///æ¯”è¾ƒåžƒåœ¾ tx = session.beginTransaction(); //å¼€å¯äº‹åŠ¡ User user=new User(); user.setId((byte)2); user.setIsadmin("yes"); user.setName("æ¨Šå¯"); user.setPassword("123456"); user.setTelephone("15035042771"); user.setUsername("æ‚²ä¼¤çš„æ©™å­å­æ ‘"); /*Dept dept=new Dept(); dept.setDeptName("ç‹™å‡»éƒ¨"); dept.setDeptNo((byte)50); dept.setLocation("æ°¸æµŽå¸‚");*/ session.save(user); tx.commit(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); if(tx!=null)&#123; tx.rollback(); &#125; &#125;/*finally &#123; session.close(); &#125;*/ &#125; æ³¨æ„ ï¼šä¸ç®¡æ˜¯æŸ¥è¯¢è¿˜æ˜¯æ›´æ–°éƒ½è¦å¼€å¯äº‹åŠ¡ï¼Œsessionä¼šè‡ªåŠ¨å…³é—­ ç®€åŒ–ä¸€ä¸‹utilåˆ›å»ºHibernateUtil.javaæ–‡ä»¶1234567891011121314151617181920212223242526272829package cn;import org.hibernate.HibernateException;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.cfg.Configuration;public class HibernateUtil &#123; private static Configuration conf; private final static SessionFactory sf; static &#123; try &#123; conf = new Configuration().configure(); sf = conf.buildSessionFactory(); &#125; catch (HibernateException e) &#123; e.printStackTrace(); throw new ExceptionInInitializerError(e); &#125; &#125; private HibernateUtil()&#123;&#125; public static Session currentSession()&#123; return sf.getCurrentSession(); &#125;&#125; daoå±‚åˆ›å»ºBaseDao.java123456789package cn.dao;import org.hibernate.Session;import cn.HibernateUtil;public class BaseDao &#123; public Session currentSession()&#123; return HibernateUtil.currentSession(); &#125;&#125; ç”¨çš„æ—¶å€™ç›´æŽ¥ç»§æ‰¿BaseDaoæ—¢å¯ æŒ‰ä¸»é”®æŸ¥è¯¢GETæ–¹æ³•123public User getUser(Serializable id)&#123; return (User)currentSession().get(User.class, id);&#125; LOADæ–¹æ³•(éœ€è¦åœ¨ä¼šè¯å…³é—­ä¹‹å‰æµ‹è¯•æŸ¥è¯¢)123public User loadUser(Serializable id)&#123; return (User)currentSession().load(User.class, id);&#125; å¢žåŠ æ“ä½œ1234public void save(User user)&#123; currentSession().save(user);&#125;--è¿˜æœ‰ä¸ªsave-update(ä»–ä¼šæ‰¾ä¸»é”®ï¼Œå¦‚æžœä¸»é”®å­˜åœ¨ï¼Œé‚£å°±ä¿®æ”¹ï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œå°±æ·»åŠ ) ä¿®æ”¹æ“ä½œ1234public void update(User user)&#123; currentSession().update(user);&#125;--è¿˜æœ‰ä¸ªsave-update(ä»–ä¼šæ‰¾ä¸»é”®ï¼Œå¦‚æžœä¸»é”®å­˜åœ¨ï¼Œé‚£å°±ä¿®æ”¹ï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œå°±æ·»åŠ ) åˆ é™¤æ“ä½œ123public void delete(User user)&#123; currentSession().delete(user);&#125; .hbm.xmlæ–‡ä»¶ï¼ˆ dynamic-update=â€trueâ€ï¼‰è¡¨ç¤ºåŠ¨æ€æ›´æ–°ï¼Œåªæ›´æ–°å˜åŒ–çš„å­—æ®µ]]></content>
      <categories>
        <category>SSH</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[PL/SQLç¼–ç¨‹]]></title>
    <url>%2F2018%2F11%2F07%2FPL-SQL%E7%BC%96%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯PL/SQLå‘¢ï¼Ÿ PL/SQLæ˜¯ Procedure Language &amp; Structured Query Language çš„ç¼©å†™ã€‚ORACLEçš„SQLæ˜¯æ”¯æŒANSI(American national Standards Institute)å’ŒISO92 (International Standards Organization)æ ‡å‡†çš„äº§å“ã€‚PL/SQLæ˜¯å¯¹SQLè¯­è¨€å­˜å‚¨è¿‡ç¨‹è¯­è¨€çš„æ‰©å±•ã€‚ä»ŽORACLE6ä»¥åŽï¼ŒORACLEçš„RDBMSé™„å¸¦äº†PL/SQLã€‚å®ƒçŽ°åœ¨å·²ç»æˆä¸ºä¸€ç§è¿‡ç¨‹å¤„ç†è¯­è¨€ï¼Œç®€ç§°PL/SQLã€‚ç›®å‰çš„PL/SQLåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯æ•°æ®åº“å¼•æ“Žéƒ¨åˆ†ï¼›å¦ä¸€éƒ¨åˆ†æ˜¯å¯åµŒå…¥åˆ°è®¸å¤šäº§å“ï¼ˆå¦‚Cè¯­è¨€ï¼ŒJAVAè¯­è¨€ç­‰ï¼‰å·¥å…·ä¸­çš„ç‹¬ç«‹å¼•æ“Žã€‚å¯ä»¥å°†è¿™ä¸¤éƒ¨åˆ†ç§°ä¸ºï¼šæ•°æ®åº“PL/SQLå’Œå·¥å…·PL/SQLã€‚ä¸¤è€…çš„ç¼–ç¨‹éžå¸¸ç›¸ä¼¼ã€‚éƒ½å…·æœ‰ç¼–ç¨‹ç»“æž„ã€è¯­æ³•å’Œé€»è¾‘æœºåˆ¶ã€‚å·¥å…·PL/SQLå¦å¤–è¿˜å¢žåŠ äº†ç”¨äºŽæ”¯æŒå·¥å…·ï¼ˆå¦‚ORACLE Formsï¼‰çš„å¥æ³•ï¼Œå¦‚ï¼šåœ¨çª—ä½“ä¸Šè®¾ç½®æŒ‰é’®ç­‰ PL/SQLçš„ä¼˜ç‚¹æœ‰åˆ©äºŽå®¢æˆ·/æœåŠ¡å™¨çŽ¯å¢ƒåº”ç”¨çš„è¿è¡Œå¯¹äºŽå®¢æˆ·/æœåŠ¡å™¨çŽ¯å¢ƒæ¥è¯´ï¼ŒçœŸæ­£çš„ç“¶é¢ˆæ˜¯ç½‘ç»œä¸Šã€‚æ— è®ºç½‘ç»œå¤šå¿«ï¼Œåªè¦å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨è¿›è¡Œå¤§é‡çš„æ•°æ®äº¤æ¢ã€‚åº”ç”¨è¿è¡Œçš„æ•ˆçŽ‡è‡ªç„¶å°±å›žå—åˆ°å½±å“ã€‚å¦‚æžœä½¿ç”¨PL/SQLè¿›è¡Œç¼–ç¨‹ï¼Œå°†è¿™ç§å…·æœ‰å¤§é‡æ•°æ®å¤„ç†çš„åº”ç”¨æ”¾åœ¨æœåŠ¡å™¨ç«¯æ¥æ‰§è¡Œã€‚è‡ªç„¶å°±çœåŽ»äº†æ•°æ®åœ¨ç½‘ä¸Šçš„ä¼ è¾“æ—¶é—´ã€‚ é€‚åˆäºŽå®¢æˆ·çŽ¯å¢ƒPL/SQLç”±äºŽåˆ†ä¸ºæ•°æ®åº“PL/SQLéƒ¨åˆ†å’Œå·¥å…·PL/SQLã€‚å¯¹äºŽå®¢æˆ·ç«¯æ¥è¯´ï¼ŒPL/SQLå¯ä»¥åµŒå¥—åˆ°ç›¸åº”çš„å·¥å…·ä¸­ï¼Œå®¢æˆ·ç«¯ç¨‹åºå¯ä»¥æ‰§è¡Œæœ¬åœ°åŒ…å«PL/SQLéƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥å‘æœåŠ¡å‘SQLå‘½ä»¤æˆ–æ¿€æ´»æœåŠ¡å™¨ç«¯çš„PL/SQLç¨‹åºè¿è¡Œã€‚ è¿‡ç¨‹åŒ–PL/SQLæ˜¯Oracleåœ¨æ ‡å‡†SQLä¸Šçš„è¿‡ç¨‹æ€§æ‰©å±•ï¼Œä¸ä»…å…è®¸åœ¨PL/SQLç¨‹åºå†…åµŒå…¥SQLè¯­å¥ï¼Œè€Œä¸”å…è®¸ä½¿ç”¨å„ç§ç±»åž‹çš„æ¡ä»¶åˆ†æ”¯è¯­å¥å’Œå¾ªçŽ¯è¯­å¥ï¼Œå¯ä»¥å¤šä¸ªåº”ç”¨ç¨‹åºä¹‹é—´å…±äº«å…¶è§£å†³æ–¹æ¡ˆã€‚ æ¨¡å—åŒ–PL/SQLç¨‹åºç»“æž„æ˜¯ä¸€ç§æè¿°æ€§å¾ˆå¼ºã€ç•Œé™åˆ†æ˜Žçš„å—ç»“æž„ã€åµŒå¥—å—ç»“æž„ï¼Œè¢«åˆ†æˆå•ç‹¬çš„è¿‡ç¨‹ã€å‡½æ•°ã€è§¦å‘å™¨ï¼Œä¸”å¯ä»¥æŠŠå®ƒä»¬ç»„åˆä¸ºç¨‹åºåŒ…ï¼Œæé«˜ç¨‹åºçš„æ¨¡å—åŒ–èƒ½åŠ›ã€‚ è¿è¡Œé”™è¯¯çš„å¯å¤„ç†æ€§ä½¿ç”¨PL/SQLæä¾›çš„å¼‚å¸¸å¤„ç†ï¼ˆEXCEPTIONï¼‰ï¼Œå¼€å‘äººå‘˜å¯é›†ä¸­å¤„ç†å„ç§ORACLEé”™è¯¯å’ŒPL/SQLé”™è¯¯ï¼Œæˆ–å¤„ç†ç³»ç»Ÿé”™è¯¯ä¸Žè‡ªå®šä¹‰é”™è¯¯ï¼Œä»¥å¢žå¼ºåº”ç”¨ç¨‹åºçš„å¥å£®æ€§ã€‚ æä¾›å¤§é‡å†…ç½®ç¨‹åºåŒ…ORACLEæä¾›äº†å¤§é‡çš„å†…ç½®ç¨‹åºåŒ…ã€‚é€šè¿‡è¿™äº›ç¨‹åºåŒ…èƒ½å¤Ÿå®žçŽ°DBSçš„ä¸€äº›ä½Žå±‚æ“ä½œã€é«˜çº§åŠŸèƒ½ï¼Œä¸è®ºå¯¹DBAè¿˜æ˜¯åº”ç”¨å¼€å‘äººå‘˜éƒ½å…·æœ‰é‡è¦ä½œç”¨ã€‚ å½“ç„¶è¿˜æœ‰å…¶å®ƒçš„ä¸€äº›ä¼˜ç‚¹å¦‚ï¼šæ›´å¥½çš„æ€§èƒ½ã€å¯ç§»æ¤æ€§å’Œå…¼å®¹æ€§ã€å¯ç»´æŠ¤æ€§ã€æ˜“ç”¨æ€§ä¸Žå¿«é€Ÿæ€§ç­‰ã€‚ PL/SQLå¯ç”¨çš„SQLè¯­å¥PL/SQLæ˜¯ORACLEç³»ç»Ÿçš„æ ¸å¿ƒè¯­è¨€ï¼ŒçŽ°åœ¨ORACLEçš„è®¸å¤šéƒ¨ä»¶éƒ½æ˜¯ç”±PL/SQLå†™æˆã€‚åœ¨PL/SQLä¸­å¯ä»¥ä½¿ç”¨çš„SQLè¯­å¥æœ‰ï¼š INSERTï¼ŒUPDATEï¼ŒDELETEï¼ŒSELECT INTOï¼ŒCOMMITï¼ŒROLLBACKï¼ŒSAVEPOINTã€‚ æç¤ºï¼šåœ¨ PL/SQLä¸­åªèƒ½ç”¨ SQLè¯­å¥ä¸­çš„ DML éƒ¨åˆ†ï¼Œä¸èƒ½ç”¨ DDL éƒ¨åˆ†ï¼Œå¦‚æžœè¦åœ¨PL/SQLä¸­ä½¿ç”¨DDL(å¦‚CREATE table ç­‰)çš„è¯ï¼Œåªèƒ½ä»¥åŠ¨æ€çš„æ–¹å¼æ¥ä½¿ç”¨ã€‚ ä¸€ä¸ªPL/SQLå—çš„ç»„æˆï¼ˆç”±ä¸‰éƒ¨åˆ†ï¼‰1234567DECLARE --å£°æ˜Žéƒ¨åˆ†: åœ¨æ­¤å£°æ˜ŽPL/SQLç”¨åˆ°çš„å˜é‡,ç±»åž‹åŠæ¸¸æ ‡ï¼Œä»¥åŠå±€éƒ¨çš„å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•° BEGIN -- æ‰§è¡Œéƒ¨åˆ†: è¿‡ç¨‹åŠSQL è¯­å¥ , å³ç¨‹åºçš„ä¸»è¦éƒ¨åˆ† EXCEPTION -- æ‰§è¡Œå¼‚å¸¸éƒ¨åˆ†: é”™è¯¯å¤„ç† END; å¸¸é‡å’Œå˜é‡çš„å£°æ˜Žename varchar2ã€(20)ã€‘ ã€:=â€™EricHuâ€™ã€‘;Â· enameè¡¨ç¤ºå˜é‡åç§°Â· varchar2å˜é‡ç±»åž‹ä»¥åŠå¤§å°Â· :=â€™EricHuâ€™ä¸ºåˆå§‹åŒ–å˜é‡å€¼ PL/SQLç¨‹åºè®¾è®¡ä¸­çš„æ ‡è¯†ç¬¦å®šä¹‰ä¸ŽSQL çš„æ ‡è¯†ç¬¦å®šä¹‰çš„è¦æ±‚ç›¸åŒã€‚è¦æ±‚å’Œé™åˆ¶æœ‰ï¼š1.æ ‡è¯†ç¬¦åä¸èƒ½è¶…è¿‡30å­—ç¬¦ï¼› 2.ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»ä¸ºå­—æ¯ï¼› 3.ä¸åˆ†å¤§å°å†™ï¼› 4.ä¸èƒ½ç”¨â€™-â€˜(å‡å·); 5.ä¸èƒ½æ˜¯SQLä¿ç•™å­—ã€‚ æç¤º: ä¸€èˆ¬ä¸è¦æŠŠå˜é‡åå£°æ˜Žä¸Žè¡¨ä¸­å­—æ®µåå®Œå…¨ä¸€æ ·,å¦‚æžœè¿™æ ·å¯èƒ½å¾—åˆ°ä¸æ­£ç¡®çš„ç»“æžœ. å˜é‡ä¸Žå¸¸é‡çš„èµ‹å€¼1ï¼‰variable := expression ; variable æ˜¯ä¸€ä¸ªPL/SQLå˜é‡, expression æ˜¯ä¸€ä¸ªPL/SQL è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥èµ‹ä¸€ä¸ªå€¼2ï¼‰ å­—ç¬¦åŠæ•°å­—è¿ç®—ç‰¹ç‚¹ç©ºå€¼åŠ æ•°å­—ä»æ˜¯ç©ºå€¼ï¼šNULL + &lt; æ•°å­—&gt; = NULLç©ºå€¼åŠ ï¼ˆè¿žæŽ¥ï¼‰å­—ç¬¦ï¼Œç»“æžœä¸ºå­—ç¬¦ï¼šNULL || &lt;å­—ç¬¦ä¸²&gt; = &lt; å­—ç¬¦ä¸²&gt;3ï¼‰æ•°æ®åº“èµ‹å€¼12345678910/*æ•°æ®åº“èµ‹å€¼æ˜¯é€šè¿‡ SELECTè¯­å¥æ¥å®Œæˆçš„ï¼Œæ¯æ¬¡æ‰§è¡Œ SELECTè¯­å¥å°±èµ‹å€¼ä¸€æ¬¡ï¼Œä¸€èˆ¬è¦æ±‚è¢«èµ‹å€¼çš„å˜é‡ä¸ŽSELECTä¸­çš„åˆ—åè¦ä¸€ä¸€å¯¹åº”*/DECLARE emp_id emp.empno%TYPE :=7788; emp_name emp.ename%TYPE; wages emp.sal%TYPE; BEGIN SELECT ename, NVL(sal,0) + NVL(comm,0) INTO emp_name, wages FROM emp WHERE empno = emp_id; DBMS_OUTPUT.PUT_LINE(emp_name||'----'||to_char(wages)); END; æ³¨é‡Š12345678910111213141516171819åœ¨PL/SQLé‡Œï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§ç¬¦å·æ¥å†™æ³¨é‡Šï¼Œå³ï¼šä½¿ç”¨åŒ â€˜-â€˜ ( å‡å·) åŠ æ³¨é‡Š PL/SQLå…è®¸ç”¨ â€“ æ¥å†™æ³¨é‡Šï¼Œå®ƒçš„ä½œç”¨èŒƒå›´æ˜¯åªèƒ½åœ¨ä¸€è¡Œæœ‰æ•ˆã€‚å¦‚ï¼š V_Sal NUMBER(12,2); -- äººå‘˜çš„å·¥èµ„å˜é‡ã€‚ ä½¿ç”¨ /* */ æ¥åŠ ä¸€è¡Œæˆ–å¤šè¡Œæ³¨é‡Šï¼Œå¦‚ï¼š/***********************************************//* æ–‡ä»¶åï¼š department_salary.sql *//* ä½œ è€…ï¼š æ¨Šå¯ *//* æ—¶ é—´ï¼š 2018-11-7 *//***********************************************/ PL/SQLæ•°æ®ç±»åž‹æ ‡é‡æ•°æ®ç±»åž‹å°å£°bb ï¼ˆå…¶å®žå°±æ˜¯æ™®é€šæ•°æ®ç±»åž‹ï¼‰ LOBæ•°æ®ç±»åž‹å­˜å‚¨å¤§æ•°æ®ç±»åž‹ï¼Œè¯¦æƒ…è¯·çœ‹Oracleæ•°æ®åº“åŸºç¡€ å±žæ€§ç±»åž‹1ï¼‰%TYPEå®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå…¶æ•°æ®ç±»åž‹ä¸Žå·²ç»å®šä¹‰çš„æŸä¸ªæ•°æ®å˜é‡(å°¤å…¶æ˜¯è¡¨çš„æŸä¸€åˆ—)çš„æ•°æ®ç±»åž‹ç›¸ä¸€è‡´ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨%TYPEã€‚ ä½¿ç”¨%TYPEç‰¹æ€§çš„ä¼˜ç‚¹åœ¨äºŽï¼š 1.æ‰€å¼•ç”¨çš„æ•°æ®åº“åˆ—çš„æ•°æ®ç±»åž‹å¯ä»¥ä¸å¿…çŸ¥é“ï¼› 2.æ‰€å¼•ç”¨çš„æ•°æ®åº“åˆ—çš„æ•°æ®ç±»åž‹å¯ä»¥å®žæ—¶æ”¹å˜ï¼Œå®¹æ˜“ä¿æŒä¸€è‡´ï¼Œä¹Ÿä¸ç”¨ä¿®æ”¹PL/SQLç¨‹åºã€‚12345678910111213DECLARE -- ç”¨%TYPE ç±»åž‹å®šä¹‰ä¸Žè¡¨ç›¸é…çš„å­—æ®µ TYPE T_Record IS RECORD( T_no emp.empno%TYPE, T_name emp.ename%TYPE, T_sal emp.sal%TYPE ); -- å£°æ˜ŽæŽ¥æ”¶æ•°æ®çš„å˜é‡ v_emp T_Record; BEGIN SELECT empno, ename, sal INTO v_emp FROM emp WHERE empno=7788; DBMS_OUTPUT.PUT_LINE (TO_CHAR(v_emp.t_no)||' '||v_emp.t_name||' ' || TO_CHAR(v_emp.t_sal)); END; 2ï¼‰%ROWTYPEPL/SQL æä¾›%ROWTYPEæ“ä½œç¬¦, è¿”å›žä¸€ä¸ªè®°å½•ç±»åž‹, å…¶æ•°æ®ç±»åž‹å’Œæ•°æ®åº“è¡¨çš„æ•°æ®ç»“æž„ç›¸ä¸€è‡´ã€‚ ä½¿ç”¨%ROWTYPEç‰¹æ€§çš„ä¼˜ç‚¹åœ¨äºŽï¼š l æ‰€å¼•ç”¨çš„æ•°æ®åº“ä¸­åˆ—çš„ä¸ªæ•°å’Œæ•°æ®ç±»åž‹å¯ä»¥ä¸å¿…çŸ¥é“ï¼› l æ‰€å¼•ç”¨çš„æ•°æ®åº“ä¸­åˆ—çš„ä¸ªæ•°å’Œæ•°æ®ç±»åž‹å¯ä»¥å®žæ—¶æ”¹å˜ï¼Œå®¹æ˜“ä¿æŒä¸€è‡´ï¼Œä¹Ÿä¸ç”¨ä¿®æ”¹PL/SQLç¨‹åºã€‚1234567DECLARE v_empno emp.empno%TYPE :=&amp;no; rec emp%ROWTYPE; BEGIN SELECT * INTO rec FROM emp WHERE empno=v_empno; DBMS_OUTPUT.PUT_LINE('å§“å:'||rec.ename||'å·¥èµ„:'||rec.sal||'å·¥ä½œæ—¶é—´:'||rec.hiredate); END; PL/SQLæŽ§åˆ¶è¯­å¥æ¡ä»¶æŽ§åˆ¶IFè¯­å¥ï¼‰12345678DECLAREv_countResult NUMBER ;BEGINSELECT COUNT(empno) INTO v_countResult FROM emp ;IF v_countResult &gt; 10 THENDBMS_OUTPUT.put_line('EMPè¡¨çš„è®°å½•å¤§äºŽ10æ¡ã€‚') ;END IF ;END ; IFâ€¦ELSEè¯­å¥ï¼‰12345678910DECLAREv_countResult NUMBER ;BEGINSELECT COUNT(deptno) INTO v_countResult FROM dept ;IF v_countResult &gt; 10 THENDBMS_OUTPUT.put_line('DEPTè¡¨çš„è®°å½•å¤§äºŽ10æ¡ã€‚') ;ELSEDBMS_OUTPUT.put_line('DEPTè¡¨çš„è®°å½•å°äºŽ10æ¡ã€‚') ;END IF ;END ; IFâ€¦ELSIFâ€¦ELSEè¯­å¥ï¼‰123456789101112DECLAREv_countResult NUMBER ;BEGINSELECT COUNT(empno) INTO v_countResult FROM emp ;IF v_countResult &gt; 10 THENDBMS_OUTPUT.put_line('EMPè¡¨çš„è®°å½•å¤§äºŽ10æ¡ã€‚') ;ELSIF v_countResult &lt; 10 THENDBMS_OUTPUT.put_line('EMPè¡¨çš„è®°å½•å°äºŽ10æ¡ã€‚') ;ELSEDBMS_OUTPUT.put_line('EMPè¡¨çš„è®°å½•ç­‰äºŽ10æ¡ã€‚') ;END IF ;END ; CASEè¯­å¥ï¼‰1234567CASE æ¡ä»¶è¡¨è¾¾å¼ WHEN æ¡ä»¶è¡¨è¾¾å¼ç»“æžœ1 THEN è¯­å¥æ®µ1 WHEN æ¡ä»¶è¡¨è¾¾å¼ç»“æžœ2 THEN è¯­å¥æ®µ2 [ELSE]END CASE å¾ªçŽ¯æŽ§åˆ¶ç”¨äºŽé‡å¤æ‰§è¡Œçš„ç³»åˆ—è¯­å¥ã€‚åŒ…æ‹¬LOOPå’ŒEXITè¯­å¥ï¼Œä½¿ç”¨EXITè¯­å¥å¯ä»¥ç«‹å³é€€å‡ºå¾ªçŽ¯; ä½¿ç”¨EXIT WHEN è¯­å¥å¯ä»¥æ ¹æ®æ¡ä»¶ç»“æŸå¾ªçŽ¯ã€‚æœ‰3ç§ç±»åž‹å¾ªçŽ¯ï¼ŒåŒ…æ‹¬LOOPå¾ªçŽ¯ã€WHILEå¾ªçŽ¯ã€FORå¾ªçŽ¯ã€‚ LOOPï¼‰1234LOOPè¦æ‰§è¡Œçš„è¯­å¥;EXIT WHEN &lt;æ¡ä»¶è¯­å¥&gt; --æ¡ä»¶æ»¡è¶³ï¼Œé€€å‡ºå¾ªçŽ¯è¯­å¥END LOOP; WHILEï¼‰123WHILE &lt;å¸ƒå°”è¡¨è¾¾å¼&gt; LOOPè¦æ‰§è¡Œçš„è¯­å¥;END LOOP; FORï¼‰123FOR å¾ªçŽ¯è®¡æ•°å™¨ IN [REVERSE] ä¸‹é™ .... ä¸Šé™ LOOPè¦æ‰§è¡Œçš„è¯­å¥;END LOOP; å¼‚å¸¸å¤„ç†PL/SQLé¢„å®šä¹‰å¼‚å¸¸1234567891011121314151617181920212223242526272829303132333435363738ACCESS_INTO_NULLåœ¨æœªåˆå§‹åŒ–å¯¹è±¡æ—¶å‡ºçŽ°CASE_NOT_FOUNDCASEè¯­å¥ä¸­çš„é€‰é¡¹ä¸Žç”¨æˆ·è¾“å…¥çš„æ•°æ®ä¸åŒ¹é…æ—¶å‡ºçŽ°COLLECTION_IS_NULLç»™å°šæœªåˆå§‹åŒ–çš„è¡¨æˆ–æ•°ç»„èµ‹å€¼æ—¶å‡ºçŽ°CORSOR_ALREADY_OPENåœ¨ç”¨æˆ·è¯•å›¾é‡æ–°æ‰“å¼€å·²ç»æ‰“å¼€çš„æ¸¸æ ‡æ—¶å‡ºçŽ°ã€‚åœ¨é‡æ–°æ‰“å¼€æ¸¸æ ‡å‰å¿…é¡»å…ˆå°†å…¶å…³é—­DUP_VAL_ON_INDEXåœ¨ç”¨æˆ·è¯•å›¾å°†é‡å¤çš„å€¼å­˜å‚¨åœ¨ä½¿ç”¨å”¯ä¸€ç´¢å¼•çš„æ•°æ®åº“åˆ—ä¸­æ—¶å‡ºçŽ°INVALID_CURSORåœ¨æ‰§è¡Œéžæ³•æ¸¸æ ‡è¿ç®—ï¼ˆå¦‚æ‰“å¼€ä¸€ä¸ªå°šæœªæ‰“å¼€çš„æ¸¸æ ‡ï¼‰æ—¶å‡ºçŽ°INVALID_NUMBERåœ¨å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—æ—¶å‡ºçŽ°LOGIN_DENIEDåœ¨è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç æ— æ•ˆæ—¶å‡ºçŽ°NO_DATA_FOUNDåœ¨è¡¨ä¸­ä¸å­˜åœ¨è¯·æ±‚çš„è¡Œæ—¶å‡ºçŽ°ã€‚æ­¤å¤–ï¼Œå½“ç¨‹åºå¼•ç”¨å·²ç»åˆ é™¤çš„å…ƒç´ æ—¶ï¼Œä¹Ÿä¼šå¼•å‘NO_DATA_FOUNDå¼‚å¸¸STORAGE_ERRORåœ¨å†…å­˜æŸçŽ¯æˆ–PL/SQLè€—å°½å†…å­˜æ—¶å‡ºçŽ°TOO_MANY_ROWSåœ¨æ‰§è¡ŒSELECT INTOè¯­å¥åŽè¿”å›žå¤šè¡Œæ—¶å‡ºçŽ°VALUE_ERRORäº§ç”Ÿå¤§å°é™åˆ¶é”™è¯¯æ—¶å‡ºçŽ°ã€‚ä¾‹å¦‚ï¼Œå˜é‡ä¸­çš„åˆ—å€¼è¶…å‡ºå˜é‡çš„å¤§å°ZERO_DIVIDEä»¥é›¶ä½œä¸ºé™¤æ•°æ—¶å‡ºçŽ° å¼‚å¸¸å¤„ç†è¯­æ³•1234567891011BEGINsequence_of_statements;EXCEPTIONWHEN &lt;exception_name1&gt; THENsequence_of_statements;WHEN &lt;exception_name2&gt; THENsequence_of_statements;WHEN OTHERS THEN --è¿™é‡Œçš„OTHERSå¤„ç†ç¨‹åºé™¤ä¹‹å‰å¼‚å¸¸ç±»åž‹å¤–çš„æ‰€æœ‰å¼‚å¸¸ã€‚PL/SQLå—åªèƒ½æœ‰ä¸€ä¸ªOTHERSsequence_of_statements;END;--å¯ä»¥ä½¿ç”¨å‡½æ•°SQLCODEå’ŒSQLERRMæ¥è¿”å›žé”™è¯¯ä»£ç å’Œé”™è¯¯æ–‡æœ¬ä¿¡æ¯ã€‚ å¤„ç†ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ï¼ˆ1ï¼‰åœ¨PL/SQLå—çš„å®šä¹‰éƒ¨åˆ†å®šä¹‰å¼‚å¸¸æƒ…å†µï¼š &lt;å¼‚å¸¸æƒ…å†µ&gt; EXCEPTION; ï¼ˆ2ï¼‰æŠ›å‡ºå¼‚å¸¸æƒ…å†µï¼š RAISE &lt;å¼‚å¸¸æƒ…å†µ&gt;; ï¼ˆ3ï¼‰åœ¨PL/SQLå—çš„å¼‚å¸¸æƒ…å†µå¤„ç†éƒ¨åˆ†å¯¹å¼‚å¸¸æƒ…å†µåšå‡ºç›¸åº”çš„å¤„ç†ã€‚123456789101112131415161718ä¾‹ï¼ŒæŸ¥è¯¢ç¼–å·ä¸º7788çš„é›‡å‘˜çš„ç¦åˆ©è¡¥åŠ©commåˆ—ã€‚DECLAREv_comm employee.comm%TYPE;e_comm_is_null EXCEPTION; --å®šä¹‰å¼‚å¸¸ç±»åž‹å˜é‡BEGINSELECT comm INTO v_comm FROM employee WHERE empno=7788;IF v_comm IS NULL THENRAISE e_comm_is_null;END IF;EXCEPTIONWHEN NO_DATA_FOUND THENDBMS_OUTPUT.PUT_LINE(â€˜é›‡å‘˜ä¸å­˜åœ¨ï¼é”™è¯¯ä¸ºï¼šâ€™||SQLCODE||SQLERRM);WHEN E_COM_IS_NULL THENDBMS_OUTPUT.PUT_LINE(â€˜è¯¥é›‡å‘˜æ— è¡¥åŠ©ï¼â€™);WHEN OTHERS THENDBMS_OUTPUT.PUT_LINE(â€˜å‡ºçŽ°å…¶ä»–å¼‚å¸¸â€™);END; RAISE_APPLICATION_ERRORRAISE_APPLICATION_ERRORå­˜å‚¨è¿‡ç¨‹å¯ä»¥é‡æ–°å®šä¹‰å¼‚å¸¸é”™è¯¯æ¶ˆæ¯ï¼Œä¸ºåº”ç”¨ç¨‹åºæä¾›ä¸€ç§ä¸ŽOracleäº¤äº’çš„æ–¹æ³•ã€‚12345678DECLARE......BEGIN......IF v_com IS NULL THENRAISE_APPLICATION_ERROR(-20001,â€™è¯¥é›‡å‘˜æ— è¡¥åŠ©â€™);END IF;END; æ¸¸æ ‡æ˜¾ç¤ºæ¸¸æ ‡æ˜¾å¼æ¸¸æ ‡çš„ä½¿ç”¨æ­¥èšï¼š 1ï¼‰å£°æ˜Žæ¸¸æ ‡ CURSOR cursor_name [(parameter [,paramter]â€¦.)] [RETURN return_type] IS select_statements; â€“cursor_nameæŒ‡æ¸¸æ ‡çš„åç§°ã€‚ â€“parameterç”¨äºŽä¸ºæ¸¸æ ‡æŒ‡å®šè¾“å…¥å‚æ•°ã€‚åœ¨æŒ‡å®šæ•°æ®ç±»åž‹æ—¶ï¼Œä¸èƒ½ä½¿ç”¨é•¿åº¦çº¦æŸã€‚ â€“return_typeç”¨äºŽå®šä¹‰æ¸¸æ ‡æå–çš„è¡Œçš„ç±»åž‹ã€‚ â€“select_statement æŒ‡æ¸¸æ ‡å®šä¹‰çš„æŸ¥è¯¢è¯­å¥ã€‚ 2ï¼‰æ‰“å¼€æ¸¸æ ‡ OPEN cursor_name[ (parameters) ]; 3ï¼‰æå–æ¸¸æ ‡ FETCH cursor_name INTO variables; â€“variablesæ˜¯å˜é‡å 4ï¼‰å…³é—­æ¸¸æ ‡ CLOSE cursor_name; ä¾‹å­ 1234567891011121314DECLAREname employee.ename%TYPE;sal employee.sal%TYPE; --å®šä¹‰ä¸¤ä¸ªå˜é‡æ¥å­˜æ”¾enameå’Œsalçš„å†…å®¹CURSOR emp_cursor --å£°æ˜Žæ¸¸æ ‡IS SELECT ename,sal FROM employee;BEGINOPEN emp_cursor;LOOPFETCH emp_cursor INTO name, sal;EXIT WHEN emp_cursor%NOTFOUND;DBMS_OUTPUT.PUT_LINE(â€˜ç¬¬â€™||emp_cursor%ROWCOUNT||â€™ä¸ªé›‡å‘˜ï¼šâ€™||name||sal);END LOOP;CLOSE emp_cursor;END; æ˜¾å¼æ¸¸æ ‡å±žæ€§1ï¼‰%FOUNDï¼šåªæœ‰åœ¨DMLè¯­å¥å½±å“ä¸€è¡Œæˆ–å¤šè¡Œæ—¶ï¼Œ%FOUNDå±žæ€§æ‰è¿”å›žTRUE; 2ï¼‰%NOTFOUNDï¼š%NOTFOUNDå±žæ€§ä¸Ž%FOUNDå±žæ€§çš„ä½œç”¨æ­£å¥½ç›¸åã€‚å¦‚æžœDMLè¯­å¥æ²¡æœ‰å½±å“ä»»ä½•è¡Œï¼Œåˆ™%NOTFOUNDå±žæ€§è¿”å›žTRUE; 3ï¼‰%ROWCOUNTï¼š%ROWCOUNTå±žæ€§è¿”å›žDMLè¯­å¥å½±å“çš„è¡Œæ•°ã€‚å¦‚æžœDMLè¯­å¥æ²¡æœ‰å½±å“ä»»ä½•è¡Œï¼Œåˆ™%ROWCOUNTå±žæ€§å°†è¿”å›ž0; 4ï¼‰%ISOPENï¼š%ISOPENå±žæ€§è¿”å›žæ¸¸æ ‡æ˜¯å¦å·²æ‰“å¼€ã€‚ ä½¿ç”¨æ˜¾å¼æ¸¸æ ‡åˆ é™¤æˆ–æ›´æ–°ä½¿ç”¨æ¸¸æ ‡æ—¶ï¼Œå¦‚æžœå¤„ç†è¿‡ç¨‹ä¸­éœ€è¦åˆ é™¤æˆ–æ›´æ–°è¡Œï¼Œåœ¨å®šä¹‰æ¸¸æ ‡æ—¶å¿…é¡»ä½¿ç”¨SELECTâ€¦.FOR UPDATEè¯­å¥; è€Œåœ¨æ‰§è¡ŒDELETEå’ŒUPDATEæ—¶ä½¿ç”¨WHERE CURRENT OFå­å¥æŒ‡å®šæ¸¸æ ‡çš„å½“å‰è¡Œã€‚123456789å£°æ˜Žæ›´æ–°æ¸¸æ ‡è¯­æ³•ï¼šCURSOR cursor_name IS select_statement FOR UPDATE [OF culumns];--SELECT... FOR UPDATE[OF columns]ä¸ºæ›´æ–°æŸ¥è¯¢ï¼Œé”å®šé€‰æ‹©çš„è¡Œã€‚[OF columns]å¯ä»¥ä¸æ˜¯SELECTåŽçš„åˆ—--ï¼ˆ1ï¼‰å½“é€‰æ‹©å•è¡¨æ›´æ–°æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥å—çœç•¥OFå­å¥;--ï¼ˆ2ï¼‰å½“é€‰æ‹©å¤šä¸ªè¡¨æ›´æ–°æŸ¥è¯¢æ—¶ï¼Œè¢«é”å®šçš„è¡Œæ¥æºäºŽOF å­å¥åŽå£°æ˜Žçš„åˆ—æ‰€åœ¨çš„è¡¨ä¸­çš„è¡Œã€‚å°±æ˜¯ä½ é€‰å“ªä¸ªè¡¨çš„å±žæ€§å°±æ›´æ–°å“ªä¸ªè¡¨ ä¾‹å­123456DECLARECURSOR emp_cursor IS SELECT ename, sal FROM employee e INNER JOIN dept d ON e.deptno= d.deptnoFOR UPDATE OF SAL;....UPDATE employee SET sal=sal+100 WHERE CURRENT OF emp_cursor; ä½¿ç”¨å¾ªçŽ¯æ¸¸æ ‡ç®€åŒ–æ¸¸æ ‡çš„è¯»å–1234FOR record_index IN cursor_nameLOOPexecutable_statementsEND LOOP; â€“record_indexæ˜¯PL/SQLå£°æ˜Žçš„è®°å½•å˜é‡ã€‚æ­¤å˜é‡çš„å±žæ€§å£°æ˜Žä¸º%ROWTYPEç±»åž‹ä½œç”¨åŸŸåœ¨å¾ªçŽ¯ä¹‹å†…ã€‚ å¾ªçŽ¯æ¸¸æ ‡çš„ç‰¹æ€§ï¼š1ï¼‰åœ¨æ¸¸æ ‡ä¸­æå–äº†æ‰€æœ‰è®°å½•ä¹‹åŽè‡ªåŠ¨ç»ˆæ­¢ã€‚2ï¼‰æå–å’Œå¤„ç†æ¸¸æ ‡ä¸­çš„æ¯ä¸€æ¡è®°å½•ã€‚3ï¼‰å¦‚æžœåœ¨æå–è®°å½•ä¹‹åŽ%NOTFOUNDå±žæ€§è¿”å›žTRUEï¼Œåˆ™ç»ˆæ­¢å¾ªçŽ¯ã€‚4ï¼‰å¦‚æžœæœªè¿”å›žè¡Œï¼Œåˆ™ä¸è¿›å…¥å¾ªçŽ¯ã€‚12345678910DECLARECURSOR emp_cursor IS SELECT ename, sal FROM employee;BEGINFOR emp_record IN emp_cursor LOOPDBMS_OUTPUT.PUT_LINE(â€˜ç¬¬â€™||emp_cursor%ROWCOUNT||â€™ä¸ªé›‡å‘˜ï¼šâ€™||emp_record.ename||emp_record.sal);END LOOP;END; å­˜å‚¨è¿‡ç¨‹å­ç¨‹åºå­ç¨‹åºæ˜¯å·²å‘½åçš„PL/SQLå—ï¼Œå®ƒä»¬å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼ŒåŒ…æ‹¬å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ã€‚ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œæ“ä½œï¼Œä½¿ç”¨å‡½æ•°æ‰§è¡Œæ“ä½œå¹¶è¿”å›žå€¼1.å£°æ˜Žéƒ¨åˆ†ï¼ŒåŒ…æ‹¬ç±»åž‹ã€æ¸¸æ ‡ã€å¸¸é‡ã€å¼‚å¸¸å’ŒåµŒå¥—å­ç¨‹åºçš„ä½¿ç”¨ã€‚é€€å‡ºå­ç¨‹åºåŽé›©ä¸å¤å­˜åœ¨ã€‚ 2.å¯æ‰§è¡Œéƒ¨åˆ†ï¼ŒåŒ…æ‹¬èµ‹å€¼ã€æŽ§åˆ¶æ‰§è¡Œè¿‡ç¨‹ä»¥åŠæ“çºµOracleæ•°æ®çš„è¯­å¥ã€‚ 3.å¼‚å¸¸å¤„ç†éƒ¨åˆ†ï¼ŒåŒ…æ‹¬å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œè´Ÿè´£å¤„ç†æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ä¸­å‡ºçŽ°çš„å¼‚å¸¸ã€‚ å­ç¨‹åºçš„ä¼˜ç‚¹ï¼š 1ï¼‰æ¨¡å—åŒ–ï¼šé€šè¿‡å­ç§åºï¼Œå¯ä»¥å°†ç¨‹åºåˆ†è§£ä¸ºå¯ç®¡ç†çš„ã€æ˜Žç¡®çš„é€»è¾‘æ¨¡å—ã€‚ 2ï¼‰å¯é‡ç”¨æ€§ï¼šå­ç¨‹åºåœ¨åˆ›å»ºå¹¶æ‰§è¡ŒåŽï¼Œå°±å¯ä»¥åœ¨ä»»æ„æ•°ç›®çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚ 3ï¼‰å¯ç»´æŠ¤æ€§ï¼šå­ç¨‹åºå¯ä»¥ç®€åŒ–ç»´æŠ¤æ“ä½œï¼Œå› ä¸ºå¦‚æžœä¸€ä¸ªå­ç¨‹åºå—åˆ°å½±å“ï¼Œåˆ™åªéœ€è¦ä¿®æ”¹è¯¥å­ç¨‹åºçš„å®šä¹‰ã€‚ 4ï¼‰å®‰å…¨æ€§ï¼šç”¨æˆ·å¯ä»¥è®¾ç½®æƒé™ï¼Œä½¿å¾—è®¿é—®æ•°æ®çš„å”¯ä¸€æ–¹å¼å°±æ˜¯ç”¨æˆ·æä¾›çš„å­˜å‚¨è¿‡ç¨‹ã€‚è¿™æ ·ä¹Ÿå¯ä»¥ä¿è¯æ­£ç¡®æ€§ã€‚ åˆ›å»ºå­˜å‚¨è¿‡ç¨‹123456789CREATE [OR REPLACE] PROCEDURE procedure_name[(parameter_list)][IS|AS][local_declarations]BEGINexecetable_statements[EXCEPTION][exception_handlers]END [procedure_name]; â€“procedure_nameï¼šå­˜å‚¨è¿‡ç¨‹çš„åç§°ã€‚ â€“parameter_listï¼šå‚æ•°åˆ—è¡¨ï¼Œå¯é€‰ã€‚ â€“local_declarationsï¼šå±€éƒ¨å£°æ˜Žï¼Œå¯é€‰ã€‚ â€“executable_statementsï¼šå¯æ‰§è¡Œè¯­å¥ã€‚ â€“excetption_handlersï¼šå¼‚å¸¸å¤„ç†ç¨‹åºï¼Œå¯é€‰ã€‚ â€“OR REPLACEï¼šå¯é€‰ã€‚å¦‚æžœåŒ…å«OR REPLACEè¯­å¥ï¼Œå½“ç³»ç»Ÿä¸­æœ‰è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œå°†è¦†ç›–ã€‚å¦‚æžœä¸åŒ…å«ï¼Œå½“ç³»ç»Ÿä¸­æœ‰è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œå°†æŠ¥å¼‚å¸¸ã€‚ â€“å£°æ˜Žæ—¶ï¼Œæ•°æ®ç±»åž‹ä¸èƒ½å¸¦å¤§å°ã€‚å¦‚NUMBER(4)ï¼Œåªèƒ½å†™æˆNUMBERã€‚ â€“å£°æ˜Žæ—¶å¯ä»¥ç»™å®šé»˜è®¤å€¼ï¼Œå¦‚ï¼šjob VARCHAR2 DEFAULT â€˜CLEAKâ€™ å¦‚æžœè°ƒç”¨æ—¶ä¸æ­å®šè¯¥å‚æ•°ï¼Œè‡ªåŠ¨é»˜è®¤å€¼ã€‚ è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼ˆéœ€è¦é€šè¿‡æŽˆæƒæ‰èƒ½ä½¿ç”¨ï¼‰ç”¨å‘½ä»¤è°ƒç”¨EXEC[UTE] procedure_name (parameter_list);â€“EXECUTEï¼šæ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥ç¼©å†™ä¸ºEXEC å‚æ•°çš„ä¼ é€’æ–¹å¼ï¼šæŒ‰ä½ç½®ä¼ é€’ï¼Œä¾‹ï¼šEXEC add_employee(1111,â€™MARYâ€™,2000,â€™MANAGERâ€™,10); æŒ‰åç§°ä¼ é€’ï¼Œå³åœ¨è°ƒç”¨æ—¶æŒ‰åç§°å¯¹åº”ã€‚åç§°çš„å¯¹åº”å…³ç³»æ˜¯æœ€é‡è¦çš„ï¼Œæ¬¡åºä¸é‡è¦ã€‚ ä¾‹ï¼šEXEC add_employee(dno=&gt;10,name=&gt;â€™MARYâ€™,salary=&gt;2000,job=&gt;â€™MANAGERâ€™); è¿˜æœ‰ä¸ªæ··åˆæ–¹æ³•ä¼ é€’ï¼Œå¦‚æžœæœ‰ä¸€ä¸ªæ˜¯æŒ‰åç§°ä¼ é€’çš„ï¼Œé‚£åŽé¢çš„å‚æ•°éƒ½æ˜¯æŒ‰ä½ç½®ä¼  PL/SQLå—ä¸­ä½¿ç”¨123BEGIN add_employee(2111,â€™MARYâ€™,2000,â€™MANAGERâ€™,10);END; å‚æ•°æ¨¡å¼åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­å‚æ•°ä¼ é€’çš„æ¨¡å¼æœ‰3ç§ï¼šINã€OUTã€IN OUTï¼Œå³è¾“å…¥ ã€è¾“å‡ºã€è¾“å…¥/è¾“å‡ºå‚æ•°ã€‚ INæ¨¡å¼åªèƒ½å°†å®žå‚ä¼ é€’ç»™å½¢å‚ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼Œå‡½æ•°è¿”å›žæ—¶ï¼Œå®žå‚å€¼ä¸å˜ã€‚ç»“è®ºå‚æ•°ä¼ é€’ æ¨¡å¼ã€‚ OUTæ¨¡å¼ä¼šå¿½ç•¥è°ƒç”¨æ—¶çš„å®žå‚å€¼ï¼Œåœ¨å‡½æ•°å†…éƒ¨å¯å†™ï¼Œå‡½æ•°è¿”å›žæ—¶å®žå‚çš„å€¼æ”¹å˜ã€‚ IN OUTæ¨¡å¼å…·æœ‰å‰å†ç§æ¨¡å¼çš„ç‰¹æ€§ã€‚å³è°ƒç”¨æ—¶ï¼Œå®žå‚çš„å€¼æ€»æ˜¯ä¼ é€’ç»™å½¢å‚;ç»“æŸæ—¶ï¼Œå½¢å‚çš„å€¼ä¼ é€’ç»™å®žå‚ å¯ä»¥åœ¨å‚æ•°åˆ—è¡¨ä¸­ä¸ºINå‚æ•°èµ‹é»˜è®¤å€¼ã€‚ä½†æ˜¯OUTå’ŒINT OUTå‚æ•°ä¸å¯ä»¥èµ‹é»˜è®¤å€¼ã€‚ 12345678CREATE OR REPLACE PROCEDURE QueryEmp(v_empno IN employee.empno%TYPE DEFAULT 1000, --é»˜è®¤ç¼–å·ä¸º1000v_ename OUT employee.ename%TYPE,v_sal IN OUT employee.sal%TYPE)AS...... å­˜å‚¨è¿‡ç¨‹çš„è®¿é—®æƒé™â€“æŽˆæƒGRANT EXECUTE ON add_employee TO A_oe; â€“æ’¤é”€REVOKE EXECUTE ON add_employee FROM A_oe; â€“åˆ é™¤å­˜å‚¨è¿‡ç¨‹DROP PROCEDURE procedure_name; ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ è¿”å›žæ¸¸æ ‡12345678910111213141516171819202122--å­˜å‚¨è¿‡ç¨‹CREATE OR REPLACE PROCEDURE test_weber_proc(out_result_cursor OUT Sys_Refcursor) ISBegin OPEN out_result_cursor FOR SELECT * FROM employee;END;--è°ƒç”¨DECLAREtype cur is ref cursor;--e_result SYS_REFCURSOR;c1 cur;arr employee%ROWTYPE;begintest_weber_proc(c1);loopFETCH c1 INTO arr;dbms_output.put_line(arr.ENAME || arr.sal);EXIT WHEN c1%notfound;END loop;CLOSE c1;END; å•Šï¼ï¼ æ‹œæ‹œ]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[äººé—´å¤±æ ¼]]></title>
    <url>%2F2018%2F11%2F07%2F%E4%BA%BA%E9%97%B4%E5%A4%B1%E6%A0%BC%2F</url>
    <content type="text"><![CDATA[æ—¥æ—¥é‡å¤åŒæ ·çš„äº‹ï¼Œéµå¾ªç€æ˜¨æ—¥ç›¸åŒçš„æƒ¯ä¾‹ï¼Œè‹¥èƒ½é¿å¼€çŒ›çƒˆçš„ç‹‚å–œï¼Œè‡ªç„¶ä¹Ÿä¸ä¼šæœ‰æ‚²ç—›çš„æ¥è¢­ æ—¥æ—¥é‡å¤åŒæ ·çš„äº‹ï¼Œéµå¾ªç€ä¸Žæ˜¨æ—¥ç›¸åŒçš„æƒ¯ä¾‹ï¼Œè‹¥èƒ½é¿å¼€çŒ›çƒˆçš„ç‹‚å–œ ï¼Œè‡ªç„¶ä¹Ÿä¸ä¼šæœ‰æ‚²ç—›çš„æ¥è¢­ã€‚ç›¸äº’æ¬ºéª—ï¼Œå´åˆä»¤äººæƒŠå¥‡åœ°ä¸å—åˆ°ä»»ä½•ä¼¤å®³ï¼Œç”šè‡³äºŽå°±å¥½åƒæ²¡æœ‰å¯Ÿè§‰åˆ°å½¼æ­¤åœ¨æ¬ºéª—ä¼¼çš„ï¼Œè¿™ç§ä¸åŠ æŽ©é¥°ä»Žè€Œæ˜¾å¾—æ¸…å†½ã€è±è¾¾çš„äº’ä¸ä¿¡ä»»çš„ä¾‹å­ï¼Œåœ¨äººç±»ç”Ÿæ´»ä¸­æ¯”æ¯”çš†æ˜¯ã€‚å€’æ˜¯é‚£äº›å½¼æ­¤æ¬ºéª—ï¼Œå´æ¸…å†½è€Œå¼€æœ—åœ°ç”Ÿå­˜ç€ï¼ŒæŠ‘æˆ–æ˜¯æœ‰ä¿¡å¿ƒæ¸…å†½è€Œå¼€æœ—åœ°ç”Ÿæ´»ä¸‹åŽ»çš„äººï¼Œæ‰æ˜¯ä»¤äººè´¹è§£çš„ã€‚ ä¸–é—´ã€‚æˆ‘å¼€å§‹éšéšçº¦çº¦æ˜Žç™½äº†ä¸–é—´çš„çœŸç›¸ï¼Œå®ƒå°±æ˜¯ä¸ªäººä¸Žä¸ªäººä¹‹é—´çš„äº‰æ–—ï¼Œè€Œä¸”æ˜¯å³æ—¶å³åœ°çš„æ–—äº‰ã€‚äººéœ€è¦åœ¨é‚£ç§äº‰æ–—ä¸­å½“åœºå–èƒœã€‚äººæ˜¯ç»ä¸å¯èƒ½æœä»Žä»–äººçš„ã€‚å³ä½¿æ˜¯å½“å¥´éš¶ï¼Œä¹Ÿä¼šä»¥å¥´éš¶çš„æ–¹å¼è¿›è¡Œå‘å±ˆçš„åå‡»ã€‚]]></content>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•´åˆ]]></title>
    <url>%2F2018%2F11%2F06%2F%E6%95%B4%E5%90%88%2F</url>
    <content type="text"><![CDATA[é…ç½®æ–‡ä»¶æ•´åˆï¼ˆCTRL C CTRL Vï¼‰æ ¹æ®é¡¹ç›®å®žé™…æƒ…å†µè€Œå®šWEB.XML12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0"&gt; &lt;display-name&gt;CG14&lt;/display-name&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContextl.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt; org.springframework.web.context.ContextLoaderListener &lt;/listener-class&gt; &lt;/listener&gt; &lt;welcome-file-list&gt; &lt;welcome-file&gt;index.html&lt;/welcome-file&gt; &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt; &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt; &lt;welcome-file&gt;default.html&lt;/welcome-file&gt; &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt; &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt; &lt;/welcome-file-list&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt; org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;filter&gt; &lt;filter-name&gt;characterEncoding&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter &lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;characterEncoding&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; &lt;context-param&gt; &lt;param-name&gt;log4jConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:log4j.properties&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt; org.springframework.web.util.Log4jConfigListener &lt;/listener-class&gt; &lt;/listener&gt;&lt;/web-app&gt; applicationContextl.XML1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd"&gt; &lt;context:component-scan base-package="cn.appsys.service"&gt;&lt;/context:component-scan&gt; &lt;context:component-scan base-package="cn.appsys.controller"&gt;&lt;/context:component-scan&gt; &lt;!-- è¯»å–æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location="classpath:database.properties"/&gt; &lt;!-- JNDIèŽ·å–æ•°æ®æº(ä½¿ç”¨dbcpè¿žæŽ¥æ± ) --&gt; &lt;bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" scope="singleton" id="dataSource"&gt; &lt;property name="driverClassName" value="$&#123;driver&#125;" /&gt; &lt;property name="url" value="$&#123;url&#125;" /&gt; &lt;property name="username" value="$&#123;user&#125;" /&gt; &lt;property name="password" value="$&#123;password&#125;" /&gt; &lt;property name="initialSize" value="$&#123;initialSize&#125;"/&gt; &lt;property name="maxActive" value="$&#123;maxActive&#125;"/&gt; &lt;property name="maxIdle" value="$&#123;maxIdle&#125;"/&gt; &lt;property name="minIdle" value="$&#123;minIdle&#125;"/&gt; &lt;property name="maxWait" value="$&#123;maxWait&#125;"/&gt; &lt;property name="removeAbandonedTimeout" value="$&#123;removeAbandonedTimeout&#125;"/&gt; &lt;property name="removeAbandoned" value="$&#123;removeAbandoned&#125;"/&gt; &lt;!-- sql å¿ƒè·³ --&gt; &lt;property name= "testWhileIdle" value="true"/&gt; &lt;property name= "testOnBorrow" value="false"/&gt; &lt;property name= "testOnReturn" value="false"/&gt; &lt;property name= "validationQuery" value="select 1"/&gt; &lt;property name= "timeBetweenEvictionRunsMillis" value="60000"/&gt; &lt;property name= "numTestsPerEvictionRun" value="$&#123;maxActive&#125;"/&gt; &lt;/bean&gt; &lt;!-- æ•°æ®æºåœ¨é…ç½®æ–‡ä»¶ä¸­ --&gt; &lt;!-- &lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"&gt; &lt;property name="driverClassName" value="$&#123;driver&#125;"&gt;&lt;/property&gt; &lt;property name="url" value="$&#123;url&#125;"&gt;&lt;/property&gt; &lt;property name="username" value="$&#123;user&#125;"&gt;&lt;/property&gt; &lt;property name="password" value="$&#123;password&#125;"&gt;&lt;/property&gt; &lt;/bean&gt; --&gt; &lt;!-- ä½¿ç”¨jndiæ•°æ®æº åœ¨tomcat content.xmlé…ç½® --&gt; &lt;!-- &lt;bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean"&gt; &lt;property name="jndiName"&gt; &lt;value&gt;java:comp/env/jndi/smbms&lt;/value&gt; &lt;/property&gt; &lt;/bean&gt; --&gt; &lt;!-- é…ç½®SqlSessionFactoryBean --&gt; &lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt; &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt; &lt;property name="configLocation" value="classpath:mybatis-configl.xml"&gt;&lt;/property&gt; &lt;property name="mapperLocations"&gt; &lt;list&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;!-- é…ç½®Dao --&gt; &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt; &lt;property name="basePackage" value="cn.appsys.dao.*"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- äº‹åŠ¡å¢žå¼º --&gt; &lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt; &lt;tx:attributes&gt; &lt;tx:method name="*" propagation="REQUIRED" /&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!-- é…ç½®åˆ‡é¢ --&gt; &lt;aop:config&gt; &lt;aop:pointcut expression="execution(* cn.appsys.service..*.*(..))" id="myPoint" /&gt; &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="myPoint" /&gt; &lt;/aop:config&gt;&lt;/beans&gt; database.properties(mysql)1234567891011driver=com.mysql.jdbc.Driverurl=jdbc:mysql://localhost:3306/appinfodb?useUnicode=true&amp;characterEncoding=utf-8user=rootpassword=rootminIdle=45maxIdle=50initialSize=5maxActive=100maxWait=100removeAbandonedTimeout=180removeAbandoned=true log4j.properties123456789101112131415161718192021222324252627282930313233343536log4j.rootLogger=DEBUG,CONSOLE,file#log4j.rootLogger=ERROR,ROLLING_FILElog4j.logger.cn.smbms.dao=debuglog4j.logger.com.ibatis=debug log4j.logger.com.ibatis.common.jdbc.SimpleDataSource=debug log4j.logger.com.ibatis.common.jdbc.ScriptRunner=debug log4j.logger.com.ibatis.sqlmap.engine.impl.SqlMapClientDelegate=debug log4j.logger.java.sql.Connection=debug log4j.logger.java.sql.Statement=debug log4j.logger.java.sql.PreparedStatement=debug log4j.logger.java.sql.ResultSet=debug log4j.logger.org.tuckey.web.filters.urlrewrite.UrlRewriteFilter=debug####################################################################################### Console Appender \u65e5\u5fd7\u5728\u63a7\u5236\u8f93\u51fa\u914d\u7f6e######################################################################################log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppenderlog4j.appender.Threshold=errorlog4j.appender.CONSOLE.Target=System.outlog4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayoutlog4j.appender.CONSOLE.layout.ConversionPattern= [%p] %d %c - %m%n####################################################################################### DailyRolling File \u6bcf\u5929\u4ea7\u751f\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u683c\u5f0f:log2009-09-11######################################################################################log4j.appender.file=org.apache.log4j.DailyRollingFileAppenderlog4j.appender.file.DatePattern=yyyy-MM-ddlog4j.appender.file.File=log.loglog4j.appender.file.Append=truelog4j.appender.file.Threshold=errorlog4j.appender.file.layout=org.apache.log4j.PatternLayoutlog4j.appender.file.layout.ConversionPattern=%d&#123;yyyy-M-d HH:mm:ss&#125;%x[%5p](%F:%L) %m%nlog4j.logger.com.opensymphony.xwork2=error mybatis-configl.XML123456789101112131415161718&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE configurationPUBLIC "-//mybatis.org//DTD Config 3.0//EN""http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;!-- å¼•å…¥database.propertiesæ–‡ä»¶ --&gt; &lt;!-- é…ç½®mybatisçš„logå®žçŽ°ä¸ºLOG4J --&gt; &lt;settings&gt; &lt;!-- &lt;setting name="logImpl" value="LOG4J" /&gt; --&gt; &lt;setting name="lazyLoadingEnabled" value="false"/&gt; &lt;setting name="autoMappingBehavior" value="FULL"/&gt; &lt;/settings&gt; &lt;typeAliases&gt; &lt;package name="cn.appsys.pojo"/&gt; &lt;/typeAliases&gt;&lt;/configuration&gt; springmvc-servlet.XML123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;!-- é…ç½®å¤„ç†å™¨æ˜ å°„ HandlerMapping --&gt; &lt;!-- &lt;bean name="/index.html" class="cn.smbms.controller.IndexController" /&gt; --&gt; &lt;!-- &lt;bean name="/welcome" class="cn.smbms.controller.IndexController" /&gt; --&gt; &lt;!-- &lt;bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean"&gt; &lt;/bean&gt; --&gt; &lt;context:component-scan base-package="cn.appsys.controller"/&gt; &lt;!-- è‡ªå®šä¹‰è½¬æ¢å™¨ --&gt; &lt;!-- &lt;bean id="myConversionService" class="org.springframework.context.support.ConversionServiceFactoryBean"&gt; &lt;property name="converters"&gt; &lt;list&gt; &lt;bean class="cn.smbms.tools.StringToDateConverter"&gt; &lt;constructor-arg type="java.lang.String" value="yyyy-MM-dd" /&gt; &lt;/bean&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; --&gt; &lt;!-- æ‹¦æˆªå™¨ --&gt; &lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;mvc:mapping path="/sys/**"/&gt; &lt;bean class="cn.appsys.interceptor.SysInterceptor"&gt;&lt;/bean&gt; &lt;/mvc:interceptor&gt; &lt;/mvc:interceptors&gt; &lt;mvc:annotation-driven&gt; &lt;!-- æ¶ˆæ¯è½¬æ¢å™¨ --&gt; &lt;mvc:message-converters&gt; &lt;bean class="org.springframework.http.converter.StringHttpMessageConverter"&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;application/json;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;bean class="com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter"&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;application/json;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;property name="features"&gt; &lt;list&gt; &lt;value&gt;WriteDateUseDateFormat&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt; &lt;/mvc:annotation-driven&gt; &lt;!-- å®Œæˆè§†å›¾çš„å¯¹åº” --&gt; &lt;!-- å¯¹è½¬å‘é¡µé¢çš„è·¯å¾„è§£æžã€‚prefixï¼šå‰ç¼€ï¼Œ suffixï¼šåŽç¼€ --&gt; &lt;!-- &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/jsp/" /&gt; &lt;property name="suffix" value=".jsp" /&gt; &lt;/bean&gt; --&gt; &lt;!-- é…ç½®å¤šè§†å›¾è§£æžå™¨ ï¼šå…è®¸ç»Ÿä¸€çš„å†…å®¹æ•°æ®å‘ˆçŽ°åœ¨ä¸åŒçš„viewä¸­ --&gt; &lt;bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver"&gt; &lt;!-- æ”¯æŒå‚æ•°åŒ¹é… --&gt; &lt;property name="favorParameter" value="true"/&gt; &lt;property name="mediaTypes"&gt; &lt;map&gt; &lt;entry key="html" value="text/html;charset=UTF-8"&gt;&lt;/entry&gt; &lt;entry key="json" value="application/json;charset=UTF-8"&gt;&lt;/entry&gt; &lt;entry key="xml" value="application/xml;charset=UTF-8"&gt;&lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;!-- ç½‘é¡µè§†å›¾è§£æžå™¨ --&gt; &lt;property name="viewResolvers"&gt; &lt;list&gt; &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/jsp/" /&gt; &lt;property name="suffix" value=".jsp" /&gt; &lt;/bean&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;mvc:resources location="/statics/" mapping="/statics/**"&gt;&lt;/mvc:resources&gt; &lt;!-- å…¨å±€å¼‚å¸¸çš„é…ç½® --&gt; &lt;bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"&gt; &lt;property name="exceptionMappings"&gt; &lt;props&gt; &lt;prop key="java.lang.RuntimeException"&gt;error&lt;/prop&gt; &lt;/props&gt; &lt;/property&gt; &lt;/bean&gt; &lt;!-- é…ç½®MulitpartResolverï¼Œç”¨äºŽæ–‡ä»¶ä¸Šä¼  --&gt; &lt;bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"&gt; &lt;property name="maxUploadSize" value="5000000" /&gt; &lt;property name="defaultEncoding" value="utf-8" /&gt; &lt;/bean&gt;&lt;/beans&gt; Logger(AOP)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293package cn.appsys.tools;import java.util.Arrays;import org.apache.log4j.Logger;import org.aspectj.lang.JoinPoint;import org.aspectj.lang.ProceedingJoinPoint;import org.aspectj.lang.annotation.After;import org.aspectj.lang.annotation.AfterReturning;import org.aspectj.lang.annotation.AfterThrowing;import org.aspectj.lang.annotation.Around;import org.aspectj.lang.annotation.Aspect;import org.aspectj.lang.annotation.Before;import org.aspectj.lang.annotation.Pointcut;/** * æ³¨è§£å®šä¹‰åˆ‡é¢ * @author F117 * */@Aspectpublic class UserServiceLogger &#123; private static final Logger LOGGER=Logger.getLogger(UserServiceLogger.class); @Pointcut("execution(* cn.service..*.*(..)) ") public void pointcut()&#123;&#125; /** * å‰ç½®å¢žå¼º * @param jp */ @Before("pointcut()") public void before(JoinPoint jp) &#123; LOGGER.info("è°ƒç”¨ " + jp.getTarget() + " çš„ " + jp.getSignature().getName() + " æ–¹æ³•ã€‚æ–¹æ³•å…¥å‚ï¼š" + Arrays.toString(jp.getArgs())); &#125; /** * åŽç½®å¢žå¼º * @param jp * @param returnValue */ @AfterReturning(pointcut = "pointcut()", returning = "returnValue") public void afterReturning(JoinPoint jp, Object returnValue) &#123; LOGGER.info("è°ƒç”¨ " + jp.getTarget() + " çš„ " + jp.getSignature().getName() + " æ–¹æ³•ã€‚æ–¹æ³•è¿”å›žå€¼ï¼š" + returnValue); &#125; /** * æœ€ç»ˆå¢žå¼º * @param jp */ @After("pointcut()") public void afterLogger(JoinPoint jp) &#123; LOGGER.info(jp.getSignature().getName() + " æ–¹æ³•ç»“æŸæ‰§è¡Œã€‚"); &#125; /** * å¼‚å¸¸å¢žå¼º * @param jp * @param e */ @AfterThrowing(value="pointcut()", throwing = "e") public void afterThrowing(JoinPoint jp, RuntimeException e) &#123; LOGGER.error(jp.getSignature().getName() + " æ–¹æ³•å‘ç”Ÿå¼‚å¸¸ï¼š" + e); &#125; /** * çŽ¯ç»•å¢žå¼º * @param jp * @return * @throws Throwable */ @Around("pointcut()") public Object aroundLogger(ProceedingJoinPoint jp) throws Throwable &#123; LOGGER.info("è°ƒç”¨ " + jp.getTarget() + " çš„ " + jp.getSignature().getName() + " æ–¹æ³•ã€‚æ–¹æ³•å…¥å‚ï¼š" + Arrays.toString(jp.getArgs())); try &#123; Object result = jp.proceed(); LOGGER.info("è°ƒç”¨ " + jp.getTarget() + " çš„ " + jp.getSignature().getName() + " æ–¹æ³•ã€‚æ–¹æ³•è¿”å›žå€¼ï¼š" + result); return result; &#125; catch (Throwable e) &#123; LOGGER.error(jp.getSignature().getName() + " æ–¹æ³•å‘ç”Ÿå¼‚å¸¸ï¼š" + e); throw e; &#125; finally &#123; LOGGER.info(jp.getSignature().getName() + " æ–¹æ³•ç»“æŸæ‰§è¡Œã€‚"); &#125; &#125; &#125; Controllerå¢žåˆ æ”¹æŸ¥123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728package cn.appsys.controller.developer;import java.io.File;import java.util.Date;import java.util.HashMap;import java.util.List;import javax.annotation.Resource;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpSession;import org.apache.commons.io.FilenameUtils;import org.apache.log4j.Logger;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.ModelAttribute;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.multipart.MultipartFile;import com.alibaba.fastjson.JSONArray;import com.mysql.jdbc.StringUtils;import cn.appsys.pojo.AppCategory;import cn.appsys.pojo.AppInfo;import cn.appsys.pojo.AppVersion;import cn.appsys.pojo.DataDictionary;import cn.appsys.pojo.DevUser;import cn.appsys.service.developer.AppCategoryService;import cn.appsys.service.developer.AppInfoService;import cn.appsys.service.developer.AppVersionService;import cn.appsys.service.developer.DataDictionaryService;import cn.appsys.tools.Constants;import cn.appsys.tools.PageSupport;@Controller@RequestMapping(value="/dev/flatform/app")public class AppController &#123; private Logger logger = Logger.getLogger(AppController.class); @Resource private AppInfoService appInfoService; @Resource private DataDictionaryService dataDictionaryService; @Resource private AppCategoryService appCategoryService; @Resource private AppVersionService appVersionService; @RequestMapping(value="/list") public String getAppInfoList(Model model,HttpSession session, @RequestParam(value="querySoftwareName",required=false) String querySoftwareName, @RequestParam(value="queryStatus",required=false) String _queryStatus, @RequestParam(value="queryCategoryLevel1",required=false) String _queryCategoryLevel1, @RequestParam(value="queryCategoryLevel2",required=false) String _queryCategoryLevel2, @RequestParam(value="queryCategoryLevel3",required=false) String _queryCategoryLevel3, @RequestParam(value="queryFlatformId",required=false) String _queryFlatformId, @RequestParam(value="pageIndex",required=false) String pageIndex)&#123; logger.info("getAppInfoList -- &gt; querySoftwareName: " + querySoftwareName); logger.info("getAppInfoList -- &gt; queryStatus: " + _queryStatus); logger.info("getAppInfoList -- &gt; queryCategoryLevel1: " + _queryCategoryLevel1); logger.info("getAppInfoList -- &gt; queryCategoryLevel2: " + _queryCategoryLevel2); logger.info("getAppInfoList -- &gt; queryCategoryLevel3: " + _queryCategoryLevel3); logger.info("getAppInfoList -- &gt; queryFlatformId: " + _queryFlatformId); logger.info("getAppInfoList -- &gt; pageIndex: " + pageIndex); Integer devId = ((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId(); List&lt;AppInfo&gt; appInfoList = null; List&lt;DataDictionary&gt; statusList = null; List&lt;DataDictionary&gt; flatFormList = null; List&lt;AppCategory&gt; categoryLevel1List = null;//åˆ—å‡ºä¸€çº§åˆ†ç±»åˆ—è¡¨ï¼Œæ³¨ï¼šäºŒçº§å’Œä¸‰çº§åˆ†ç±»åˆ—è¡¨é€šè¿‡å¼‚æ­¥ajaxèŽ·å– List&lt;AppCategory&gt; categoryLevel2List = null; List&lt;AppCategory&gt; categoryLevel3List = null; //é¡µé¢å®¹é‡ int pageSize = Constants.pageSize; //å½“å‰é¡µç  Integer currentPageNo = 1; if(pageIndex != null)&#123; try&#123; currentPageNo = Integer.valueOf(pageIndex); &#125;catch (NumberFormatException e) &#123; // TODO: handle exception e.printStackTrace(); &#125; &#125; Integer queryStatus = null; if(_queryStatus != null &amp;&amp; !_queryStatus.equals(""))&#123; queryStatus = Integer.parseInt(_queryStatus); &#125; Integer queryCategoryLevel1 = null; if(_queryCategoryLevel1 != null &amp;&amp; !_queryCategoryLevel1.equals(""))&#123; queryCategoryLevel1 = Integer.parseInt(_queryCategoryLevel1); &#125; Integer queryCategoryLevel2 = null; if(_queryCategoryLevel2 != null &amp;&amp; !_queryCategoryLevel2.equals(""))&#123; queryCategoryLevel2 = Integer.parseInt(_queryCategoryLevel2); &#125; Integer queryCategoryLevel3 = null; if(_queryCategoryLevel3 != null &amp;&amp; !_queryCategoryLevel3.equals(""))&#123; queryCategoryLevel3 = Integer.parseInt(_queryCategoryLevel3); &#125; Integer queryFlatformId = null; if(_queryFlatformId != null &amp;&amp; !_queryFlatformId.equals(""))&#123; queryFlatformId = Integer.parseInt(_queryFlatformId); &#125; //æ€»æ•°é‡ï¼ˆè¡¨ï¼‰ int totalCount = 0; try &#123; totalCount = appInfoService.getAppInfoCount(querySoftwareName, queryStatus, queryCategoryLevel1, queryCategoryLevel2, queryCategoryLevel3, queryFlatformId, devId); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; //æ€»é¡µæ•° PageSupport pages = new PageSupport(); pages.setCurrentPageNo(currentPageNo); pages.setPageSize(pageSize); pages.setTotalCount(totalCount); int totalPageCount = pages.getTotalPageCount(); //æŽ§åˆ¶é¦–é¡µå’Œå°¾é¡µ if(currentPageNo &lt; 1)&#123; currentPageNo = 1; &#125;else if(currentPageNo &gt; totalPageCount)&#123; currentPageNo = totalPageCount; &#125; try &#123; appInfoList = appInfoService.getAppInfoList(querySoftwareName, queryStatus, queryCategoryLevel1, queryCategoryLevel2, queryCategoryLevel3, queryFlatformId, devId, currentPageNo, pageSize); statusList = this.getDataDictionaryList("APP_STATUS"); flatFormList = this.getDataDictionaryList("APP_FLATFORM"); categoryLevel1List = appCategoryService.getAppCategoryListByParentId(null); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; model.addAttribute("appInfoList", appInfoList); model.addAttribute("statusList", statusList); model.addAttribute("flatFormList", flatFormList); model.addAttribute("categoryLevel1List", categoryLevel1List); model.addAttribute("pages", pages); model.addAttribute("queryStatus", queryStatus); model.addAttribute("querySoftwareName", querySoftwareName); model.addAttribute("queryCategoryLevel1", queryCategoryLevel1); model.addAttribute("queryCategoryLevel2", queryCategoryLevel2); model.addAttribute("queryCategoryLevel3", queryCategoryLevel3); model.addAttribute("queryFlatformId", queryFlatformId); //äºŒçº§åˆ†ç±»åˆ—è¡¨å’Œä¸‰çº§åˆ†ç±»åˆ—è¡¨---å›žæ˜¾ if(queryCategoryLevel2 != null &amp;&amp; !queryCategoryLevel2.equals(""))&#123; categoryLevel2List = getCategoryList(queryCategoryLevel1.toString()); model.addAttribute("categoryLevel2List", categoryLevel2List); &#125; if(queryCategoryLevel3 != null &amp;&amp; !queryCategoryLevel3.equals(""))&#123; categoryLevel3List = getCategoryList(queryCategoryLevel2.toString()); model.addAttribute("categoryLevel3List", categoryLevel3List); &#125; return "developer/appinfolist"; &#125; public List&lt;DataDictionary&gt; getDataDictionaryList(String typeCode)&#123; List&lt;DataDictionary&gt; dataDictionaryList = null; try &#123; dataDictionaryList = dataDictionaryService.getDataDictionaryList(typeCode); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; return dataDictionaryList; &#125; /** * æ ¹æ®typeCodeæŸ¥è¯¢å‡ºç›¸åº”çš„æ•°æ®å­—å…¸åˆ—è¡¨ * @param pid * @return */ @RequestMapping(value="/datadictionarylist.json",method=RequestMethod.GET) @ResponseBody public List&lt;DataDictionary&gt; getDataDicList (@RequestParam String tcode)&#123; logger.debug("getDataDicList tcode ============ " + tcode); return this.getDataDictionaryList(tcode); &#125; /** * æ ¹æ®parentIdæŸ¥è¯¢å‡ºç›¸åº”çš„åˆ†ç±»çº§åˆ«åˆ—è¡¨ * @param pid * @return */ @RequestMapping(value="/categorylevellist.json",method=RequestMethod.GET) @ResponseBody public List&lt;AppCategory&gt; getAppCategoryList (@RequestParam String pid)&#123; logger.debug("getAppCategoryList pid ============ " + pid); if(pid.equals("")) pid = null; return getCategoryList(pid); &#125; public List&lt;AppCategory&gt; getCategoryList (String pid)&#123; List&lt;AppCategory&gt; categoryLevelList = null; try &#123; categoryLevelList = appCategoryService.getAppCategoryListByParentId(pid==null?null:Integer.parseInt(pid)); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; return categoryLevelList; &#125; //è·³è½¬åˆ°æ–°å¢žappinfoé¡µé¢ @RequestMapping(value="/appinfoadd",method=RequestMethod.GET) public String add(@ModelAttribute("appInfo") AppInfo appInfo)&#123; return "developer/appinfoadd"; &#125; //ä¿å­˜appinfoæ•°æ® @RequestMapping(value="/appinfoaddsave",method=RequestMethod.POST) public String addSave(AppInfo appInfo,HttpSession session,HttpServletRequest request, @RequestParam(value="a_logoPicPath",required= false) MultipartFile attach)&#123; String logoPicPath = null; String logoLocPath = null; if(!attach.isEmpty())&#123; String path = request.getSession().getServletContext().getRealPath("statics"+java.io.File.separator+"uploadfiles"); logger.info("uploadFile path: " + path); String oldFileName = attach.getOriginalFilename();//åŽŸæ–‡ä»¶å String prefix = FilenameUtils.getExtension(oldFileName);//åŽŸæ–‡ä»¶åŽç¼€ int filesize = 500000; if(attach.getSize() &gt; filesize)&#123;//ä¸Šä¼ å¤§å°ä¸å¾—è¶…è¿‡ 50k request.setAttribute("fileUploadError", Constants.FILEUPLOAD_ERROR_4); return "developer/appinfoadd"; &#125;else if(prefix.equalsIgnoreCase("jpg") || prefix.equalsIgnoreCase("png") ||prefix.equalsIgnoreCase("jepg") || prefix.equalsIgnoreCase("pneg"))&#123;//ä¸Šä¼ å›¾ç‰‡æ ¼å¼ String fileName = appInfo.getAPKName() + ".jpg";//ä¸Šä¼ LOGOå›¾ç‰‡å‘½å:apkåç§°.apk File targetFile = new File(path,fileName); if(!targetFile.exists())&#123; targetFile.mkdirs(); &#125; try &#123; attach.transferTo(targetFile); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); request.setAttribute("fileUploadError", Constants.FILEUPLOAD_ERROR_2); return "developer/appinfoadd"; &#125; logoPicPath = request.getContextPath()+"/statics/uploadfiles/"+fileName; //ç»å¯¹è·¯å¾„ logoLocPath = path+File.separator+fileName; //ç›¸å¯¹è·¯å¾„ &#125;else&#123; request.setAttribute("fileUploadError", Constants.FILEUPLOAD_ERROR_3); return "developer/appinfoadd"; &#125; &#125; appInfo.setCreatedBy(((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId()); appInfo.setCreationDate(new Date()); appInfo.setLogoPicPath(logoPicPath); appInfo.setLogoLocPath(logoLocPath); appInfo.setDevId(((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId()); appInfo.setStatus(1); try &#123; if(appInfoService.add(appInfo))&#123; return "redirect:/dev/flatform/app/list"; &#125; &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; return "developer/appinfoadd"; &#125; /** * å¢žåŠ appversionä¿¡æ¯ï¼ˆè·³è½¬åˆ°æ–°å¢žappç‰ˆæœ¬é¡µé¢ï¼‰ * @param appInfo * @return */ @RequestMapping(value="/appversionadd",method=RequestMethod.GET) public String addVersion(@RequestParam(value="id")String appId, @RequestParam(value="error",required= false)String fileUploadError, AppVersion appVersion,Model model)&#123; logger.debug("fileUploadError============&gt; " + fileUploadError); if(null != fileUploadError &amp;&amp; fileUploadError.equals("error1"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_1; &#125;else if(null != fileUploadError &amp;&amp; fileUploadError.equals("error2"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_2; &#125;else if(null != fileUploadError &amp;&amp; fileUploadError.equals("error3"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_3; &#125; appVersion.setAppId(Integer.parseInt(appId)); List&lt;AppVersion&gt; appVersionList = null; try &#123; appVersionList = appVersionService.getAppVersionList(Integer.parseInt(appId)); appVersion.setAppName((appInfoService.getAppInfo(Integer.parseInt(appId),null)).getSoftwareName()); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; model.addAttribute("appVersionList", appVersionList); model.addAttribute(appVersion); model.addAttribute("fileUploadError",fileUploadError); return "developer/appversionadd"; &#125; /** * ä¿å­˜æ–°å¢žappversionæ•°æ®ï¼ˆå­è¡¨ï¼‰-ä¸Šä¼ è¯¥ç‰ˆæœ¬çš„apkåŒ… * @param appInfo * @param appVersion * @param session * @param request * @param attach * @return */ @RequestMapping(value="/addversionsave",method=RequestMethod.POST) public String addVersionSave(AppVersion appVersion,HttpSession session,HttpServletRequest request, @RequestParam(value="a_downloadLink",required= false) MultipartFile attach )&#123; String downloadLink = null; String apkLocPath = null; String apkFileName = null; if(!attach.isEmpty())&#123; String path = request.getSession().getServletContext().getRealPath("statics"+File.separator+"uploadfiles"); logger.info("uploadFile path: " + path); String oldFileName = attach.getOriginalFilename();//åŽŸæ–‡ä»¶å String prefix = FilenameUtils.getExtension(oldFileName);//åŽŸæ–‡ä»¶åŽç¼€ if(prefix.equalsIgnoreCase("apk"))&#123;//apkæ–‡ä»¶å‘½åï¼šapkåç§°+ç‰ˆæœ¬å·+.apk String apkName = null; try &#123; apkName = appInfoService.getAppInfo(appVersion.getAppId(),null).getAPKName(); &#125; catch (Exception e1) &#123; // TODO Auto-generated catch block e1.printStackTrace(); &#125; if(apkName == null || "".equals(apkName))&#123; return "redirect:/dev/flatform/app/appversionadd?id="+appVersion.getAppId() +"&amp;error=error1"; &#125; apkFileName = apkName + "-" +appVersion.getVersionNo() + ".apk"; File targetFile = new File(path,apkFileName); if(!targetFile.exists())&#123; targetFile.mkdirs(); &#125; try &#123; attach.transferTo(targetFile); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); return "redirect:/dev/flatform/app/appversionadd?id="+appVersion.getAppId() +"&amp;error=error2"; &#125; downloadLink = request.getContextPath()+"/statics/uploadfiles/"+apkFileName; apkLocPath = path+File.separator+apkFileName; &#125;else&#123; return "redirect:/dev/flatform/app/appversionadd?id="+appVersion.getAppId() +"&amp;error=error3"; &#125; &#125; appVersion.setCreatedBy(((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId()); appVersion.setCreationDate(new Date()); appVersion.setDownloadLink(downloadLink); appVersion.setApkLocPath(apkLocPath); appVersion.setApkFileName(apkFileName); try &#123; if(appVersionService.appsysadd(appVersion))&#123; return "redirect:/dev/flatform/app/list"; &#125; &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; return "redirect:/dev/flatform/app/appversionadd?id="+appVersion.getAppId(); &#125; @RequestMapping(value="/&#123;appid&#125;/sale",method=RequestMethod.PUT) @ResponseBody public Object sale(@PathVariable String appid,HttpSession session)&#123; HashMap&lt;String, Object&gt; resultMap = new HashMap&lt;String, Object&gt;(); Integer appIdInteger = 0; try&#123; appIdInteger = Integer.parseInt(appid); &#125;catch(Exception e)&#123; appIdInteger = 0; &#125; resultMap.put("errorCode", "0"); resultMap.put("appId", appid); if(appIdInteger&gt;0)&#123; try &#123; DevUser devUser = (DevUser)session.getAttribute(Constants.DEV_USER_SESSION); AppInfo appInfo = new AppInfo(); appInfo.setId(appIdInteger); appInfo.setModifyBy(devUser.getId()); if(appInfoService.appsysUpdateSaleStatusByAppId(appInfo))&#123; resultMap.put("resultMsg", "success"); &#125;else&#123; resultMap.put("resultMsg", "success"); &#125; &#125; catch (Exception e) &#123; resultMap.put("errorCode", "exception000001"); &#125; &#125;else&#123; //errorCode:0ä¸ºæ­£å¸¸ resultMap.put("errorCode", "param000001"); &#125; /* * resultMsg:success/failed * errorCode:exception000001 * appId:appId * errorCode:param000001 */ return resultMap; &#125; /** * åˆ¤æ–­APKNameæ˜¯å¦å”¯ä¸€ * @param apkName * @return */ @RequestMapping(value="/apkexist.json",method=RequestMethod.GET) @ResponseBody public Object apkNameIsExit(@RequestParam String APKName)&#123; HashMap&lt;String, String&gt; resultMap = new HashMap&lt;String, String&gt;(); if(StringUtils.isNullOrEmpty(APKName))&#123; resultMap.put("APKName", "empty"); &#125;else&#123; AppInfo appInfo = null; try &#123; appInfo = appInfoService.getAppInfo(null, APKName); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; if(null != appInfo) resultMap.put("APKName", "exist"); else resultMap.put("APKName", "noexist"); &#125; return JSONArray.toJSONString(resultMap); &#125; /** * æŸ¥çœ‹appä¿¡æ¯ï¼ŒåŒ…æ‹¬appåŸºæœ¬ä¿¡æ¯å’Œç‰ˆæœ¬ä¿¡æ¯åˆ—è¡¨ï¼ˆè·³è½¬åˆ°æŸ¥çœ‹é¡µé¢ï¼‰ * @param appInfo * @return */ @RequestMapping(value="/appview/&#123;id&#125;",method=RequestMethod.GET) public String view(@PathVariable String id,Model model)&#123; AppInfo appInfo = null; List&lt;AppVersion&gt; appVersionList = null; try &#123; appInfo = appInfoService.getAppInfo(Integer.parseInt(id),null); appVersionList = appVersionService.getAppVersionList(Integer.parseInt(id)); &#125;catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; model.addAttribute("appVersionList", appVersionList); model.addAttribute(appInfo); return "developer/appinfoview"; &#125; /** * ä¿®æ”¹appä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šä¿®æ”¹appåŸºæœ¬ä¿¡æ¯ï¼ˆappInfoï¼‰å’Œä¿®æ”¹ç‰ˆæœ¬ä¿¡æ¯ï¼ˆappVersionï¼‰ * åˆ†ä¸ºä¸¤æ­¥å®žçŽ°ï¼š * 1 ä¿®æ”¹appåŸºæœ¬ä¿¡æ¯ï¼ˆappInfoï¼‰ * 2 ä¿®æ”¹ç‰ˆæœ¬ä¿¡æ¯ï¼ˆappVersionï¼‰ */ /** * ä¿®æ”¹appInfoä¿¡æ¯ï¼ˆè·³è½¬åˆ°ä¿®æ”¹appInfoé¡µé¢ï¼‰ * @param id * @param model * @return */ @RequestMapping(value="/appinfomodify",method=RequestMethod.GET) public String modifyAppInfo(@RequestParam("id") String id, @RequestParam(value="error",required= false)String fileUploadError, Model model)&#123; AppInfo appInfo = null; logger.debug("modifyAppInfo --------- id: " + id); if(null != fileUploadError &amp;&amp; fileUploadError.equals("error1"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_1; &#125;else if(null != fileUploadError &amp;&amp; fileUploadError.equals("error2"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_2; &#125;else if(null != fileUploadError &amp;&amp; fileUploadError.equals("error3"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_3; &#125;else if(null != fileUploadError &amp;&amp; fileUploadError.equals("error4"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_4; &#125; try &#123; appInfo = appInfoService.getAppInfo(Integer.parseInt(id),null); &#125;catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; model.addAttribute(appInfo); model.addAttribute("fileUploadError",fileUploadError); return "developer/appinfomodify"; &#125; /** * ä¿®æ”¹æœ€æ–°çš„appVersionä¿¡æ¯ï¼ˆè·³è½¬åˆ°ä¿®æ”¹appVersioné¡µé¢ï¼‰ * @param versionId * @param appId * @param model * @return */ @RequestMapping(value="/appversionmodify",method=RequestMethod.GET) public String modifyAppVersion(@RequestParam("vid") String versionId, @RequestParam("aid") String appId, @RequestParam(value="error",required= false)String fileUploadError, Model model)&#123; AppVersion appVersion = null; List&lt;AppVersion&gt; appVersionList = null; if(null != fileUploadError &amp;&amp; fileUploadError.equals("error1"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_1; &#125;else if(null != fileUploadError &amp;&amp; fileUploadError.equals("error2"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_2; &#125;else if(null != fileUploadError &amp;&amp; fileUploadError.equals("error3"))&#123; fileUploadError = Constants.FILEUPLOAD_ERROR_3; &#125; try &#123; appVersion = appVersionService.getAppVersionById(Integer.parseInt(versionId)); appVersionList = appVersionService.getAppVersionList(Integer.parseInt(appId)); &#125;catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; model.addAttribute(appVersion); model.addAttribute("appVersionList",appVersionList); model.addAttribute("fileUploadError",fileUploadError); return "developer/appversionmodify"; &#125; /** * ä¿å­˜ä¿®æ”¹åŽçš„appVersion * @param appVersion * @param session * @return */ @RequestMapping(value="/appversionmodifysave",method=RequestMethod.POST) public String modifyAppVersionSave(AppVersion appVersion,HttpSession session,HttpServletRequest request, @RequestParam(value="attach",required= false) MultipartFile attach)&#123; String downloadLink = null; String apkLocPath = null; String apkFileName = null; if(!attach.isEmpty())&#123; String path = request.getSession().getServletContext().getRealPath("statics"+File.separator+"uploadfiles"); logger.info("uploadFile path: " + path); String oldFileName = attach.getOriginalFilename();//åŽŸæ–‡ä»¶å String prefix = FilenameUtils.getExtension(oldFileName);//åŽŸæ–‡ä»¶åŽç¼€ if(prefix.equalsIgnoreCase("apk"))&#123;//apkæ–‡ä»¶å‘½åï¼šapkåç§°+ç‰ˆæœ¬å·+.apk String apkName = null; try &#123; apkName = appInfoService.getAppInfo(appVersion.getAppId(),null).getAPKName(); &#125; catch (Exception e1) &#123; // TODO Auto-generated catch block e1.printStackTrace(); &#125; if(apkName == null || "".equals(apkName))&#123; return "redirect:/dev/flatform/app/appversionmodify?vid="+appVersion.getId() +"&amp;aid="+appVersion.getAppId() +"&amp;error=error1"; &#125; apkFileName = apkName + "-" +appVersion.getVersionNo() + ".apk"; File targetFile = new File(path,apkFileName); if(!targetFile.exists())&#123; targetFile.mkdirs(); &#125; try &#123; attach.transferTo(targetFile); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); return "redirect:/dev/flatform/app/appversionmodify?vid="+appVersion.getId() +"&amp;aid="+appVersion.getAppId() +"&amp;error=error2"; &#125; downloadLink = request.getContextPath()+"/statics/uploadfiles/"+apkFileName; apkLocPath = path+File.separator+apkFileName; &#125;else&#123; return "redirect:/dev/flatform/app/appversionmodify?vid="+appVersion.getId() +"&amp;aid="+appVersion.getAppId() +"&amp;error=error3"; &#125; &#125; appVersion.setModifyBy(((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId()); appVersion.setModifyDate(new Date()); appVersion.setDownloadLink(downloadLink); appVersion.setApkLocPath(apkLocPath); appVersion.setApkFileName(apkFileName); try &#123; if(appVersionService.modify(appVersion))&#123; return "redirect:/dev/flatform/app/list"; &#125; &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; return "developer/appversionmodify"; &#125; /** * ä¿®æ”¹æ“ä½œæ—¶ï¼Œåˆ é™¤æ–‡ä»¶ï¼ˆlogoå›¾ç‰‡/apkæ–‡ä»¶ï¼‰ï¼Œå¹¶æ›´æ–°æ•°æ®åº“ï¼ˆapp_info/app_versionï¼‰ * @param fileUrlPath * @param fileLocPath * @param flag * @param id * @return */ @RequestMapping(value = "/delfile",method=RequestMethod.GET) @ResponseBody public Object delFile(@RequestParam(value="flag",required=false) String flag, @RequestParam(value="id",required=false) String id)&#123; HashMap&lt;String, String&gt; resultMap = new HashMap&lt;String, String&gt;(); String fileLocPath = null; if(flag == null || flag.equals("") || id == null || id.equals(""))&#123; resultMap.put("result", "failed"); &#125;else if(flag.equals("logo"))&#123;//åˆ é™¤logoå›¾ç‰‡ï¼ˆæ“ä½œapp_infoï¼‰ try &#123; fileLocPath = (appInfoService.getAppInfo(Integer.parseInt(id), null)).getLogoLocPath(); File file = new File(fileLocPath); if(file.exists()) if(file.delete())&#123;//åˆ é™¤æœåŠ¡å™¨å­˜å‚¨çš„ç‰©ç†æ–‡ä»¶ if(appInfoService.deleteAppLogo(Integer.parseInt(id)))&#123;//æ›´æ–°è¡¨ resultMap.put("result", "success"); &#125; &#125; &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125;else if(flag.equals("apk"))&#123;//åˆ é™¤apkæ–‡ä»¶ï¼ˆæ“ä½œapp_versionï¼‰ try &#123; fileLocPath = (appVersionService.getAppVersionById(Integer.parseInt(id))).getApkLocPath(); File file = new File(fileLocPath); if(file.exists()) if(file.delete())&#123;//åˆ é™¤æœåŠ¡å™¨å­˜å‚¨çš„ç‰©ç†æ–‡ä»¶ if(appVersionService.deleteApkFile(Integer.parseInt(id)))&#123;//æ›´æ–°è¡¨ resultMap.put("result", "success"); &#125; &#125; &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125; return JSONArray.toJSONString(resultMap); &#125; /** * ä¿å­˜ä¿®æ”¹åŽçš„appInfo * @param appInfo * @param session * @return */ @RequestMapping(value="/appinfomodifysave",method=RequestMethod.POST) public String modifySave(AppInfo appInfo,HttpSession session,HttpServletRequest request, @RequestParam(value="attach",required= false) MultipartFile attach)&#123; String logoPicPath = null; String logoLocPath = null; String APKName = appInfo.getAPKName(); if(!attach.isEmpty())&#123; String path = request.getSession().getServletContext().getRealPath("statics"+File.separator+"uploadfiles"); logger.info("uploadFile path: " + path); String oldFileName = attach.getOriginalFilename();//åŽŸæ–‡ä»¶å String prefix = FilenameUtils.getExtension(oldFileName);//åŽŸæ–‡ä»¶åŽç¼€ int filesize = 500000; if(attach.getSize() &gt; filesize)&#123;//ä¸Šä¼ å¤§å°ä¸å¾—è¶…è¿‡ 50k return "redirect:/dev/flatform/app/appinfomodify?id="+appInfo.getId() +"&amp;error=error4"; &#125;else if(prefix.equalsIgnoreCase("jpg") || prefix.equalsIgnoreCase("png") ||prefix.equalsIgnoreCase("jepg") || prefix.equalsIgnoreCase("pneg"))&#123;//ä¸Šä¼ å›¾ç‰‡æ ¼å¼ String fileName = APKName + ".jpg";//ä¸Šä¼ LOGOå›¾ç‰‡å‘½å:apkåç§°.apk File targetFile = new File(path,fileName); if(!targetFile.exists())&#123; targetFile.mkdirs(); &#125; try &#123; attach.transferTo(targetFile); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); return "redirect:/dev/flatform/app/appinfomodify?id="+appInfo.getId() +"&amp;error=error2"; &#125; logoPicPath = request.getContextPath()+"/statics/uploadfiles/"+fileName; logoLocPath = path+File.separator+fileName; &#125;else&#123; return "redirect:/dev/flatform/app/appinfomodify?id="+appInfo.getId() +"&amp;error=error3"; &#125; &#125; appInfo.setModifyBy(((DevUser)session.getAttribute(Constants.DEV_USER_SESSION)).getId()); appInfo.setModifyDate(new Date()); appInfo.setLogoLocPath(logoLocPath); appInfo.setLogoPicPath(logoPicPath); try &#123; if(appInfoService.modify(appInfo))&#123; return "redirect:/dev/flatform/app/list"; &#125; &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; return "developer/appinfomodify"; &#125; @RequestMapping(value="/delapp.json") @ResponseBody public Object delApp(@RequestParam String id)&#123; logger.debug("delApp appId===================== "+id); HashMap&lt;String, String&gt; resultMap = new HashMap&lt;String, String&gt;(); if(StringUtils.isNullOrEmpty(id))&#123; resultMap.put("delResult", "notexist"); &#125;else&#123; try &#123; if(appInfoService.appsysdeleteAppById(Integer.parseInt(id))) resultMap.put("delResult", "true"); else resultMap.put("delResult", "false"); &#125; catch (NumberFormatException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125; return JSONArray.toJSONString(resultMap); &#125;&#125;]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[MVCä½“ç³»ç»“æž„å’Œå¤„ç†è¯·æ±‚æŽ§åˆ¶å™¨]]></title>
    <url>%2F2018%2F11%2F06%2FMVC%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%92%8C%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E6%8E%A7%E5%88%B6%E5%99%A8%2F</url>
    <content type="text"><![CDATA[çŽ¯å¢ƒæ­å»ºjaråŒ…123456789101112aopalliance-1.0.jaraspectjweaver-1.6.9.jarcommons-logging-1.1.1.jarlog4j-1.2.16.jarlog4j-1.2.17.jarspring-aop-3.2.13.RELEASE.jarspring-beans-3.2.13.RELEASE.jarspring-context-3.2.13.RELEASE.jarspring-core-3.2.13.RELEASE.jarspring-expression-3.2.13.RELEASE.jarspring-web-3.2.13.RELEASE.jarspring-webmvc-3.2.13.RELEASE.jar åœ¨web.xmlä¸­é…ç½®servlet1234567891011121314151617&lt;!-- æ ¸å¿ƒæŽ§åˆ¶å™¨çš„é…ç½® DispatchServlet --&gt;&lt;servlet&gt;&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;&lt;!-- åˆå§‹åŒ–å‚æ•° --&gt;&lt;init-param&gt;&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;&lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt;&lt;/init-param&gt;&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt;&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;&lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; åˆ›å»ºSpring MVCçš„é…ç½®æ–‡ä»¶springmvc-servlet.xml1234567891011121314151617181920212223&lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"xsi:schemaLocation="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/contexthttp://www.springframework.org/schema/context/spring-context.xsdhttp://www.springframework.org/schema/mvchttp://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt;&lt;!-- é…ç½®å¤„ç†å™¨æ˜ å°„ HandlerMapping --&gt;&lt;!-- &lt;bean name="/index.html" class="cn.smbms.controller.IndexController" /&gt; --&gt;&lt;!-- &lt;bean name="/welcome" class="cn.smbms.controller.IndexController" /&gt; --&gt;&lt;mvc:annotation-driven/&gt;&lt;context:component-scan base-package="cn.smbms.controller"/&gt;&lt;!-- å®Œæˆè§†å›¾çš„å¯¹åº” --&gt;&lt;!-- å¯¹è½¬å‘é¡µé¢çš„è·¯å¾„è§£æžã€‚prefixï¼šå‰ç¼€ï¼Œ suffixï¼šåŽç¼€ --&gt;&lt;beanclass="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;&lt;property name="prefix" value="/WEB-INF/jsp/" /&gt;&lt;property name="suffix" value=".jsp" /&gt;&lt;/bean&gt;&lt;/beans&gt; åˆ›å»ºController12345678910111213@Controllerpublic class IndexControllerï¼ˆï¼‰&#123;@RequestMapping(&#123;"/index","/you"&#125;)public ModelAndView index()&#123;System.out.println("hello å®‡æ™ºæ³¢é¼¬");return new ModelAndView("index");&#125;@RequestMapping("/test.html")public String test(String userCode,Model model)&#123;model.addAttribute("userCode", userCode);return "success";&#125;&#125; å‚æ•°ä¼ é€’12345678910111213141516171819202122//paramså’Œ@RequestParamçš„å‚æ•°è¦ä¸€è‡´@RequestMapping(value="/welcome",method=RequestMethod.GET)public String welcome(@RequestParam(value="username",required=false) String username)&#123;logger.info("welcome" +username);return "index";&#125;required=false //å±žæ€§ä¸å¿…é¡»@RequestMapping("/index2")public String index2(@RequestParam String username,Model model)&#123;model.addAttribute("username", username);//å¯ä»¥ç›´æŽ¥ä¼ å¯¹è±¡model.addAttribute(username);User user=new User();user.setUserName(username);model.addAttribute("users", user);return "index";&#125;@RequestMapping("/index3")public String index3(@RequestParam String username,Map&lt;String, Object&gt; model)&#123;model.put("username", username);return "index";&#125;]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Springé…ç½®è¡¥å……]]></title>
    <url>%2F2018%2F11%2F06%2FSpring%E9%85%8D%E7%BD%AE%E8%A1%A5%E5%85%85%2F</url>
    <content type="text"><![CDATA[çµæ´»é…ç½®DataSourceä½¿ç”¨å±žæ€§æ–‡ä»¶é…ç½®æ•°æ®æº123456789101112&lt;!-- ä½¿ç”¨æ•°æ®é…ç½®æ–‡ä»¶è®¾ç½®æ•°æ®æº --&gt;&lt;beanclass="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;&lt;property name="location"&gt;&lt;value&gt;classpath:database.properties&lt;/value&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- æ•°æ®æºåœ¨é…ç½®æ–‡ä»¶ä¸­ --&gt;&lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"&gt;&lt;property name="driverClassName" value="$&#123;driver&#125;"&gt;&lt;/property&gt; &lt;propertyname="url" value="$&#123;url&#125;"&gt;&lt;/property&gt; &lt;property name="username" value="$&#123;user&#125;"&gt;&lt;/property&gt;&lt;property name="password" value="$&#123;password&#125;"&gt;&lt;/property&gt; &lt;/bean&gt; ä½¿ç”¨jndiæ•°æ®æº ContextèŠ‚ç‚¹ä¸‹12345678910&lt;!-- ä½¿ç”¨jndiæ•°æ®æº åœ¨tomcat content.xmlé…ç½® --&gt;&lt;Resource name="jndi/smbms" auth="Container" type="javax.sql.DataSource"maxActive="100" maxIdle="30" driverClassName="com.mysql.jdbc.Driver"username="root" password="123456"url="jdbc:mysql://localhost:3306/smbms?useUnicode=true&amp;characterEncoding=utf-8" /&gt;&lt;!-- &lt;bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;&lt;property name="jndiName"&gt;&lt;value&gt;java:comp/env/jndi/smbms&lt;/value&gt;&lt;/property&gt;&lt;/bean&gt; --&gt; Springä¸­beançš„ä½œç”¨åŸŸï¼ˆscopeå±žæ€§ï¼‰singleton é»˜è®¤å€¼ï¼šå•åˆ©æ¨¡å¼åˆ›å»ºbeançš„å®žä¾‹ï¼Œå®žä¾‹åªæœ‰ä¸€ä¸ª å®‰å…¨å·®prototype æ¯æ¬¡ä»Žå®¹å™¨ä¸­èŽ·å–beanæ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„beanrequest webçŽ¯å¢ƒ é’ˆå¯¹æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„beansession webçŽ¯å¢ƒ åŒä¸€ä¸ªä¼šè¯å…±äº«ä¸€ä¸ªï¼Œä¸åŒä¼šè¯ä½¿ç”¨ä¸åŒçš„å®žä¾‹ä½¿ç”¨æ³¨è§£æŒ‡å®šä½œç”¨åŸŸ@Scopeï¼ˆâ€â€ï¼‰@Service() Springè‡ªåŠ¨è£…é…12345autowireå±žæ€§ï¼šnoï¼šä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼Œbeanä¾èµ–å…³ç³»å¿…é¡»é€šè¿‡propertyå®šä¹‰bytypeï¼šæ ¹æ®å±žæ€§ç±»åž‹è¿›è¡Œè£…é…ï¼Œå¯»æ‰¾å®¹å™¨ä¸­çš„å…¨éƒ¨beanï¼Œæ‰¾å‡ºå±žæ€§ç±»åž‹ç›¸åŒçš„beanï¼Œå¦‚æžœæœ‰å¤šä¸ªæŠ›å‡ºå¼‚å¸¸byNameï¼šæ ¹æ®å±žæ€§åè¿›è¡Œè£…é…ï¼Œæ‰¾å‡ºidä¸Žå±žæ€§çš„setteræ–¹æ³•åŒ¹é…çš„beanconstructorï¼šä¸Žbytypeç›¸ä¼¼ï¼Œä½†æ˜¯ç”¨äºŽæž„é€ å™¨å‚æ•° æ‹†åˆ†Springé…ç½®æ–‡ä»¶12345ApplicationContext ctx=new ClassPathXmlApplicationContext("applicationContextl.xmlapplicationContextl-dao.xmlapplicationContextl-service.xml");ä½¿ç”¨importå¯¼å…¥ä¸»é…ç½®æ–‡ä»¶&lt;import resource=""/&gt;]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Mybatisä¸ŽSpringçš„æ•´åˆ]]></title>
    <url>%2F2018%2F11%2F06%2FMybatis%E4%B8%8ESpring%E7%9A%84%E6%95%B4%E5%90%88%2F</url>
    <content type="text"><![CDATA[é…ç½®çŽ¯å¢ƒæ·»åŠ jaråŒ…1234567891011121314151617181920aopalliance-1.0.jaraspectjweaver-1.6.9.jaraspectjweaver.jarcommons-dbcp-1.4.jarcommons-logging-1.2.jarcommons-pool-1.6.jarlog4j-1.2.16.jarlog4j-1.2.17.jarmybatis-3.2.2-sources.jarmybatis-3.2.2.jarmybatis-spring-1.2.0.jarmybatis-spring-1.3.2.jarmysql-connector-java-5.1.0-bin.jarspring-aop-3.2.13.RELEASE.jarspring-beans-3.2.13.RELEASE.jarspring-context-3.2.13.RELEASE.jarspring-core-3.2.13.RELEASE.jarspring-expression-3.2.13.RELEASE.jarspring-jdbc-3.2.13.RELEASE.jarspring-tx-3.2.13.RELEASE.jar åˆ›å»ºæ•°æ®è®¿é—®æŽ¥å£ï¼ˆmapperï¼‰ç»“å°¾ï¼Œå®žä½“ç±»ï¼Œé…ç½®MyBatisé…ç½®æ–‡ä»¶é…ç½®æ•°æ®æºå…³é”®12commons-dbcp-1.4.jarcommons-pool-1.6.jar åœ¨applicationContextl.xmlä¸­é…ç½®ã€12345678&lt;!-- æ•°æ®æº --&gt;&lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"&gt;&lt;property name="driverClassName" value="com.mysql.jdbc.Driver"&gt;&lt;/property&gt;&lt;property name="url"value="jdbc:mysql://localhost:3306/smbms?useUnicode=true&amp;amp;characterEncoding=utf-8"&gt;&lt;/property&gt;&lt;property name="username" value="root"&gt;&lt;/property&gt;&lt;property name="password" value="123456"&gt;&lt;/property&gt;&lt;/bean&gt; &amp;ç¬¦å·åŠ &amp; é…ç½®SqlSessionFactoryBeanèŽ·å–sqlSessionFactoryå®žä¾‹ 123456789101112&lt;!-- é…ç½®SqlSessionFactoryBean --&gt;&lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt;&lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;&lt;!-- å¼•ç”¨Mybatisæ–‡ä»¶ä¸­çš„æ•°æ®--&gt;&lt;property name="configLocation" value="classpath:mybatis-configl.xml"&gt;&lt;/property&gt;&lt;property name="mapperLocations"&gt;&lt;list&gt;&lt;value&gt;classpath:cn/dao/UserMapper.xml&lt;/value&gt;&lt;value&gt;classpath:cn/dao/ProviderMapper.xml&lt;/value&gt;&lt;/list&gt;&lt;/property&gt;&lt;/bean&gt; ä½¿ç”¨SqlSessionTemplateå®žçŽ°æ•°æ®åº“æ“ä½œ é…ç½®SqlSessionTemplateåœ¨å®žçŽ°ç±»ä¸­çš„ä»£ç 12345private SqlSessionTemplate sqlSession; getter å’Œ setteræ–¹æ³•@Overridepublic int add(User user) &#123;return sqlSession.getMapper(UserMapper.class).add(user);&#125; Springé…ç½®æ–‡ä»¶åˆ›å»ºSqlSessionTemplate1234&lt;!-- é…ç½®SqlSessionTemplate --&gt;&lt;!-- &lt;bean id="sqlSessionTemplate" class="org.mybatis.spring.SqlSessionTemplate"&gt;&lt;constructor-arg name="sqlSessionFactory" ref="sqlSessionFactory"&gt;&lt;/constructor-arg&gt;&lt;/bean&gt; --&gt; å®žçŽ°ç±»ç»§æ‰¿SqlSessionDaoSupportç®€åŒ–SqlSessionTemplateçš„é…ç½®ä¸ŽèŽ·å–1return this.getSession().getMapper(UserMapper.class).add(user); Springé…ç½®æ–‡ä»¶:ï¼š12&lt;!-- &lt;bean id="userMapper" class="cn.dao.UserMapperImpl"&gt;&lt;propertyname="sqlSessionFactory" ref="sqlSessionFactory"&gt;&lt;/property&gt; &lt;/bean&gt; --&gt; æ³¨å…¥æ˜ å°„å™¨å®žçŽ° MapperFactoryBeanæ³¨å…¥æ˜ å°„å™¨1234&lt;!-- Dao --&gt;&lt;!-- &lt;bean id="userMapper" class="org.mybatis.spring.mapper.MapperFactoryBean"&gt;&lt;property name="mapperInterface" value="cn.dao.UserMapper"&gt;&lt;/property&gt; &lt;propertyname="sqlSessionFactory" ref="sqlSessionFactory"&gt;&lt;/property&gt; &lt;/bean&gt; --&gt; æ— éœ€æ‰‹å·¥å®šä¹‰å®žçŽ°ç±»ï¼Œé…ç½®MapperFactoryBeanå¯ä»¥è‡ªåŠ¨ç”Ÿæˆä½¿ç”¨MapperScannerConfigureræ³¨å…¥æ˜ å°„å™¨å¯ä»¥æ‰«ææŒ‡å®šåŒ…ä¸­çš„æŽ¥å£å¹¶å°†ä»–ä»¬ç›´æŽ¥å®šä¹‰ä¸ºMapperFactoryBean1234&lt;!-- é…ç½®Dao --&gt;&lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;&lt;property name="basePackage" value="cn.dao"&gt;&lt;/property&gt;&lt;/bean&gt; é…ç½®å£°æ˜Žå¼äº‹åŠ¡æ·»åŠ å¤´æ–‡ä»¶txå’Œaop12345678910111213141516&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;&lt;bean id="txManager"class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;&lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- äº‹åŠ¡å¢žå¼º --&gt;&lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;&lt;tx:attributes&gt;&lt;tx:method name="*" propagation="REQUIRED" /&gt;&lt;/tx:attributes&gt;&lt;/tx:advice&gt;&lt;!-- é…ç½®åˆ‡é¢ --&gt;&lt;aop:config&gt;&lt;aop:pointcut expression="execution(* cn.service..*.*(..))" id="myPoint"/&gt;&lt;aop:advisor advice-ref="txAdvice" pointcut-ref="myPoint"/&gt;&lt;/aop:config&gt; ä½¿ç”¨æ³¨è§£å®žçŽ°å£°æ˜Žå¼äº‹åŠ¡å¤„ç†123456&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;&lt;bean id="txManager"class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;&lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;&lt;/bean&gt;&lt;context:component-scan base-package="cn.service"&gt;&lt;/context:component-scan&gt; 1234@Transactional å…¨å±€class@Transactional (propagation=Propagation.SUPPORTS)public int add()&#123;....&#125;]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[IOCå’ŒAOPçš„ä½¿ç”¨æ‰©å±•]]></title>
    <url>%2F2018%2F11%2F06%2FIOC%E5%92%8CAOP%E7%9A%84%E4%BD%BF%E7%94%A8%E6%89%A9%E5%B1%95%2F</url>
    <content type="text"><![CDATA[å¤šç§æ–¹å¼å®žçŽ°ä¾èµ–æ³¨å…¥é€šè¿‡æž„é€ æœ‰å‚å‡½æ•°12345&lt;bean id="userService" class="cn.service.impl.UserServiceimpl"&gt;&lt;constructor-arg ref="userdao" index="0"/&gt;&lt;constructor-arg index="1" value="å®‡æ™ºæ³¢é¼¬" /&gt;&lt;constructor-arg index="2" value="åªè¦æ˜¯äººéƒ½æ˜¯ä¾é è‡ªå·±çš„çŸ¥è¯†ä¸Žè®¤çŸ¥å¹¶ä¸”è¢«ä¹‹æŸç¼šç”Ÿæ´»ç€çš„ï¼Œé‚£å°±å«åšçŽ°å®žã€‚ä½†æ˜¯çŸ¥è¯†ä¸Žè®¤çŸ¥æ˜¯æ¨¡ç³Šä¸æ¸…çš„ä¸œè¥¿ï¼ŒçŽ°å®žä¹Ÿè®¸åªæ˜¯é•œä¸­èŠ±æ°´ä¸­æœˆï¼Œäººéƒ½æ˜¯æ´»åœ¨è‡ªå·±çš„æ‰§å¿µä¸­çš„ï¼Œä½ ä¸è¿™ä¹ˆè®¤ä¸ºå—"/&gt;&lt;/bean&gt; indexä»£è¡¨å‚æ•°ä½ç½®ï¼Œä»Ž0å¼€å§‹ç®€å•ç±»åž‹ä¸ºvalueï¼Œå¼•ç”¨ç±»åž‹ä¸ºref é€šè¿‡på‘½åç©ºé—´(é€šè¿‡seteræ–¹æ³•)1&lt;bean id="users" class="cn.entity.User" p:name="å®‡æ™ºæ³¢é¼¬u" p:email="302645509@qq.com" p:dress="æ°¸æµŽå¸‚" p:mess="æ— è®ºä½ å˜æˆä»€ä¹ˆæ ·,æˆ‘éƒ½ä¼šæ°¸è¿œçˆ±ç€ä½ "/&gt; è®¾ç½®å˜é‡å€¼ï¼špï¼šå±žæ€§å€¼=â€œâ€ï¼Œè®¾ç½®å¼•ç”¨å˜é‡ï¼špï¼šå±žæ€§å-ref=â€œâ€ï¼› æ³¨å…¥é›†åˆç±»åž‹list å…è®¸é‡å¤(é€šè¿‡seteræ–¹æ³•)12345&lt;bean id="play" class="naruto.entity.Player"&gt;&lt;property name="armet" ref="tou"&gt;&lt;list&gt;&lt;value&gt;&lt;/value&gt;&lt;ref&gt;&lt;/ref&gt;&lt;/list&gt;&lt;property&gt;&lt;/bean&gt; set è¿žçº¿ä¸€ç»„å€¼ï¼Œä½†ä¸èƒ½é‡å¤12345&lt;bean id="play" class="naruto.entity.Player"&gt;&lt;property name="armet" ref="tou"&gt;&lt;set&gt;&lt;value&gt;&lt;/value&gt;&lt;ref&gt;&lt;/ref&gt;&lt;/set&gt;&lt;property&gt;&lt;/bean&gt; map åç§°-å€¼å¯¹çš„é›†åˆï¼Œå…¶ä¸­åç§°å’Œå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»åž‹12345&lt;bean id="play" class="naruto.entity.Player"&gt;&lt;property name="armet" ref="tou"&gt;&lt;map&gt;&lt;entry&gt;&lt;key&gt;&lt;value&gt;&lt;/value&gt;&lt;/key&gt;&lt;value&gt;&lt;/value&gt;&lt;/entry&gt;&lt;/map&gt;&lt;property&gt;&lt;/bean&gt; æ³¨å…¥nullå’Œç©º123456&lt;property name="armet" ref="tou"&gt;&lt;value&gt;&lt;/value&gt;&lt;property&gt;&lt;property name="armet" ref="tou"&gt;&lt;null/&gt;&lt;property&gt; ä½¿ç”¨æ³¨è§£å®žçŽ°beanç»„å»ºè£…é…1234@Component(â€œuserDaoâ€) == &lt;bean id="userDao" class="cn...l"&gt;@Repository //æ ‡è¯†daoç±»@Service //æ ‡è¯†ä¸šåŠ¡ç±»@Controller //æ ‡è¯†æŽ§åˆ¶å™¨ç±» ä½¿ç”¨@Autowiredå®žçŽ°beançš„è£…é…12345@Autowired private SpellChecker spellChecker; //å¯ä»¥çœç•¥ç›¸å…³çš„setterï¼ˆï¼‰æ–¹æ³•é‡‡ç”¨æŒ‰ç…§ç±»åž‹åŒ¹é…çš„æ–¹å¼è‡ªåŠ¨è£…é…åˆé€‚çš„ä¾èµ–å¯¹è±¡å¦‚æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç±»åž‹ç›¸åŒ¹é…çš„beanæ—¶ï¼Œä½¿ç”¨@QualifieræŒ‡å®šæ‰€éœ€beançš„åç§°@Autowired @Qualifier("student1") private Student student; åŠ è½½æ³¨è§£å®šä¹‰çš„beanåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¯¹contextçš„å‘½åç©ºé—´çš„å£°æ˜Ž1&lt;context:annotation-config/&gt; @Autowired å¯¹æ–¹æ³•çš„å‚æ•°è¿›è¡Œæ ‡æ³¨1@Autowired public void setDao(@Qualifier("userDao") User dao) setter()å’Œæž„é€ æ–¹æ³• ä½¿ç”¨Javaæ ‡å‡†æ³¨è§£è¿›è¡Œè£…é…123@Resource@Resource private SpellChecker spellChecker;å¦‚æžœæ²¡æœ‰æ˜¾ç¤ºçš„æŒ‡å®šbeanåç§°ï¼Œä¼šæ ¹æ®å­—æ®µåæˆ–æ—¶setteräº§ç”Ÿçš„åç§° ä½¿ç”¨æ³¨è§£å®žçŽ°aopå£°æ˜Žä¸€ä¸ª aspect Aspects ç±»å’Œå…¶ä»–ä»»ä½•æ­£å¸¸çš„ bean ä¸€æ ·ï¼Œé™¤äº†å®ƒä»¬å°†ä¼šç”¨ @AspectJ æ³¨é‡Šä¹‹å¤–ï¼Œå®ƒå’Œå…¶ä»–ç±»ä¸€æ ·å¯èƒ½æœ‰æ–¹æ³•å’Œå­—æ®µ123@Aspect public class AspectModule &#123; &#125;å£°æ˜Žä¸€ä¸ªåˆ‡å…¥ç‚¹@Pointcut("execution(* com.xyz.myapp.service.*.*(..))") // expression private void businessService() &#123;&#125; å£°æ˜Ž12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273@Aspectpublic class UserServiceLogger &#123; private static final Logger LOGGER=Logger.getLogger(UserServiceLogger.class); @Pointcut("execution(* cn.service..*.*(..)) ") public void pointcut()&#123;&#125; /** * å‰ç½®å¢žå¼º * @param jp */ @Before("pointcut()") public void before(JoinPoint jp) &#123; LOGGER.info("è°ƒç”¨ " + jp.getTarget() + " çš„ " + jp.getSignature().getName() + " æ–¹æ³•ã€‚æ–¹æ³•å…¥å‚ï¼š" + Arrays.toString(jp.getArgs())); &#125; /** * åŽç½®å¢žå¼º * @param jp * @param returnValue */ @AfterReturning(pointcut = "pointcut()", returning = "returnValue") public void afterReturning(JoinPoint jp, Object returnValue) &#123; LOGGER.info("è°ƒç”¨ " + jp.getTarget() + " çš„ " + jp.getSignature().getName() + " æ–¹æ³•ã€‚æ–¹æ³•è¿”å›žå€¼ï¼š" + returnValue); &#125; /** * æœ€ç»ˆå¢žå¼º * @param jp */ @After("pointcut()") public void afterLogger(JoinPoint jp) &#123; LOGGER.info(jp.getSignature().getName() + " æ–¹æ³•ç»“æŸæ‰§è¡Œã€‚"); &#125; /** * å¼‚å¸¸å¢žå¼º * @param jp * @param e */ @AfterThrowing(value="pointcut()", throwing = "e") public void afterThrowing(JoinPoint jp, RuntimeException e) &#123; LOGGER.error(jp.getSignature().getName() + " æ–¹æ³•å‘ç”Ÿå¼‚å¸¸ï¼š" + e); &#125; /** * çŽ¯ç»•å¢žå¼º * @param jp * @return * @throws Throwable */ @Around("pointcut()") public Object aroundLogger(ProceedingJoinPoint jp) throws Throwable &#123; LOGGER.info("è°ƒç”¨ " + jp.getTarget() + " çš„ " + jp.getSignature().getName() + " æ–¹æ³•ã€‚æ–¹æ³•å…¥å‚ï¼š" + Arrays.toString(jp.getArgs())); try &#123; Object result = jp.proceed(); LOGGER.info("è°ƒç”¨ " + jp.getTarget() + " çš„ " + jp.getSignature().getName() + " æ–¹æ³•ã€‚æ–¹æ³•è¿”å›žå€¼ï¼š" + result); return result; &#125; catch (Throwable e) &#123; LOGGER.error(jp.getSignature().getName() + " æ–¹æ³•å‘ç”Ÿå¼‚å¸¸ï¼š" + e); throw e; &#125; finally &#123; LOGGER.info(jp.getSignature().getName() + " æ–¹æ³•ç»“æŸæ‰§è¡Œã€‚"); &#125; &#125; &#125;]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Springæ ¸å¿ƒæ¦‚å¿µ]]></title>
    <url>%2F2018%2F11%2F06%2FSpring%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%2F</url>
    <content type="text"><![CDATA[æŽ§åˆ¶åè½¬ï¼ˆiocï¼‰ä¹Ÿæˆä¸ºä¾èµ–æ³¨å…¥ï¼Œæ¥é™ä½Žä»£ç ä¹‹é—´çš„è€¦åˆåº¦æ­å»ºspringçŽ¯å¢ƒéƒ¨ç½²jaråŒ…12345commons-logging-1.2.jarspring-beans-3.2.13.RELEASE.jarspring-context-3.2.13.RELEASE.jarspring-core-3.2.13.RELEASE.jarspring-expression-3.2.13.RELEASE.jar åˆ›å»ºresourcesç›®å½•ï¼Œåœ¨é‡Œé¢åˆ›å»ºapplicationContextl.xml1234567891011121314151617&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xmlns:aop="http://www.springframework.org/schema/aop"xsi:schemaLocation="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/aophttp://www.springframework.org/schema/aop/spring-aop.xsd"&gt;//æ ¹æ®å±žæ€§seter()æ–¹æ³•&lt;bean id="kai" class="naruto.entity.Equip"&gt;&lt;property name="name" value="ä¸‡ä¸–è£å…‰é“ ç”²"/&gt;&lt;property name="speedPlus" value="4"/&gt;&lt;property name="attackPlus" value="108"/&gt;&lt;property name="defencePlus" value="40"/&gt;&lt;property name="type" value="é“ ç”²"/&gt;&lt;/bean&gt;&lt;/bean&gt; åˆ›å»ºæµ‹è¯•ç±»12ClassPathXmlApplicationContext context=new ClassPathXmlApplicationContext("applicationContextl.xml"); //xmlè·¯å¾„EquipMess jc=(EquipMess)context.getBean("equip"); //beançš„idå€¼ aop1234åŠ å…¥jaråŒ…spring-aop-3.2.13.RELEASE.jaraopalliance-1.0.jaraspectjweaver.jar åœ¨aopåŒ…ä¸‹åˆ›å»ºaopè¾“å‡ºç±»ï¼ˆå‰ç½®å’ŒåŽç½®ï¼‰1234567private static Logger logger=Logger.getLogger(UserServiceLogger.class);public void before(JoinPoint jp)&#123;logger.info("è°ƒç”¨"+jp.getTarget()+"çš„"+jp.getSignature()+"æ–¹æ³•ï¼Œæ–¹æ³•å‚æ•°"+Arrays.toString(jp.getArgs()));&#125;public void afterReturning(JoinPoint jp,Object result)&#123;logger.info("è°ƒç”¨"+jp.getTarget()+"çš„"+jp.getSignature()+"æ–¹æ³•ï¼Œæ–¹æ³•è¿”å›žå€¼"+result);&#125; springé™ªç€æ–‡ä»¶å¯¼å…¥ç›¸å…³é…ç½®å®šä¹‰åˆ‡å…¥ç‚¹ï¼ŒåŠ å…¥å¢žå¼ºå¤„ç†12345678910&lt;bean id="theLogger" class="naruto.aop.Snippet"&gt;&lt;/bean&gt;&lt;aop:config&gt;&lt;aop:pointcut id="pointcut"expression="execution(public void updateEquip(entity.Equip))" /&gt;&lt;aop:aspect ref="theLogger"&gt;&lt;aop:before method="before" pointcut-ref="pointcut"&gt;&lt;/aop:before&gt;&lt;aop:after-returning method="afterReturning"pointcut-ref="pointcut" returning="result" /&gt;&lt;/aop:aspect&gt;&lt;/aop:config&gt;]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[MybatisåŠ¨æ€SQL]]></title>
    <url>%2F2018%2F11%2F06%2FMybatis%E5%8A%A8%E6%80%81SQL%2F</url>
    <content type="text"><![CDATA[if è¯­å¥123456&lt;select id="selectUserByUsernameAndSex" resultType="user" parameterType="com.ys.po.User"&gt;select * from user where&lt;if test="username != null"&gt;username=#&#123;username&#125;&lt;/if&gt;&lt;/select&gt; if+where è¯­å¥1234567891011&lt;select id="selectUserByUsernameAndSex" resultType="user" parameterType="com.ys.po.User"&gt;select * from user&lt;where&gt;&lt;if test="username != null"&gt;username=#&#123;username&#125;&lt;/if&gt;&lt;if test="username != null"&gt;and sex=#&#123;sex&#125;&lt;/if&gt;&lt;/where&gt;&lt;/select&gt; â€œwhereâ€æ ‡ç­¾ä¼šçŸ¥é“å¦‚æžœå®ƒåŒ…å«çš„æ ‡ç­¾ä¸­æœ‰è¿”å›žå€¼çš„è¯ï¼Œå®ƒå°±æ’å…¥ä¸€ä¸ªâ€˜whereâ€™ã€‚æ­¤å¤–ï¼Œå¦‚æžœæ ‡ç­¾è¿”å›žçš„å†…å®¹æ˜¯ä»¥AND æˆ–OR å¼€å¤´çš„ï¼Œåˆ™å®ƒä¼šå‰”é™¤æŽ‰ã€‚ if+set è¯­å¥12345678910111213&lt;!-- æ ¹æ® id æ›´æ–° user è¡¨çš„æ•°æ® --&gt;&lt;update id=&quot;updateUserById&quot; parameterType=&quot;com.ys.po.User&quot;&gt;update user u&lt;set&gt;&lt;if test=&quot;username != null and username != &apos;&apos;&quot;&gt;u.username = #&#123;username&#125;,&lt;/if&gt;&lt;if test=&quot;sex != null and sex != &apos;&apos;&quot;&gt;u.sex = #&#123;sex&#125;&lt;/if&gt;&lt;/set&gt;where id=#&#123;id&#125;&lt;/update&gt; å¦‚æžœç¬¬ä¸€ä¸ªæ¡ä»¶ username ä¸ºç©ºï¼Œé‚£ä¹ˆ sql è¯­å¥ä¸ºï¼šupdate user u set u.sex=? where id=?å¦‚æžœç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆ sql è¯­å¥ä¸ºï¼šupdate user u set u.username = ? ,u.sex = ? where id=? choose(when,otherwise) è¯­å¥12345678910111213141516&lt;select id="selectUserByChoose" resultType="com.ys.po.User" parameterType="com.ys.po.User"&gt;select * from user&lt;where&gt;&lt;choose&gt;&lt;when test="id !='' and id != null"&gt;id=#&#123;id&#125;&lt;/when&gt;&lt;when test="username !='' and username != null"&gt;and username=#&#123;username&#125;&lt;/when&gt;&lt;otherwise&gt;and sex=#&#123;sex&#125;&lt;/otherwise&gt;&lt;/choose&gt;&lt;/where&gt;&lt;/select&gt; å’Œswitchè¯­å¥å·®ä¸å¤š trim è¯­å¥12345678910111213141516171819&lt;select id="selectUserByUsernameAndSex" resultType="user" parameterType="com.ys.po.User"&gt;select * from user&lt;!-- &lt;where&gt;&lt;if test="username != null"&gt;username=#&#123;username&#125;&lt;/if&gt;&lt;if test="username != null"&gt;and sex=#&#123;sex&#125;&lt;/if&gt;&lt;/where&gt; --&gt;&lt;trim prefix="where" prefixOverrides="and | or"&gt;&lt;if test="username != null"&gt;and username=#&#123;username&#125;&lt;/if&gt;&lt;if test="sex != null"&gt;and sex=#&#123;sex&#125;&lt;/if&gt;&lt;/trim&gt;&lt;/select&gt; prefixï¼šå‰ç¼€prefixoverrideï¼šåŽ»æŽ‰ç¬¬ä¸€ä¸ªandæˆ–è€…æ˜¯or12345678&lt;trim prefix="set" suffixOverrides=","&gt; //åŽ»æŽ‰æœ€åŽä¸€ä¸ªé€—å·&lt;if test="username != null and username != ''"&gt;u.username = #&#123;username&#125;,&lt;/if&gt;&lt;if test="sex != null and sex != ''"&gt;u.sex = #&#123;sex&#125;,&lt;/if&gt;&lt;/trim&gt; foreach è¯­å¥12345678910111213141516&lt;select id="selectUserByListId" parameterType="com.ys.vo.UserVo" resultType="com.ys.po.User"&gt; select * from user &lt;where&gt; &lt;!-- collection:æŒ‡å®šè¾“å…¥å¯¹è±¡ä¸­çš„é›†åˆå±žæ€§ item:æ¯æ¬¡éåŽ†ç”Ÿæˆçš„å¯¹è±¡ open:å¼€å§‹éåŽ†æ—¶çš„æ‹¼æŽ¥å­—ç¬¦ä¸² close:ç»“æŸæ—¶æ‹¼æŽ¥çš„å­—ç¬¦ä¸² separator:éåŽ†å¯¹è±¡ä¹‹é—´éœ€è¦æ‹¼æŽ¥çš„å­—ç¬¦ä¸² select * from user where 1=1 and (id=1 or id=2 or id=3) --&gt; &lt;foreach collection="ids" item="id" open="and (" close=")" separator="or"&gt; id=#&#123;id&#125; &lt;/foreach&gt; &lt;/where&gt;&lt;/select&gt;]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[MybatisSQLæ˜ å°„æ–‡ä»¶]]></title>
    <url>%2F2018%2F11%2F06%2FMybatisSQL%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[sqlæ˜ å°„æ–‡ä»¶é¡¶çº§å…ƒç´ é…ç½®mapperï¼šæ˜ å°„å…ƒç´ çš„æ ¹èŠ‚ç‚¹ï¼Œåªæœ‰ä¸€ä¸ªå±žæ€§namespaceï¼Œç”¨äºŽåŒºåˆ†ä¸åŒçš„mapperï¼Œç»‘å®šdaoæŽ¥å£cacheï¼šé…ç½®ç»™å‘½åç©ºé—´å¼•ç”¨ç¼“å­˜cache-refï¼šä»Žå…¶ä»–å‘½åç©ºé—´å¼•ç”¨ç¼“å­˜é…ç½®resultMapï¼šæè¿°æ•°æ®åº“ç»“æžœé›†å’Œå¯¹è±¡çš„å¯¹åº”å…³ç³»sqlï¼šå¯ä»¥é‡ç”¨çš„sqlå— insertï¼šæ’å…¥è¯­å¥12345&lt;insert id="add" parameterType="Destineinfo"&gt;INSERT INTOdestineinfo(room_name,destine_time,destine_name,dress)VALUES(#&#123;room_name&#125;,#&#123;destine_time&#125;,#&#123;destine_name&#125;,#&#123;dress&#125;)&lt;/insert&gt; deleteï¼šåˆ é™¤è¯­å¥123&lt;delete id="dele"&gt;DELETE FROM destineinfo where id=#&#123;id&#125;&lt;/delete&gt; updateï¼šæ›´æ–°è¯­å¥12345&lt;update id="modify" parameterType="Destineinfo"&gt;UPDATE destineinfo SETroom_name=#&#123;room_name&#125;,destine_name=#&#123;destine_name&#125;where id=#&#123;id&#125;&lt;/update&gt; selectï¼šæŸ¥è¯¢è¯­å¥namespaceçš„å‘½åå¿…é¡»å’ŒæŸä¸ªdaoæŽ¥å£ç›¸åŒï¼Œå·²Mapperç»“å°¾æŽ¥å£ä¸­çš„æ–¹æ³•ä¸Žæ˜ å°„æ–‡ä»¶ä¸­çš„sqlè¯­å¥idè¦å¯¹åº”çš„ ëˆˆëˆˆselectå±žæ€§idï¼šå‘½åç©ºé—´çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œè¦å’ŒæŽ¥å£çš„æ–¹æ³•ä¸€è‡´ëˆˆëˆˆparameterTypeï¼šä¼ å…¥å‚æ•°çš„ç±»åž‹ï¼Œå¯ä»¥æ˜¯ç±»ï¼Œæˆ–åŸºæœ¬æ•°æ®ç±»åž‹resultTypeï¼šæŸ¥è¯¢è¯­å¥è¿”å›žç»“æžœç±»åž‹ï¼Œå¯ä»¥æ˜¯ç±»ï¼Œæˆ–åŸºæœ¬æ•°æ®ç±»åž‹ ä½¿ç”¨mapå…¥å‚æŸ¥è¯¢1234&lt;select id="getMap" resultType="Destineinfo" parameterType="Map"&gt;SELECT * FROM destineinfo WHERE destine_name LIKECONCAT('%',#&#123;name&#125;,'%')&lt;/select&gt; mapå¯¹è±¡.put(â€œnameâ€,å§“å)ï¼› ä½¿ç”¨resultMapå®ŒæˆæŸ¥è¯¢ç»“æžœçš„å±•çŽ°ç”¨äºŽæ•°æ®åº“å­—æ®µåä¸åŒä¸Žå®žä½“ç±»çš„å±žæ€§å ï¼Œå¯ä»¥è¿›è¡Œè‡ªåŠ¨æ˜ å°„ resultMapè‡ªåŠ¨æ˜ å°„(FULL)12&lt;!-- è®¾ç½®resultMapçš„è‡ªåŠ¨æ˜ å°„çº§åˆ«ä¸ºnone(ç¦æ­¢è‡ªåŠ¨åŒ¹é…) --&gt;&lt;!-- &lt;setting name="autoMappingBehavior" value="NONE"/&gt; --&gt; è‡ªåŠ¨æ˜ å°„å‰æï¼šå­—æ®µåå’Œå±žæ€§åè¦ä¸€è‡´12345&lt;result property="id" column="id" /&gt;&lt;result property="room_name" column="room_name" /&gt;&lt;result property="destine_time" column="destine_time" /&gt;&lt;result property="destine_name" column="destine_name" /&gt;&lt;result property="dressName" column="dressName" /&gt; ä½¿ç”¨resultTypeå®ŒæˆæŸ¥è¯¢ç»“æžœçš„å±•çŽ°ç›´æŽ¥è¿”å›žç±»åž‹ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»åž‹å’Œå¤æ‚æ•°æ®ç±»åž‹resultTypeå’ŒresultMapåªèƒ½æœ‰ä¸€ä¸ªä½¿ç”¨@paramå®žçŽ°å¤šå‚æ•°å…¥å‚12xmlä¸­idä¸ºupdateNameçš„idå’Œdestine_namepublic int updateName(@Param("id")Integer id,@Param("destine_name")String name); é«˜çº§æ˜ å°„association12345678&lt;resultMap type="Destineinfo" id="userRoleResult"&gt; &lt;id property="id"column="id" /&gt; &lt;result property="room_name" column="room_name"/&gt; &lt;resultproperty="destine_time" column="destine_time"/&gt; &lt;result property="destine_name"column="destine_name"/&gt; &lt;association property="dress2" javaType="Dress"&gt;&lt;id property="id" column="r_id" /&gt; &lt;result property="dressName" column="dressName"/&gt;&lt;/association&gt; &lt;/resultMap&gt; associationæ˜ å°„ &lt;select id="getListByDressid" resultMap="userRoleResult"parameterType="Integer"&gt; SELECT d.*,s.id as r_id,s.dressName FROM destineinfod, dress s WHERE d.dress=#&#123;dress&#125; and d.dress=s.id &lt;/select&gt; å¯ä»¥å†…åµŒ12345&lt;association property="dress2" javaType="Dress" resultMap="roleResult" /&gt;&lt;resultMap type="Dress" id="roleResult"&gt;&lt;id property="id" column="r_id"/&gt;&lt;result property="dressName" column="dressName"/&gt;&lt;/resultMap&gt; ä½¿ç”¨å¯¹è±¡ 1å¯¹1associationå±žæ€§propertyï¼šå®žä½“å¯¹è±¡çš„å±žæ€§ï¼Œæ­¤å¤„ä¸ºuseré‡Œå®šä¹‰çš„Roleç±»å¯¹è±¡rolejavaTypeï¼šå®Œæ•´çš„Javaç±»åæˆ–åˆ«å collection123456789101112&lt;resultMap type="Destineinfo" id="userAddressResult"&gt;&lt;id property="id" column="id"/&gt;&lt;result property="room_name" column="room_name" /&gt;&lt;result property="destine_time" column="destine_time" /&gt;&lt;result property="destine_name" column="destine_name" /&gt;&lt;result property="dress" column="dress" /&gt;&lt;collection property="addressList" ofType="Dress" resultMap="Addresss" /&gt;&lt;/resultMap&gt;&lt;resultMap type="Dress" id="Addresss"&gt;&lt;id property="id" column="r_id"/&gt;&lt;result property="dressName" column="dressName"/&gt;&lt;/resultMap&gt; collectionå±žæ€§propertyï¼šå®žä½“å¯¹è±¡çš„å±žæ€§ofTypeï¼šå®Œæ•´çš„Javaç±»åæˆ–åˆ«åä½¿ç”¨é›†åˆ 1å¯¹å¤š]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[åˆè¯†Mybatis]]></title>
    <url>%2F2018%2F11%2F06%2F%E5%88%9D%E8%AF%86Mybatis%2F</url>
    <content type="text"><![CDATA[éƒ¨ç½²mybatiséƒ¨ç½²jaråŒ…åˆ›å»ºdatabase.propertieså’Œmybatis-configl.xmlæ–‡ä»¶12345database.propertiesdriver=com.mysql.jdbc.Driverurl=jdbc:mysql://localhost:3306/boardroom?useUnicode=true&amp;characterEncoding=utf-8user=rootpassword=123456 mybatis-configl.xml æœ€é‡è¦çš„æ ¸å¿ƒæ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE configurationPUBLIC "-//mybatis.org//DTD Config 3.0//EN""http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt;&lt;!-- å¼•å…¥database.propertiesæ–‡ä»¶ --&gt;&lt;properties resource="database.properties" /&gt;&lt;!-- é…ç½®mybatisçš„logå®žçŽ°ä¸ºLOG4J --&gt;&lt;settings&gt;&lt;setting name="logImpl" value="LOG4J" /&gt;&lt;/settings&gt;&lt;typeAliases&gt;&lt;typeAlias alias="user" type="cn.entity.User"/&gt;&lt;typeAlias alias="product" type="cn.entity.Product"/&gt;&lt;package name="cn.entity"/&gt;&lt;/typeAliases&gt;&lt;!-- é…ç½®mybatiså¤šå¥—è¿è¡ŒçŽ¯å¢ƒ --&gt;&lt;environments default="development"&gt;&lt;environment id="development"&gt;&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†,é‡‡ç”¨JDBCçš„äº‹åŠ¡ç®¡ç† --&gt;&lt;transactionManager type="JDBC"&gt;&lt;/transactionManager&gt;&lt;!-- POOLED:mybatisè‡ªå¸¦çš„æ•°æ®æº,JNDI:åŸºäºŽtomcatçš„æ•°æ®æº --&gt;&lt;dataSource type="POOLED"&gt;&lt;property name="driver" value="$&#123;driver&#125;"/&gt;&lt;property name="url" value="$&#123;url&#125;"/&gt;&lt;property name="username" value="$&#123;user&#125;"/&gt;&lt;property name="password" value="$&#123;password&#125;"/&gt;&lt;/dataSource&gt;&lt;/environment&gt;&lt;/environments&gt;&lt;!-- å°†mapperæ–‡ä»¶åŠ å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ --&gt;&lt;mappers&gt;&lt;mapper resource="cn/entity/ProductMapper.xml"/&gt;&lt;mapper resource="cn/entity/DestineinfoMapper.xml"/&gt;&lt;/mappers&gt;&lt;/configuration&gt; utilåŒ…ä¸‹åˆ›å»ºMyBatisUtil.javaæ–‡ä»¶12345678910111213141516171819private static SqlSessionFactory factory;static&#123;InputStream is;try &#123;is = Resources.getResourceAsStream("mybatis-configl.xml");factory=new SqlSessionFactoryBuilder().build(is);&#125; catch (IOException e) &#123;// TODO Auto-generated catch blocke.printStackTrace();&#125;&#125;public static SqlSession CreateSqlSession()&#123;return factory.openSession(false); //trueä¸ºè‡ªåŠ¨æäº¤äº‹åŠ¡&#125;public static void closeSqlSession(SqlSession sqlSession)&#123;if(null!=sqlSession)&#123;sqlSession.close();&#125;&#125; daoå±‚åˆ›å»ºæŽ¥å£,ä»¥å®žä½“ç±»åå­—+mapperå‘½åentityå±‚åˆ›å»ºå®žä½“ç±»å’Œå®žä½“ç±»åå­—+mapper.xml1234567891011namespaceå»ºè®®ä½¿ç”¨æŽ¥å£åœ°å€ï¼Œè¿›è¡Œå¢žåˆ æ”¹æŸ¥&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapperPUBLIC "-//mybatis.org//DTD Mapper 3.0//EN""http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;mapper namespace="cn.dao.impl.DestineinfoMapper"&gt;&lt;!-- æŸ¥è¯¢ç”¨æˆ·è¡¨è®°å½•æ•° --&gt;&lt;select id="selall" resultType="Destineinfo"&gt;SELECT * FROM destineinfo&lt;/select&gt;&lt;/mapper&gt; åˆ›å»ºæµ‹è¯•ç±»1234567891011121314151617@Testpublic void testGetUserList()&#123;SqlSession sqlSession=null;List&lt;Destineinfo&gt;userList=new ArrayList&lt;Destineinfo&gt;();try &#123;sqlSession=MyBatisUtil.CreateSqlSession();userList=sqlSession.getMapper(DestineinfoMapper.class).selall();&#125; catch (Exception e) &#123;// TODO: handle exceptione.printStackTrace();&#125;finally &#123;MyBatisUtil.closeSqlSession(sqlSession);&#125;for (Destineinfo destineinfo : userList) &#123;logger.debug("testGetUserList userCodeL"+destineinfo.getId()+"--"+destineinfo.getRoom_name()+"--"+destineinfo.getDestine_name()+"------"+destineinfo.getDestine_time());&#125;&#125; mybatisæ ¸å¿ƒå¯¹è±¡SqlSessionFactoryBuilderè´Ÿè´£æž„å»ºSqlSessionFactoryï¼Œç‰¹ç‚¹ï¼šç”¨è¿‡å°±ä¸¢ï¼ŒSqlSessionFactoryåˆ›å»ºåŽå°±ä¸ä¸éœ€è¦å­˜åœ¨äº† SqlSessionFactoryåˆ›å»ºSqlSessionå®žä¾‹çš„å·¥åŽ‚ï¼ŒSqlSessioné€šè¿‡SqlSessionFactoryçš„openSession()æ¥èŽ·å–openSession()çš„å‚æ•°ä¸ºbolleanç±»åž‹æ—¶ï¼Œtrueä¸ºå…³é—­äº‹åŠ¡æŽ§åˆ¶ï¼Œè‡ªåŠ¨æäº¤ï¼Œä¸ç©¿å‚æ•°ï¼Œé»˜è®¤ä¸ºtrueä¸€æ—¦åˆ›å»ºå§‹ç»ˆå­˜åœ¨,ä¸å»ºè®®åˆ›å»ºå¤šä¸ª SqlSessionç”¨äºŽæŒä¹…åŒ–æ“ä½œçš„å¯¹è±¡ï¼Œç±»ä¼¼ä¸Žjdbcçš„connectionï¼Œæä¾›äº†é¢å‘æ•°æ®åº“sqlå‘½ä»¤çš„æ‰€æœ‰æ–¹æ³•ä½¿ç”¨SqlSessionçš„ä¸¤ç§æ–¹æ³•é€šè¿‡sqlSessionå®žä¾‹ç›´æŽ¥æ‰§è¡Œå·²æ˜ å°„çš„sqlè¯­å¥é€šè¿‡mapperæŽ¥å£æ–¹æ³•æ“ä½œæ•°æ® mybatis-configl.xmlçš„æ ¸å¿ƒå…ƒç´ typeAliasesé…ç½®ç±»åž‹åˆ«å12345&lt;typeAliases&gt;&lt;typeAlias alias="user" type="cn.entity.User"/&gt;&lt;typeAlias alias="product" type="cn.entity.Product"/&gt;&lt;package name="cn.entity"/&gt;&lt;/typeAliases&gt; mappersæ˜ å°„å™¨1234&lt;mappers&gt;&lt;mapper resource="cn/entity/ProductMapper.xml"/&gt;&lt;mapper resource="cn/entity/DestineinfoMapper.xml"/&gt;&lt;/mappers&gt;]]></content>
      <categories>
        <category>SSM</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ¼«æ¼«å½’å®¶è·¯]]></title>
    <url>%2F2018%2F11%2F05%2F%E6%BC%AB%E6%BC%AB%E5%BD%92%E5%AE%B6%E8%B7%AF%2F</url>
    <content type="text"><![CDATA[æ¼«æ¼«å½’å®¶è·¯å…¶å®žæˆ‘å–Šäº†ä¸€æ¬¡åˆä¸€æ¬¡ï¼Œæ¯ä¸€æ¬¡ï¼Œéƒ½æ¸…é†’çš„è®¤è¯†åˆ°æžœç„¶æ²¡æœ‰äººå›žåº”æˆ‘ï¼Œæ— è®ºæ€Žä¹ˆå‘¼å”¤ï¼Œæ€Žä¹ˆç¥ˆç¥·ï¼Œè¿˜æ˜¯æœ‰æ— æ³•å®žçŽ°çš„ä¸œè¥¿ã€‚ æœ€åŽè¿˜æ˜¯æ²¡èƒ½æ‰¾åˆ°å®¶ï¼Œè¿·è·¯äº†ï¼Œç´¯åˆ°äº†ï¼Œç„¶åŽï¼Œæˆ‘å†³å®šä¸åœ¨å‘¼å”¤æ— æ³•ç»™äºˆæˆ‘å›žåº”çš„ä¸œè¥¿ã€‚â€”â€”ã€Šå¤ç›®å‹äººå¸ã€‹æ¼«æ¼«å›žå®¶è·¯]]></content>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[S8å†³èµ›IG3:0å¤ºå† ]]></title>
    <url>%2F2018%2F11%2F04%2FS8%E5%86%B3%E8%B5%9BIG3-0%E5%A4%BA%E5%86%A0%2F</url>
    <content type="text"><![CDATA[ä¸€ä¸ªçº¨ç»”çš„è€æ¿ï¼Œ ä¸€ä¸ªæ²¡æˆ˜é˜Ÿè¦çš„ä¸Šå•ï¼Œ ä¸€ä¸ªé™„èµ çš„ä¸­å•ï¼Œ ä¸€ä¸ªå€Ÿæ¥çš„æ‰“é‡Žï¼Œ ä¸€ä¸ªç›´æ’­æŠ“æ¥çš„adï¼Œ ä¸€ä¸ªåŒæŽ’æŽ’åˆ°çš„è¾…åŠ©ï¼Œ ä¸€æ”¯æ²¡ä»€ä¹ˆäººçœ‹å¥½çš„æˆ˜é˜Ÿï¼Œ ä¸€åœºå…¨çƒæ€»å†³èµ›å† å†›ï¼Œ ä¸€åº§å±±ï¼Œå±±åŽæ˜¯ä½ ä»¬çš„æ•…äº‹ æ­å–œIG]]></content>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç†æƒ³ä¹¡]]></title>
    <url>%2F2018%2F11%2F02%2F%E7%90%86%E6%83%B3%E4%B9%A1%2F</url>
    <content type="text"><![CDATA[ç†æƒ³ä¹¡å­¤ç‹¬ãªå·¡ç¤¼æˆ‘åœ¨è¿™ä¸–ä¸Šæ´»ç€ æ‰‹æ— å¯¸é“ æ²¡æœ‰ä»»ä½•äººç«™åœ¨æˆ‘çš„èº«åŽ æŒ¡ä½æ±¹æ¶Œçš„é£Ž æ›´æ²¡æœ‰äººèƒ½ç«™åœ¨æˆ‘çš„é¢å‰ æŒ¡ä½æµ©ç€šçš„é˜³å…‰ æˆ‘åœ¨è¿™ä¸–ä¸Šæ´»ç€ æ€€æŠ±ä¸€å°å¼¦æ´å‡€ åƒé»‘å¤œæŠ±ç€æœˆäº®é‚£æ ·æ…Žé‡ æ€€æŠ±ç€ä¸€å¤§æŸè†æ£˜ åƒåœŸåœ°æŠ±ç€é’è‰é‚£æ ·æ·±æƒ… æ€€æŠ±ç€ä¸€å¤§æ§å†°é›ª åƒç¾¤å±±æ€€æŠ±ç€æ¸…æ³‰ä¸€æ ·çé‡ æˆ‘åœ¨è¿™ä¸–ä¸Šæ´»ç€ ä¸€åˆ‡è§„ç« ä¸€åˆ‡å®ˆåˆ™éƒ½æ˜¯å‡è®¾ ä»–ä»¬è¯´ ä½ å¾—æœ‰äºº æ‰æ˜¯çœŸçš„ æˆ‘æŠ±ç´§æˆ‘è‡ªå·± æˆ‘æœ‰æˆ‘è‡ªå·± æŠ±å¾—æ›´ç´§æ›´ç‰¢é ä¸€äº›å•Š æˆ‘çš„å°Šä¸¥ æˆ‘çš„æœ¬ä»½ æˆ‘äººçš„æ ·å­ æˆ‘æ´»åœ¨è¿™ä¸–ä¸Š æ‰‹æ— å¯¸é“ æ²¡æœ‰åˆ€é”‹ æ²¡æœ‰å°–é”çš„åˆº ä»Žä¸æ— å¾€ä¸åˆ© ä»Žä¸æ˜¥é£Žå¾—æ„ æˆ‘ç«™ç«‹çš„å§¿åŠ¿æ¯”å‰‘ä¼˜ç¾Ž æˆ‘æ²‰é†‰çš„ç¬‘å®¹æ¯”èŠ±ç»šä¸½ æˆ‘å†™å­—çš„è®¤çœŸæ¯”è¯µç»è™”è¯š æˆ‘ç—›å“­çš„å£°éŸ³æ¯”é•¿æ­ŒçœŸå®ž æˆ‘æ´»åœ¨è¿™ä¸–ä¸Š æ‰‹æ— å¯¸é“ æˆ‘æ´»åœ¨è¿™ä¸–ä¸Š è‡ªå¼ºè‡ªç«‹ è‡ªå¾—å…¶ç¾Ž æˆ‘åªæœ‰ è‡ªå·±]]></content>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Oracleæ•°æ®åº“åº”ç”¨]]></title>
    <url>%2F2018%2F11%2F01%2FOracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8%2F</url>
    <content type="text"><![CDATA[å›žé¡¾ä»€ä¹ˆæ˜¯ç´¢å¼•ç´¢å¼•æ˜¯å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡ŒæŽ’åºçš„ä¸€ç§ç»“æž„,ç´¢å¼•ä¼šå¸®åŠ©æ‚¨æ›´å¿«åœ°èŽ·å¾—è¯¥ä¿¡æ¯ ç´¢å¼•åˆ†ä¸ºå‡ ç±»123456789101112131.æ™®é€šç´¢å¼• æ·»åŠ INDEXALTER TABLE `table_name` ADD INDEX index_name ( `column` )ä¸‹é¢æ¼”ç¤ºä¸‹ç»™userè¡¨çš„nameå­—æ®µæ·»åŠ ä¸€ä¸ªç´¢å¼•2.ä¸»é”®ç´¢å¼• æ·»åŠ PRIMARY KEYALTER TABLE `table_name` ADD PRIMARY KEY ( `column` )3.å”¯ä¸€ç´¢å¼• æ·»åŠ UNIQUEALTER TABLE `table_name` ADD UNIQUE ( `column` )4.å…¨æ–‡ç´¢å¼• æ·»åŠ FULLTEXTALTER TABLE `table_name` ADD FULLTEXT ( `column`) åºåˆ—å¯ä»¥ä½œä¸ºä¸»é”®ï¼Œè¿˜æœ‰ä»€ä¹ˆå¯ä»¥ä½œä¸ºä¸»é”®ï¼Ÿrowidï¼šå°±æ˜¯æ•°æ®çš„å®žé™…ç‰©ç†åœ°å€ï¼Œrowidæ²¡å¿…è¦è‡ªå·±åˆ›å»ºï¼Œç”¨æˆ·ä¹Ÿæ²¡æœ‰æƒé™åˆ›å»ºrowidï¼Œå®ƒæ˜¯oracleç³»ç»Ÿç”Ÿæˆçš„ç´¢å¼• é—´éš”åˆ†åŒºå’ŒèŒƒå›´åˆ†åŒºçš„åŒºåˆ«é—´éš”åˆ†åŒºå®žçŽ°çš„è‡ªåŠ¨ç”Ÿæˆåˆ†åŒº ç§æœ‰åŒä¹‰è¯å’Œå…±æœ‰åŒä¹‰è¯çš„åŒºåˆ«ç§æœ‰åŒä¹‰è¯åªèƒ½åœ¨å½“å‰æ¨¡å¼å†…è®¿é—®ï¼Œä¸”ä¸èƒ½ä¸Žå½“å‰æ¨¡å¼çš„å¯¹è±¡åŒå å…¬æœ‰åŒä¹‰è¯å¯è¢«æ‰€æœ‰çš„æ•°æ®åº“ç”¨æˆ·è®¿é—®ä½¿ç”¨ è¡¨ç©ºé—´ï¼ˆç”¨æ¥å­˜æ”¾å„ç§åº”ç”¨æ–‡ä»¶ï¼‰ä¸€èˆ¬åˆ†ä¸ºä¸‰ç§123$ æ°¸ä¹…æ€§è¡¨ç©ºé—´ï¼šä¸€èˆ¬ä¿å­˜è¡¨ï¼Œè¿‡ç¨‹ï¼Œç´¢å¼•ç­‰æ•°æ®$ ä¸´æ—¶æ€§è¡¨ç©ºé—´ï¼šåªç”¨äºŽä¿å­˜ç³»ç»Ÿä¸­çŸ­æœŸæ´»åŠ¨çš„æ•°æ®ï¼Œå¦‚æŽ’åºæ•°æ®$ æ’¤é”€è¡¨ç©ºé—´ï¼šç”¨æ¥å¸®åŠ©å›žé€€ä¸º=æœªæäº¤çš„äº‹åŠ¡æ•°æ® é‚£ä¹ˆä¸ºä»€ä¹ˆè¦åˆ›å»ºè¡¨ç©ºé—´å‘¢ï¼Ÿå¯¹ä¸åŒç”¨æˆ·åˆ†é…ä¸åŒçš„è¡¨ç©ºé—´ï¼Œæ–¹ä¾¿ç®¡ç†æœ‰åˆ©äºŽç®¡ç†ç£ç›˜ç©ºé—´ï¼Œæé«˜i/oæ€§èƒ½ ä¸€äº›åŸºæœ¬çš„æŽˆæƒ1234567891011åˆ›å»ºç”¨æˆ·æ²¡æœ‰æŽˆæƒã€åˆ›å»ºè¡¨ã€‘create table student(stu_id number(2),stu_name varchar2(10));create table student(stu_id number(2),stu_name varchar2(10))*ç¬¬ 1 è¡Œå‡ºçŽ°é”™è¯¯:ORA-01031: æƒé™ä¸è¶³?//ä½¿ç”¨systemç”¨æˆ·æŽˆæƒgrant connect,resource to martin; //æŽˆæƒç”¨æˆ·connect,resource æƒé™grant select on scott.emp to martin; //å…è®¸ç”¨æˆ·æŸ¥çœ‹empè¡¨ä¸­è®°å½•grant update on scott.emp to martin; //å…è®¸ç”¨æˆ·ä¿®æ”¹empè¡¨ä¸­è®°å½• åŒä¹‰è¯ï¼ˆå…¬æœ‰å’Œç§æœ‰ //ç§æœ‰åªèƒ½è¢«å½“å‰æ¨¡å¼ç”¨æˆ·è®¿é—®ï¼‰ç®€åŒ–sqlè¯­å¥éšè—å¯¹è±¡åç§°å’Œæ‰€æœ‰è€…ä¸ºåˆ†å¸ƒå¼æ•°æ®åº“çš„è¿œç¨‹å¯¹è±¡æä¾›äº†ä½ç½®é€æ˜Žæ€§æä¾›å¯¹è±¡çš„å…¬å…±è®¿é—® ç»™ç”¨æˆ·martinæŽˆæƒåŒä¹‰è¯ grant create synonym to martin; ? åˆ›å»ºç§æœ‰åŒä¹‰è¯ SQL&gt; create synonym sy_emp for system.employee; ? åŒä¹‰è¯å·²åˆ›å»ºã€‚ ? SQL&gt; select *from sy_emp; ? åˆ›å»ºå…±æœ‰åŒä¹‰è¯ï¼ˆåœ¨ç‰©ä¸»ç”¨æˆ·ä¸Šåˆ›å»ºï¼‰ SQL&gt; create public synonym public_sy_emp for employee; ? åŒä¹‰è¯å·²åˆ›å»ºã€‚ ? SQL&gt; ? åˆ é™¤ç§æœ‰åŒä¹‰è¯ SQL&gt; drop synonym martin.sy_emp; ? åŒä¹‰è¯å·²åˆ é™¤ã€‚ ? SQL&gt; ? åˆ é™¤å…±æœ‰åŒä¹‰è¯ SQL&gt; drop public synonym public_sy_emp; ? åŒä¹‰è¯å·²åˆ é™¤ã€‚ SQL&gt; åˆ›å»ºåºåˆ—å’Œå°±æ˜¯ç”Ÿæˆä¸»é”®è¦ç”¨çš„ï¼Œæ„Ÿè§‰ä¸å¥½ç”¨ SQL&gt; create sequence seq1 2 start with 10 3 increment by 1 4 maxvalue 2000 5 nocycle 6 cache 30; ? åºåˆ—å·²åˆ›å»ºã€‚ ? SQL&gt; create table toys(toyid number(2), toyname varchar2(10),toyprice number(4,2)); ? è¡¨å·²åˆ›å»ºã€‚ ? SQL&gt; insert into toys(toyid,toyname,toyprice)values(seql.nextval,'æ°å°¼é¾Ÿ',25); insert into toys(toyid,toyname,toyprice)values(seql.nextval,'æ°å°¼é¾Ÿ',25) * ç¬¬ 1 è¡Œå‡ºçŽ°é”™è¯¯: ORA-02289: åºåˆ—ä¸å­˜åœ¨ ? ? SQL&gt; insert into toys(toyid,toyname,toyprice)values(seq1.nextval,'æ°å°¼é¾Ÿ',25); ? å·²åˆ›å»º 1 è¡Œã€‚ ? SQL&gt; insert into toys(toyid,toyname,toyprice)values(seq1.nextval,'æ†¨å…«é¾Ÿ',35); ? å·²åˆ›å»º 1 è¡Œã€‚ ? SQL&gt; select * from toys; ? TOYID TOYNAME TOYPRICE ---------- -------------------- ---------- 11 æ°å°¼é¾Ÿ 25 12 æ†¨å…«é¾Ÿ 35 ? SQL&gt; create table tots(totid number(2), totname varchar2(10),totprice number(4,2)); ? è¡¨å·²åˆ›å»ºã€‚ ? SQL&gt; insert into tots(totid,totname,totprice)values(seq1.nextval,'å°ç«é¾™',40); ? å·²åˆ›å»º 1 è¡Œã€‚ ? SQL&gt; insert into tots(totid,totname,totprice)values(seq1.nextval,'æ¯’é¾™é’»',80); ? å·²åˆ›å»º 1 è¡Œã€‚ ? SQL&gt; select * from tots; ? TOTID TOTNAME TOTPRICE ---------- -------------------- ---------- 14 å°ç«é¾™ 40 15 æ¯’é¾™é’» 80 åå‘é”®ç´¢å¼•ç›®çš„ï¼šæ¯”å¦‚ç´¢å¼•å€¼æ˜¯ä¸€ä¸ªè‡ªåŠ¨å¢žé•¿çš„åˆ—å¤šä¸ªç”¨æˆ·å¯¹é›†ä¸­åœ¨å°‘æ•°å—ä¸Šçš„ç´¢å¼•è¡Œè¿›è¡Œä¿®æ”¹ï¼Œå®¹æ˜“å¼•èµ·èµ„æºçš„äº‰ç”¨ï¼Œæ¯”å¦‚å¯¹æ•°æ®å—çš„ç­‰å¾…ã€‚æ­¤æ—¶å»ºç«‹åå‘ç´¢ å¼•ã€‚è¯­æ³•ï¼šCREATE INDEX index_REVERSE_EMPNO ON table (column) REVERSE; ä½å›¾ç´¢å¼•1ã€ ä½•æ—¶åˆ›å»ºï¼šåˆ—ä¸­æœ‰éžå¸¸å¤šçš„é‡å¤çš„å€¼æ—¶å€™ã€‚ä¾‹å¦‚æŸåˆ—ä¿å­˜äº† â€œæ€§åˆ«â€ä¿¡æ¯ã€‚Where æ¡ä»¶ä¸­åŒ…å«äº†å¾ˆå¤šORæ“ä½œç¬¦ã€‚è¾ƒå°‘çš„updateæ“ä½œï¼Œå› ä¸ºè¦ç›¸åº”çš„è·Ÿæ–°æ‰€æœ‰çš„bitmap2ã€ ç»“æž„ï¼šä½å›¾ç´¢å¼•ä½¿ç”¨ä½å›¾ä½œä¸ºé”®å€¼ï¼Œå¯¹äºŽè¡¨ä¸­çš„æ¯ä¸€æ•°æ®è¡Œä½å›¾åŒ…å«äº†TRUE(1)ã€FALSE(0)ã€æˆ–NULLå€¼ã€‚3ã€ ä¼˜ç‚¹ï¼šä½å›¾ä»¥ä¸€ç§åŽ‹ç¼©æ ¼å¼å­˜æ”¾ï¼Œå› æ­¤å ç”¨çš„ç£ç›˜ç©ºé—´æ¯”æ ‡å‡†ç´¢å¼•è¦å°å¾—å¤š4ã€ è¯­æ³•ï¼šCREATE BITMAP INDEX index ON table (column[, column]â€¦); å”¯ä¸€ç´¢å¼•1ã€ ä½•æ—¶åˆ›å»ºï¼šå½“æŸåˆ—ä»»æ„ä¸¤è¡Œçš„å€¼éƒ½ä¸ç›¸åŒ2ã€ å½“å»ºç«‹Primary Key(ä¸»é”®)æˆ–è€…Unique constraint(å”¯ä¸€çº¦æŸ)æ—¶ï¼Œå”¯ä¸€ç´¢å¼•å°†è¢«è‡ªåŠ¨å»ºç«‹3ã€ è¯­æ³•ï¼šCREATE UNIQUE INDEX index ON table (column); ç†Ÿç»ƒå¹¶èƒŒè¯µæ•°æ®åº“å»ºç«‹ç´¢å¼•çš„åŽŸåˆ™1ï¼Œç¡®å®šé’ˆå¯¹è¯¥è¡¨çš„æ“ä½œæ˜¯å¤§é‡çš„æŸ¥è¯¢æ“ä½œè¿˜æ˜¯å¤§é‡çš„å¢žåˆ æ”¹æ“ä½œã€‚?2ï¼Œå°è¯•å»ºç«‹ç´¢å¼•æ¥å¸®åŠ©ç‰¹å®šçš„æŸ¥è¯¢ã€‚æ£€æŸ¥è‡ªå·±çš„sqlè¯­å¥ï¼Œä¸ºé‚£äº›é¢‘ç¹åœ¨whereå­å¥ä¸­å‡ºçŽ°çš„å­—æ®µå»ºç«‹ç´¢å¼•ã€‚?3ï¼Œå°è¯•å»ºç«‹å¤åˆç´¢å¼•æ¥è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ä¿®æ”¹å¤åˆç´¢å¼•å°†æ¶ˆè€—æ›´é•¿æ—¶é—´ï¼ŒåŒæ—¶ï¼Œå¤åˆç´¢å¼•ä¹Ÿå ç£ç›˜ç©ºé—´ã€‚?4ï¼Œå¯¹äºŽå°åž‹çš„è¡¨ï¼Œå»ºç«‹ç´¢å¼•å¯èƒ½ä¼šå½±å“æ€§èƒ½?5ï¼Œåº”è¯¥é¿å…å¯¹å…·æœ‰è¾ƒå°‘å€¼çš„å­—æ®µè¿›è¡Œç´¢å¼•ã€‚?6ï¼Œé¿å…é€‰æ‹©å¤§åž‹æ•°æ®ç±»åž‹çš„åˆ—ä½œä¸ºç´¢å¼•ã€‚?ç´¢å¼•å»ºç«‹çš„åŽŸåˆ™?ç´¢å¼•æŸ¥è¯¢æ˜¯æ•°æ®åº“ä¸­é‡è¦çš„è®°å½•æŸ¥è¯¢æ–¹æ³•ï¼Œè¦ä¸è¦è¿›å…¥ç´¢å¼•ä»¥åŠåœ¨é‚£äº›å­—æ®µä¸Šå»ºç«‹ç´¢å¼•éƒ½è¦å’Œå®žé™…æ•°æ®åº“ç³»ç»Ÿçš„æŸ¥è¯¢è¦æ±‚ç»“åˆæ¥è€ƒè™‘ï¼Œä¸‹é¢ç»™å‡ºå®žé™…ä¸­çš„ä¸€äº›é€šç”¨çš„åŽŸåˆ™ï¼š? åœ¨ç»å¸¸ç”¨ä½œè¿‡æ»¤å™¨çš„å­—æ®µä¸Šå»ºç«‹ç´¢å¼•ï¼›? åœ¨SQLè¯­å¥ä¸­ç»å¸¸è¿›è¡ŒGROUP BYã€ORDER BYçš„å­—æ®µä¸Šå»ºç«‹ç´¢å¼•ï¼›? åœ¨ä¸åŒå€¼è¾ƒå°‘çš„å­—æ®µä¸Šä¸å¿…è¦å»ºç«‹ç´¢å¼•ï¼Œå¦‚æ€§åˆ«å­—æ®µï¼›? å¯¹äºŽç»å¸¸å­˜å–çš„åˆ—é¿å…å»ºç«‹ç´¢å¼•ï¼›? ç”¨äºŽè”æŽ¥çš„åˆ—ï¼ˆä¸»å¥/å¤–å¥ï¼‰ä¸Šå»ºç«‹ç´¢å¼•ï¼›? åœ¨ç»å¸¸å­˜å–çš„å¤šä¸ªåˆ—ä¸Šå»ºç«‹å¤åˆç´¢å¼•ï¼Œä½†è¦æ³¨æ„å¤åˆç´¢å¼•çš„å»ºç«‹é¡ºåºè¦æŒ‰ç…§ä½¿ç”¨çš„é¢‘åº¦æ¥ç¡®å®šï¼›? ç¼ºçœæƒ…å†µä¸‹å»ºç«‹çš„æ˜¯éžç°‡é›†ç´¢å¼•ï¼Œä½†åœ¨ä»¥ä¸‹æƒ…å†µä¸‹æœ€å¥½è€ƒè™‘ç°‡é›†ç´¢å¼•ï¼Œå¦‚ï¼šå«æœ‰æœ‰é™æ•°ç›®ï¼ˆä¸æ˜¯å¾ˆå°‘ï¼‰å”¯ä¸€çš„åˆ—ï¼›è¿›è¡Œå¤§èŒƒå›´çš„æŸ¥è¯¢ï¼›å……åˆ†çš„åˆ©ç”¨ç´¢å¼•å¯ä»¥å‡å°‘è¡¨æ‰«æI/0çš„æ¬¡æ•°ï¼Œæœ‰æ•ˆçš„é¿å…å¯¹æ•´è¡¨çš„æœç´¢ã€‚å½“ç„¶åˆç†çš„ç´¢å¼•è¦å»ºç«‹åœ¨å¯¹å„ç§æŸ¥è¯¢çš„åˆ†æžå’Œé¢„æµ‹ä¸­ï¼Œä¹Ÿå–å†³äºŽDBAçš„æ‰€è®¾è®¡çš„æ•°æ®åº“ç»“æž„ã€‚ èŒƒå›´åˆ†åŒºï¼ˆè¶…å¥½ç”¨ï¼Œå°±æ˜¯éº»çƒ¦ï¼‰èŒƒå›´åˆ†åŒºï¼ˆæ•°å­—ç±»åž‹ï¼‰ create table graderecord ( sno varchar2(10), sname varchar2(20), dormitory varchar2(3), grade int ) partition by range(grade) ( partition bujige values less than(60), --ä¸åŠæ ¼ partition jige values less than(85), --åŠæ ¼ partition youxiu values less than(maxvalue) --ä¼˜ç§€ ) ? èŒƒå›´åˆ†åŒºï¼ˆæ—¥æœŸç±»åž‹ï¼‰ create table sales ( sales_id number, product_id varchar2(5), sales_date date not null, sales_cost number(10), areacode varchar2(10) ) partition by range(sales_date) ( partition p1 values less than(to_date('2013-04-1','yyyy-mm-dd')), partition p2 values less than(to_date('2013-07-1','yyyy-mm-dd')), partition p3 values less than(to_date('2013-10-1','yyyy-mm-dd')), partition p4 values less than(to_date('2014-01-1','yyyy-mm-dd')), partition p5 values less than(maxvalue) ); insert into sales values(1,'22',to_date('2013-04-1','yyyy-mm-dd'),92,'ç¾Žå›½'); insert into sales values(2,'22',to_date('2013-05-1','yyyy-mm-dd'),92,'éŸ©å›½'); insert into sales values(3,'23',to_date('2013-08-1','yyyy-mm-dd'),92,'ä¸­å›½'); insert into sales values(4,'24',to_date('2013-11-1','yyyy-mm-dd'),92,'æ—¥æœ¬'); insert into sales values(5,'25',to_date('2013-09-1','yyyy-mm-dd'),92,'ä¿„ç½—æ–¯'); æŸ¥è¯¢åˆ†åŒºæƒ…å†µæŸ¥è¯¢åˆ†åŒºæƒ…å†µ SELECT table_name,partition_name,tablespace_name FROM user_tab_partitions WHERE table_name=UPPER('sales_interval1'); é—´éš”åˆ†åŒºè¡¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºåˆ†åŒº=========================================================== | é—´éš”åˆ†åŒºè¡¨ ============================================================ */ CREATE TABLE sales_interval1 (sales_id NUMBER NOT NULL, product_id VARCHAR2(5), sales_date DATE, sales_cost NUMBER(10), areacode VARCHAR2(5) ) PARTITION BY RANGE(sales_date) INTERVAL(NUMTOYMINTERVAL(1,'YEAR')) (PARTITION part1 VALUES LESS THAN (to_date('2011/01/01','yyyy/mm/dd'))) ä½¿ç”¨åˆ†åŒºæŸ¥æ‰¾ä¿¡æ¯æŸ¥çœ‹åˆ†åŒºå¹¶æŸ¥è¯¢ä¿¡æ¯ SQL&gt; select table_name,partition_name from user_tab_partitions where table_name=upper('sales2'); ? TABLE_NAME ------------------------------------------------------------ PARTITION_NAME ------------------------------------------------------------ SALES2 P1 ? SALES2 SYS_P24 ? ? SQL&gt; select * from sales2 partition(sys_p24); ? SALES_ID PRODUCT_ID SALES_DATE SALES_COST AREACODE ---------- ---------- -------------- ---------- -------------------- 4 24 01-11æœˆ-13 92 æ—¥æœ¬ 5 25 01-9æœˆ -13 92 ä¿„ç½—æ–¯ ? SQL&gt; select * from sales2 partition(p1); ? SALES_ID PRODUCT_ID SALES_DATE SALES_COST AREACODE ---------- ---------- -------------- ---------- -------------------- 1 22 01-4æœˆ -13 92 ç¾Žå›½ 2 22 01-5æœˆ -13 92 éŸ©å›½ 3 23 01-8æœˆ -13 92 ä¸­å›½ ? SQL&gt; ? ä»Šå¤©æˆ‘æ˜¯å¬ç€Ragga Bomb -Skrillexå®Œæˆçš„]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ¼«æ¼«å½’å®¶è·¯]]></title>
    <url>%2F2018%2F11%2F01%2F2018-DJ-MAG%2F</url>
    <content type="text"><![CDATA[æ¼«æ¼«å½’å®¶è·¯å…¶å®žæˆ‘å–Šäº†ä¸€æ¬¡åˆä¸€æ¬¡ï¼Œæ¯ä¸€æ¬¡ï¼Œéƒ½æ¸…é†’çš„è®¤è¯†åˆ°æžœç„¶æ²¡æœ‰äººå›žåº”æˆ‘ï¼Œæ— è®ºæ€Žä¹ˆå‘¼å”¤ï¼Œæ€Žä¹ˆç¥ˆç¥·ï¼Œè¿˜æ˜¯æœ‰æ— æ³•å®žçŽ°çš„ä¸œè¥¿ã€‚ æœ€åŽè¿˜æ˜¯æ²¡èƒ½æ‰¾åˆ°å®¶ï¼Œè¿·è·¯äº†ï¼Œç´¯åˆ°äº†ï¼Œç„¶åŽï¼Œæˆ‘å†³å®šä¸åœ¨å‘¼å”¤æ— æ³•ç»™äºˆæˆ‘å›žåº”çš„ä¸œè¥¿ã€‚â€”â€”ã€Šå¤ç›®å‹äººå¸ã€‹æ¼«æ¼«å›žå®¶è·¯]]></content>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Oracleæ•°æ®åº“åŸºç¡€]]></title>
    <url>%2F2018%2F11%2F01%2FOracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[Oracleç®€ä»‹1$ ä¼—æ‰€å‘¨çŸ¥ï¼ŒOracleæ˜¯ä¸ªæ•°æ®åº“ï¼Œæ˜¯Oracleå…¬å¸çš„æ ¸å¿ƒäº§å“ï¼Œä¼˜è¶Šçš„æ•°æ®å®‰å…¨æ€§å’Œå®Œæ•´æ€§ï¼Œä»¥åŠè·¨æ“ä½œç³»ç»Ÿï¼Œè·¨ç¡¬ä»¶å¹³å°ï¼Œä¸»è¦ç‰¹ç‚¹ï¼šæ”¯æŒå¤šç”¨æˆ·ï¼Œå¤§äº‹åŠ¡çš„äº‹åŠ¡å¤„ç†ï¼Œåœ¨ä¿æŒæ•°æ®å®‰å…¨æ€§å’Œå®Œæ•´æ€§æ–¹é¢æ€§èƒ½ä¼˜è¶Šï¼Œæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ï¼Œå…·æœ‰å¯ç§»æ¤æ€§ OracleåŸºæœ¬æ¦‚å¿µ$ æ•°æ®åº“ï¼šè¿™ä¸æ˜¯æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„æ•°æ®åº“ï¼Œå®ƒæ˜¯ç£ç›˜ä¸Šå­˜å‚¨æ•°æ®çš„é›†åˆ $ å…¨å±€æ•°æ®åº“åï¼šç”¨äºŽåŒºåˆ†ä¸€ä¸ªæ•°æ®åº“çš„æ ‡è¯†ï¼Œè¦å”¯ä¸€ $ æ•°æ®åº“å®žä¾‹ï¼šæ¯ä¸ªå¯åŠ¨çš„æ•°æ®åº“éƒ½å¯¹åº”ä¸€ä¸ªæ•°æ®åº“å®žä¾‹ï¼Œæœ‰è¿™ä¸ªå®žä¾‹æ¥è®¿é—®æ•°æ®åº“ä¸­çš„æ•°æ® $ è¡¨ç©ºé—´ï¼šæ•°æ®åº“è‹¥å¹²ä¸ªè¡¨ç©ºé—´ç»„æˆï¼Œ... $ æ•°æ®æ–‡ä»¶ï¼šæ•°æ®æ–‡ä»¶æ‰©å±•å.dbf æ˜¯æ¥å­˜å‚¨æ•°æ®åº“æ•°æ®çš„æ–‡ä»¶ $ æŽ§åˆ¶æ–‡ä»¶ï¼šæŽ§åˆ¶æ–‡ä»¶æ‰©å±•å.ctl ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶,æ ¹æ®æŽ§åˆ¶æ–‡ä»¶æŸ¥æ‰¾æ•°æ®æ–‡ä»¶ $ æ—¥å¿—æ–‡ä»¶ï¼šæ—¥å¿—æ–‡ä»¶æ‰©å±•å.log,è®°å½•æ•°æ®æ›´æ”¹ä¿¡æ¯ Oracleé‡è¦çš„ä¸‰ä¸ªæœåŠ¡ï¼ˆå»ºè®®å…¨éƒ¨è®¾ä¸ºæ‰‹åŠ¨ï¼ŒçŽ©æ¸¸æˆçš„æ—¶å€™ä¼šå¡çš„ï¼‰$ OracleServiceSIDï¼šOracleæ•°æ®åº“æœåŠ¡ï¼Œå¯¹åº”åä¸ºSIDï¼ˆç³»ç»Ÿæ ‡è¯†ç¬¦ï¼‰æˆ‘çš„æ˜¯orcl $ OracleOraDb11g_home1TNSListenerï¼šç›‘å¬å™¨æœåŠ¡ï¼Œå¦‚æžœè¦è¿œç¨‹é“¾æŽ¥æ•°æ®åº“æœåŠ¡å™¨ï¼Œå°±å¿…é¡»å¯åŠ¨å®ƒ $ OracleDBConsoleSIDï¼šå—¯ï¼Œè¿™ä¸ªæ˜¯æŽ§åˆ¶å°æœåŠ¡ SIDï¼ˆç³»ç»Ÿæ ‡è¯†ç¬¦ï¼‰ è¿žæŽ¥Oracleæ•°æ®åº“$ SQL*PLUSï¼šsystem/orcl@orclDB //systemæ˜¯å½“å‰ç”¨æˆ·ï¼Œorclä¸ºå¯†ç ï¼ŒorclDBä¸ºä½¿ç”¨çš„ç½‘ç»œæœåŠ¡å $ PL/SQL Developerï¼šç›´æŽ¥è¾“å…¥ç™»å½•okäº† Oracleæ•°æ®ç±»åž‹ï¼ˆåˆ—ä¸¾å‡ ä¸ªæ¯”è¾ƒéš¾ç†è§£çš„ï¼‰$ NUMBER(P,S)ï¼špæ˜¯ç²¾åº¦ï¼Œæ ‡è¯†æ•°å­—çš„æœ‰æ•ˆä½æ•°ï¼Œä¸åŒ…æ‹¬å°æ•°ç‚¹åŽï¼Œsæ ‡è¯†å°æ•°ç‚¹å³è¾¹çš„ä½æ•°ï¼Œæ˜¯å››èˆäº”å…¥çš„å“¦ $ Dateï¼šSYSDATEæ ‡è¯†è¿”å›žå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ï¼ŒSYSTIMESTAMPè¿”å›žå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´å’Œæ—¶åŒºï¼ˆç²¾ç¡®åˆ°æ¯«ç§’ï¼‰å¯æ€• $ LOBæ•°æ®ç±»åž‹ï¼ˆå¤§å¯¹è±¡ï¼‰ï¼šCLOB(å­—ç¬¦clobï¼Œå­˜å‚¨å¤§é‡æ–‡å­—),BLOB(äºŒè¿›åˆ¶lobï¼Œå­˜å‚¨è§†é¢‘ï¼Œå›¾ç‰‡è¿™ç±»)ï¼ŒBFILE(äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶)ï¼ŒNCLOB(å­˜å‚¨å¤§çš„ncharæ•°æ®) Oracleä¸­çš„ä¼ªåˆ—å°±åƒæ˜¯ä¸€ä¸ªè¡¨åˆ—ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰å­˜å‚¨åˆ°è¡¨ä¸­ï¼Œå¯ä»¥æŸ¥è¯¢ä¼ªåˆ—ï¼Œä½†æ˜¯ä¸èƒ½å¢žåˆ æ”¹ $ ROWIDï¼šæ¯è¡Œéƒ½æœ‰ä¸€ä¸ªè¡Œåœ°å€ï¼ŒROWIDå°±æ˜¯è¿”å›žè¯¥è¡Œåœ°å€ $ ROWNUMï¼šè¿”å›žä¸€ä¸ªæ•°å€¼ä»£è¡¨è¡Œçš„æ¬¡åºï¼Œå¯ä»¥é™åˆ¶è¿”å›žçš„è¡Œæ•°ï¼ˆROWNUM=1å¯ä»¥æŸ¥åˆ°æ•°æ®ï¼ŒROWNUM=2å°±æŸ¥ä¸åˆ°ï¼ŒROWNUM&gt;Nä¹Ÿå·®ä¸åˆ°ï¼ŒROWNUM&lt;11æŸ¥è¯¢10æ¡è®°å½•ï¼‰ æŸ¥è¯¢æ•°æ®ä¸é‡å¤æ˜¾ç¤º(DISTINCT)SELECT DISTINCT stuNmae from student é›†åˆæ“ä½œç¬¦UNIONï¼šè¿”å›žè¿žä¸ªæŸ¥è¯¢é€‰å®šçš„æ‰€æœ‰ä¸é‡å¤è¡ŒUNION ALLï¼šç¬¦åˆä¸¤ä¸ªæŸ¥è¯¢é”å®šçš„æ‰€æœ‰è¡Œï¼ŒåŒ…æ‹¬é‡å¤çš„è¡ŒINTERSECTï¼šåªè¿”å›žä¸¤ä¸ªæŸ¥è¯¢éƒ½æœ‰çš„è¡ŒMINUSï¼šåªè¿”å›žç¬¬ä¸€ä¸ªé€‰å®šè€Œæœªè¢«ç¬¬äºŒä¸ªé€‰å®šçš„è¡Œ è¿žæŽ¥æ“ä½œç¬¦ï¼ˆ||ï¼‰å°†ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸² SQLå‡½æ•°å¸¸ç”¨çš„è½¬æ¢å‡½æ•° $ TO_CHAR è½¬å­—ç¬¦ä¸² ï¼ˆTO_CHAR(SYSDATEï¼Œâ€˜YYYY å¹´fmMMæœˆfmDDæ—¥ HH24:MI:SSâ€™)ï¼‰ $ TO_DATE è½¬æ—¥æœŸç±»åž‹ $ TO_NUMBER è½¬æ•°å€¼ç±»åž‹ å…¶ä»–å‡½æ•° $ NVL(EXP1,EXP2)ï¼šå¦‚æžœEXP1çš„å€¼ä¸ºnullï¼Œè¿”å›žEXP2,å¦åˆ™è¿”å›žEXP1 $ NVL2(EXP1,EXP2,EXP3)ï¼šå¦‚æžœEXP1ä¸ºnullï¼Œè¿”å›žEXP3,å¦åˆ™è¿”å›žEXP2 $ DECODE(VALUE,IF1,THEN1,IF2,THEN2,ELSE)ï¼šVALUEå€¼ä¸ºIF1,åˆ™è¿›å…¥THEN1.. åˆ†æžå‡½æ•°é©¬ä¸Š11ç‚¹äº†.. æˆ‘å…ˆèµ°äº†ï¼Œè‡ªè¡Œç™¾åº¦ ä»Šå¤©æˆ‘æ˜¯å¬ç€THE NIGHT â€“ Aviciiå®Œæˆçš„]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[è¯•é—®è€å¤©ï¼Œä¸æŠµæŠ—æ˜¯ç½ªå—ï¼Ÿ]]></title>
    <url>%2F2018%2F11%2F01%2F%E8%AF%95%E9%97%AE%E8%80%81%E5%A4%A9%EF%BC%8C%E4%B8%8D%E6%8A%B5%E6%8A%97%E6%98%AF%E7%BD%AA%E5%90%97%EF%BC%9F%2F</url>
    <content type="text"><![CDATA[OK Startä»»ç”±å…¶ä»–äººæ”€çˆ¬ä¸ä¹Ÿä¼šæ–­,é‚£ä¹ˆ â€œè¯•é—®è€å¤©,ä¸æŠµæŠ—æ˜¯ç½ªå—?â€å¤ªå®°æ²» ã€Šäººé—´å¤±æ ¼ã€‹1ã€Œé‡Šè¿¦ç‰Ÿå°¼çœ‹åˆ°åœ¨åœ°ç‹±æŒ£æ‰Žçš„å¤§ç›—ï¼Œä»–å¹²å°½äº†æ¶äº‹ï¼Œä½†ä»–å”¯ä¸€åšçš„å¥½äº‹å°±æ˜¯æ”¾è¿‡äº†ä¸€åªèœ˜è››ï¼Œä½›ç¥–è€ƒè™‘æ•‘ä»–ä¸€å‘½ï¼Œå°±å–ä¸‹ä¸€ç¼•è››ä¸æœç€åœ°ç‹±åž‚äº†ä¸‹åŽ»å¤§ç›—æ— æ„é—´çœ‹åˆ°äº†è¿™æ ¹èœ˜è››ä¸ï¼Œä»–é¡ºç€çˆ¬äº†ä¸ŠåŽ»ï¼Œå´å‘çŽ°åŽé¢ç½ªäººä»¬è·Ÿç€ä¸€èµ·ï¼Œè‡ªç§çš„å«ä»–ä»¬æ»šå¼€ï¼Œç»“æžœè››ä¸æ–­äº†ï¼Œä»–ä»¬åˆå›žåˆ°è¡€è‰²çš„åœ°ç‹±ã€]]></content>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çŽ°åœ¨æ˜¯æ˜ŸæœŸä¸‰22:10åˆ†]]></title>
    <url>%2F2018%2F10%2F31%2F%E7%8E%B0%E5%9C%A8%E6%98%AF%E6%98%9F%E6%9C%9F%E4%B8%8922-10%E5%88%86%2F</url>
    <content type="text"><![CDATA[OK Startä»Šå¤©ä¹Ÿæ˜¯å¹¸ç¦çš„ä¸€å¤©ï¼Œæ™šä¸Šåƒäº†ä¸¤ä¸ªçƒ¤é¦ï¼Œä¸€æ ¹çƒ¤é¢ç­‹ï¼Œä¸€æ ¹çƒ¤è‚ 1$ è¿˜æœ‰ä¸€ä»¶äº‹ï¼Œè¯„è®ºå‘é€é‚®ä»¶åŠŸèƒ½å¼€å¯]]></content>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ–°çš„ä¸€å¤©]]></title>
    <url>%2F2018%2F10%2F30%2F%E6%96%B0%E7%9A%84%E4%B8%80%E5%A4%A9%2F</url>
    <content type="text"></content>
      <tags>
        <tag>åˆ†äº«</tag>
        <tag>å¯¼èˆª</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2018%2F10%2F30%2Fhello-world%2F</url>
    <content type="text"><![CDATA[åœ¨ä¸€ä¸ªçªå¦‚å…¶æ¥çš„ä¸‹åˆï¼Œä¸€ä¸ªå¯æ€•çš„æƒ³æ³•åœ¨æˆ‘çš„è„‘ä¸­å‡ºçŽ° ###å®ƒè¯žç”Ÿäº†â€¦]]></content>
  </entry>
</search>
